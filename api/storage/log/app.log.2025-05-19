[2025-05-19 10:50:12,786.786] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-19 10:50:12,812.812] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-19 10:50:12,818.818] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 10:50:59,314.314] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 10:50:59,339.339] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 10:51:01,112.112] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 10:51:01,114.114] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 10:51:01,119.119] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 10:51:01,119.119] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 10:51:01,122.122] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 10:51:01,122.122] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 10:51:01,125.125] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:51:01,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 10:51:01,135.135] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00104s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 10:51:01,154.154] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: exceptions must derive from BaseException
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 140, in debug_chat
    raise validate_error_json(req.errors)
TypeError: exceptions must derive from BaseException
[2025-05-19 10:51:01,164.164] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 10:51:01,194.194] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 10:51:01] "[35m[1mPOST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1[0m" 500 -
[2025-05-19 10:51:08,279.279] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:51:08,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 10:51:08,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.145s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 10:51:08,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 10:51:08,285.285] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 10:51:08,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-19 10:51:08,292.292] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-19 10:51:08,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-05-19 10:51:08,301.301] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {}
[2025-05-19 10:51:08,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 10:51:08,305.305] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 10:51:08,312.312] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.invoke_from, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-19 10:51:08,312.312] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '‰Ω†Â•Ω', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 10:51:08,330.330] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:51:08,382.382] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:51:08,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:51:08,383.383] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:51:08,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status = %(status_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-19 10:51:08,386.386] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1': <MessageStatus.NORMAL: 'normal'>, 'param_1': 10}
[2025-05-19 10:51:08,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 10:51:08,866.866] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-19 10:51:13,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:51:13,146.146] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 10:51:13,147.147] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 10:51:13] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-19 10:51:13,158.158] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 10:51:13,197.197] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:51:13,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:51:13,198.198] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:51:13,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:51:13,201.201] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 10:51:13,206.206] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 10:51:13,208.208] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00154s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('e510d741-136c-47ed-9df6-195df6380966'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÊàëÂèØ‰ª•Â∏ÆÂä©‰Ω†ÁöÑÂêóÔºü', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (7504 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "31f3b893-453a-4cd5-a6c9-17cfdc5a50e4", "example": false}}]', 'answer': '‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÊàëÂèØ‰ª•Â∏ÆÂä©‰Ω†ÁöÑÂêóÔºü', 'latency': 3.7640379999999993}
[2025-05-19 10:51:13,220.220] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:51:13,222.222] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:51:13,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:51:13,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07752s ago] {'pk_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 10:51:13,224.224] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-19 10:51:13,224.224] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (7504 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "31f3b893-453a-4cd5-a6c9-17cfdc5a50e4", "example": false}}]', 'answer': '‰Ω†Â•ΩÔºÅÊúâ‰ªÄ‰πàÊàëÂèØ‰ª•Â∏ÆÂä©‰Ω†ÁöÑÂêóÔºü', 'latency': 3.7640379999999993, 'message_id': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 10:51:13,230.230] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:52:41,247.247] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:41,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 10:52:41,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 10:52:41,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 10:52:41,286.286] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 10:52:41,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-19 10:52:41,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-19 10:52:41,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-05-19 10:52:41,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93s ago] {}
[2025-05-19 10:52:41,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 10:52:41,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 10:52:41,311.311] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.invoke_from, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-19 10:52:41,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '‰ªäÂ§©Ê∑ÑÂçöÂ§©Ê∞îÊÄé‰πàÊ†∑?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 10:52:41,322.322] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:52:41,409.409] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:41,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:52:41,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.03s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:52:41,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status = %(status_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-19 10:52:41,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.03s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1': <MessageStatus.NORMAL: 'normal'>, 'param_1': 10}
[2025-05-19 10:52:41,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 10:52:41,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.57s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-19 10:52:44,240.240] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:52:44,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.1s ago] {'pk_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:44,242.242] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 10:52:44] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-19 10:52:49,112.112] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 10:52:49,112.112] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:49,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.91s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:52:49,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,115.115] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.91s ago] {'pk_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:49,116.116] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 10:52:49,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.91s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u6dc4\\u535a\\u5929\\u6c14"}, "id": "call_QaojnJUQEtGgTGmlF6iedfZR", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8113 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9fed4577-f8c5-4ba7-b894-38a990b1b098", "example": false}}]', 'answer': '', 'latency': 2.7413362000000063}
[2025-05-19 10:52:49,120.120] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:52:49,121.121] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:49,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.7s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:52:49,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.98s ago] {'pk_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:49,124.124] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 10:52:49,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.92s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"95\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a\\u5929\\u6c14"}', 'message': '{}', 'answer': '', 'latency': 1.070542099999983}
[2025-05-19 10:52:49,128.128] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:52:49,129.129] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:49,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,129.129] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.7s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 10:52:49,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.99s ago] {'pk_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:49,132.132] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 10:52:49,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.93s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ95¬∞FÔºàÁ∫¶35¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑÂ§©Ê∞î‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9089 characters truncated) ... ogle_serper", "id": "686f4526-10ed-45d1-925d-89a19159bb25", "tool_call_id": "call_QaojnJUQEtGgTGmlF6iedfZR", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ95¬∞FÔºàÁ∫¶35¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑÂ§©Ê∞î‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 3.7696744000000137}
[2025-05-19 10:52:49,136.136] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 10:52:49,138.138] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 10:52:49,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 10:52:49,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.99s ago] {'pk_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:49,140.140] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-19 10:52:49,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.92s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9089 characters truncated) ... ogle_serper", "id": "686f4526-10ed-45d1-925d-89a19159bb25", "tool_call_id": "call_QaojnJUQEtGgTGmlF6iedfZR", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ95¬∞FÔºàÁ∫¶35¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑÂ§©Ê∞î‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 7.581552700000003, 'message_id': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 10:52:49,142.142] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 11:35:09,819.819] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-05-19 11:35:11,876.876] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 15:43:22,964.964] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-19 15:43:22,966.966] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-19 15:43:22,972.972] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 15:44:12,204.204] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 15:44:12,221.221] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 15:46:17,095.095] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 15:46:17,096.096] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 15:46:17,101.101] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 15:46:17,102.102] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 15:46:17,103.103] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 15:46:17,103.103] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 15:46:17,104.104] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:17,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:46:17,112.112] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:46:17,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:46:17,142.142] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:46:17,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-19 15:46:17,149.149] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-19 15:46:17,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-05-19 15:46:17,160.160] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {}
[2025-05-19 15:46:17,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 15:46:17,165.165] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 15:46:17,172.172] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.invoke_from, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-19 15:46:17,173.173] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '‰ªäÂ§©Ê∑ÑÂçöÂ§©Ê∞îÊÄé‰πàÊ†∑?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 15:46:17,188.188] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:46:17,276.276] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:17,277.277] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:46:17,279.279] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:46:17,282.282] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status = %(status_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-19 15:46:17,282.282] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1': <MessageStatus.NORMAL: 'normal'>, 'param_1': 10}
[2025-05-19 15:46:18,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:46:18,276.276] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-19 15:46:21,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:46:21,940.940] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00168s] {'pk_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:21,941.941] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:46:21] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-19 15:46:27,232.232] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:46:27,276.276] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:27,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,277.277] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:46:27,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,280.280] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:27,283.283] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:46:27,283.283] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u6dc4\\u535a\\u5929\\u6c14"}, "id": "call_zH0NFncFmobBOsh9huCEwZTm", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8917 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "b13170fc-e8f2-4e99-bb6c-a72251aece3a", "example": false}}]', 'answer': '', 'latency': 3.566412999999983}
[2025-05-19 15:46:27,293.293] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:46:27,295.295] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:27,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,295.295] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.02s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:46:27,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.359s ago] {'pk_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:27,298.298] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:46:27,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01578s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"106\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a\\u5929\\u6c14"}', 'message': '{}', 'answer': '', 'latency': 3.2844111}
[2025-05-19 15:46:27,301.301] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:46:27,301.301] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:27,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.02s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:46:27,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.366s ago] {'pk_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:27,304.304] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:46:27,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02243s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9894 characters truncated) ... ogle_serper", "id": "e9b2c598-9551-4c71-aaae-629efbd33c65", "tool_call_id": "call_zH0NFncFmobBOsh9huCEwZTm", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 1.981726199999997}
[2025-05-19 15:46:27,316.316] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:46:27,317.317] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:46:27,317.317] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:46:27,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.38s ago] {'pk_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:27,319.319] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-19 15:46:27,319.319] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9894 characters truncated) ... ogle_serper", "id": "e9b2c598-9551-4c71-aaae-629efbd33c65", "tool_call_id": "call_zH0NFncFmobBOsh9huCEwZTm", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 8.83255029999998, 'message_id': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 15:46:27,324.324] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:46:29,514.514] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-19 15:46:29,532.532] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:46:29] "[35m[1mPOST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/tasks/d8502b49-1171-414d-a5eb-0d725f090289/stop HTTP/1.1[0m" 500 -
[2025-05-19 15:47:07,674.674] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-19 15:47:07,686.686] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:47:07] "[35m[1mPOST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/tasks/d8502b49-1171-414d-a5eb-0d725f090289/stop HTTP/1.1[0m" 500 -
[2025-05-19 15:47:55,194.194] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:47:55,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:47:55,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.08s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:47:55,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:47:55,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.06s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:47:55,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-19 15:47:55,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.05s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-19 15:47:55,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-05-19 15:47:55,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.04s ago] {}
[2025-05-19 15:47:55,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 15:47:55,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.04s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 15:47:55,206.206] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.invoke_from, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-19 15:47:55,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.03s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '‰ªäÂ§©Ê∑ÑÂçöÂ§©Ê∞îÊÄé‰πàÊ†∑?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 15:47:55,208.208] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:47:55,266.266] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:47:55,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:47:55,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.99s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:47:55,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status = %(status_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-19 15:47:55,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.99s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1': <MessageStatus.NORMAL: 'normal'>, 'param_1': 10}
[2025-05-19 15:47:55,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:47:55,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-19 15:48:00,315.315] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:00,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.38s ago] {'pk_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:00,318.318] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:48:00] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-19 15:48:04,496.496] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:48:04,496.496] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:04,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.22s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:04,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.22s ago] {'pk_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:04,501.501] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:04,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.22s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u6dc4\\u535a\\u5929\\u6c14"}, "id": "call_xlYEdGHnPrxtkaq1Wj3R9jC3", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9708 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "8830f96f-deb0-4287-b3a7-61ac49e7fe3e", "example": false}}]', 'answer': '', 'latency': 5.019506400000012}
[2025-05-19 15:48:04,509.509] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:04,511.511] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:04,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 107.2s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:04,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.6s ago] {'pk_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:04,514.514] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:04,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.23s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"106\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a\\u5929\\u6c14"}', 'message': '{}', 'answer': '', 'latency': 1.4865386000000171}
[2025-05-19 15:48:04,516.516] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:04,517.517] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:04,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 107.2s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:04,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.6s ago] {'pk_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:04,526.526] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:04,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.24s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10685 characters truncated) ... ogle_serper", "id": "8c746772-e03e-432a-b532-7a67b315358a", "tool_call_id": "call_xlYEdGHnPrxtkaq1Wj3R9jC3", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 2.6664167000000134}
[2025-05-19 15:48:04,530.530] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:04,542.542] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:04,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:04,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.6s ago] {'pk_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:04,543.543] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-19 15:48:04,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 97.22s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10685 characters truncated) ... ogle_serper", "id": "8c746772-e03e-432a-b532-7a67b315358a", "tool_call_id": "call_xlYEdGHnPrxtkaq1Wj3R9jC3", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ106¬∞FÔºàÁ∫¶41¬∞CÔºâ„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÊõ¥ËØ¶ÁªÜÁöÑ‰ø°ÊÅØÔºåÂ¶ÇÊπøÂ∫¶ÊàñÈôçÊ∞¥Ê¶ÇÁéáÔºåËØ∑ÂëäËØâÊàëÔºÅ', 'latency': 9.172461700000042, 'message_id': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 15:48:04,545.545] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:06,946.946] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:06,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:48:06,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:48:06,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:48:06,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.8s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:48:06,955.955] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:48:06,956.956] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:48:06] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/tasks/3d742719-fa69-4aed-b0e2-b78bed9f1a53/stop HTTP/1.1" 200 -
[2025-05-19 15:48:14,949.949] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:14,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:48:14,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:48:14,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:48:14,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.8s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:48:14,956.956] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:48:14,957.957] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:48:14] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/tasks/3d742719-fa69-4aed-b0e2-b78bed9f1a53/stop HTTP/1.1" 200 -
[2025-05-19 15:48:35,857.857] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:35,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:48:35,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:48:35,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:48:35,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:48:35,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-19 15:48:35,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-19 15:48:35,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-05-19 15:48:35,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {}
[2025-05-19 15:48:35,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 15:48:35,873.873] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 15:48:35,875.875] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.invoke_from, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-19 15:48:35,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '‰ªäÂ§©Ê∑ÑÂçöÂ§©Ê∞îÊÄé‰πàÊ†∑?Â∏ÆÊàëÁúãÁúãÊòéÂ§©Êúâ‰ªÄ‰πàÈ©¨ÊãâÊùæÊØîËµõ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 15:48:35,878.878] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:35,944.944] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:35,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:35,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:35,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status = %(status_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-19 15:48:35,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.7s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1': <MessageStatus.NORMAL: 'normal'>, 'param_1': 10}
[2025-05-19 15:48:35,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:48:35,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.7s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-19 15:48:39,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:39,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.3s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:39,230.230] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:48:39] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-19 15:48:45,267.267] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 15:48:45,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.1s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 15:48:45,276.276] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:48:45,277.277] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 15:48:45] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/tasks/21287da6-506f-478b-9e6e-2c3c9e89b137/stop HTTP/1.1" 200 -
[2025-05-19 15:48:45,553.553] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,553.553] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 15:48:45,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:45,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,559.559] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:45,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u6dc4\\u535a\\u5929\\u6c14\\u9884\\u62a5"}, "id": "call_9AYVeK6P5o9oX37FpLbWYVJR", "type": "tool_call ... (30 characters truncated) ... "args": {"query": "\\u6dc4\\u535a \\u660e\\u5929 \\u9a6c\\u62c9\\u677e \\u6bd4\\u8d5b"}, "id": "call_S7O9MOqAO3G1179g9kRKLjuS", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10597 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f6689928-f3fb-4f9e-9215-2044dc6c0733", "example": false}}]', 'answer': '', 'latency': 3.2319383000000244}
[2025-05-19 15:48:45,571.571] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:45,573.573] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.3s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:45,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.6s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,577.577] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:45,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"102\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a\\u5929\\u6c14\\u9884\\u62a5"}', 'message': '{}', 'answer': '', 'latency': 0.8155361000000312}
[2025-05-19 15:48:45,584.584] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:45,587.587] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.3s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:45,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.7s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,592.592] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:45,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u6765\\u4e86\\uff01\\u5c31\\u5728\\u660e\\u65e5\\uff0c2023\\u9996\\u5c4a\\u5c71\\u4e1c\\u6dc4\\u535a\\u9a6c\\u62c9\\u677e\\u5c06\\u53ec\\u5f00\\u5 ... (4159 characters truncated) ... 73a\\uff08\\u9a6c\\u62c9\\u677e\\u3001\\u534a\\u7a0b\\u9a6c\\u62c9\\u677e\\uff09\\uff1b. Missing: \\u660e\\u5929 | Show results with:\\u660e\\u5929."', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a \\u660e\\u5929 \\u9a6c\\u62c9\\u677e \\u6bd4\\u8d5b"}', 'message': '{}', 'answer': '', 'latency': 1.423909100000003}
[2025-05-19 15:48:45,600.600] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:45,602.602] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.3s ago] {'pk_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b')}
[2025-05-19 15:48:45,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.7s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,609.609] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-19 15:48:45,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'message_id': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ102¬∞FÔºàÁ∫¶39¬∞CÔºâ„ÄÇÂÖ≥‰∫éÊòéÂ§©ÁöÑÈ©¨ÊãâÊùæÊØîËµõÔºåÊòéÂ§©Ôºà9Êúà24Êó•ÔºâÂ∞ÜÂú®Ê∑ÑÂçöÂ∏Ç‰∏æË°å‚Äú2023È¶ñÂ±äÂ±±‰∏ú‰∏úÊπñÈ©¨ÊãâÊùæ‚ÄùÔºåÊØîËµõÂ∞Ü‰∫é‰∏äÂçà', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (17898 characters truncated) ... ogle_serper", "id": "b0a9f1d3-91cb-44b4-be1a-b1c5640fb1d4", "tool_call_id": "call_S7O9MOqAO3G1179g9kRKLjuS", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ102¬∞FÔºàÁ∫¶39¬∞CÔºâ„ÄÇÂÖ≥‰∫éÊòéÂ§©ÁöÑÈ©¨ÊãâÊùæÊØîËµõÔºåÊòéÂ§©Ôºà9Êúà24Êó•ÔºâÂ∞ÜÂú®Ê∑ÑÂçöÂ∏Ç‰∏æË°å‚Äú2023È¶ñÂ±äÂ±±‰∏ú‰∏úÊπñÈ©¨ÊãâÊùæ‚ÄùÔºåÊØîËµõÂ∞Ü‰∫é‰∏äÂçà', 'latency': 4.025413200000003}
[2025-05-19 15:48:45,620.620] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 15:48:45,622.622] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 15:48:45,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 15:48:45,624.624] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.7s ago] {'pk_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,626.626] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-19 15:48:45,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (17898 characters truncated) ... ogle_serper", "id": "b0a9f1d3-91cb-44b4-be1a-b1c5640fb1d4", "tool_call_id": "call_S7O9MOqAO3G1179g9kRKLjuS", "artifact": null, "status": "success"}}]', 'answer': '‰ªäÂ§©Ê∑ÑÂçöÁöÑÂ§©Ê∞îÊòØ102¬∞FÔºàÁ∫¶39¬∞CÔºâ„ÄÇÂÖ≥‰∫éÊòéÂ§©ÁöÑÈ©¨ÊãâÊùæÊØîËµõÔºåÊòéÂ§©Ôºà9Êúà24Êó•ÔºâÂ∞ÜÂú®Ê∑ÑÂçöÂ∏Ç‰∏æË°å‚Äú2023È¶ñÂ±äÂ±±‰∏ú‰∏úÊπñÈ©¨ÊãâÊùæ‚ÄùÔºåÊØîËµõÂ∞Ü‰∫é‰∏äÂçà', 'latency': 9.496796700000061, 'message_id': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 15:48:45,631.631] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-19 18:54:45,715.715] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-19 18:54:45,717.717] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-19 18:54:45,728.728] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 18:55:36,374.374] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 18:55:36,399.399] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 18:56:19,236.236] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 405 Method Not Allowed: The method is not allowed for the requested URL.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 624, in match
    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None
werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.
[2025-05-19 18:56:19,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 18:56:19] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages HTTP/1.1[0m" 500 -
[2025-05-19 18:57:00,822.822] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\router\\router.py', reloading
[2025-05-19 18:57:04,118.118] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 18:57:36,659.659] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 18:57:36,669.669] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 18:57:37,475.475] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 18:57:37,476.476] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 18:57:37,480.480] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 18:57:37,480.480] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 18:57:37,482.482] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 18:57:37,482.482] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 18:57:37,483.483] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 18:57:37,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 18:57:37,493.493] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00140s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 18:57:37,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 18:57:37,510.510] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 18:57:37,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 18:57:37,517.517] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00081s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 18:57:37,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 18:57:37,527.527] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 18:57:37,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 18:57:37,545.545] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 18:57:37,559.559] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type Message is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 169, in get_debug_conversation_messages_with_page
    return success_json(PageModel(list=messages, paginator=paginator))
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 31, in success_json
    return json(Response(code=HttpCode.SUCCESS, message="", data=data))
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 26, in json
    return jsonify(data), 200
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\__init__.py", line 170, in jsonify
    return current_app.json.response(*args, **kwargs)  # type: ignore[return-value]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 214, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=self.mimetype
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 234, in dumps
    return cls(
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 201, in encode
    chunks = list(chunks)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 439, in _iterencode
    yield from _iterencode(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 431, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 325, in _iterencode_list
    yield from chunks
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 438, in _iterencode
    o = _default(o)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type Message is not JSON serializable
[2025-05-19 18:57:37,725.725] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 18:57:37,750.750] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 18:57:37] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages HTTP/1.1[0m" 500 -
[2025-05-19 18:58:39,294.294] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\router\\router.py', reloading
[2025-05-19 18:58:41,648.648] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 18:59:17,055.055] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 18:59:17,067.067] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 19:01:36,906.906] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2025-05-19 19:01:40,406.406] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 19:02:19,226.226] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 19:02:19,237.237] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 19:02:20,133.133] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 19:02:20,135.135] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:02:20,140.140] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 19:02:20,140.140] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:02:20,143.143] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 19:02:20,143.143] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:02:20,144.144] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:02:20,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:02:20,158.158] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:02:20,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:02:20,175.175] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:02:20,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:02:20,181.181] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:02:20,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:02:20,192.192] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:02:20,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 19:02:20,213.213] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:02:20,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,221.221] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:02:20,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01324s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:02:20,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02784s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:02:20,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03134s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:02:20,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0442s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:02:20,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05977s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:02:20,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06283s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:02:20,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:02:20,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07623s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:02:20,302.302] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:02:20,302.302] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:02:20] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages HTTP/1.1" 200 -
[2025-05-19 19:03:20,549.549] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:03:20,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:03:20,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.39s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:03:20,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:03:20,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.38s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:03:20,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:03:20,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.37s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:03:20,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:03:20,556.556] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 46), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:20,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:03:20,567.567] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00450s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 46), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:20,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.35s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:03:20,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.36s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:03:20,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.38s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:03:20,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.38s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:03:20,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.39s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:03:20,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.41s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:03:20,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.41s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:03:20,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:20,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.42s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:03:20,648.648] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:03:20,649.649] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:03:20] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640926 HTTP/1.1" 200 -
[2025-05-19 19:03:27,108.108] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:03:27,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:03:27,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:03:27,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:03:27,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.94s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:03:27,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:03:27,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.93s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:03:27,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:03:27,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.561s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 45), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:27,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:03:27,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.558s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 45), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:27,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.9s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:03:27,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.91s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:03:27,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.93s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:03:27,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.93s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:03:27,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.94s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:03:27,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.96s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:03:27,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.96s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:03:27,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:27,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.98s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:03:27,202.202] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:03:27,202.202] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:03:27] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640925 HTTP/1.1" 200 -
[2025-05-19 19:03:35,480.480] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:03:35,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:03:35,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.32s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:03:35,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:03:35,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.31s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:03:35,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:03:35,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.3s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:03:35,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:03:35,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.93s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 44), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:35,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:03:35,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.93s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 44), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:03:35,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.28s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:03:35,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.29s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:03:35,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.29s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:03:35,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.31s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:03:35,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.32s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:03:35,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.32s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:03:35,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.34s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:03:35,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:03:35,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 75.35s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:03:35,581.581] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:03:35,582.582] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:03:35] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640924 HTTP/1.1" 200 -
[2025-05-19 19:07:08,051.051] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:07:08,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:07:08,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:07:08,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:07:08,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:07:08,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:07:08,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:07:08,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:07:08,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.5s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 44), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:07:08,063.063] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:07:08,063.063] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.5s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 44), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:07:08,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.8s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:07:08,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:07:08,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,091.091] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:07:08,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:07:08,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:07:08,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:07:08,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:07:08,126.126] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:08,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.9s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:07:08,142.142] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:07:08,142.142] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:07:08] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640924 HTTP/1.1" 200 -
[2025-05-19 19:07:12,601.601] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:07:12,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:07:12,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:07:12,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:07:12,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:07:12,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:07:12,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:07:12,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:07:12,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 232.1s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:07:12,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:07:12,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 232.1s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:07:12,622.622] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:07:12,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:07:12,637.637] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:07:12,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:07:12,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.4s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:07:12,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.5s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:07:12,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.5s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:07:12,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:07:12,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 292.5s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:07:12,700.700] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:07:12,700.700] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:07:12] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640923 HTTP/1.1" 200 -
[2025-05-19 19:07:30,457.457] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-19 19:07:33,111.111] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 19:08:16,188.188] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 19:08:16,200.200] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 19:08:18,223.223] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 19:08:18,224.224] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:08:18,231.231] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 19:08:18,232.232] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:08:18,234.234] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 19:08:18,235.235] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:08:18,237.237] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:08:18,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:08:18,248.248] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00094s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:08:18,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:08:18,271.271] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00072s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:08:18,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:08:18,279.279] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:08:18,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:08:19,110.110] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.81897s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:08:19,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:08:19,138.138] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00135s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:08:19,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,152.152] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:08:19,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01018s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:08:19,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02534s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:08:19,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02986s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:08:19,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04145s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:08:19,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05645s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:08:19,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05906s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:08:19,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:08:19,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07284s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:08:19,235.235] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:08:19,237.237] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:08:19] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640923 HTTP/1.1" 200 -
[2025-05-19 19:09:04,563.563] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-19 19:09:06,792.792] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 19:09:48,438.438] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 19:09:48,454.454] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 19:09:49,393.393] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 19:09:49,395.395] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:09:49,399.399] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 19:09:49,399.399] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:09:49,401.401] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 19:09:49,401.401] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:09:49,402.402] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:09:49,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:09:49,411.411] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00098s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:09:49,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:09:49,427.427] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:09:49,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:09:49,433.433] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:09:49,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at >= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:09:49,443.443] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00068s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:09:49,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at >= %(created_at_1)s) AS anon_1
[2025-05-19 19:09:49,453.453] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:09:49,461.461] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:09:49,462.462] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:09:49] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640923 HTTP/1.1" 200 -
[2025-05-19 19:09:59,235.235] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-19 19:10:01,696.696] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 19:10:46,402.402] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 19:10:46,414.414] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 19:10:47,631.631] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 19:10:47,632.632] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:10:47,637.637] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 19:10:47,637.637] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:10:47,639.639] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 19:10:47,639.639] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 19:10:47,640.640] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:10:47,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:10:47,650.650] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00096s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:10:47,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:10:47,664.664] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:10:47,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:10:47,670.670] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:10:47,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:10:47,682.682] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00078s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:10:47,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:10:47,701.701] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 43), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:10:47,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,711.711] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00234s] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:10:47,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01525s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:10:47,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0305s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:10:47,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03295s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:10:47,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04632s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:10:47,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06146s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:10:47,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06366s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:10:47,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:47,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07771s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:10:47,793.793] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:10:47,794.794] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:10:47] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640923 HTTP/1.1" 200 -
[2025-05-19 19:10:58,449.449] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:10:58,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:10:58,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:10:58,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:10:58,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.79s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:10:58,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:10:58,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.78s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:10:58,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:10:58,458.458] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00397s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:10:58,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 19:10:58,464.464] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:10:58,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.76s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:10:58,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.77s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:10:58,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.78s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:10:58,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.79s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:10:58,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.8s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:10:58,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.81s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:10:58,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.81s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:10:58,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:10:58,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.83s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:10:58,539.539] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:10:58,539.539] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:10:58] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at= HTTP/1.1" 200 -
[2025-05-19 19:11:05,246.246] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:11:05,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:11:05,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:11:05,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:11:05,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.59s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:11:05,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:11:05,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.58s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:11:05,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:11:05,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.58s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(1970, 1, 1, 8, 1, 40), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:05,260.260] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:11:05,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.57s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(1970, 1, 1, 8, 1, 40), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:05,269.269] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:11:05,271.271] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:11:05] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=100 HTTP/1.1" 200 -
[2025-05-19 19:11:10,703.703] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:11:10,704.704] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:11:10,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.06s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:11:10,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:11:10,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.04s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:11:10,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:11:10,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.04s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:11:10,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:11:10,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.26s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:10,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 19:11:10,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.26s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:10,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.02s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:11:10,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.03s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:11:10,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.04s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:11:10,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.04s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:11:10,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.06s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:11:10,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.07s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:11:10,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.08s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:11:10,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:10,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.09s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:11:10,803.803] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:11:10,804.804] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:11:10] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at= HTTP/1.1" 200 -
[2025-05-19 19:11:19,265.265] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:11:19,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:11:19,266.266] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.62s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:11:19,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:11:19,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.61s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:11:19,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:11:19,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.6s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:11:19,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:11:19,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.59s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 46, 27), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:19,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:11:19,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.58s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 46, 27), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:19,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.58s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:11:19,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.59s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:11:19,304.304] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.61s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:11:19,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,319.319] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.61s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:11:19,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.62s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:11:19,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:19,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.64s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:11:19,350.350] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:11:19,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:11:19] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640787 HTTP/1.1" 200 -
[2025-05-19 19:11:41,794.794] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:11:41,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:11:41,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.15s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:11:41,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:11:41,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.13s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:11:41,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:11:41,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.13s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:11:41,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:11:41,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.35s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:41,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 19:11:41,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.35s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:11:41,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.1s ago] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 19:11:41,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.12s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:11:41,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.13s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:11:41,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.14s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:11:41,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.15s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:11:41,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,873.873] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.16s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:11:41,875.875] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.17s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:11:41,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:11:41,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.18s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:11:41,892.892] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:11:41,892.892] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:11:41] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at= HTTP/1.1" 200 -
[2025-05-19 19:12:20,854.854] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:12:20,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:12:20,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.21s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:12:20,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:12:20,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.19s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:12:20,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:12:20,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.19s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:12:20,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:12:20,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.18s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 5), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:20,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:12:20,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.16s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 5), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:20,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.16s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:12:20,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.17s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:12:20,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.18s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:12:20,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.19s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:12:20,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.2s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:12:20,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.22s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:12:20,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:20,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.22s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:12:20,929.929] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:12:20,930.930] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:12:20] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640885 HTTP/1.1" 200 -
[2025-05-19 19:12:33,538.538] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:12:33,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:12:33,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:12:33,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:12:33,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:12:33,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:12:33,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:12:33,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:12:33,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 3), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:33,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:12:33,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48, 3), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:33,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.8s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:12:33,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,567.567] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:12:33,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:12:33,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:12:33,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:12:33,600.600] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:12:33,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:33,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:12:33,618.618] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:12:33,619.619] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:12:33] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640883 HTTP/1.1" 200 -
[2025-05-19 19:12:39,225.225] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:12:39,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:12:39,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:12:39,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:12:39,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:12:39,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:12:39,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:12:39,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:12:39,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.5s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:39,234.234] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:12:39,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.5s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 48), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:39,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.5s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 19:12:39,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,261.261] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:12:39,263.263] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,263.263] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:12:39,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:12:39,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:12:39,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:12:39,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:39,309.309] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:12:39,311.311] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:12:39,311.311] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:12:39] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640880 HTTP/1.1" 200 -
[2025-05-19 19:12:44,952.952] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 19:12:44,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 19:12:44,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 19:12:44,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 19:12:44,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 19:12:44,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 19:12:44,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 19:12:44,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 19:12:44,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 47), 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:44,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s AND message.created_at <= %(created_at_1)s) AS anon_1
[2025-05-19 19:12:44,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'created_at_1': datetime.datetime(2025, 5, 19, 15, 47), 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 19:12:44,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:44,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 19:12:44,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:44,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 19:12:44,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:44,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 19:12:44,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:44,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 19:12:44,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:45,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 19:12:45,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 19:12:45,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 19:12:45,021.021] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 19:12:45,022.022] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 19:12:45] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at=1747640820 HTTP/1.1" 200 -
[2025-05-19 22:25:21,466.466] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-19 22:25:21,466.466] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-19 22:25:21,477.477] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 22:26:02,272.272] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 22:26:02,320.320] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 22:29:50,239.239] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 22:29:50,239.239] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:29:50,241.241] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 22:29:50,242.242] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:29:50,242.242] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 22:29:50,243.243] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:29:50,243.243] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:29:50,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:29:50,247.247] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:29:53,317.317] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:29:53] "POST /ai/optimize-prompt HTTP/1.1" 200 -
[2025-05-19 22:29:56,414.414] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:32:06,335.335] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:32:06,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:32:06,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:32:06,339.339] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:32:06,340.340] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': '105376b5-16cf-432c-b47a-9ddc3913c380'}
[2025-05-19 22:32:06,343.343] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user.id)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 28, in generate_suggested_questions_from_message_id
    raise ForbiddenException("ËØ•Êù°Ê∂àÊÅØ‰∏çÂ≠òÂú®ÊàñËÄÖÊó†ÊùÉÈôê")
internal.exception.exception.ForbiddenException
[2025-05-19 22:32:06,348.348] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:32:06,348.348] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:32:06] "POST /ai/suggested_questions HTTP/1.1" 200 -
[2025-05-19 22:32:22,375.375] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:32:22,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:32:22,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:32:22,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-19 22:32:22,389.389] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-19 22:32:22,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-19 22:32:22,395.395] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-19 22:32:22,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-19 22:32:22,401.401] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'param_1': 20, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 22:32:22,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-19 22:32:22,411.411] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('8be0e800-6015-4cab-88bc-6281c1d2540b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-19 22:32:22,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,417.417] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'message_id_1': UUID('011e4eae-454b-4236-9af2-f0b6e0869f8d')}
[2025-05-19 22:32:22,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004973s ago] {'message_id_1': UUID('afe9f1f0-605d-4ee6-9fcd-45b8e4c16855')}
[2025-05-19 22:32:22,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0196s ago] {'message_id_1': UUID('7b0ed896-58bc-40ce-8afb-4b7156b5df97')}
[2025-05-19 22:32:22,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03435s ago] {'message_id_1': UUID('5dd15be3-d456-4daa-b4f9-73567d6662c6')}
[2025-05-19 22:32:22,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03706s ago] {'message_id_1': UUID('e510d741-136c-47ed-9df6-195df6380966')}
[2025-05-19 22:32:22,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05058s ago] {'message_id_1': UUID('2d424184-df82-4f94-a7be-7d20fd15d93d')}
[2025-05-19 22:32:22,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0663s ago] {'message_id_1': UUID('9ceceadc-4c47-4170-b5d0-21bdd4554a8b')}
[2025-05-19 22:32:22,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-19 22:32:22,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06889s ago] {'message_id_1': UUID('cfbd7f27-5258-42a9-843a-3aa55992bebe')}
[2025-05-19 22:32:22,487.487] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:32:22,487.487] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:32:22] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?created_at= HTTP/1.1" 200 -
[2025-05-19 22:32:36,422.422] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:32:36,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:32:36,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:32:36,424.424] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:32:36,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.08s ago] {'pk_1': '452ca611-2dec-4e39-98e1-e7ed94c2f7f7'}
[2025-05-19 22:32:36,426.426] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user.id)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 28, in generate_suggested_questions_from_message_id
    raise ForbiddenException("ËØ•Êù°Ê∂àÊÅØ‰∏çÂ≠òÂú®ÊàñËÄÖÊó†ÊùÉÈôê")
internal.exception.exception.ForbiddenException
[2025-05-19 22:32:36,426.426] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:32:36,427.427] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:32:36] "POST /ai/suggested_questions HTTP/1.1" 200 -
[2025-05-19 22:33:19,285.285] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\router\\router.py', reloading
[2025-05-19 22:33:20,812.812] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 22:34:09,475.475] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 22:34:09,491.491] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 22:35:10,853.853] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 22:35:10,853.853] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:35:10,856.856] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 22:35:10,856.856] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:35:10,857.857] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 22:35:10,857.857] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:35:10,858.858] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:35:10,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:35:10,863.863] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:35:10,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:35:10,869.869] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': '452ca611-2dec-4e39-98e1-e7ed94c2f7f7'}
[2025-05-19 22:35:10,871.871] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user.id)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 28, in generate_suggested_questions_from_message_id
    raise ForbiddenException("ËØ•Êù°Ê∂àÊÅØ‰∏çÂ≠òÂú®ÊàñËÄÖÊó†ÊùÉÈôê")
internal.exception.exception.ForbiddenException
[2025-05-19 22:35:10,876.876] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:35:10,877.877] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:35:10] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-19 22:35:31,303.303] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:35:31,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:35:31,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.44s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:35:31,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:35:31,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.44s ago] {'pk_1': '0224fdf6-505e-49de-be82-4c1c1fd9b0d1'}
[2025-05-19 22:35:31,307.307] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user.id)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 28, in generate_suggested_questions_from_message_id
    raise ForbiddenException("ËØ•Êù°Ê∂àÊÅØ‰∏çÂ≠òÂú®ÊàñËÄÖÊó†ÊùÉÈôê")
internal.exception.exception.ForbiddenException
[2025-05-19 22:35:31,308.308] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:35:31,308.308] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:35:31] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-19 22:36:05,064.064] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:36:05,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:36:05,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:36:05,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:36:05,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.2s ago] {'pk_1': '011e4eae-454b-4236-9af2-f0b6e0869f8d'}
[2025-05-19 22:36:05,068.068] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 'UUID' object has no attribute 'id'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user.id)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 27, in generate_suggested_questions_from_message_id
    if not message or message.created_by != account.id:
AttributeError: 'UUID' object has no attribute 'id'
[2025-05-19 22:36:05,069.069] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:36:05,080.080] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:36:05] "[35m[1mPOST /ai/suggested-questions HTTP/1.1[0m" 500 -
[2025-05-19 22:37:11,305.305] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\handler\\ai_handler.py', reloading
[2025-05-19 22:37:13,183.183] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-19 22:37:57,134.134] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-19 22:37:57,155.155] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-19 22:38:32,539.539] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-19 22:38:32,539.539] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:38:32,544.544] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-19 22:38:32,544.544] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:38:32,546.546] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-19 22:38:32,546.546] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-19 22:38:32,547.547] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:38:32,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:38:32,552.552] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:38:32,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:38:32,563.563] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': '0224fdf6-505e-49de-be82-4c1c1fd9b0d1'}
[2025-05-19 22:38:32,565.565] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\ai_handler.py", line 39, in generate_suggested_questions
    suggested_questions = self.ai_service.generate_suggested_questions_from_message_id(req.message_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\ai_service.py", line 28, in generate_suggested_questions_from_message_id
    raise ForbiddenException("ËØ•Êù°Ê∂àÊÅØ‰∏çÂ≠òÂú®ÊàñËÄÖÊó†ÊùÉÈôê")
internal.exception.exception.ForbiddenException
[2025-05-19 22:38:32,573.573] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:38:32,574.574] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:38:32] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-19 22:38:39,366.366] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:38:39,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:38:39,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.816s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:38:39,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:38:39,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.807s ago] {'pk_1': '011e4eae-454b-4236-9af2-f0b6e0869f8d'}
[2025-05-19 22:38:44,209.209] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:38:44,210.210] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:38:44] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-19 22:41:35,240.240] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-19 22:41:35,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-19 22:41:35,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-19 22:41:35,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-19 22:41:35,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182.7s ago] {'pk_1': 'afe9f1f0-605d-4ee6-9fcd-45b8e4c16855'}
[2025-05-19 22:41:38,099.099] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-19 22:41:38,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [19/May/2025 22:41:38] "POST /ai/suggested-questions HTTP/1.1" 200 -
