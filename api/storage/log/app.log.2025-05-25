[2025-05-25 10:18:35,609.609] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 10:18:35,611.611] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 10:18:35,615.615] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 10:19:00,720.720] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 10:19:00,734.734] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 10:21:29,695.695] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 10:21:29,696.696] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:21:29,701.701] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 10:21:29,703.703] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:21:29,705.705] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 10:21:29,705.705] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:21:29,707.707] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:21:29,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 10:21:29,711.711] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 10:21:29,725.725] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO api_key (account_id, api_key, is_active, remark) VALUES (%(account_id)s::UUID, %(api_key)s, %(is_active)s, %(remark)s) RETURNING api_key.id, api_key.updated_at, api_key.created_at
[2025-05-25 10:21:29,725.725] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'api_key': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw', 'is_active': True, 'remark': '密钥信息'}
[2025-05-25 10:21:29,737.737] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 10:21:29,739.739] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:21:29] "POST /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 10:21:33,793.793] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:21:33,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 10:21:33,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.085s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 10:21:33,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 10:21:33,801.801] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 10:21:33,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 10:21:33,807.807] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 10:21:33,815.815] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 10:21:33,815.815] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:21:33] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 10:23:06,018.018] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:23:06,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 10:23:06,019.019] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 10:23:06,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 10:23:06,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.32s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 10:23:06,030.030] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 10:23:06,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:23:06] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 10:24:18,050.050] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\middleware\\middleware.py', reloading
[2025-05-25 10:24:19,754.754] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 10:24:44,181.181] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 10:24:44,192.192] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 10:29:26,673.673] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 10:29:26,674.674] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:29:26,679.679] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 10:29:26,679.679] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:29:26,680.680] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 10:29:26,680.680] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 10:29:26,681.681] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:29:26,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 10:29:26,686.686] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00074s] {'api_key_1': 'llmops-v2/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 10:29:26,689.689] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 284, in decorated_view
    elif not current_user.is_authenticated:
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 526, in _get_current_object
    return get_name(local())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 25, in <lambda>
    current_user = LocalProxy(lambda: _get_user())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 370, in _get_user
    current_app.login_manager._load_user()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 378, in _load_user
    user = self._load_user_from_request(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 441, in _load_user_from_request
    user = self._request_callback(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\middleware\middleware.py", line 37, in request_loader
    raise UnauthorizedException("该密钥不存在或未激活")
internal.exception.exception.UnauthorizedException
[2025-05-25 10:29:26,697.697] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 10:29:26,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:29:26] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 10:29:31,028.028] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:29:31,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 10:29:31,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.345s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 10:29:31,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 10:29:31,035.035] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 10:29:31,038.038] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 10:29:31,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:29:31] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 10:32:25,012.012] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 10:32:25,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 10:32:25,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 178.3s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 10:32:25,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 10:32:25,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 10:32:25,015.015] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 10:32:25,016.016] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 10:32:25] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 11:45:37,768.768] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 11:45:37,769.769] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 11:45:37,779.779] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 11:46:09,647.647] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 11:46:09,666.666] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 11:46:11,161.161] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 11:46:11,161.161] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:46:11,165.165] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 11:46:11,166.166] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:46:11,167.167] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 11:46:11,168.168] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:46:11,169.169] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 11:46:11,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 11:46:11,176.176] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00113s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 11:46:11,275.275] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 1 validation error for FunctionCallAgent
name
  Field required [type=missing, input_value={'llm': ChatOpenAI(client...g': {'enable': False}})}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 181, in ping
    agent = FunctionCallAgent(
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\base_agent.py", line 35, in __init__
    super().__init__(*args, llm=llm, agent_config=agent_config, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for FunctionCallAgent
name
  Field required [type=missing, input_value={'llm': ChatOpenAI(client...g': {'enable': False}})}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
[2025-05-25 11:46:11,294.294] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 11:46:11,322.322] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 11:46:11] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2025-05-25 11:46:35,541.541] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 11:46:35,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 11:46:35,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.37s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 11:46:35,588.588] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 1 validation error for FunctionCallAgent
name
  Field required [type=missing, input_value={'llm': ChatOpenAI(client...g': {'enable': False}})}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 181, in ping
    agent = FunctionCallAgent(
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\base_agent.py", line 35, in __init__
    super().__init__(*args, llm=llm, agent_config=agent_config, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\load\serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for FunctionCallAgent
name
  Field required [type=missing, input_value={'llm': ChatOpenAI(client...g': {'enable': False}})}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
[2025-05-25 11:46:35,589.589] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 11:46:35,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 11:46:35] "[35m[1mGET /ping HTTP/1.1[0m" 500 -
[2025-05-25 11:50:05,064.064] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\base_agent.py', reloading
[2025-05-25 11:50:07,258.258] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 11:50:49,013.013] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 11:50:49,028.028] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 11:50:50,876.876] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 11:50:50,878.878] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:50:50,883.883] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 11:50:50,883.883] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:50:50,886.886] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 11:50:50,887.887] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 11:50:50,889.889] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 11:50:50,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 11:50:50,908.908] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00145s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 11:51:01,574.574] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 11:51:01,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 11:51:01] "GET /ping HTTP/1.1" 200 -
[2025-05-25 16:37:05,618.618] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 16:37:05,618.618] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 16:37:05,626.626] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 16:37:54,955.955] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 16:37:54,971.971] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 16:37:56,640.640] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:56] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 16:37:57,103.103] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 16:37:57,103.103] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:37:57,107.107] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 16:37:57,107.107] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:37:57,108.108] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 16:37:57,109.109] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:37:57,109.109] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:37:57,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:37:57,115.115] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00083s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:37:57,124.124] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:37:57,125.125] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:57] "GET /account HTTP/1.1" 200 -
[2025-05-25 16:37:59,611.611] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:37:59,612.612] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:37:59,613.613] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:37:59,614.614] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:37:59,615.615] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-25 16:37:59,617.617] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:37:59] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:37:59,923.923] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:37:59,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.81s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:37:59,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:37:59,937.937] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 16:37:59,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 16:37:59,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:37:59,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,952.952] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:37:59,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,959.959] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:37:59,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,963.963] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:37:59,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01438s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:37:59,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008506s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:37:59,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004923s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:37:59,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01701s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:37:59,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01099s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:37:59,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007293s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:37:59,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01928s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:37:59,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0132s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:37:59,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009478s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:37:59,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02197s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:37:59,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0161s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:37:59,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,975.975] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:37:59,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01282s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:37:59,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.869s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:37:59,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,984.984] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:37:59,984.984] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:37:59,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03289s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:37:59,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.871s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:37:59,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.877s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:37:59,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03301s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:37:59,992.992] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00098s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:37:59,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:37:59,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:37:59,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03102s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:37:59,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:37:59,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007629s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:37:59,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007828s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:37:59,999.999] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00221s] {'id_1': UUID('66a5ac38-aa1e-469e-b80b-2494d64bb2df'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:38:00,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:00,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04882s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:38:00,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:38:00,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:38:00,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:00,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:38:00,008.008] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00452s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:38:00,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01171s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:38:00,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05604s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:38:00,015.015] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00778s] {'conversation_id_1': UUID('66a5ac38-aa1e-469e-b80b-2494d64bb2df'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:38:01,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.14s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:38:01,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.153s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:38:01,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.147s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:38:01,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.144s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:38:01,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,108.108] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:38:01,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:38:01,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-25 16:38:01,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.16s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:38:01,112.112] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00325s] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:38:01,112.112] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-25 16:38:01,112.112] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00125s] {'conversation_id_1': UUID('66a5ac38-aa1e-469e-b80b-2494d64bb2df'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:38:01,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,116.116] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:38:01,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.157s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:38:01,119.119] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:38:01,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-05-25 16:38:01,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,123.123] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00492s] {'message_id_1': UUID('735f6a9d-43ce-4d50-84d6-2731508b6548')}
[2025-05-25 16:38:01,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.161s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:38:01,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.174s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:38:01,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.169s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:38:01,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.166s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:38:01,131.131] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:38:01,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.18s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:38:01,132.132] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:38:01,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.181s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:38:01,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.179s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:38:01,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.192s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:38:01,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.186s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:38:01,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.184s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:38:01,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.196s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:38:01,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.19s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:38:01,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.187s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:38:01,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.199s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:38:01,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.194s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:38:01,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.191s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:38:01,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.203s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:38:01,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.198s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:38:01,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.195s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:38:01,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.207s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:38:01,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.201s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:38:01,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.198s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:38:01,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.21s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:38:01,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.205s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:38:01,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.202s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:38:01,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.215s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:38:01,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.213s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:38:01,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.211s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:38:01,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.223s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:38:01,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.219s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:38:01,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.217s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:38:01,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.23s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:38:01,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.224s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:38:01,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:38:01,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.222s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:38:01,186.186] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:38:01,187.187] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:38:01,712.712] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-05-25 16:38:01,712.712] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:38:01] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-05-25 16:42:16,143.143] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:16] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-05-25 16:42:16,455.455] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:16,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:42:16,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 259.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:42:16,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:42:16,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 256.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:42:16,459.459] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-25 16:42:16,460.460] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'debug_conversation_id': None, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:42:16,464.464] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:42:16,466.466] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:16] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-05-25 16:42:16,474.474] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:16] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:42:16,721.721] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:16,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:42:16,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 259.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:42:16,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:42:16,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 256.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:42:16,725.725] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-25 16:42:16,725.725] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:42:16,737.737] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-25 16:42:16,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2781s ago] {'debug_conversation_id': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:42:16,738.738] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:42:16,739.739] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:16,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:42:16,740.740] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e')}
[2025-05-25 16:42:16,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:42:16,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 256.7s ago] {'conversation_id_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:42:16,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-25 16:42:16,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 255.6s ago] {'conversation_id_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:42:16,752.752] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:42:16,752.752] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:16] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:42:30,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:30] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:42:30,064.064] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:30,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:42:30,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 273s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:42:30,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:42:30,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.1s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:42:30,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:42:30,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.1s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:42:30,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:42:30,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 269s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:42:30,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:42:30,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.1s ago] {'id_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:42:30,078.078] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 16:42:30,078.078] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '今天淄博天气如何?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:42:30,085.085] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:42:30,131.131] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:30,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:42:30,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.39s ago] {'pk_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e')}
[2025-05-25 16:42:30,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 16:42:30,134.134] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('f40b8680-739b-4e71-bb52-9bcc6c38a99e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 16:42:30,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:42:30,138.138] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:42:30,138.138] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:42:30,145.145] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:30] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:42:30,325.325] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:30] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:42:30,640.640] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:42:30,640.640] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:42:30,641.641] base.py -> _exec_single_context line:1901 [INFO]: [cached since 273.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:42:30,642.642] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:42:30,643.643] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:42:30] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:43:29,296.296] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:43:29] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-05-25 16:43:29,300.300] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:43:29,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:43:29,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 332.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:43:29,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:43:29,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:43:29,304.304] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-25 16:43:29,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.85s ago] {'debug_conversation_id': None, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:43:29,305.305] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:43:29,306.306] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:43:29] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-05-25 16:43:29,618.618] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:43:29] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:43:29,937.937] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:43:29,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:43:29,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 332.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:43:29,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:43:29,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:43:29,941.941] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-25 16:43:29,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.22s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:43:29,943.943] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-25 16:43:29,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.48s ago] {'debug_conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:43:29,944.944] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:43:29,945.945] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:43:29,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:43:29,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.21s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:43:29,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:43:29,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.9s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:43:29,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-25 16:43:29,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.8s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:43:29,949.949] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:43:29,949.949] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:43:29] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:45:00,508.508] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-25 16:45:02,282.282] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 16:45:58,318.318] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 16:45:58,328.328] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 16:46:13,357.357] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-25 16:46:15,594.594] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 16:46:34,991.991] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 16:46:35,001.001] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 16:46:47,888.888] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-25 16:46:49,751.751] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 16:47:27,147.147] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 16:47:27,159.159] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 16:47:52,380.380] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:47:52] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:47:52,809.809] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 16:47:52,810.810] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:47:52,815.815] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 16:47:52,815.815] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:47:52,818.818] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 16:47:52,818.818] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:47:52,819.819] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:47:52,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:47:52,828.828] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:47:52,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:47:52,846.846] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00110s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:47:52,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:47:52,854.854] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:47:52,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:47:52,862.862] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:47:52,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:47:52,866.866] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:47:52,873.873] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 16:47:52,874.874] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00108s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '今天淄博天气怎么样?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:47:52,894.894] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:47:52,971.971] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:47:52,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:47:52,972.972] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:47:52,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 16:47:52,978.978] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 16:47:52,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:47:52,986.986] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:47:52,988.988] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:47:53,001.001] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:47:53] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:47:53,013.013] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:47:53] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:47:53,017.017] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:47:53,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:47:53,017.017] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1901s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:47:53,020.020] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:47:53,020.020] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:47:53] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:49:44,837.837] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-25 16:49:47,168.168] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 16:50:39,989.989] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 16:50:40,006.006] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 16:50:41,258.258] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:50:41,260.260] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:50:41,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:50:41,268.268] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:50:41,270.270] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-25 16:50:41,272.272] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:50:41,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:50:41,587.587] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:50:41,591.591] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:50:41,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:50:41,755.755] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 16:50:41,756.756] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:50:41,760.760] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 16:50:41,760.760] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:50:41,762.762] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 16:50:41,762.762] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 16:50:41,763.763] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:41,764.764] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:41,764.764] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:41,764.764] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:41,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003121s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:41,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00255s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:41,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00285s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:41,775.775] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00206s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:41,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:50:41,793.793] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00707s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:50:41,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:50:41,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01032s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:50:41,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0105s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:50:41,796.796] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00095s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 16:50:41,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:50:41,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:50:41,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:50:41,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 16:50:41,812.812] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.01155s] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:50:41,812.812] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00882s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:50:41,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009021s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:50:41,819.819] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00794s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:50:41,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:50:41,826.826] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:41,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:50:41,829.829] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00609s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:41,829.829] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00417s] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:50:41,830.830] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-25 16:50:41,830.830] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00171s] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:50:41,835.835] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:41,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-25 16:50:41,840.840] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:50:41,840.840] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00306s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:41,840.840] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00149s] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:50:41,843.843] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:41,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,845.845] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:50:41,845.845] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00080s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:41,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02383s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:41,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.012s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:41,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,850.850] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006034s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:41,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03059s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:41,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01854s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:41,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01311s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:41,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03573s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:41,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02295s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:41,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:41,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03922s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:41,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02622s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:41,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01997s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:41,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04284s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:41,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03032s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:41,868.868] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 16:50:41,869.869] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02509s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:41,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,871.871] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04784s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:41,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03496s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:41,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,874.874] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0296s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:41,875.875] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05239s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:41,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03979s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:41,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03375s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:41,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05637s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:41,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04358s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:41,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03755s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:41,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06045s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:41,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04774s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:41,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04156s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:41,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06426s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:41,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0517s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:41,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04566s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:41,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0685s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:41,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05592s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:41,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04971s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:41,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07255s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:41,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0615s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:41,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0557s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:41,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,902.902] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07863s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:41,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06596s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:41,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05987s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:41,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08259s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:41,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06988s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:41,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06373s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:41,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08649s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:41,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07382s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:41,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06765s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:41,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09032s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:41,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07759s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:41,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07154s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:41,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09423s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:41,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0815s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:41,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07518s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:41,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09784s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:41,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08508s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:41,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07884s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:41,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1014s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:41,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0886s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:41,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:41,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08432s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:41,931.931] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:41,932.932] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:41] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:50:42,150.150] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:42,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:42,151.151] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:42,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3789s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:42,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:42,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3798s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:42,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:50:42,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3675s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:50:42,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:50:42,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3686s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:50:42,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:50:42,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:50:42,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3597s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:50:42,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3632s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:50:42,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:50:42,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3364s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:50:42,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:50:42,168.168] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:42,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3533s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:50:42,179.179] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:42] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-25 16:50:42,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-05-25 16:50:42,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3442s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:50:42,184.184] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:42,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:42] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-05-25 16:50:42,244.244] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:50:42,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:50:42,244.244] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4723s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:50:42,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 16:50:42,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.451s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 16:50:42,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 16:50:42,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4386s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:50:42,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4285s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:42,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4165s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:42,255.255] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4111s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-05-25 16:50:42,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4339s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:42,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4212s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:42,259.259] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.415s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-05-25 16:50:42,261.261] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,261.261] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4376s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:42,262.262] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,262.262] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4249s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:42,263.263] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4188s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-05-25 16:50:42,265.265] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4419s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:42,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4293s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:42,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4231s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-05-25 16:50:42,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4459s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:42,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4331s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:42,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4269s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-05-25 16:50:42,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4494s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:42,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4367s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:42,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4305s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-05-25 16:50:42,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4531s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:42,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,278.278] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4405s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:42,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,279.279] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4343s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-05-25 16:50:42,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4569s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:42,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,282.282] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4444s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:42,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,283.283] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4385s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-05-25 16:50:42,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4612s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:42,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,286.286] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4485s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:42,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4423s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-05-25 16:50:42,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.465s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:42,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4522s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:42,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.446s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-05-25 16:50:42,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4686s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:42,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4557s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:42,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4496s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-05-25 16:50:42,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4725s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:42,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4599s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:42,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4537s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-05-25 16:50:42,299.299] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4764s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:42,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4637s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:42,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4573s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-05-25 16:50:42,304.304] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4819s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:42,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4691s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:42,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4628s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-05-25 16:50:42,308.308] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,309.309] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4854s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:42,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4725s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:42,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4663s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-05-25 16:50:42,312.312] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,312.312] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.489s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:42,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,314.314] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4762s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:42,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.47s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-05-25 16:50:42,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4928s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:42,317.317] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4798s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:42,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,321.321] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4768s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-05-25 16:50:42,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5001s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:42,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,325.325] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4877s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:42,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4815s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-05-25 16:50:42,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5045s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:42,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.492s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:42,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4859s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-05-25 16:50:42,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5085s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:42,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4962s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:42,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-05-25 16:50:42,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4902s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-05-25 16:50:42,337.337] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:50:42,337.337] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:42] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 16:50:42,905.905] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:42] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-05-25 16:50:42,906.906] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:50:42] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-05-25 16:51:40,485.485] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:40] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:51:40,799.799] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:40,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:51:40,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:51:40,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:51:40,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.02s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:51:40,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:51:40,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:51:40,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:51:40,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.98s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:51:40,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:51:40,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.01s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:51:40,819.819] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 16:51:40,820.820] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '今天淄博天气怎么样?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:51:40,833.833] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:40,915.915] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:40,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:40,916.916] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:40,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 16:51:40,921.921] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00094s] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 16:51:40,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:51:40,928.928] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:51:41,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:41,834.834] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.01182s] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:41,846.846] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:41] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:51:47,471.471] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:51:47,471.471] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,473.473] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:47,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,476.476] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00084s] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,478.478] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:51:47,478.478] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-05-25 16:51:47,488.488] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:47,489.489] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.574s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:47,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.669s ago] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,492.492] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:51:47,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01505s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "gaode_weather", "args": {"city": "\\u6dc4\\u535a"}, "id": "call_rBYOF90rxKDGH98BHKDn0Btn", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2910 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "b07a8e46-3628-45cf-9a4b-64575379d261", "example": false}}]', 'answer': '', 'latency': 2.4091980999999976}
[2025-05-25 16:51:47,507.507] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:47] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:51:47,510.510] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,512.512] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:47,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.74s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:51:47,513.513] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03991s ago] {'pk_1': 'a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8'}
[2025-05-25 16:51:47,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.599s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:47,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.701s ago] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,525.525] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:51:47,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04744s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"{\\"status\\": \\"1\\", \\"count\\": \\"1\\", \\"info\\": \\"OK\\", \\"infocode\\": \\"10000\\", \\"forecasts\\": [{\\"city\\": \\"\\\\u6dc4\\\\u535 ... (1484 characters truncated) ... \": \\"\\\\u5317\\", \\"daypower\\": \\"1-3\\", \\"nightpower\\": \\"1-3\\", \\"daytemp_float\\": \\"33.0\\", \\"nighttemp_float\\": \\"21.0\\"}]}]}"', 'tool': 'gaode_weather', 'tool_input': '{"city": "\\u6dc4\\u535a"}', 'message': '{}', 'answer': '', 'latency': 0.2030888000000033}
[2025-05-25 16:51:47,532.532] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:47,533.533] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.617s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:47,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.714s ago] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,538.538] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:51:47,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05992s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '今天淄博的天气情况如下：\n\n- **日期**：2025年5月25日（星期日）\n- **白天气温**：29°C，天气阴\n- **夜间气温**：14°C，天气阴\n- **风向**：北风，风力1-3级\n\n如果你需要未来几天的天气预报，请告诉我！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6628 characters truncated) ... ode_weather", "id": "76399c08-d5a2-4c85-a942-acb93a5b3c16", "tool_call_id": "call_rBYOF90rxKDGH98BHKDn0Btn", "artifact": null, "status": "success"}}]', 'answer': '今天淄博的天气情况如下：\n\n- **日期**：2025年5月25日（星期日）\n- **白天气温**：29°C，天气阴\n- **夜间气温**：14°C，天气阴\n- **风向**：北风，风力1-3级\n\n如果你需要未来几天的天气预报，请告诉我！', 'latency': 3.002702599999992}
[2025-05-25 16:51:47,543.543] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:47,543.543] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.721s ago] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,545.545] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 16:51:47,546.546] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6628 characters truncated) ... ode_weather", "id": "76399c08-d5a2-4c85-a942-acb93a5b3c16", "tool_call_id": "call_rBYOF90rxKDGH98BHKDn0Btn", "artifact": null, "status": "success"}}]', 'answer': '今天淄博的天气情况如下：\n\n- **日期**：2025年5月25日（星期日）\n- **白天气温**：29°C，天气阴\n- **夜间气温**：14°C，天气阴\n- **风向**：北风，风力1-3级\n\n如果你需要未来几天的天气预报，请告诉我！', 'latency': 5.614989499999993, 'message_id': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,556.556] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:47,557.557] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:47,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.735s ago] {'pk_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-05-25 16:51:47,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:47,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.642s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:50,380.380] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:51:50,380.380] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:50] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:51:50,626.626] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 16:51:50,626.626] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'summary': '人类询问AI今天淄博的天气情况，AI提供了详细信息，包括日期、白天气温、夜间气温、天气状况和风向，并表示如果需要未来几天的天气预报可以告诉它。', 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:50,627.627] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:50,628.628] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:50,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:50,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.712s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:50,630.630] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 16:51:50,630.630] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:50,631.631] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:51:54,459.459] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:54] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:51:54,770.770] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:54,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:51:54,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:51:54,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:51:54,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.99s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:51:54,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:51:54,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.97s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:51:54,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:51:54,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.95s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:51:54,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:51:54,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.98s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:51:54,785.785] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 16:51:54,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.97s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '人类如何才能更好地保护地球环境？', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:51:54,787.787] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:51:54,839.839] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:51:54,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:51:54,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.92s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:51:54,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 16:51:54,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.92s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 16:51:55,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:51:55,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.1s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:51:57,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:51:57,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.13s ago] {'pk_1': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-05-25 16:51:57,951.951] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:51:57] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:52:02,504.504] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:02,504.504] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:02,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.03s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:02,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.03s ago] {'pk_1': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-05-25 16:52:02,508.508] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:52:02,510.510] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:02] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:52:02,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.03s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('2436bd16-3937-4c92-bbc8-3011112aedde'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '人类可以通过多种方式更好地保护地球环境，以下是一些重要的措施：\n\n1. **减少碳足迹**：\n   - 采用公共交通、骑自行车或步行，减少私家车使用。\n   - 选择可再生能源，如太阳能和风能。\n\n2. **节约资源**：\n   - 节约用水，修复漏水的水龙头和管道。\n   - 减 ... (268 characters truncated) ... 多人参与环保活动。\n   - 通过社交媒体和社区活动传播环保知识。\n\n7. **支持政策和立法**：\n   - 支持政府采取环保措施，如减少温室气体排放和保护野生动物。\n   - 参与地方环境保护组织，推动更严格的环境法规。\n\n通过这些方式，每个人都可以为保护地球环境贡献自己的力量。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4500 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c8a660a9-a85f-4a22-90e4-b51daead3030", "example": false}}]', 'answer': '人类可以通过多种方式更好地保护地球环境，以下是一些重要的措施：\n\n1. **减少碳足迹**：\n   - 采用公共交通、骑自行车或步行，减少私家车使用。\n   - 选择可再生能源，如太阳能和风能。\n\n2. **节约资源**：\n   - 节约用水，修复漏水的水龙头和管道。\n   - 减 ... (268 characters truncated) ... 多人参与环保活动。\n   - 通过社交媒体和社区活动传播环保知识。\n\n7. **支持政策和立法**：\n   - 支持政府采取环保措施，如减少温室气体排放和保护野生动物。\n   - 参与地方环境保护组织，推动更严格的环境法规。\n\n通过这些方式，每个人都可以为保护地球环境贡献自己的力量。', 'latency': 7.432184699999993}
[2025-05-25 16:52:02,512.512] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:02,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.74s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:52:02,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.04s ago] {'pk_1': '2436bd16-3937-4c92-bbc8-3011112aedde'}
[2025-05-25 16:52:02,515.515] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:02,529.529] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:02,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.71s ago] {'pk_1': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-05-25 16:52:02,530.530] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 16:52:02,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.99s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4500 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c8a660a9-a85f-4a22-90e4-b51daead3030", "example": false}}]', 'answer': '人类可以通过多种方式更好地保护地球环境，以下是一些重要的措施：\n\n1. **减少碳足迹**：\n   - 采用公共交通、骑自行车或步行，减少私家车使用。\n   - 选择可再生能源，如太阳能和风能。\n\n2. **节约资源**：\n   - 节约用水，修复漏水的水龙头和管道。\n   - 减 ... (268 characters truncated) ... 多人参与环保活动。\n   - 通过社交媒体和社区活动传播环保知识。\n\n7. **支持政策和立法**：\n   - 支持政府采取环保措施，如减少温室气体排放和保护野生动物。\n   - 参与地方环境保护组织，推动更严格的环境法规。\n\n通过这些方式，每个人都可以为保护地球环境贡献自己的力量。', 'latency': 7.432184699999993, 'message_id': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-05-25 16:52:02,531.531] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:02,532.532] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:02,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.71s ago] {'pk_1': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-05-25 16:52:02,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:02,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.63s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:05,686.686] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 16:52:05,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.06s ago] {'summary': '人类询问AI如何更好地保护地球环境，AI提供了多种措施，包括减少碳足迹、节约资源、减少废物、支持可持续农业、保护自然生态、提高公众意识以及支持政策和立法。AI强调每个人都可以通过这些方式为保护地球环境贡献自己的力量。', 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:05,686.686] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:05,688.688] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:05,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:05,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.77s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:05,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 16:52:05,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.06s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:05,692.692] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:05,707.707] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:05,707.707] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:05] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:52:15,361.361] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:15] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 16:52:15,674.674] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:15,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:15,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:52:15,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:52:15,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.89s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:52:15,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:52:15,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.87s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:52:15,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:52:15,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.85s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:52:15,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:52:15,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.89s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:52:15,688.688] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:15,689.689] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:15] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 16:52:32,141.141] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:32] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:52:32,145.145] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:32,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:32,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:52:32,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:52:32,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:52:32,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:52:32,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:52:32,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:52:32,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.3s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:52:32,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:52:32,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.4s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:52:32,155.155] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 16:52:32,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.35s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '淄博有什么好吃的', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 16:52:32,167.167] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:32,244.244] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:32,245.245] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:32,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.33s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:32,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 16:52:32,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.33s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 16:52:32,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:32,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.32s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 16:52:35,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:35,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.98s ago] {'pk_1': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-05-25 16:52:35,800.800] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:35] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-05-25 16:52:38,626.626] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:38] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 16:52:38,935.935] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:38,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:38,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:52:38,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:52:38,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.2s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:52:38,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:52:38,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:52:38,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:52:38,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:52:38,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:52:38,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:52:38,950.950] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:38,950.950] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:38] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 16:52:40,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:40,881.881] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:40,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:40,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.41s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:40,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:40,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.41s ago] {'pk_1': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-05-25 16:52:40,887.887] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:40] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:52:40,888.888] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 16:52:40,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.41s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'message_id': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '淄博以其丰富的地方美食而闻名，以下是一些值得尝试的特色美食：\n\n1. **淄博烧烤**：淄博的烧烤种类繁多，肉质鲜嫩，配上特制的调料，风味独特。\n\n2. **博山豆腐**：博山豆腐以其细腻的口感和浓郁的豆香著称，常用来制作豆腐脑或炒菜。\n\n3. **淄博煎饼**：这种煎饼通常用小米面或 ... (93 characters truncated) ... 发源地之一，淄博的鲁菜如糖醋鲤鱼、红烧肉、清蒸鲈鱼等都是经典之作。\n\n6. **焦圈**：这种小吃外焦里嫩，口感香脆，适合当作零食或早餐。\n\n7. **炸鸡柳**：淄博的炸鸡柳外酥里嫩，味道鲜美，是年轻人喜爱的快餐选择。\n\n这些美食不仅能满足你的味蕾，还能让你更好地体验淄博的地方文化。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8161 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d67be50c-94bb-4750-84b9-f246709a7ea1", "example": false}}]', 'answer': '淄博以其丰富的地方美食而闻名，以下是一些值得尝试的特色美食：\n\n1. **淄博烧烤**：淄博的烧烤种类繁多，肉质鲜嫩，配上特制的调料，风味独特。\n\n2. **博山豆腐**：博山豆腐以其细腻的口感和浓郁的豆香著称，常用来制作豆腐脑或炒菜。\n\n3. **淄博煎饼**：这种煎饼通常用小米面或 ... (93 characters truncated) ... 发源地之一，淄博的鲁菜如糖醋鲤鱼、红烧肉、清蒸鲈鱼等都是经典之作。\n\n6. **焦圈**：这种小吃外焦里嫩，口感香脆，适合当作零食或早餐。\n\n7. **炸鸡柳**：淄博的炸鸡柳外酥里嫩，味道鲜美，是年轻人喜爱的快餐选择。\n\n这些美食不仅能满足你的味蕾，还能让你更好地体验淄博的地方文化。', 'latency': 8.555800500000004}
[2025-05-25 16:52:40,898.898] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:40,899.899] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:40,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:40,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.08s ago] {'pk_1': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-05-25 16:52:40,900.900] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 16:52:40,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.36s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8161 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d67be50c-94bb-4750-84b9-f246709a7ea1", "example": false}}]', 'answer': '淄博以其丰富的地方美食而闻名，以下是一些值得尝试的特色美食：\n\n1. **淄博烧烤**：淄博的烧烤种类繁多，肉质鲜嫩，配上特制的调料，风味独特。\n\n2. **博山豆腐**：博山豆腐以其细腻的口感和浓郁的豆香著称，常用来制作豆腐脑或炒菜。\n\n3. **淄博煎饼**：这种煎饼通常用小米面或 ... (93 characters truncated) ... 发源地之一，淄博的鲁菜如糖醋鲤鱼、红烧肉、清蒸鲈鱼等都是经典之作。\n\n6. **焦圈**：这种小吃外焦里嫩，口感香脆，适合当作零食或早餐。\n\n7. **炸鸡柳**：淄博的炸鸡柳外酥里嫩，味道鲜美，是年轻人喜爱的快餐选择。\n\n这些美食不仅能满足你的味蕾，还能让你更好地体验淄博的地方文化。', 'latency': 8.555800500000004, 'message_id': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-05-25 16:52:40,912.912] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:40,914.914] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:40,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:40,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.09s ago] {'pk_1': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-05-25 16:52:40,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:40,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:41,206.206] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:41,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:52:41,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 119.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:52:41,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 16:52:41,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.73s ago] {'pk_1': 'ed8be130-3c49-49b9-8fd2-f621d6150418'}
[2025-05-25 16:52:44,275.275] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:52:44,276.276] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:52:44] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-05-25 16:52:46,291.291] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 16:52:46,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.67s ago] {'summary': '人类询问AI如何更好地保护地球环境，AI提供了多种措施，包括减少碳足迹、节约资源、减少废物、支持可持续农业、保护自然生态、提高公众意识以及支持政策和立法，强调每个人都可以通过这些方式为保护地球环境贡献力量。此外，人类询问淄博的美食，AI列举了多种特色美食，包括淄博烧烤、博山豆腐、淄博煎饼、水煎包、鲁菜、焦圈和炸鸡柳，指出这些美食不仅美味，还能让人更好地体验淄博的地方文化。', 'conversation_id': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:46,293.293] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 16:52:46,294.294] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:52:46,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 16:52:46,295.295] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.38s ago] {'pk_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:46,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 16:52:46,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.67s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e')}
[2025-05-25 16:52:46,297.297] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:53:34,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:53:34] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 16:53:34,455.455] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 16:53:34,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 16:53:34,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 16:53:34,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 16:53:34,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 16:53:34,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-25 16:53:34,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-25 16:53:34,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 16:53:34,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.6s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-05-25 16:53:34,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-25 16:53:34,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.7s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-25 16:53:34,466.466] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 16:53:34,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 16:53:34] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-25 19:30:31,916.916] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 19:30:31,917.917] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 19:30:31,922.922] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 19:33:30,491.491] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 19:33:30,491.491] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 19:33:30,498.498] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 19:34:08,247.247] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 19:34:08,265.265] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 19:34:10,121.121] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 19:34:10,122.122] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 19:34:10,129.129] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 19:34:10,130.130] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 19:34:10,132.132] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 19:34:10,132.132] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 19:34:10,134.134] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:34:11,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:34:11,509.509] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 19:34:11,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 19:34:11,522.522] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 19:34:11,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 19:34:11,530.530] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:34:11,534.534] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:34:11,534.534] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:34:11] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 19:34:31,194.194] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:34:31,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:34:31,196.196] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00092s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw\\'}
[2025-05-25 19:34:31,199.199] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 284, in decorated_view
    elif not current_user.is_authenticated:
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 526, in _get_current_object
    return get_name(local())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 25, in <lambda>
    current_user = LocalProxy(lambda: _get_user())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 370, in _get_user
    current_app.login_manager._load_user()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 378, in _load_user
    user = self._load_user_from_request(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 441, in _load_user_from_request
    user = self._request_callback(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\middleware\middleware.py", line 37, in request_loader
    raise UnauthorizedException("该密钥不存在或未激活")
internal.exception.exception.UnauthorizedException
[2025-05-25 19:34:31,209.209] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:34:31,210.210] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:34:31] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 19:34:36,103.103] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:34:36,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:34:36,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.908s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 19:34:36,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:34:36,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:34:36,110.110] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:34:36,110.110] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:34:36] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 19:36:26,956.956] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:36:26,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:36:26,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.8s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 19:36:26,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:36:26,958.958] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:36:26,959.959] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 18, in chat
    req = OpenAPIChatReq()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 209, in __call__
    return type.__call__(cls, *args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 73, in __init__
    super().__init__(formdata=formdata, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 287, in __init__
    self.process(formdata, obj, data=data, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 107, in process
    formdata = self.meta.wrap_formdata(self, formdata)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 60, in wrap_formdata
    return ImmutableMultiDict(request.get_json())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\wrappers.py", line 131, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)
[2025-05-25 19:36:27,045.045] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:36:27,087.087] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:36:27] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 19:37:09,410.410] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:37:09,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:37:09,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 158.2s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 19:37:09,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:37:09,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177.9s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:37:09,413.413] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 355, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 18, in chat
    req = OpenAPIChatReq()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 209, in __call__
    return type.__call__(cls, *args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 73, in __init__
    super().__init__(formdata=formdata, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 287, in __init__
    self.process(formdata, obj, data=data, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 107, in process
    formdata = self.meta.wrap_formdata(self, formdata)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 60, in wrap_formdata
    return ImmutableMultiDict(request.get_json())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\wrappers.py", line 131, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting value: line 1 column 1 (char 0)
[2025-05-25 19:37:09,414.414] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:37:09,434.434] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:37:09] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 19:37:14,969.969] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:37:14,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:37:14,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 183.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 19:37:14,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 19:37:14,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 183.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 19:37:14,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 19:37:14,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 183.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:37:14,974.974] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:37:14,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:37:14] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 19:37:19,166.166] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:37:19,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:37:19,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 19:37:19,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:37:19,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 187.7s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:37:19,172.172] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:37:19,173.173] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:37:19] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 19:37:23,139.139] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 19:37:23,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 19:37:23,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 19:37:23,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 19:37:23,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 191.7s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 19:37:23,142.142] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 18, in chat
    req = OpenAPIChatReq()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 209, in __call__
    return type.__call__(cls, *args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 73, in __init__
    super().__init__(formdata=formdata, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 287, in __init__
    self.process(formdata, obj, data=data, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 107, in process
    formdata = self.meta.wrap_formdata(self, formdata)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 60, in wrap_formdata
    return ImmutableMultiDict(request.get_json())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\wrappers.py", line 131, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 5 column 1 (char 101)
[2025-05-25 19:37:23,145.145] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 19:37:23,172.172] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 19:37:23] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 20:45:19,522.522] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 20:45:19,567.567] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 20:45:19,747.747] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 20:46:14,423.423] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 20:46:14,463.463] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 20:46:16,898.898] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 20:46:16,898.898] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:46:16,903.903] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 20:46:16,903.903] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:46:16,905.905] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 20:46:16,905.905] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:46:16,906.906] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:46:17,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:46:17,643.643] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00152s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 20:46:17,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 20:46:17,654.654] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 20:46:17,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 20:46:17,662.662] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:46:17,666.666] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 20:46:17,667.667] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:46:17] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 20:46:38,835.835] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:46:38,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 20:46:38,837.837] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw\\'}
[2025-05-25 20:46:38,841.841] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 284, in decorated_view
    elif not current_user.is_authenticated:
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 318, in __get__
    obj = instance._get_current_object()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\local.py", line 526, in _get_current_object
    return get_name(local())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 25, in <lambda>
    current_user = LocalProxy(lambda: _get_user())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 370, in _get_user
    current_app.login_manager._load_user()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 378, in _load_user
    user = self._load_user_from_request(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\login_manager.py", line 441, in _load_user_from_request
    user = self._request_callback(request)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\middleware\middleware.py", line 37, in request_loader
    raise UnauthorizedException("该密钥不存在或未激活")
internal.exception.exception.UnauthorizedException
[2025-05-25 20:46:38,847.847] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 20:46:38,848.848] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:46:38] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 20:46:45,099.099] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:46:45,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 20:46:45,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.263s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 20:46:45,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.47s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:46:45,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,113.113] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': '83040ed9-0795-43db-99da-b6eb2321a71b'}
[2025-05-25 20:46:45,118.118] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-05-25 20:46:45,118.118] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:46:45,131.131] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:46:45,133.133] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:46:45,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,135.135] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:46:45,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,137.137] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('62e307ff-97d1-41fc-884d-f3033e9e87f6')}
[2025-05-25 20:46:45,139.139] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-25 20:46:45,140.140] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('62e307ff-97d1-41fc-884d-f3033e9e87f6')}
[2025-05-25 20:46:45,146.146] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:46:45,147.147] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:46:45,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01387s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:46:45,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,155.155] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-05-25 20:46:45,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-25 20:46:45,161.161] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:46:45,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 20:46:45,166.166] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-25 20:46:45,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,170.170] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('79d0d377-0edd-4707-afbf-e6d65f6c9a7d')}
[2025-05-25 20:46:45,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:46:45,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03561s ago] {'pk_1': UUID('62e307ff-97d1-41fc-884d-f3033e9e87f6')}
[2025-05-25 20:46:45,176.176] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 20:46:45,176.176] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('79d0d377-0edd-4707-afbf-e6d65f6c9a7d'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('62e307ff-97d1-41fc-884d-f3033e9e87f6'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 20:46:45,182.182] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:46:45,254.254] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: __init__() missing 1 required positional argument: 'embeddings_service'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 23, in chat
    resp = self.openapi_service.chat(req, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\openapi_service.py", line 98, in chat
    token_buffer_memory = TokenBufferMemory(
TypeError: __init__() missing 1 required positional argument: 'embeddings_service'
[2025-05-25 20:46:45,270.270] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:46:45] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 20:47:52,902.902] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\openapi_service.py', reloading
[2025-05-25 20:47:54,551.551] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 20:48:53,920.920] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 20:48:53,945.945] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 20:48:56,721.721] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 20:48:56,722.722] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:48:56,725.725] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 20:48:56,725.725] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:48:56,727.727] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 20:48:56,727.727] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:48:56,728.728] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:48:56,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 20:48:56,731.731] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 20:48:56,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,741.741] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:48:56,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,746.746] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': '83040ed9-0795-43db-99da-b6eb2321a71b'}
[2025-05-25 20:48:56,750.750] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-05-25 20:48:56,750.750] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:48:56,773.773] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:48:56,774.774] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:48:56,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,776.776] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:48:56,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,779.779] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('e5f23a92-750c-42be-86f5-265b62d616a3')}
[2025-05-25 20:48:56,781.781] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-25 20:48:56,781.781] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('e5f23a92-750c-42be-86f5-265b62d616a3')}
[2025-05-25 20:48:56,784.784] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:48:56,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:48:56,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01006s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:48:56,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,789.789] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-05-25 20:48:56,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-25 20:48:56,796.796] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:48:56,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 20:48:56,799.799] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-25 20:48:56,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,802.802] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('60ea53c5-b419-4c92-a7c9-dd7088513976')}
[2025-05-25 20:48:56,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0256s ago] {'pk_1': UUID('e5f23a92-750c-42be-86f5-265b62d616a3')}
[2025-05-25 20:48:56,806.806] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 20:48:56,806.806] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('60ea53c5-b419-4c92-a7c9-dd7088513976'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('e5f23a92-750c-42be-86f5-265b62d616a3'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 20:48:56,810.810] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:48:56,868.868] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:48:56,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06654s ago] {'pk_1': UUID('60ea53c5-b419-4c92-a7c9-dd7088513976')}
[2025-05-25 20:48:56,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 20:48:56,872.872] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'conversation_id_1': UUID('60ea53c5-b419-4c92-a7c9-dd7088513976'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 20:48:56,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:48:56,881.881] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:48:56,882.882] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: create_langchain_tool_from_search() got an unexpected keyword argument 'retrival_source'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 23, in chat
    resp = self.openapi_service.chat(req, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\openapi_service.py", line 116, in chat
    dataset_retrieval = self.retrieval_service.create_langchain_tool_from_search(
TypeError: create_langchain_tool_from_search() got an unexpected keyword argument 'retrival_source'
[2025-05-25 20:48:56,886.886] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 20:48:56,898.898] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:48:56] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 20:50:04,587.587] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\openapi_service.py', reloading
[2025-05-25 20:50:06,735.735] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 20:51:01,396.396] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 20:51:01,423.423] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 20:51:03,625.625] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 20:51:03,625.625] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:51:03,628.628] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 20:51:03,629.629] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:51:03,630.630] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 20:51:03,631.631] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 20:51:03,632.632] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:03,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 20:51:03,635.635] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 20:51:03,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,644.644] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:51:03,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,651.651] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': '83040ed9-0795-43db-99da-b6eb2321a71b'}
[2025-05-25 20:51:03,655.655] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-05-25 20:51:03,655.655] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:51:03,669.669] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:03,671.671] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:03,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:51:03,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,674.674] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 20:51:03,676.676] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-25 20:51:03,677.677] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 20:51:03,681.681] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:03,682.682] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:03,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01071s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:51:03,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,687.687] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-05-25 20:51:03,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-25 20:51:03,693.693] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:51:03,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 20:51:03,696.696] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-25 20:51:03,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,699.699] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:03,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02737s ago] {'pk_1': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 20:51:03,703.703] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 20:51:03,703.703] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 20:51:03,707.707] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:03,778.778] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:03,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07981s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:03,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 20:51:03,782.782] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 20:51:03,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,785.785] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:51:03,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2532s ago] {'pk_1': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 20:51:03,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:03,940.940] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:03,941.941] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:51:03] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 20:51:06,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.014s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 20:51:06,688.688] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 20:51:06,730.730] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:06,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,732.732] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:06,735.735] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,736.736] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:06,741.741] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 20:51:06,742.742] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00105s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-05-25 20:51:06,750.750] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:06,752.752] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:06,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.053s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:06,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.815s ago] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:06,755.755] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 20:51:06,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0169s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！有什么我可以帮助你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2888 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "e5b086c2-083c-4262-b74f-ea153a3f120d", "example": false}}]', 'answer': '你好，好儿！有什么我可以帮助你的吗？', 'latency': 2.752372099999995}
[2025-05-25 20:51:06,762.762] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:06,764.764] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:06,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,765.765] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.826s ago] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:06,769.769] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 20:51:06,769.769] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2888 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "e5b086c2-083c-4262-b74f-ea153a3f120d", "example": false}}]', 'answer': '你好，好儿！有什么我可以帮助你的吗？', 'latency': 2.752372099999995, 'message_id': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:06,774.774] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:06,775.775] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:06,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.837s ago] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:06,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:06,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.079s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:08,837.837] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 20:51:08,837.837] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'summary': '人类自我介绍为好儿，AI回应并询问是否需要帮助。', 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:08,839.839] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:51:08,840.840] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:51:08,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 20:51:08,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.142s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:08,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 20:51:08,842.842] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:08,843.843] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 20:51:08,843.843] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.905s ago] {'pk_1': UUID('74c4e4e6-c4db-48c8-a26d-892046d8c95f')}
[2025-05-25 20:51:13,807.807] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 20:51:13,807.807] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'name': '用户自我介绍', 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 20:51:13,809.809] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 20:57:25,596.596] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 20:57:25,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 20:57:25,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 382s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 20:57:25,600.600] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 20:57:25,600.600] base.py -> _exec_single_context line:1901 [INFO]: [cached since 382s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 20:57:25,602.602] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 18, in chat
    req = OpenAPIChatReq()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 209, in __call__
    return type.__call__(cls, *args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 73, in __init__
    super().__init__(formdata=formdata, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 287, in __init__
    self.process(formdata, obj, data=data, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 107, in process
    formdata = self.meta.wrap_formdata(self, formdata)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 60, in wrap_formdata
    return ImmutableMultiDict(request.get_json())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\wrappers.py", line 131, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)
[2025-05-25 20:57:25,635.635] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 20:57:25,656.656] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 20:57:25] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 21:00:25,177.177] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:00:25,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 21:00:25,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 561.5s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 21:00:25,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 21:00:25,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 561.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 21:00:25,182.182] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 611, in get_json
    rv = self.json_module.loads(data)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 187, in loads
    return json.loads(s, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 337, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\decoder.py", line 353, in raw_decode
    obj, end = self.scan_once(s, idx)
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\openapi_handler.py", line 18, in chat
    req = OpenAPIChatReq()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 209, in __call__
    return type.__call__(cls, *args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 73, in __init__
    super().__init__(formdata=formdata, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 287, in __init__
    self.process(formdata, obj, data=data, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\wtforms\form.py", line 107, in process
    formdata = self.meta.wrap_formdata(self, formdata)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_wtf\form.py", line 60, in wrap_formdata
    return ImmutableMultiDict(request.get_json())
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 620, in get_json
    rv = self.on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\wrappers.py", line 131, in on_json_loading_failed
    return super().on_json_loading_failed(e)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\wrappers\request.py", line 645, in on_json_loading_failed
    raise BadRequest(f"Failed to decode JSON object: {e}")
werkzeug.exceptions.BadRequest: 400 Bad Request: Failed to decode JSON object: Expecting property name enclosed in double quotes: line 7 column 1 (char 230)
[2025-05-25 21:00:25,184.184] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 21:00:25,203.203] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 21:00:25] "[35m[1mPOST /openapi/chat HTTP/1.1[0m" 500 -
[2025-05-25 21:04:13,891.891] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:13,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 21:04:13,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.3s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 21:04:13,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 21:04:13,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'pk_1': '83040ed9-0795-43db-99da-b6eb2321a71b'}
[2025-05-25 21:04:13,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,899.899] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'pk_1': '7f2a5afc-20c5-46e9-8bed-536bcb06ceb1'}
[2025-05-25 21:04:13,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 787.2s ago] {'pk_1': '724d3d82-bb84-472e-a284-842ac6074789'}
[2025-05-25 21:04:13,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,902.902] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-05-25 21:04:13,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-25 21:04:13,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 21:04:13,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 21:04:13,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-25 21:04:13,906.906] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 21:04:13,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 21:04:13,917.917] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:04:13,982.982] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:13,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:04:13,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.3s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:13,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 21:04:13,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.2s ago] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 21:04:14,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 21:04:14,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 790.4s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 21:04:16,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 21:04:16,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.3s ago] {'pk_1': UUID('6cc97115-65fe-429a-a302-40299c215190')}
[2025-05-25 21:04:16,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,257.257] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:16,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.6s ago] {'pk_1': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 21:04:16,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 789.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:16,259.259] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,259.259] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 21:04:16,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 789.5s ago] {'pk_1': UUID('6cc97115-65fe-429a-a302-40299c215190')}
[2025-05-25 21:04:16,269.269] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 21:04:16] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 21:04:16,270.270] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 21:04:16,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 789.5s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('6cc97115-65fe-429a-a302-40299c215190'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你自我介绍为好儿。如果你想分享更多信息或者有具体的问题，请告诉我！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3660 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "47126f78-d8bd-4a58-a0cc-20d797ec336f", "example": false}}]', 'answer': '你自我介绍为好儿。如果你想分享更多信息或者有具体的问题，请告诉我！', 'latency': 2.066976400000044}
[2025-05-25 21:04:16,274.274] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:04:16,275.275] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:16,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.3s ago] {'pk_1': UUID('6cc97115-65fe-429a-a302-40299c215190')}
[2025-05-25 21:04:16,277.277] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 21:04:16,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 789.5s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3660 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "47126f78-d8bd-4a58-a0cc-20d797ec336f", "example": false}}]', 'answer': '你自我介绍为好儿。如果你想分享更多信息或者有具体的问题，请告诉我！', 'latency': 2.066976400000044, 'message_id': UUID('6cc97115-65fe-429a-a302-40299c215190')}
[2025-05-25 21:04:16,285.285] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:04:16,287.287] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:16,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.3s ago] {'pk_1': UUID('6cc97115-65fe-429a-a302-40299c215190')}
[2025-05-25 21:04:16,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:04:16,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.6s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:20,138.138] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 21:04:20,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 791.3s ago] {'summary': '人类自我介绍为好儿，AI回应并询问是否需要帮助，并表示知道人类的名字。如果人类想分享更多信息或有具体问题，可以告诉AI。', 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:20,140.140] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:04:20,141.141] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:04:20,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:04:20,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 796.4s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:20,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 21:04:20,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 791.3s ago] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:04:20,145.145] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 21:05:18,916.916] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:18,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-05-25 21:05:18,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.3s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-05-25 21:05:18,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 21:05:18,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.3s ago] {'pk_1': '83040ed9-0795-43db-99da-b6eb2321a71b'}
[2025-05-25 21:05:18,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.03s ago] {'pk_1': '7f2a5afc-20c5-46e9-8bed-536bcb06ceb1'}
[2025-05-25 21:05:18,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 852.2s ago] {'pk_1': '724d3d82-bb84-472e-a284-842ac6074789'}
[2025-05-25 21:05:18,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,931.931] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-05-25 21:05:18,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-25 21:05:18,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 21:05:18,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-25 21:05:18,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-25 21:05:18,935.935] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-05-25 21:05:18,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1'), 'query': '明天淄博天气怎么样?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-05-25 21:05:18,937.937] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:18,994.994] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:18,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.3s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:18,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-05-25 21:05:18,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-05-25 21:05:18,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 21:05:18,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 855.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 21:05:26,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-25 21:05:26,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.2s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,186.186] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('7f2a5afc-20c5-46e9-8bed-536bcb06ceb1')}
[2025-05-25 21:05:26,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:26,188.188] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 21:05:26,188.188] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 21:05:26] "POST /openapi/chat HTTP/1.1" 200 -
[2025-05-25 21:05:26,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,191.191] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 21:05:26,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '人类自我介绍为好儿，AI回应并询问是否需要帮助，并表示知道人类的名字。如果人类想分享更多信息或有具体问题，可以告诉AI。', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-05-25 21:05:26,192.192] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:26,193.193] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:26,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,196.196] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 21:05:26,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u6dc4\\u535a \\u660e\\u5929\\u7684\\u5929\\u6c14\\u9884\\u62a5"}, "id": "call_ceRw6ISSp8S5VCaabXBYINLs", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4635 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "db7685dc-1cfe-4398-996c-6fdca7ccdcd0", "example": false}}]', 'answer': '', 'latency': 2.4800356000000647}
[2025-05-25 21:05:26,200.200] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:26,200.200] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:26,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,203.203] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 21:05:26,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u4eca\\u5929\\uff0c\\u6211\\u56fd\\u5927\\u90e8\\u5730\\u533a\\u5929\\u6c14\\u6674\\u597d\\uff0c\\u6c14\\u6e29\\u56de\\u5347\\u3002\\u660e\\u5929\ ... (3417 characters truncated) ... u2103 \\u00b7 \\u5468\\u4e9405/23. \\u591a\\u4e91\\u8f6c\\u6674. 11~24\\u2103 \\u00b7 \\u5468\\u516d05/24. \\u6674. 13~29\\u2103 \\u00b7 \\u5468 ..."', 'tool': 'google_serper', 'tool_input': '{"query": "\\u6dc4\\u535a \\u660e\\u5929\\u7684\\u5929\\u6c14\\u9884\\u62a5"}', 'message': '{}', 'answer': '', 'latency': 1.3825243999999657}
[2025-05-25 21:05:26,206.206] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:26,207.207] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:26,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,210.210] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-05-25 21:05:26,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.5s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789'), 'message_id': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '明天淄博的天气预报是多云，气温在19°C到30°C之间。请注意天气变化，出门时适当穿着。需要其他帮助吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10266 characters truncated) ... ogle_serper", "id": "7c694a6f-1d58-49a6-b0ce-c1113d86ed3b", "tool_call_id": "call_ceRw6ISSp8S5VCaabXBYINLs", "artifact": null, "status": "success"}}]', 'answer': '明天淄博的天气预报是多云，气温在19°C到30°C之间。请注意天气变化，出门时适当穿着。需要其他帮助吗？', 'latency': 3.2736469999999827}
[2025-05-25 21:05:26,213.213] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:26,214.214] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,216.216] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-05-25 21:05:26,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 859.4s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10266 characters truncated) ... ogle_serper", "id": "7c694a6f-1d58-49a6-b0ce-c1113d86ed3b", "tool_call_id": "call_ceRw6ISSp8S5VCaabXBYINLs", "artifact": null, "status": "success"}}]', 'answer': '明天淄博的天气预报是多云，气温在19°C到30°C之间。请注意天气变化，出门时适当穿着。需要其他帮助吗？', 'latency': 7.136207000000013, 'message_id': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,218.218] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:26,218.218] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:26,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'pk_1': UUID('72d3301b-d991-4ee2-adba-85c035dbdb04')}
[2025-05-25 21:05:26,220.220] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:26,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.5s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:31,114.114] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-25 21:05:31,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'summary': '人类自我介绍为好儿，AI回应并询问是否需要帮助，并表示知道人类的名字。如果人类想分享更多信息或有具体问题，可以告诉AI。人类询问明天淄博的天气，AI提供了天气预报，说明明天淄博的天气是多云，气温在19°C到30°C之间，并提醒人类注意天气变化，适当穿着。AI还询问是否需要其他帮助。', 'conversation_id': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:31,116.116] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 21:05:31,116.116] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 21:05:31,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-25 21:05:31,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 867.4s ago] {'pk_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:31,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-05-25 21:05:31,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 862.3s ago] {'conversation_id_1': UUID('724d3d82-bb84-472e-a284-842ac6074789')}
[2025-05-25 21:05:31,119.119] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:15:35,844.844] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-25 22:15:35,845.845] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-25 22:15:35,852.852] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-25 22:16:35,758.758] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-25 22:16:35,781.781] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-25 22:16:37,331.331] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:16:37] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:16:38,995.995] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-25 22:16:38,998.998] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 22:16:39,002.002] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-25 22:16:39,003.003] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 22:16:39,006.006] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-25 22:16:39,007.007] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-25 22:16:39,008.008] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:16:39,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:16:39,015.015] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:16:39,023.023] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:16:39,024.024] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:16:39] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:18:03,767.767] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:03] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:18:04,083.083] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:18:04,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:18:04,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.07s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:18:04,086.086] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:18:04,086.086] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:04] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:18:06,315.315] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:18:06,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:18:06,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:18:06,318.318] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:18:06,319.319] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:06] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:18:07,664.664] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 22:18:07,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:07] "OPTIONS /builtin-tools HTTP/1.1" 200 -
[2025-05-25 22:18:07,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:07] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 22:18:08,238.238] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:08] "GET /builtin-tools HTTP/1.1" 200 -
[2025-05-25 22:18:11,475.475] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:11] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 22:18:11,479.479] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:18:11,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:18:11,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.46s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:18:11,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:18:11,485.485] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00342s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004334s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005187s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-05-25 22:18:11,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008277s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-05-25 22:18:11,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009894s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-05-25 22:18:11,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01127s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-05-25 22:18:11,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01271s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-05-25 22:18:11,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01421s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-05-25 22:18:11,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01538s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-05-25 22:18:11,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02343s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-05-25 22:18:11,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02461s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-05-25 22:18:11,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02611s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-05-25 22:18:11,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0274s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-05-25 22:18:11,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02846s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-05-25 22:18:11,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02952s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-05-25 22:18:11,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03079s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-05-25 22:18:11,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04215s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-05-25 22:18:11,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04396s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-05-25 22:18:11,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-05-25 22:18:11,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04519s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-05-25 22:18:11,549.549] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:18:11,550.550] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:11] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-05-25 22:18:15,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:15] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:18:15,860.860] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:18:15,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:18:15,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.85s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:18:15,862.862] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:18:15,864.864] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:18:15] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:19:01,177.177] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:01] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:19:01,181.181] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:01,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:01,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 142.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:01,183.183] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:01,184.184] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:01] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:19:04,425.425] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:04,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:04,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:04,425.425] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:04,425.425] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:04] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:19:27,582.582] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:27] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:19:27,585.585] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:27,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:27,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:27,588.588] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:27,589.589] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:27] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:19:30,157.157] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:30,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:30,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:30,160.160] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:30,160.160] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:30] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:19:31,481.481] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:31] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 22:19:31,482.482] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:31] "OPTIONS /builtin-tools HTTP/1.1" 200 -
[2025-05-25 22:19:31,486.486] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:31] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 22:19:31,798.798] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:31] "GET /builtin-tools HTTP/1.1" 200 -
[2025-05-25 22:19:32,764.764] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:32] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-05-25 22:19:32,767.767] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:32] "GET /builtin-tools HTTP/1.1" 200 -
[2025-05-25 22:19:33,569.569] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-05-25 22:19:33,755.755] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/duckduckgo/icon HTTP/1.1" 200 -
[2025-05-25 22:19:33,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-05-25 22:19:33,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/dalle/icon HTTP/1.1" 200 -
[2025-05-25 22:19:33,762.762] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/time/icon HTTP/1.1" 200 -
[2025-05-25 22:19:33,763.763] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:33] "GET /builtin-tools/wikipedia/icon HTTP/1.1" 200 -
[2025-05-25 22:19:35,694.694] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:35] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:19:36,012.012] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:36,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:36,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:36,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:19:36,016.016] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:19:36,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:19:36,021.021] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:19:36,023.023] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:36,024.024] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:36] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:19:43,155.155] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-25 22:19:43,173.173] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:43] "[35m[1mOPTIONS /openapi/api-keys/undefined/is-active HTTP/1.1[0m" 500 -
[2025-05-25 22:19:46,023.023] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-25 22:19:46,043.043] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:46] "[35m[1mOPTIONS /openapi/api-keys/undefined/is-active HTTP/1.1[0m" 500 -
[2025-05-25 22:19:49,356.356] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:49] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:19:49,358.358] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:49] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:19:49,360.360] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:49,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:49,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 190.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:49,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:19:49,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.35s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:19:49,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:19:49,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.34s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:19:49,366.366] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:49,366.366] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:49] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:19:49,669.669] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:19:49,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:19:49,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 190.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:19:49,672.672] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:19:49,672.672] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:19:49] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:20:01,094.094] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:01] "OPTIONS /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:20:01,409.409] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:20:01,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:20:01,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 202.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:20:01,416.416] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO api_key (account_id, api_key, is_active, remark) VALUES (%(account_id)s::UUID, %(api_key)s, %(is_active)s, %(remark)s) RETURNING api_key.id, api_key.updated_at, api_key.created_at
[2025-05-25 22:20:01,416.416] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'api_key': 'llmops-v1/DZocwkdVrcDQnIbVXtLXrAIGQbJcg8NbNK7p0OE0EXx5ZJIFs2pu4fx22KFALJD1', 'is_active': True, 'remark': '新增密钥'}
[2025-05-25 22:20:01,432.432] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:20:01,432.432] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:01] "POST /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:20:01,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:01] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:20:01,746.746] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:20:01,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:20:01,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 202.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:20:01,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:20:01,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.74s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:20:01,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:20:01,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.74s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:20:01,759.759] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:20:01,760.760] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:01] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:20:11,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:11] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:20:12,042.042] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:12] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:20:12,048.048] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:20:12,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:20:12,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 213s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:20:12,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:20:12,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.03s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:20:12,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:20:12,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.03s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:20:12,054.054] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:20:12,055.055] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:12] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:20:12,325.325] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:20:12,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:20:12,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 213.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:20:12,327.327] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:20:12,328.328] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:20:12] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:22:03,998.998] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:22:03] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:22:04,002.002] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:22:04] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:22:04,310.310] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:22:04,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:22:04,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 325.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:22:04,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:22:04,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:22:04,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:22:04,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:22:04,319.319] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:22:04,319.319] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:22:04] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:22:04,360.360] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:22:04,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:22:04,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 325.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:22:04,364.364] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:22:04,365.365] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:22:04] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:23:33,315.315] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:33] "OPTIONS /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:23:33,627.627] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:23:33,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:23:33,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 414.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:23:33,632.632] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO api_key (account_id, api_key, is_active, remark) VALUES (%(account_id)s::UUID, %(api_key)s, %(is_active)s, %(remark)s) RETURNING api_key.id, api_key.updated_at, api_key.created_at
[2025-05-25 22:23:33,632.632] base.py -> _exec_single_context line:1901 [INFO]: [cached since 212.2s ago] {'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'api_key': 'llmops-v1/zoCBBqH1D4XQzVdeb3ssLagZvIsp76hAKFMgtgaFybU6p7dpG2x6zWYYDrcSOgC2', 'is_active': False, 'remark': ''}
[2025-05-25 22:23:33,634.634] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:23:33,635.635] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:33] "POST /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:23:33,642.642] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:33] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:23:33,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:23:33,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:23:33,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 414.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:23:33,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:23:33,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 237.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:23:33,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:23:33,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 237.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:23:33,901.901] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:23:33,902.902] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:33] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:23:40,893.893] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:40] "OPTIONS /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:23:40,896.896] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:23:40,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:23:40,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 421.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:23:40,899.899] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO api_key (account_id, api_key, is_active, remark) VALUES (%(account_id)s::UUID, %(api_key)s, %(is_active)s, %(remark)s) RETURNING api_key.id, api_key.updated_at, api_key.created_at
[2025-05-25 22:23:40,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219.5s ago] {'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'api_key': 'llmops-v1/49nfX10c1r7fEXQDjvjX5I905DDIM2Dprxqt4p9GgyxsAymZzX-6UAJAmb9s54dF', 'is_active': False, 'remark': ''}
[2025-05-25 22:23:40,901.901] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:23:40,902.902] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:40] "POST /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:23:41,142.142] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:41] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:23:41,455.455] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:23:41,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:23:41,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 422.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:23:41,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:23:41,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:23:41,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:23:41,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:23:41,461.461] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:23:41,461.461] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:41] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:23:45,986.986] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:23:45,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:23:45,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 427s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:23:45,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:23:45,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 250s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:23:45,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:23:45,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 250s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:23:45,992.992] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:23:45,992.992] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:23:45] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:24:48,267.267] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-25 22:24:48,277.277] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:24:48] "[35m[1mOPTIONS /openapi/api-keys/undefined/delete HTTP/1.1[0m" 500 -
[2025-05-25 22:24:48,532.532] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:24:48] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:24:48,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:24:48,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:24:48,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 489.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:24:48,846.846] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:24:48,846.846] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:24:48,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:24:48,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:24:48,849.849] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:24:48,850.850] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:24:48] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:25:00,491.491] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:25:00] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:25:00,495.495] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:25:00,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:25:00,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:25:00,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:25:00,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:25:00,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:25:00,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:25:00,504.504] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:25:00,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:25:00] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:25:00,807.807] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:25:00] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:25:01,118.118] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:25:01,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:25:01,119.119] base.py -> _exec_single_context line:1901 [INFO]: [cached since 502.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:25:01,121.121] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:25:01,121.121] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:25:01] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:25:28,774.774] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:25:28,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:25:28,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:25:28,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:25:28,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:25:28,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:25:28,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:25:28,779.779] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:25:28,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:25:28] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-05-25 22:27:00,954.954] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:00] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:27:00,956.956] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:00] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:27:01,264.264] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:27:01,265.265] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:27:01,266.266] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:27:01,266.266] base.py -> _exec_single_context line:1901 [INFO]: [cached since 622.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:27:01,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:27:01,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 622.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:27:01,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:27:01,269.269] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:27:01,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:27:01,269.269] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:01] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:27:01,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:27:01,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:27:01,273.273] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:27:01,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:01] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:27:29,415.415] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:29] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:27:29,419.419] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:27:29,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:27:29,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 650.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:27:29,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:27:29,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 473.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:27:29,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:27:29,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 473.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:27:29,428.428] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:27:29,428.428] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:29] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:27:29,730.730] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:29] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:27:30,037.037] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:27:30,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:27:30,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 651s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:27:30,042.042] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:27:30,042.042] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:27:30] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:31:32,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:32] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:31:32,781.781] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:31:32,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:31:32,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:31:32,786.786] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:31:32,786.786] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:32] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:31:32,850.850] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:32] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:31:33,030.030] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:31:33,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:31:33,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 894s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:31:33,032.032] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:31:33,032.032] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:33] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:31:33,155.155] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:31:33,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:31:33,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 894.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:31:33,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:31:33,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 717.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:31:33,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:31:33,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 717.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:31:33,160.160] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:31:33,160.160] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:33] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:31:36,767.767] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:31:36,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:31:36,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 897.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:31:36,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:31:36,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 720.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:31:36,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:31:36,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 720.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:31:36,773.773] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:31:36,773.773] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:31:36] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:06,883.883] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:06] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:07,196.196] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:07,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:07,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1048s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:07,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:34:07,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 871.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:34:07,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:34:07,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 871.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:34:07,202.202] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:07,202.202] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:07] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:17,293.293] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:17] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:17,298.298] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:17,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:17,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1058s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:17,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:34:17,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 881.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:34:17,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:34:17,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 881.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:34:17,306.306] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:17,307.307] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:17] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:17,597.597] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:17] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:34:17,911.911] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:17,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:17,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1059s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:17,912.912] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:17,913.913] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:17] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:34:35,911.911] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:35] "OPTIONS /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:35,915.915] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:35,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:35,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1077s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:35,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.id = %(pk_1)s::UUID
[2025-05-25 22:34:35,920.920] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:35,921.921] base.py -> _exec_single_context line:1896 [INFO]: UPDATE api_key SET is_active=%(is_active)s WHERE api_key.id = %(api_key_id)s::UUID
[2025-05-25 22:34:35,922.922] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'is_active': True, 'api_key_id': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:35,925.925] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:34:35,926.926] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:35] "POST /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:38,228.228] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:38] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:38,533.533] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:38] "OPTIONS /account HTTP/1.1" 200 -
[2025-05-25 22:34:38,535.535] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:38,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:38,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1080s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:38,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:34:38,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 902.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:34:38,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:34:38,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 902.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:34:38,540.540] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:38,541.541] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:38] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:38,810.810] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:38,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:38,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1080s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:38,812.812] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:38,812.812] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:38] "GET /account HTTP/1.1" 200 -
[2025-05-25 22:34:39,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:39] "OPTIONS /openapi/api-keys/3de1e805-b2b7-4033-93e8-0727f320a8a5/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:39,748.748] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:39,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:39,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1081s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:39,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.id = %(pk_1)s::UUID
[2025-05-25 22:34:39,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.831s ago] {'pk_1': UUID('3de1e805-b2b7-4033-93e8-0727f320a8a5')}
[2025-05-25 22:34:39,752.752] base.py -> _exec_single_context line:1896 [INFO]: UPDATE api_key SET is_active=%(is_active)s WHERE api_key.id = %(api_key_id)s::UUID
[2025-05-25 22:34:39,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.83s ago] {'is_active': True, 'api_key_id': UUID('3de1e805-b2b7-4033-93e8-0727f320a8a5')}
[2025-05-25 22:34:39,762.762] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:34:39,765.765] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:39] "POST /openapi/api-keys/3de1e805-b2b7-4033-93e8-0727f320a8a5/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:41,083.083] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:41] "OPTIONS /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:41,410.410] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:41,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:41,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1082s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:41,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.id = %(pk_1)s::UUID
[2025-05-25 22:34:41,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.493s ago] {'pk_1': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:41,414.414] base.py -> _exec_single_context line:1896 [INFO]: UPDATE api_key SET is_active=%(is_active)s WHERE api_key.id = %(api_key_id)s::UUID
[2025-05-25 22:34:41,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.492s ago] {'is_active': False, 'api_key_id': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:41,415.415] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:34:41,415.415] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:41] "POST /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/is-active HTTP/1.1" 200 -
[2025-05-25 22:34:45,229.229] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:45] "OPTIONS /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/delete HTTP/1.1" 200 -
[2025-05-25 22:34:45,232.232] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:45,232.232] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:45,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1086s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:45,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.id = %(pk_1)s::UUID
[2025-05-25 22:34:45,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.315s ago] {'pk_1': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:45,246.246] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM api_key WHERE api_key.id = %(id)s::UUID
[2025-05-25 22:34:45,246.246] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'id': UUID('e9e3abac-04e6-4752-b776-dcaa31aadc85')}
[2025-05-25 22:34:45,247.247] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-25 22:34:45,247.247] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:45] "POST /openapi/api-keys/e9e3abac-04e6-4752-b776-dcaa31aadc85/delete HTTP/1.1" 200 -
[2025-05-25 22:34:45,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:45] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-05-25 22:34:45,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-25 22:34:45,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-25 22:34:45,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1087s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-25 22:34:45,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-25 22:34:45,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 909.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-05-25 22:34:45,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-05-25 22:34:45,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 909.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-25 22:34:45,810.810] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-25 22:34:45,810.810] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [25/May/2025 22:34:45] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
