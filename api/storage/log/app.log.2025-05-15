[2025-05-15 09:48:49,284.284] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 09:48:49,286.286] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 09:48:49,290.290] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 09:49:10,997.997] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 09:49:11,015.015] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 09:49:27,790.790] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 09:49:27,790.790] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:49:27,794.794] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 09:49:27,794.794] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:49:27,796.796] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 09:49:27,796.796] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:49:27,796.796] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 09:49:27,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 09:49:27,801.801] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 09:49:27,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 09:49:27,811.811] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '123e4567-e89b-12d3-a456-426614174000'}
[2025-05-15 09:49:27,816.816] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 09:49:27,817.817] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 09:49:27] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 09:52:44,900.900] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 09:52:44,900.900] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 09:52:44,901.901] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 09:53:04,715.715] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 09:53:04,725.725] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 09:53:08,193.193] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 09:53:08,193.193] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:53:08,196.196] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 09:53:08,196.196] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:53:08,199.199] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 09:53:08,199.199] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 09:53:08,200.200] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 09:53:08,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 09:53:08,204.204] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 09:53:08,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 09:53:08,211.211] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 09:53:08,215.215] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 09:53:08,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 09:53:08] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 10:30:58,154.154] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 10:30:58,155.155] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 10:30:58,159.159] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 10:31:15,776.776] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 10:31:15,795.795] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 10:31:42,737.737] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 10:31:42,739.739] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 10:31:42,742.742] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 10:31:42,742.742] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 10:31:42,744.744] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 10:31:42,744.744] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 10:31:42,745.745] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 10:31:42,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 10:31:42,749.749] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 10:31:42,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 10:31:42,758.758] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00104s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 10:31:42,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 10:31:42,766.766] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 10:31:42,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 10:31:42,770.770] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 10:31:42,778.778] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, dialog_round=%(dialog_round)s, preset_prompt=%(preset_prompt)s, datasets=%(datasets)s::JSONB, retrieval_config=%(retrieval_config)s::JSONB, opening_statement=%(opening_statement)s, opening_questions=%(opening_questions)s::JSONB, review_config=%(review_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 10:31:42,778.778] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"retrieval_strategy": "semantic", "k": 5, "score": 0.7}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 10, 31, 42, 776629), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 10:31:42,784.784] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 10:31:42,787.787] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 10:31:42] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 10:32:14,019.019] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-15 10:32:14,034.034] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 10:32:14] "[35m[1mGET /apps//draft-app-config HTTP/1.1[0m" 500 -
[2025-05-15 10:32:22,263.263] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 10:32:22,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 10:32:22,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.52s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 10:32:22,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 10:32:22,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.51s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 10:32:22,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 10:32:22,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.5s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 10:32:22,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 10:32:22,269.269] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 10:32:22,270.270] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 10:32:22,271.271] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 10:32:22] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:28:53,452.452] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 11:28:53,453.453] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 11:28:53,456.456] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 11:29:13,457.457] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 11:29:13,468.468] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 11:29:48,307.307] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 11:29:48,308.308] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:29:48,310.310] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 11:29:48,311.311] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:29:48,311.311] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 11:29:48,312.312] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:29:48,312.312] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:29:48,315.315] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:29:48,316.316] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:29:48,320.320] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:29:48,321.321] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:29:48,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:29:48,325.325] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:29:48,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:29:48,329.329] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:29:48,333.333] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:29:48,333.333] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 29, 48, 333356), 'created_at': datetime.datetime(2025, 5, 15, 3, 29, 48, 333356)}
[2025-05-15 11:29:48,348.348] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:29:48,350.350] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:29:48,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:29:48,352.352] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': UUID('9e4b9e6b-3f49-44cf-84da-5a1494f65629')}
[2025-05-15 11:29:48,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:29:48,353.353] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:29:48,355.355] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:29:48,355.355] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'app_config_id': UUID('9e4b9e6b-3f49-44cf-84da-5a1494f65629'), 'status': <AppStatus.PUBLISHED: 'published'>, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:29:48,358.358] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:29:48,359.359] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:29:48,359.359] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:29:48,359.359] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00021s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:29:48,360.360] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:29:48,361.361] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:29:48,362.362] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:29:48,362.362] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:29:48,364.364] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:29:48,364.364] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:29:48,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:29:48,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0116s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:29:48,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:29:48,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04049s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:29:48,366.366] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: type object 'AppDatasetJoin' has no attribute 'version'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 59, in publish
    self.app_service.publish_draft_app_config(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 287, in publish_draft_app_config
    max_version = self.db.session.query(func.coalesce(func.max(AppDatasetJoin.version), 0)).filter(
AttributeError: type object 'AppDatasetJoin' has no attribute 'version'
[2025-05-15 11:29:48,370.370] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 11:29:48,381.381] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:29:48] "[35m[1mPOST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1[0m" 500 -
[2025-05-15 11:30:11,568.568] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 11:30:12,966.966] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 11:30:30,228.228] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 11:30:30,243.243] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 11:30:31,050.050] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 11:30:31,051.051] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:30:31,056.056] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 11:30:31,057.057] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:30:31,058.058] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 11:30:31,059.059] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 11:30:31,060.060] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:30:31,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:30:31,066.066] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:30:31,076.076] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:30:31,076.076] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:30:31,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:30:31,083.083] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:30:31,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:30:31,090.090] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:30:31,097.097] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:30:31,097.097] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 30, 31, 97158), 'created_at': datetime.datetime(2025, 5, 15, 3, 30, 31, 97158)}
[2025-05-15 11:30:31,116.116] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:30:31,118.118] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:30:31,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:30:31,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('a0d881ed-3ac3-499e-976f-d3aa19a8b2e9')}
[2025-05-15 11:30:31,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:30:31,125.125] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:30:31,127.127] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:30:31,127.127] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'app_config_id': UUID('a0d881ed-3ac3-499e-976f-d3aa19a8b2e9'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:30:31,129.129] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:30:31,130.130] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:30:31,132.132] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:30:31,132.132] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:30:31,134.134] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:30:31,135.135] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:30:31,137.137] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:30:31,137.137] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:30:31,139.139] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:30:31,140.140] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:30:31,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:30:31,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01748s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:30:31,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:30:31,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06118s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:30:31,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:30:31,148.148] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:30:31,156.156] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 11:30:31,156.156] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 1, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:30:31,159.159] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:30:31,162.162] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:30:31] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 11:31:14,321.321] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:31:14,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:31:14,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.26s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:31:14,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:31:14,324.324] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.25s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:31:14,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:31:14,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.24s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:31:14,328.328] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 11:31:14,329.329] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:31:14] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-15 11:32:11,434.434] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:11,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:32:11,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:32:11,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:32:11,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:11,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:32:11,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.4s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:32:11,441.441] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 11:32:11,441.441] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:32:11] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-15 11:32:14,465.465] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:14,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:32:14,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:32:14,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:32:14,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:14,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:32:14,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:32:14,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:32:14,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:32:14,471.471] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:32:14,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 32, 14, 471826), 'created_at': datetime.datetime(2025, 5, 15, 3, 32, 14, 471826)}
[2025-05-15 11:32:14,473.473] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:32:14,473.473] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:14,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:32:14,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'pk_1': UUID('c288120f-bdcb-4f6d-a410-381295f937b7')}
[2025-05-15 11:32:14,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:32:14,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:14,476.476] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:32:14,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'app_config_id': UUID('c288120f-bdcb-4f6d-a410-381295f937b7'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:14,477.477] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:32:14,477.477] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:14,477.477] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:32:14,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:14,478.478] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:32:14,478.478] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:14,480.480] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:32:14,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:32:14,481.481] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:32:14,482.482] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:32:14,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:32:14,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:32:14,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:32:14,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.4s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:32:14,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:32:14,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:32:14,484.484] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 11:32:14,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 2, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:32:14,486.486] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:32:14,487.487] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:32:14] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 11:37:20,157.157] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:20,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:37:20,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 409.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:37:20,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:37:20,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 409.1s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:20,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:37:20,162.162] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:37:20,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:37:20,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 409.1s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:37:20,165.165] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:37:20,166.166] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'updated_at': datetime.datetime(2025, 5, 15, 11, 37, 20, 165254), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:37:20,170.170] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:20,171.171] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:37:20] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:37:36,407.407] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:36,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:37:36,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:37:36,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:37:36,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:36,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:37:36,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:37:36,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:37:36,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:37:36,412.412] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:37:36,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 37, 36, 412664), 'created_at': datetime.datetime(2025, 5, 15, 3, 37, 36, 412664)}
[2025-05-15 11:37:36,426.426] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:36,436.436] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:36,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:37:36,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'pk_1': UUID('2c54c8b4-c305-46fe-ae2d-5249a8f5e25b')}
[2025-05-15 11:37:36,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:37:36,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:36,440.440] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:37:36,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_config_id': UUID('2c54c8b4-c305-46fe-ae2d-5249a8f5e25b'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:36,440.440] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:36,441.441] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:36,442.442] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:37:36,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:36,442.442] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:36,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:36,444.444] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:37:36,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:37:36,446.446] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:36,447.447] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:37:36,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:37:36,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:37:36,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:37:36,454.454] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.4s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:37:36,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:37:36,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:37:36,457.457] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 11:37:36,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 10, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 3, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:37:36,470.470] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:37:36,471.471] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:37:36] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 11:39:45,468.468] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:39:45,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:39:45,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:39:45,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:39:45,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:39:45,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:39:45,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:39:45,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:39:45,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:39:45,476.476] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:39:45,476.476] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'dialog_round': 5, 'updated_at': datetime.datetime(2025, 5, 15, 11, 39, 45, 476158), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:39:45,482.482] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:39:45,492.492] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:39:45] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:41:44,205.205] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:41:44,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:41:44,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 673.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:41:44,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:41:44,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 673.1s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:41:44,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:41:44,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:41:44,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:41:44,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 673.1s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:41:44,211.211] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:41:44,214.214] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00320s] {'opening_questions': '["\\u597d\\u597d", "haohao"]', 'updated_at': datetime.datetime(2025, 5, 15, 11, 41, 44, 210766), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:41:44,215.215] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:41:44,226.226] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:41:44] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:42:38,726.726] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:42:38,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:42:38,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:42:38,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:42:38,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:42:38,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:42:38,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:42:38,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:42:38,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:42:38,734.734] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:42:38,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 42, 38, 734421), 'created_at': datetime.datetime(2025, 5, 15, 3, 42, 38, 734421)}
[2025-05-15 11:42:38,736.736] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:42:38,738.738] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:42:38,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:42:38,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'pk_1': UUID('ac850a5f-16a5-4698-a22e-9bcb1d617ac4')}
[2025-05-15 11:42:38,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:42:38,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:42:38,750.750] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:42:38,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_config_id': UUID('ac850a5f-16a5-4698-a22e-9bcb1d617ac4'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:42:38,751.751] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:42:38,751.751] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:42:38,752.752] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:42:38,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:42:38,753.753] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:42:38,753.753] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:42:38,754.754] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:42:38,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:42:38,755.755] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:42:38,756.756] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:42:38,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:42:38,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:42:38,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:42:38,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:42:38,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:42:38,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:42:38,765.765] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 11:42:38,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.6s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 4, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:42:38,779.779] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:42:38,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:42:38] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 11:53:05,199.199] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:05,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:53:05,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1354s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:53:05,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:05,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1354s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:05,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:53:05,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 945s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:05,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:05,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1354s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:05,206.206] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:53:05,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 945s ago] {'updated_at': datetime.datetime(2025, 5, 15, 11, 53, 5, 206701), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:53:05,207.207] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:05,208.208] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:53:05] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:53:14,282.282] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:14,282.282] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:53:14,283.283] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:53:14,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:14,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:14,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:53:14,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:14,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:14,286.286] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:14,286.286] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:53:14,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.1s ago] {'updated_at': datetime.datetime(2025, 5, 15, 11, 53, 14, 286812), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:53:14,287.287] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:14,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:53:14] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:53:23,774.774] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:23,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:53:23,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1373s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:53:23,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:23,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1373s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:23,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:53:23,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 963.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:23,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:23,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1373s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:23,780.780] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:53:23,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 699.6s ago] {'opening_questions': '["\\u597d\\u597d1", "haohao"]', 'updated_at': datetime.datetime(2025, 5, 15, 11, 53, 23, 780782), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:53:23,781.781] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:23,793.793] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:53:23] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:53:36,925.925] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:36,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:53:36,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1386s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:53:36,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:36,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1386s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:36,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 11:53:36,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 976.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:36,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:36,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1386s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:36,932.932] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 11:53:36,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.7s ago] {'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'updated_at': datetime.datetime(2025, 5, 15, 11, 53, 36, 931903), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 11:53:36,936.936] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:36,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:53:36] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 11:53:55,674.674] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:55,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 11:53:55,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 11:53:55,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:55,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:55,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:55,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:55,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 11:53:55,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:55,680.680] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 11:53:55,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 3, 53, 55, 680251), 'created_at': datetime.datetime(2025, 5, 15, 3, 53, 55, 680251)}
[2025-05-15 11:53:55,682.682] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:55,691.691] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:55,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 11:53:55,692.692] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'pk_1': UUID('50d2db4a-c15e-4f9f-949b-4b800f185ae0')}
[2025-05-15 11:53:55,694.694] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:55,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:55,695.695] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 11:53:55,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_config_id': UUID('50d2db4a-c15e-4f9f-949b-4b800f185ae0'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:55,695.695] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:55,696.696] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:55,697.697] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 11:53:55,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:55,697.697] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:55,698.698] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:55,698.698] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 11:53:55,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 11:53:55,700.700] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:55,700.700] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 11:53:55,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 11:53:55,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 11:53:55,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:55,702.702] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 11:53:55,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 11:53:55,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:53:55,704.704] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 11:53:55,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1405s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 5, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 11:53:55,706.706] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 11:53:55,707.707] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 11:53:55] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 12:30:12,088.088] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 12:30:13,693.693] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 12:30:29,843.843] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 12:30:29,862.862] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 19:03:52,375.375] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 19:03:52,376.376] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 19:03:52,379.379] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 19:04:13,062.062] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 19:04:13,080.080] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 19:04:13,982.982] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 19:04:13,983.983] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:04:13,986.986] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 19:04:13,986.986] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:04:13,988.988] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 19:04:13,988.988] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:04:13,988.988] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:04:13,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:04:13,994.994] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00081s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:04:14,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:04:14,002.002] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:04:14,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 19:04:14,011.011] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00084s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 19:04:14,016.016] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 19:04:14,017.017] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:04:14] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-15 19:05:04,944.944] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:05:04,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:05:04,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:05:04,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:05:04,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.94s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:05:04,949.949] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-05-15 19:05:04,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_config_id': None, 'status': <AppStatus.DRAFT: 'draft'>, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:05:04,952.952] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 19:05:04,954.954] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:05:04,955.955] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 19:05:04,955.955] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00021s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:05:04,957.957] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 19:05:04,958.958] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:05:04] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/cancel-publish HTTP/1.1" 200 -
[2025-05-15 19:05:10,032.032] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:05:10,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:05:10,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 56.04s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:05:10,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:05:10,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 56.03s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:05:10,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 19:05:10,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 56.03s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 19:05:10,036.036] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 19:05:10,037.037] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:05:10] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-05-15 19:07:16,614.614] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:07:16,614.614] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:07:16,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:07:16,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:07:16,616.616] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:07:16,617.617] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 72, in cancel_publish
    self.app_service.cancel_publish_app_config(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 310, in cancel_publish_app_config
    raise FailException("当前应用未发布 请核实后重试")
internal.exception.exception.FailException
[2025-05-15 19:07:16,625.625] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 19:07:16,626.626] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:07:16] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/cancel-publish HTTP/1.1" 200 -
[2025-05-15 19:08:06,144.144] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 405 Method Not Allowed: The method is not allowed for the requested URL.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 624, in match
    raise MethodNotAllowed(valid_methods=list(e.have_match_for)) from None
werkzeug.exceptions.MethodNotAllowed: 405 Method Not Allowed: The method is not allowed for the requested URL.
[2025-05-15 19:08:06,171.171] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:08:06] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1[0m" 500 -
[2025-05-15 19:08:44,516.516] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:08:44,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:08:44,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:08:44,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:08:44,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:08:44,520.520] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: type object 'AppConfigVersion' has no attribute 'status'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 84, in get_publish_histories_with_page
    app_config_versions, paginator = self.app_service.get_publish_histories_with_page(app_id, req, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 340, in get_publish_histories_with_page
    AppConfigVersion.status == AppStatus.PUBLISHED,
AttributeError: type object 'AppConfigVersion' has no attribute 'status'
[2025-05-15 19:08:44,520.520] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 19:08:44,530.530] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:08:44] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish-histories HTTP/1.1[0m" 500 -
[2025-05-15 19:09:08,103.103] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 19:09:09,340.340] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 19:09:28,462.462] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 19:09:28,474.474] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 19:09:29,543.543] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 19:09:29,544.544] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:09:29,547.547] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 19:09:29,547.547] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:09:29,550.550] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 19:09:29,550.550] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 19:09:29,551.551] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 19:09:29,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 19:09:29,557.557] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 19:09:29,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 19:09:29,565.565] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 19:09:29,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s ORDER BY app_config_version.version DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-15 19:09:29,574.574] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppStatus.PUBLISHED: 'published'>, 'param_1': 20, 'param_2': 0}
[2025-05-15 19:09:29,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app_config_version.id AS id, app_config_version.app_id AS app_id, app_config_version.model_config AS model_config, app_config_version.dialog_round AS dialog_round, app_config_version.preset_prompt AS preset_prompt, app_config_version.tools AS tools, app_config_version.workflows AS workflows, app_config_version.datasets AS datasets, app_config_version.retrieval_config AS retrieval_config, app_config_version.long_term_memory AS long_term_memory, app_config_version.opening_statement AS opening_statement, app_config_version.opening_questions AS opening_questions, app_config_version.speech_to_text AS speech_to_text, app_config_version.text_to_speech AS text_to_speech, app_config_version.suggested_after_answer AS suggested_after_answer, app_config_version.review_config AS review_config, app_config_version.version AS version, app_config_version.config_type AS config_type, app_config_version.updated_at AS updated_at, app_config_version.created_at AS created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s) AS anon_1
[2025-05-15 19:09:29,582.582] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppStatus.PUBLISHED: 'published'>}
[2025-05-15 19:09:29,587.587] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 19:09:29,589.589] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 19:09:29] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish-histories HTTP/1.1" 200 -
[2025-05-15 20:19:06,348.348] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 20:19:06,349.349] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 20:19:06,352.352] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:19:23,737.737] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:19:23,752.752] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:19:41,114.114] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-15 20:19:41,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:19:41] "[35m[1mPOST /apps//fallback-history HTTP/1.1[0m" 500 -
[2025-05-15 20:20:09,090.090] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:20:09,091.091] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:20:09,094.094] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:20:09,094.094] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:20:09,096.096] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:20:09,096.096] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:20:09,097.097] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:20:09,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:20:09,102.102] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:20:09,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:20:09,115.115] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:20:09,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:20:09,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': '00214d01-c039-4509-aadc-303f6238d0bb'}
[2025-05-15 20:20:09,123.123] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:20:09,129.129] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:20:09,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:20:09] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:21:15,406.406] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:21:15,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:21:15,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.31s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:21:15,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:21:15,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.29s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:21:15,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:21:15,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.29s ago] {'pk_1': '00214d01-c039-4509-aadc-303f6238d0bb'}
[2025-05-15 20:21:15,412.412] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:21:15,418.418] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:21:15,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:21:15] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:21:17,342.342] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:21:17,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:21:17,343.343] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.24s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:21:17,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:21:17,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.23s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:21:17,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s ORDER BY app_config_version.version DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-05-15 20:21:17,354.354] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00089s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppStatus.PUBLISHED: 'published'>, 'param_1': 20, 'param_2': 0}
[2025-05-15 20:21:17,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app_config_version.id AS id, app_config_version.app_id AS app_id, app_config_version.model_config AS model_config, app_config_version.dialog_round AS dialog_round, app_config_version.preset_prompt AS preset_prompt, app_config_version.tools AS tools, app_config_version.workflows AS workflows, app_config_version.datasets AS datasets, app_config_version.retrieval_config AS retrieval_config, app_config_version.long_term_memory AS long_term_memory, app_config_version.opening_statement AS opening_statement, app_config_version.opening_questions AS opening_questions, app_config_version.speech_to_text AS speech_to_text, app_config_version.text_to_speech AS text_to_speech, app_config_version.suggested_after_answer AS suggested_after_answer, app_config_version.review_config AS review_config, app_config_version.version AS version, app_config_version.config_type AS config_type, app_config_version.updated_at AS updated_at, app_config_version.created_at AS created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s) AS anon_1
[2025-05-15 20:21:17,362.362] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00066s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppStatus.PUBLISHED: 'published'>}
[2025-05-15 20:21:17,365.365] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:21:17,365.365] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:21:17] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish-histories HTTP/1.1" 200 -
[2025-05-15 20:21:29,471.471] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:21:29,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:21:29,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.37s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:21:29,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:21:29,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.36s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:21:29,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:21:29,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.36s ago] {'pk_1': 'f6a34259-604c-44ce-8470-751314119873'}
[2025-05-15 20:21:29,477.477] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:21:29,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:21:29,485.485] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:21:29] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:23:17,547.547] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:23:19,198.198] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:23:37,535.535] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:23:37,545.545] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:23:38,389.389] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:23:38,389.389] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:23:38,392.392] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:23:38,392.392] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:23:38,393.393] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:23:38,393.393] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:23:38,394.394] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:23:38,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:23:38,397.397] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:23:38,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:23:38,408.408] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:23:38,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:23:38,412.412] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': 'f6a34259-604c-44ce-8470-751314119873'}
[2025-05-15 20:23:38,414.414] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:23:38,423.423] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:23:38,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:23:38] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:24:13,744.744] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2025-05-15 20:24:15,227.227] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:24:31,910.910] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:24:31,922.922] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:24:32,491.491] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:24:32,491.491] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:24:32,493.493] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:24:32,494.494] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:24:32,496.496] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:24:32,496.496] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:24:32,497.497] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:24:32,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:24:32,500.500] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:24:32,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:24:32,507.507] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:24:32,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:24:32,512.512] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': 'f6a34259-604c-44ce-8470-751314119873'}
[2025-05-15 20:24:32,514.514] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:24:32,519.519] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:24:32,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:24:32] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:26:53,416.416] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:26:53,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:26:53,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:26:53,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:26:53,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:26:53,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:26:53,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.9s ago] {'pk_1': '9c2f732e-604b-4732-8f9d-f74eb894bf7d'}
[2025-05-15 20:26:53,423.423] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 398, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:26:53,427.427] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:26:53,428.428] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:26:53] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:28:22,186.186] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\schema\\app_schema.py', reloading
[2025-05-15 20:28:23,611.611] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:28:38,533.533] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:28:38,544.544] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:29:07,326.326] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:29:08,774.774] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:29:23,824.824] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:29:23,834.834] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:29:24,482.482] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:29:24,482.482] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:29:24,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:29:24,508.508] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:29:24,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:29:24,515.515] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'pk_1': '9c2f732e-604b-4732-8f9d-f74eb894bf7d'}
[2025-05-15 20:29:24,515.515] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 397, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:29:24,515.515] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:29:24,515.515] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:29:24] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:32:30,017.017] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-15 20:32:30,037.037] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:32:30] "[35m[1mPOST /apps//publish HTTP/1.1[0m" 500 -
[2025-05-15 20:32:38,840.840] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:38,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:32:38,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:32:38,843.843] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:32:38,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:38,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:32:38,860.860] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00097s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:32:38,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:32:38,867.867] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00088s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:32:38,877.877] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id, app_config.suggested_after_answer
[2025-05-15 20:32:38,877.877] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00094s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 5, 15, 12, 32, 38, 877088), 'created_at': datetime.datetime(2025, 5, 15, 12, 32, 38, 877088)}
[2025-05-15 20:32:38,892.892] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:32:38,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:38,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-05-15 20:32:38,896.896] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('30308af5-a139-4c81-a21f-92b15f56e5c5')}
[2025-05-15 20:32:38,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:32:38,899.899] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:38,901.901] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-05-15 20:32:38,902.902] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'app_config_id': UUID('30308af5-a139-4c81-a21f-92b15f56e5c5'), 'status': <AppStatus.PUBLISHED: 'published'>, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:38,904.904] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:32:38,905.905] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:38,906.906] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-05-15 20:32:38,906.906] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:38,908.908] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:32:38,909.909] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:38,911.911] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-05-15 20:32:38,911.911] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:32:38,913.913] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:32:38,914.914] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:38,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:32:38,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.016s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:38,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:32:38,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05766s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:32:38,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:32:38,920.920] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'coalesce_2': 0, 'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 20:32:38,923.923] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-05-15 20:32:38,924.924] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'model_config': '{}', 'dialog_round': 5, 'preset_prompt': '你是一个AI助手', 'tools': '[]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': '你好，我是AI助手', 'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": false, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": false, "preset_response": "\\u9884\\u8bbe\\u54cd\\u5e94"}, "outputs_config": {"enable": false}}', 'version': 6, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-05-15 20:32:38,925.925] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:32:38,927.927] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:32:38] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/publish HTTP/1.1" 200 -
[2025-05-15 20:32:54,967.967] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:32:54,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:32:54,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 210.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:32:54,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:32:54,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 210.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:32:54,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:32:54,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 210.5s ago] {'pk_1': '9c2f732e-604b-4732-8f9d-f74eb894bf7d'}
[2025-05-15 20:32:54,971.971] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 397, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:32:54,978.978] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:32:54,979.979] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:32:54] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:35:31,737.737] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:35:31,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:35:31,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 367.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:35:31,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:35:31,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 367.2s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:35:31,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:35:31,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.9s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:35:31,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:35:31,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:35:31,743.743] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:35:31,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:35:31] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:37:01,812.812] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:37:01,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:37:01,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:37:01,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:37:01,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:37:01,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:37:01,817.817] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.3s ago] {'pk_1': 'b12cbe63-5a38-434b-ab98-2ea2521a99d2'}
[2025-05-15 20:37:01,817.817] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 368, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 397, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:37:01,827.827] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:37:01,828.828] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:37:01] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:37:03,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:37:03,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:37:03,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 459.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:37:03,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:37:03,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 459.4s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:37:03,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:37:03,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 265s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:37:03,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:37:03,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 265s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:37:03,900.900] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:37:03,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:37:03] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:37:51,055.055] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:37:51,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:37:51,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 506.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:37:51,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:37:51,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 506.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:37:51,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:37:51,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.2s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:37:51,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:37:51,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:37:51,061.061] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:37:51,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:37:51] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:41:25,888.888] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:41:27,165.165] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:41:46,173.173] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:41:46,188.188] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:41:47,258.258] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:41:47,258.258] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:41:47,261.261] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:41:47,262.262] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:41:47,263.263] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:41:47,263.263] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:41:47,264.264] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:41:47,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:41:47,270.270] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:41:47,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:41:47,283.283] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:41:47,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:41:47,287.287] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': 'b12cbe63-5a38-434b-ab98-2ea2521a99d2'}
[2025-05-15 20:41:47,291.291] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 370, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 399, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:41:47,299.299] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:41:47,299.299] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:41:47] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:42:30,618.618] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:42:31,999.999] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:42:48,172.172] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:42:48,179.179] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:42:48,801.801] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:42:48,802.802] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:42:48,804.804] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:42:48,804.804] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:42:48,806.806] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:42:48,806.806] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:42:48,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:42:48,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:42:48,810.810] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:42:48,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:42:48,818.818] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:42:48,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:42:48,822.822] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': 'b12cbe63-5a38-434b-ab98-2ea2521a99d2'}
[2025-05-15 20:42:48,826.826] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 101, in fallback_history_to_draft
    self.app_service.fallback_history_to_draft(app_id, req.app_config_version_id.data, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 371, in fallback_history_to_draft
    draft_app_config_dict = self._validate_draft_app_config(draft_app_config_dict, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 400, in _validate_draft_app_config
    raise ValidateErrorException("草稿配置字段出错，请核实后重试")
internal.exception.exception.ValidateErrorException
[2025-05-15 20:42:48,831.831] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:42:48,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:42:48] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:48:56,060.060] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:48:57,217.217] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:49:14,953.953] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:49:14,980.980] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:49:19,154.154] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 20:49:21,383.383] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 20:49:36,252.252] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 20:49:36,257.257] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 20:49:39,265.265] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 20:49:39,265.265] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:49:39,267.267] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 20:49:39,268.268] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:49:39,270.270] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 20:49:39,270.270] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 20:49:39,271.271] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:49:39,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:49:39,274.274] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:49:39,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:49:39,283.283] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:49:39,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:49:39,287.287] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': 'b12cbe63-5a38-434b-ab98-2ea2521a99d2'}
[2025-05-15 20:49:39,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 20:49:39,293.293] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:49:39,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:49:39,297.297] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:49:39,300.300] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 20:49:39,300.300] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'opening_questions': '["\\u597d\\u597d", "haohao"]', 'updated_at': datetime.datetime(2025, 5, 15, 20, 49, 39, 298774), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 20:49:39,303.303] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:49:39,305.305] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:49:39] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:49:45,548.548] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:49:45,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:49:45,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.275s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:49:45,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:49:45,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.268s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:49:45,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:49:45,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.255s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:49:45,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:49:45,553.553] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:49:45,554.554] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:49:45,555.555] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:49:45] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:50:04,433.433] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:50:04,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:50:04,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.16s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:50:04,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:50:04,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.15s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:50:04,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:50:04,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.15s ago] {'pk_1': '9c2f732e-604b-4732-8f9d-f74eb894bf7d'}
[2025-05-15 20:50:04,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 20:50:04,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.15s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:50:04,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:50:04,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.16s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:50:04,454.454] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 20:50:04,455.455] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'dialog_round': 10, 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'updated_at': datetime.datetime(2025, 5, 15, 20, 50, 4, 454927), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 20:50:04,456.456] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:50:04,457.457] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:50:04] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:50:06,592.592] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:50:06,592.592] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:50:06,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.32s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:50:06,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:50:06,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.31s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:50:06,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:50:06,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:50:06,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:50:06,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.05s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:50:06,601.601] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:50:06,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:50:06] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:50:32,936.936] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:50:32,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:50:32,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.66s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:50:32,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:50:32,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.66s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:50:32,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:50:32,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.65s ago] {'pk_1': '90e2f928-6e8a-47fd-b1ca-9cf628cd0af3'}
[2025-05-15 20:50:32,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 20:50:32,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.65s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:50:32,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:50:32,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.65s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:50:32,944.944] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 20:50:32,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.49s ago] {'dialog_round': 5, 'opening_questions': '["\\u597d\\u597d2", "haohao"]', 'updated_at': datetime.datetime(2025, 5, 15, 20, 50, 32, 943849), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 20:50:32,945.945] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:50:32,945.945] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:50:32] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:50:35,021.021] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:50:35,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:50:35,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.75s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:50:35,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:50:35,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.74s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:50:35,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:50:35,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.73s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:50:35,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:50:35,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.47s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:50:35,026.026] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:50:35,027.027] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:50:35] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 20:51:21,822.822] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:51:21,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:51:21,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:51:21,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:51:21,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:51:21,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.id = %(pk_1)s::UUID
[2025-05-15 20:51:21,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.5s ago] {'pk_1': '9c2f732e-604b-4732-8f9d-f74eb894bf7d'}
[2025-05-15 20:51:21,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 20:51:21,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:51:21,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:51:21,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.5s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:51:21,840.840] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 20:51:21,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.39s ago] {'dialog_round': 10, 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'updated_at': datetime.datetime(2025, 5, 15, 20, 51, 21, 840457), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 20:51:21,841.841] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 20:51:21,843.843] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:51:21] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/fallback-history HTTP/1.1" 200 -
[2025-05-15 20:51:23,611.611] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 20:51:23,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 20:51:23,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 20:51:23,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 20:51:23,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 20:51:23,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 20:51:23,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 20:51:23,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 20:51:23,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.06s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 20:51:23,618.618] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 20:51:23,619.619] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 20:51:23] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 22:17:53,448.448] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-05-15 22:17:53,449.449] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-05-15 22:17:53,452.452] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 22:18:15,916.916] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 22:18:15,932.932] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 22:19:36,358.358] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 22:19:36,358.358] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:19:36,361.361] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 22:19:36,361.361] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:19:36,362.362] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 22:19:36,363.363] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:19:36,363.363] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:19:36,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:19:36,367.367] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:19:36,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:19:36,375.375] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:19:36,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 22:19:36,380.380] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:19:36,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:19:36,384.384] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:19:36,389.389] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 22:19:36,389.389] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 5, 15, 22, 19, 36, 388447), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 22:19:36,391.391] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:19:36,394.394] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:19:36] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 22:20:37,458.458] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:20:37,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:20:37,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.09s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:20:37,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:20:37,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.09s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:20:37,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:20:37,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.08s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:20:37,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:20:37,465.465] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:20:37,468.468] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-15 22:20:37,472.472] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00293s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-15 22:20:37,490.490] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 22:20:37,490.490] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'debug_conversation_id': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:20:37,492.492] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:20:37,493.493] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:20:37,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-15 22:20:37,495.495] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033')}
[2025-05-15 22:20:37,497.497] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type set is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 110, in get_debug_conversation_summary
    return success_json({"summary", summary})
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 31, in success_json
    return json(Response(code=HttpCode.SUCCESS, message="", data=data))
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 26, in json
    return jsonify(data), 200
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\__init__.py", line 170, in jsonify
    return current_app.json.response(*args, **kwargs)  # type: ignore[return-value]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 214, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=self.mimetype
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 234, in dumps
    return cls(
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 201, in encode
    chunks = list(chunks)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 439, in _iterencode
    yield from _iterencode(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 431, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 438, in _iterencode
    o = _default(o)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type set is not JSON serializable
[2025-05-15 22:20:37,547.547] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:20:37,584.584] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:20:37] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1[0m" 500 -
[2025-05-15 22:21:56,592.592] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 22:21:57,996.996] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 22:22:19,648.648] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 22:22:19,658.658] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 22:23:37,095.095] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 22:23:37,096.096] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:23:37,098.098] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 22:23:37,098.098] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:23:37,099.099] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 22:23:37,099.099] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:23:37,100.100] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:23:37,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:23:37,103.103] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:23:37,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:23:37,109.109] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:23:37,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:23:37,113.113] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:23:37,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:23:37,118.118] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:23:37,120.120] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type set is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 110, in get_debug_conversation_summary
    return success_json({"summary", summary})
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 31, in success_json
    return json(Response(code=HttpCode.SUCCESS, message="", data=data))
  File "C:\Users\Lenovo\Desktop\llmops-api\pkg\response\response.py", line 26, in json
    return jsonify(data), 200
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\__init__.py", line 170, in jsonify
    return current_app.json.response(*args, **kwargs)  # type: ignore[return-value]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 214, in response
    f"{self.dumps(obj, **dump_args)}\n", mimetype=self.mimetype
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 179, in dumps
    return json.dumps(obj, **kwargs)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 234, in dumps
    return cls(
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 201, in encode
    chunks = list(chunks)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 439, in _iterencode
    yield from _iterencode(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 431, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 405, in _iterencode_dict
    yield from chunks
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 438, in _iterencode
    o = _default(o)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\json\provider.py", line 121, in _default
    raise TypeError(f"Object of type {type(o).__name__} is not JSON serializable")
TypeError: Object of type set is not JSON serializable
[2025-05-15 22:23:37,125.125] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:23:37,141.141] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:23:37] "[35m[1mGET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1[0m" 500 -
[2025-05-15 22:25:08,076.076] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\handler\\app_handler.py', reloading
[2025-05-15 22:25:09,589.589] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 22:25:34,173.173] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 22:25:34,188.188] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 22:26:05,889.889] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 22:26:05,890.890] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:26:05,892.892] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 22:26:05,892.892] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:26:05,893.893] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 22:26:05,894.894] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:26:05,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:26:05,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:26:05,898.898] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:26:05,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:26:05,905.905] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:26:05,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:26:05,911.911] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:26:05,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:26:05,915.915] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:26:05,917.917] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:26:05,918.918] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:26:05] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:27:00,714.714] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:27:00,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:27:00,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.82s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:27:00,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:27:00,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.81s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:27:00,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 22:27:00,722.722] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:27:00,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:27:00,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.81s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:27:00,728.728] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 22:27:00,728.728] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00072s] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 5, 15, 22, 27, 0, 724717), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 22:27:00,731.731] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:27:00,734.734] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:27:00] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 22:27:02,966.966] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:27:02,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:27:02,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.07s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:27:02,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:27:02,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.06s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:27:02,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:27:02,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.06s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:27:02,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:27:02,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.06s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:27:02,975.975] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 109, in get_debug_conversation_summary
    summary = self.app_service.get_debug_conversation_summary(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 389, in get_debug_conversation_summary
    raise FailException("该应用并未开启长期记忆，无法获取")
internal.exception.exception.FailException
[2025-05-15 22:27:02,981.981] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:27:02,982.982] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:27:02] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:27:09,769.769] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:27:09,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:27:09,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.87s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:27:09,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:27:09,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.87s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:27:09,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-05-15 22:27:09,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.052s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:27:09,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:27:09,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.86s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:27:09,776.776] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-05-15 22:27:09,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.049s ago] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 5, 15, 22, 27, 9, 776269), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-05-15 22:27:09,786.786] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:27:09,787.787] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:27:09] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-05-15 22:27:11,240.240] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:27:11,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:27:11,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.34s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:27:11,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:27:11,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.34s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:27:11,245.245] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:27:11,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.34s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:27:11,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:27:11,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.33s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:27:11,249.249] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:27:11,249.249] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:27:11] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:31:48,709.709] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-05-15 22:31:50,683.683] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-05-15 22:32:12,238.238] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-05-15 22:32:12,250.250] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-05-15 22:32:13,778.778] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-05-15 22:32:13,780.780] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:32:13,783.783] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-05-15 22:32:13,783.783] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:32:13,785.785] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-05-15 22:32:13,786.786] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-05-15 22:32:13,787.787] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:32:13,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:32:13,796.796] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00095s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:32:13,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:32:13,808.808] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00072s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:32:13,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:32:13,817.817] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:32:13,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:32:13,824.824] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00088s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:32:13,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-15 22:32:13,830.830] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'id_1': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-15 22:32:13,834.834] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:32:13,836.836] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:32:13] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:33:21,733.733] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-05-15 22:33:21,762.762] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:33:21] "[35m[1mPOST /apps//summary HTTP/1.1[0m" 500 -
[2025-05-15 22:33:30,731.731] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:33:30,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:33:30,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:33:30,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:33:30,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.93s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:33:30,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:33:30,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.92s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:33:30,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:33:30,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.92s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:33:30,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-15 22:33:30,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.91s ago] {'id_1': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-15 22:33:30,746.746] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-05-15 22:33:30,747.747] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'summary': '好好好好好儿', 'conversation_id': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033')}
[2025-05-15 22:33:30,751.751] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:33:30,753.753] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:33:30] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:33:41,323.323] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:33:41,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:33:41,324.324] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.53s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:33:41,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:33:41,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.52s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:33:41,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:33:41,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.51s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:33:41,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:33:41,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.51s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:33:41,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-05-15 22:33:41,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.51s ago] {'id_1': UUID('bfa4c555-f53e-4490-ba72-0fb1630ef033'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-05-15 22:33:41,336.336] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:33:41,336.336] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:33:41] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
[2025-05-15 22:35:02,359.359] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:35:02,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:35:02,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:35:02,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:35:02,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:35:02,364.364] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 22:35:02,364.364] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'debug_conversation_id': None, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:35:02,367.367] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:35:02,368.368] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:35:02] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-05-15 22:35:05,078.078] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:35:05,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-05-15 22:35:05,079.079] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-05-15 22:35:05,080.080] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-05-15 22:35:05,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.3s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:35:05,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-05-15 22:35:05,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.3s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-05-15 22:35:05,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-05-15 22:35:05,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-05-15 22:35:05,086.086] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-05-15 22:35:05,086.086] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-05-15 22:35:05,097.097] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-05-15 22:35:05,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.733s ago] {'debug_conversation_id': UUID('3ad3cb37-902d-4c6c-83a0-f991f4d592ca'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-05-15 22:35:05,099.099] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-05-15 22:35:05,100.100] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-05-15 22:35:05,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-05-15 22:35:05,101.101] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('3ad3cb37-902d-4c6c-83a0-f991f4d592ca')}
[2025-05-15 22:35:05,103.103] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-05-15 22:35:05,103.103] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [15/May/2025 22:35:05] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/summary HTTP/1.1" 200 -
