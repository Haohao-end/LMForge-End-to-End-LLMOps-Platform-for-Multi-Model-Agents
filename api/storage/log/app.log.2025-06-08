[2025-06-08 11:58:58,215.215] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 11:58:58,217.217] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 11:58:58,219.219] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 11:59:19,770.770] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 11:59:19,774.774] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 11:59:19,899.899] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:19,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:19,902.902] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-08 11:59:19,903.903] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /builtin-apps HTTP/1.1" 200 -
[2025-06-08 11:59:19,905.905] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:19,907.907] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:19] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:20,210.210] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:20] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 11:59:20,211.211] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:20] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:20,335.335] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 11:59:20,335.335] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 11:59:20,338.338] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 11:59:20,338.338] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 11:59:20,339.339] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 11:59:20,339.339] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 11:59:20,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:20,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:20,342.342] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:20,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 11:59:20,352.352] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 11:59:20,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 11:59:20,357.357] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 11:59:20,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:20,362.362] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:20,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:20,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008971s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:20,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:20,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01021s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:20,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 11:59:20,466.466] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 11:59:20,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:20,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1086s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:20,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 11:59:20,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005966s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 11:59:20,473.473] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:20,473.473] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:20] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:20,476.476] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:20,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:20,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1348s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:20,478.478] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:20,479.479] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:20] "GET /account HTTP/1.1" 200 -
[2025-06-08 11:59:20,523.523] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:20,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:20,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1813s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:20,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 11:59:20,526.526] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 11:59:20,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 11:59:20,530.530] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 11:59:20,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,533.533] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-08 11:59:20,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003505s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-08 11:59:20,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004475s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-08 11:59:20,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005437s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-08 11:59:20,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006393s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-08 11:59:20,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007236s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-08 11:59:20,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008098s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-08 11:59:20,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008884s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-08 11:59:20,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009671s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-08 11:59:20,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01044s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-08 11:59:20,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01123s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-08 11:59:20,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01213s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-08 11:59:20,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01296s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-08 11:59:20,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0138s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-08 11:59:20,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0146s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-08 11:59:20,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01539s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-08 11:59:20,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01616s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-08 11:59:20,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01697s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-08 11:59:20,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01779s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-08 11:59:20,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-08 11:59:20,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0188s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-08 11:59:20,554.554] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:20,554.554] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:20] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:21,863.863] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:21,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:21,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.522s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:21,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 11:59:21,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.515s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 11:59:21,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 11:59:21,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.512s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 11:59:21,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:21,871.871] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.509s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:21,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:21,874.874] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.512s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:21,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:21,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.514s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:21,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 11:59:21,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.413s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 11:59:21,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:21,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.518s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:21,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 11:59:21,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.416s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 11:59:21,884.884] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:21,885.885] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:21] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:25,198.198] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 11:59:25,214.214] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 11:59:25,214.214] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:25,215.215] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 11:59:25,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 11:59:25,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 11:59:25,511.511] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.17s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,516.516] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,516.516] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 11:59:25,528.528] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 11:59:25,528.528] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.191s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,536.536] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 11:59:25,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:25,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.175s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:25,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 11:59:25,541.541] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 11:59:25,543.543] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 11:59:25,711.711] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.371s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1807s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 11:59:25,719.719] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 11:59:25,720.720] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 11:59:25,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 11:59:25,728.728] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 11:59:25,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 11:59:25,739.739] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 11:59:25,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 11:59:25,743.743] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'message_id_1': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-08 11:59:25,745.745] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.403s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 11:59:25,750.750] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,751.751] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00144s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 11:59:25,751.751] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 11:59:25,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 11:59:25,755.755] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 11:59:25,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,758.758] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00127s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 11:59:25,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,764.764] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 11:59:25,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,770.770] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 11:59:25,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01656s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 11:59:25,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01158s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 11:59:25,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007892s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 11:59:25,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02214s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 11:59:25,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0178s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 11:59:25,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01472s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 11:59:25,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02943s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 11:59:25,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02415s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 11:59:25,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02074s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 11:59:25,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03531s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 11:59:25,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03083s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 11:59:25,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02743s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 11:59:25,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04217s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 11:59:25,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03748s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 11:59:25,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03417s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 11:59:25,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04976s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 11:59:25,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0447s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 11:59:25,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04091s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 11:59:25,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05522s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 11:59:25,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04944s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 11:59:25,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04474s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 11:59:25,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05854s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 11:59:25,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05287s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 11:59:25,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04864s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 11:59:25,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06248s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 11:59:25,820.820] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05678s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 11:59:25,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,822.822] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05235s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 11:59:25,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.481s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06762s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 11:59:25,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06177s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 11:59:25,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2922s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 11:59:25,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05797s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 11:59:25,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07202s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 11:59:25,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 11:59:25,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.468s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 11:59:25,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06694s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 11:59:25,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06232s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 11:59:25,833.833] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07694s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 11:59:25,834.834] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 11:59:25,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07235s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 11:59:25,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06845s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 11:59:25,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08285s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 11:59:25,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07684s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 11:59:25,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 11:59:25,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08566s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 11:59:25,843.843] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,843.843] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0797s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 11:59:25,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07527s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 11:59:25,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08912s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 11:59:25,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08303s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 11:59:25,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0785s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 11:59:25,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0922s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 11:59:25,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,850.850] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08655s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 11:59:25,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,852.852] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "OPTIONS /language-models/ollama/deepseek-r1-8b HTTP/1.1" 200 -
[2025-06-08 11:59:25,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08378s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 11:59:25,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.098s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 11:59:25,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09205s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 11:59:25,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0876s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 11:59:25,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1011s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 11:59:25,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09492s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 11:59:25,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09008s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 11:59:25,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1035s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 11:59:25,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09729s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 11:59:25,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 11:59:25,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0925s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 11:59:25,863.863] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,863.863] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 11:59:25,875.875] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:25,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:25,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.535s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:25,879.879] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:25,881.881] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:25] "GET /language-models/ollama/deepseek-r1-8b HTTP/1.1" 200 -
[2025-06-08 11:59:26,036.036] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,166.166] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 11:59:26,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:26] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 11:59:33,525.525] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:33] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 11:59:33,528.528] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 11:59:33,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 11:59:33,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.19s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 11:59:33,530.530] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 11:59:33,531.531] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 11:59:33] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 12:00:14,798.798] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:14] "OPTIONS /language-models/wenxin/ernie-4-8k HTTP/1.1" 200 -
[2025-06-08 12:00:15,126.126] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:15,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:15,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.79s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:15,134.134] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\language_model_handler.py", line 23, in get_language_model
    return success_json(self.language_model_service.get_language_model(provider_name, model_name))
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\language_model_service.py", line 58, in get_language_model
    model_entity = provider.get_model_entity(model_name)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\language_model\entities\provider_entity.py", line 95, in get_model_entity
    raise NotFoundException("该模型实体不存在，请核实后重试")
internal.exception.exception.NotFoundException
[2025-06-08 12:00:15,139.139] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:15,140.140] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:15] "GET /language-models/wenxin/ernie-4-8k HTTP/1.1" 200 -
[2025-06-08 12:00:16,069.069] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:16] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:00:16,073.073] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:16,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:16,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:16,076.076] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:16,077.077] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:16] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:00:16,388.388] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:16] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:00:22,353.353] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:22] "OPTIONS /language-models/ollama/deepseek-r1:8b HTTP/1.1" 200 -
[2025-06-08 12:00:22,355.355] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:22] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:00:22,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:22,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:22,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.28s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:22,626.626] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\language_model_handler.py", line 23, in get_language_model
    return success_json(self.language_model_service.get_language_model(provider_name, model_name))
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\language_model_service.py", line 58, in get_language_model
    model_entity = provider.get_model_entity(model_name)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\language_model\entities\provider_entity.py", line 95, in get_model_entity
    raise NotFoundException("该模型实体不存在，请核实后重试")
internal.exception.exception.NotFoundException
[2025-06-08 12:00:22,627.627] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:22,627.627] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:22] "GET /language-models/ollama/deepseek-r1:8b HTTP/1.1" 200 -
[2025-06-08 12:00:24,941.941] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:24] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:00:24,945.945] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:24,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:24,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 64.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:24,947.947] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:24,948.948] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:24] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:00:29,003.003] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:00:29,314.314] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:29,315.315] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:29,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.97s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:29,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:00:29,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.78s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:29,317.317] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:00:29,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.96s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:00:29,319.319] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:00:29,320.320] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'model_config': '{"provider": "deepseek", "model": "deepseek-chat", "parameters": {"temperature": 0.85, "top_p": 0.9, "presence_penalty": 0.0, "frequency_penalty": 0.0, "max_tokens": 4096}}', 'dialog_round': 3, 'updated_at': datetime.datetime(2025, 6, 8, 12, 0, 29, 318717), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:00:29,326.326] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:29,328.328] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:00:29,596.596] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:29,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:29,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.25s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:29,608.608] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:29,608.608] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:29] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:00:30,685.685] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:00:30,689.689] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:30,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:30,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 70.35s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:30,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:00:30,692.692] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.16s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:30,693.693] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:00:30,694.694] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:30,696.696] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:30,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:30] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:00:31,015.015] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:31] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:00:31,336.336] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:31,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:31,338.338] base.py -> _exec_single_context line:1901 [INFO]: [cached since 71s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:31,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:00:31,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:31,342.342] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:00:31,342.342] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:00:31,354.354] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:00:31,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6611s ago] {'debug_conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:31,355.355] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:31,356.356] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:31,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:00:31,356.356] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00019s] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:00:31,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:00:31,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.63s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:00:31,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:00:31,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.62s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:00:31,361.361] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:31,362.362] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:31] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:00:42,213.213] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:00:42,215.215] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:42,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:42,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.87s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:42,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:00:42,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.69s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:00:42,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:00:42,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:00:42,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:00:42,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.69s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:00:42,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:00:42,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.51s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:00:42,234.234] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:00:42,235.235] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道Agent吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:00:42,245.245] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:42,313.313] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:42,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:00:42,314.314] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.96s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:00:42,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:00:42,319.319] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:00:42,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:42,323.323] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:00:45,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:00:45,575.575] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:00:45,576.576] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:00:54,149.149] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:54,149.149] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:00:54,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,152.152] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00251s] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:00:54,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,155.155] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:00:54,157.157] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:00:54,158.158] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'message_id': UUID('a0e6462e-871e-4095-b754-61c1898d0714'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '是的，我知道“Agent”这个概念。在不同的上下文中，“Agent”可以有不同的含义：\n\n1. **人工智能领域**：\n   - **智能体（Agent）**：在人工智能中，Agent通常指一个能够感知环境并通过行动影响环境的实体。它可以是一个软件程序、机器人或其他形式的智能系统。Agent ... (161 characters truncated) ... 织执行特定任务或决策的个人或实体，比如销售代理、法律代理等。\n\n4. **游戏开发**：\n   - **游戏AI Agent**：指游戏中控制非玩家角色（NPC）行为的智能系统。\n\n如果你指的是某种特定的Agent（比如某个AI工具或框架），可以告诉我更多细节，我会为你提供更具体的信息！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2924 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5194b031-ecf3-4175-a8cc-a5d3e9d2f1b2", "example": false}}]', 'answer': '是的，我知道“Agent”这个概念。在不同的上下文中，“Agent”可以有不同的含义：\n\n1. **人工智能领域**：\n   - **智能体（Agent）**：在人工智能中，Agent通常指一个能够感知环境并通过行动影响环境的实体。它可以是一个软件程序、机器人或其他形式的智能系统。Agent ... (161 characters truncated) ... 织执行特定任务或决策的个人或实体，比如销售代理、法律代理等。\n\n4. **游戏开发**：\n   - **游戏AI Agent**：指游戏中控制非玩家角色（NPC）行为的智能系统。\n\n如果你指的是某种特定的Agent（比如某个AI工具或框架），可以告诉我更多细节，我会为你提供更具体的信息！', 'latency': 11.612933900000002}
[2025-06-08 12:00:54,171.171] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:54,172.172] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:54,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.599s ago] {'pk_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:00:54,174.174] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:00:54,175.175] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2924 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5194b031-ecf3-4175-a8cc-a5d3e9d2f1b2", "example": false}}]', 'answer': '是的，我知道“Agent”这个概念。在不同的上下文中，“Agent”可以有不同的含义：\n\n1. **人工智能领域**：\n   - **智能体（Agent）**：在人工智能中，Agent通常指一个能够感知环境并通过行动影响环境的实体。它可以是一个软件程序、机器人或其他形式的智能系统。Agent ... (161 characters truncated) ... 织执行特定任务或决策的个人或实体，比如销售代理、法律代理等。\n\n4. **游戏开发**：\n   - **游戏AI Agent**：指游戏中控制非玩家角色（NPC）行为的智能系统。\n\n如果你指的是某种特定的Agent（比如某个AI工具或框架），可以告诉我更多细节，我会为你提供更具体的信息！', 'latency': 11.612933900000002, 'message_id': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:00:54,177.177] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:00:54,177.177] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:54,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.82s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:00:54,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:00:54,179.179] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00020s] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:00:54,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.607s ago] {'pk_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:00:54,463.463] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:54] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:00:54,777.777] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:00:54,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 94.44s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:00:54,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:00:54,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.624s ago] {'pk_1': 'a0e6462e-871e-4095-b754-61c1898d0714'}
[2025-06-08 12:00:57,117.117] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:57] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:00:57,423.423] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:57] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:00:57,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:57] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:00:57,425.425] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:57] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:00:57,426.426] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:00:57] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:01:01,523.523] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:01:01,523.523] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'name': '询问Agent的相关信息', 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:01,524.524] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:02,160.160] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:02,163.163] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:02] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:01:03,342.342] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:03,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:03,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:03,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:03,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:03,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.12s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:03,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:03,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:03,661.661] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:01:03,661.661] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 12, 1, 3, 660526), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:01:03,666.666] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:03,668.668] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:03] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:03,980.980] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:03] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:03,983.983] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:03,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:03,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 103.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:03,986.986] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:03,987.987] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:03] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:09,539.539] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:09] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:01:09,855.855] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:09,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:09,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:09,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:09,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:09,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:09,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:09,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:01:09,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:01:09,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:01:09,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.1s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:01:09,869.869] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:01:09,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.64s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我上次说了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:01:09,872.872] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:09,934.934] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:09,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:01:09,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.58s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:09,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:01:09,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.62s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:01:09,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:09,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.62s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:01:13,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:01:13,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.59s ago] {'pk_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:01:13,170.170] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:01:14,645.645] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:14,647.647] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:14,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.51s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:14,666.666] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.51s ago] {'pk_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:01:14,668.668] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:01:14,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.51s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'message_id': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我们的对话记录中没有找到您之前提到的内容。如果您能提供更多上下文或具体问题，我可以更好地帮助您！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3eedd11e-1254-46ef-ab99-1318b199296b", "example": false}}]', 'answer': '目前我们的对话记录中没有找到您之前提到的内容。如果您能提供更多上下文或具体问题，我可以更好地帮助您！', 'latency': 4.65240129999998}
[2025-06-08 12:01:14,673.673] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:14,674.674] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:14,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.27s ago] {'pk_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:01:14,844.844] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:01:14,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.67s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3eedd11e-1254-46ef-ab99-1318b199296b", "example": false}}]', 'answer': '目前我们的对话记录中没有找到您之前提到的内容。如果您能提供更多上下文或具体问题，我可以更好地帮助您！', 'latency': 4.65240129999998, 'message_id': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:01:14,845.845] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:14,848.848] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:14,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.49s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:14,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:01:14,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.73s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:14,906.906] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:14,977.977] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:14] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:01:14,985.985] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:14,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:14,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:01:14,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.83s ago] {'pk_1': '335eb6ab-8ee9-4b87-beaa-9ebf4cac751a'}
[2025-06-08 12:01:22,369.369] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:22,370.370] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:22] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:01:23,804.804] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:24,135.135] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:24,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:24,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:24,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:24,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:24,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:24,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:24,142.142] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:01:24,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.48s ago] {'dialog_round': 4, 'updated_at': datetime.datetime(2025, 6, 8, 12, 1, 24, 142435), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:01:24,144.144] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:24,146.146] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:24] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:24,458.458] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:24] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:24,461.461] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:24,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:24,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 124.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:24,464.464] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:24,465.465] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:24] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:27,755.755] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:27,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:27,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 127.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:27,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:27,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 122.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:27,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:27,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 127.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:27,759.759] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:01:27,760.760] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 6, 8, 12, 1, 27, 759306), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:01:27,760.760] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:27,762.762] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:27] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:34,371.371] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:01:34,375.375] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:34,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:34,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:34,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:34,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:34,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:34,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:34,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:01:34,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:01:34,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:01:34,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.7s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:01:34,391.391] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:01:34,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.16s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我们上次聊了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:01:34,396.396] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:01:34,466.466] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:34,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:01:34,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.11s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:01:34,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:01:34,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.15s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:01:34,667.667] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:34,719.719] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:34] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:01:35,027.027] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:35] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:01:35,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:35,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:35,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:35,343.343] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:35,343.343] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:35] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:01:55,841.841] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:55] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:01:55,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:55,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:55,846.846] base.py -> _exec_single_context line:1901 [INFO]: [cached since 155.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:55,852.852] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:55,853.853] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:55] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:01:56,155.155] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:01:56,155.155] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:01:56,157.157] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:01:56,159.159] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:56,160.160] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:01:56,466.466] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:01:56,468.468] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:56,469.469] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:56,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:56,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,474.474] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:56,472.472] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:56,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:01:56,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:56,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:01:56,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:56,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:56,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:56,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:01:56,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:01:56,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:56,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:01:56,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:01:56,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:01:56,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:56,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:01:56,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:56,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:01:56,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:01:56,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:01:56,498.498] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:56,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:01:56,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:01:56,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:01:56,501.501] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:01:56,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:01:56,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:01:56,504.504] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:56,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:01:56,512.512] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:01:56,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:01:56,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'message_id_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:01:56,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,519.519] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:56,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:01:56,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:01:56,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'message_id_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:01:56,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,528.528] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:56,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:01:56,529.529] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:01:56,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:01:56,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:01:56,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:01:56,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:01:56,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:01:56,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:01:56,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:01:56,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:01:56,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:01:56,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:01:56,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:01:56,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:01:56,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:01:56,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,561.561] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:01:56,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:01:56,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:01:56,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:01:56,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:01:56,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,570.570] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:01:56,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:01:56,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:01:56,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:01:56,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:01:56,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:01:56,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:01:56,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:01:56,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:01:56,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:01:56,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:01:56,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:01:56,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:01:56,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:01:56,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:01:56,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:01:56,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:01:56,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:01:56,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:01:56,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:01:56,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:01:56,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:01:56,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:01:56,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:01:56,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:01:56,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:01:56,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,611.611] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:01:56,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:01:56,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:01:56,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:01:56,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:01:56,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:01:56,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:01:56,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:01:56,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:01:56,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:01:56,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:01:56,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:01:56,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:01:56,630.630] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:56,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:01:56,728.728] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:01:56,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:01:56,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:01:56,732.732] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:01:56,733.733] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:01:56,823.823] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:01:56,839.839] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:01:56] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:02:07,881.881] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:07,887.887] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:07,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:07,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 167.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:07,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:07,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 162.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:07,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:07,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 167.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:07,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:02:07,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 162.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:02:07,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:02:07,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 162.2s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:02:07,897.897] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:02:07,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.66s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我上次说了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:02:07,902.902] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:02:07,940.940] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:07,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:02:07,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.58s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:02:07,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:02:07,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.62s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:02:07,943.943] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:07,950.950] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:08,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:08] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:08,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:08,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:08,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:08,448.448] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:08,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:08] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:17,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:17,069.069] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:17,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:17,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:17,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:17,073.073] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:17,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:17,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:17,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:02:17,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:02:17,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:02:17,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.4s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:02:17,078.078] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:02:17,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 94.84s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我上次说了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:02:17,079.079] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:02:17,117.117] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:17,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:02:17,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.8s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:02:17,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:02:17,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 94.8s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:02:17,121.121] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:17,128.128] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:17,435.435] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:17] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:17,748.748] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:17,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:17,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:17,750.750] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:17,750.750] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:17] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:21,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:02:21,266.266] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:21,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,266.266] base.py -> _exec_single_context line:1901 [INFO]: [cached since 180.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:21,270.270] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:21,270.270] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:02:21,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:02:21,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:02:21,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:02:21,581.581] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:02:21,581.581] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:02:21,891.891] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:02:21,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:21,893.893] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:21,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:21,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:21,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:21,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:21,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:21,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:21,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:02:21,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:21,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:21,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:21,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:02:21,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:21,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:02:21,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:21,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:02:21,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:21,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:02:21,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:21,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:02:21,930.930] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:21,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:21,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:02:21,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:02:21,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:02:21,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:02:21,938.938] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:02:21,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:02:21,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:02:21,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:02:21,941.941] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:21,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'message_id_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:02:21,952.952] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:02:21,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:02:21,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:02:21,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'message_id_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:02:21,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,957.957] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:21,958.958] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:02:21,958.958] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:02:21,959.959] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:02:21,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:02:21,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:02:21,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:02:21,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:02:21,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:02:21,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:02:21,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:02:21,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:02:21,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:02:21,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:02:21,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:02:21,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:02:21,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:02:21,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:02:21,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:02:21,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:02:21,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:02:21,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:02:21,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:02:21,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:02:21,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:02:21,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:02:21,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:21,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:02:21,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:02:22,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:02:22,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:02:22,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:02:22,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:02:22,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:02:22,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:02:22,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:02:22,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:02:22,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:02:22,009.009] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:02:22,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:02:22,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:02:22,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:02:22,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,017.017] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:02:22,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:02:22,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:02:22,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,020.020] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:02:22,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:02:22,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:02:22,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:02:22,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:02:22,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:02:22,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:02:22,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:02:22,031.031] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:02:22,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:02:22,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,033.033] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:02:22,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:02:22,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:02:22,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:02:22,037.037] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:02:22,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:02:22,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:02:22,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:02:22,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:02:22,048.048] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:22,049.049] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:22] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:02:22,157.157] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:22,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:22,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:22,159.159] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:22,159.159] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:22] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:02:22,283.283] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:22] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:02:22,284.284] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:22] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:02:46,574.574] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:46,576.576] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:46,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:46,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 206.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:46,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:46,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:46,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:46,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 206.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:46,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:02:46,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:02:46,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:02:46,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 200.9s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:02:46,588.588] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:02:46,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 124.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好,我们的聊天记录中上次聊了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:02:46,590.590] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:02:46,628.628] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:46,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:02:46,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.3s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:02:46,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:02:46,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 124.3s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:02:46,632.632] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:46,639.639] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:46] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:02:46,840.840] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:46] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:47,154.154] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:47,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:47,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 206.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:47,155.155] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:02:47,156.156] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:47] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:02:56,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:56] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:02:56,185.185] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:02:56,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:02:56,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:02:56,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:02:56,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 210.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:02:56,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:02:56,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:02:56,189.189] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:02:56,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 88.43s ago] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 6, 8, 12, 2, 56, 189064), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:02:56,190.190] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:02:56,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:02:56] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:03:01,478.478] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:03:01,493.493] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:03:01,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:01,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:03:01,496.496] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:03:01,498.498] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:01,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:01,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:01,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:01,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:01,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:03:01,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:03:01,507.507] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:01,508.508] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:03:01,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:03:01,759.759] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:01,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:01,764.764] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:01,764.764] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:03:01,791.791] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:03:01,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:01,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:01,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,809.809] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:01,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:01,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:01,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:01,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:03:01,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:01,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:03:01,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:01,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:01,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:03:01,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:03:01,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:01,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:03:01,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:03:01,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:01,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,826.826] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:01,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:03:01,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:01,836.836] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:03:01,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:01,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:01,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:03:01,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:01,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:01,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:03:01,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:01,854.854] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:03:01,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'message_id_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:03:01,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:01,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:03:01,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:01,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'message_id_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:03:01,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,869.869] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:01,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:01,870.870] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:03:01,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,871.871] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:01,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:01,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,873.873] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:01,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:01,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:01,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:01,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:01,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:01,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:01,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:01,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:01,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:01,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:01,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:01,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:01,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:01,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:01,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:01,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:01,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:01,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:01,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:01,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:01,909.909] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:01,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:01,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:01,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:01,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:01,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:01,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:01,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:01,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:01,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:01,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:01,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:01,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:01,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:01,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:01,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:01,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:01,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:01,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:01,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:01,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:01,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:01,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:01,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:01,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:01,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:01,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:01,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:01,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:01,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:01,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 216.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:01,954.954] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:01,955.955] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:01] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:02,072.072] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:02] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:03:02,102.102] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:02,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:02,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:02,104.104] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:02,104.104] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:02] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:03:03,819.819] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:03:04,126.126] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:04,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:04,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 223.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:04,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:04,129.129] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:04,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:04,130.130] base.py -> _exec_single_context line:1901 [INFO]: [cached since 223.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:04,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:03:04,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:03:04,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:03:04,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218.4s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:03:04,143.143] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:03:04,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 141.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好,我们的聊天记录中上次聊了什么?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:04,144.144] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:03:04,189.189] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:04,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:03:04,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.8s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:03:04,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:03:04,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 141.9s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:03:04,192.192] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:04,203.203] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:04] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:03:04,515.515] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:04] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:03:04,518.518] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:04,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:04,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 224.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:04,520.520] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:04,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:04] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:03:50,521.521] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:50] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:50,834.834] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:50] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 12:03:50,836.836] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:50,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:50,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:50,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:03:50,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:03:50,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:03:50,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:03:50,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:50,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:50,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:50,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:50,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:50,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:50,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:03:50,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.4s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 12:03:50,846.846] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:50,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:50,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:03:50,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.4s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 12:03:50,849.849] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:50,850.850] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:50] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:51,099.099] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:51,099.099] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:51,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:51,101.101] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:51,101.101] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:51] "GET /account HTTP/1.1" 200 -
[2025-06-08 12:03:52,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:03:52,032.032] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:03:52,033.033] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:03:52,034.034] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:52,035.035] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:03:52,037.037] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:03:52,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:03:52,343.343] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,345.345] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,346.346] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,352.352] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,353.353] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,359.359] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:03:52,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:03:52,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:03:52,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:03:52,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:52,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:52,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:03:52,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:52,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:03:52,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:52,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:03:52,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:52,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:03:52,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:03:52,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:03:52,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:52,391.391] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:52,392.392] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:03:52,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:03:52,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:52,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:52,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:03:52,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:03:52,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:52,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:52,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,405.405] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:03:52,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:52,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'message_id_1': UUID('335eb6ab-8ee9-4b87-beaa-9ebf4cac751a')}
[2025-06-08 12:03:52,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:03:52,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:03:52,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'message_id_1': UUID('a0e6462e-871e-4095-b754-61c1898d0714')}
[2025-06-08 12:03:52,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:52,423.423] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,424.424] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:03:52,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:52,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:03:52,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,434.434] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:52,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:52,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:03:52,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:52,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,441.441] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:52,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,443.443] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:03:52,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:52,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:52,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:03:52,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:52,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:52,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:03:52,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:52,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:52,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:03:52,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:52,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:52,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:03:52,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:52,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:52,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:03:52,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:52,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:52,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:03:52,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,474.474] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:52,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:52,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:52,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:03:52,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:52,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:52,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:52,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,486.486] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:52,487.487] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:03:52,488.488] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:03:52,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:52,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,498.498] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:52,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:03:52,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:52,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:52,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:03:52,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:52,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:52,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:03:52,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:52,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:52,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:03:52,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:52,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:52,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:03:52,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:52,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:52,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:03:52,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 266.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:03:52,522.522] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,523.523] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:03:52,701.701] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:03:52,719.719] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:03:52,718.718] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:52,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:52,721.721] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:52,723.723] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:03:52,724.724] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:52] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:03:53,014.014] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:53] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:03:59,623.623] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:03:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:03:59,934.934] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:03:59,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:03:59,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 279.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:03:59,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:03:59,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:03:59,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:03:59,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 279.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:03:59,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:03:59,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:03:59,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:03:59,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.2s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:03:59,953.953] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:03:59,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 197.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:03:59,955.955] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:04:00,036.036] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:04:00,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:04:00,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 208.7s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:04:00,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:04:00,039.039] base.py -> _exec_single_context line:1901 [INFO]: [cached since 197.7s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:04:00,040.040] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:04:00,057.057] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:00] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:04:00,374.374] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:00] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:04:00,377.377] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:04:00,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:04:00,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:04:00,380.380] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:04:00,381.381] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:00] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:04:06,537.537] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:04:06,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:04:06,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:04:06,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 286.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:04:06,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:04:06,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:04:06,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:04:06,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 286.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:04:06,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:04:06,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:04:06,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:04:06,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.1s ago] {'id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:04:06,868.868] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:04:06,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 204.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:04:06,872.872] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:04:06,937.937] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:04:06,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:04:06,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116')}
[2025-06-08 12:04:06,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:04:06,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 204.6s ago] {'conversation_id_1': UUID('fc1657ba-48ab-43c9-9544-eceec597f116'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:04:06,941.941] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:04:06,952.952] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:06] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:04:07,266.266] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:07] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:04:07,269.269] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:04:07,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:04:07,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 286.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:04:07,276.276] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:04:07,276.276] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:04:07] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:05:01,291.291] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:05:01,596.596] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:01,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:05:01,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 341.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:05:01,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:05:01,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:05:01,599.599] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:05:01,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.9s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:05:01,602.602] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:01,603.603] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:05:01,926.926] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:05:01,929.929] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:01,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:05:01,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 341.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:05:01,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:05:01,931.931] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:05:01,932.932] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:05:01,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:05:01,939.939] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:05:01,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 271.2s ago] {'debug_conversation_id': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:05:01,940.940] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:01,941.941] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:01,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:05:01,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.6s ago] {'pk_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:01,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:05:01,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.2s ago] {'conversation_id_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:05:01,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:05:01,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.2s ago] {'conversation_id_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:05:01,946.946] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:05:01,946.946] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:05:09,915.915] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:09] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:05:10,219.219] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:10,220.220] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:05:10,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 349.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:05:10,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:05:10,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:05:10,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:05:10,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 349.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:05:10,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:05:10,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:05:10,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:05:10,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.5s ago] {'id_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:05:10,236.236] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:05:10,237.237] base.py -> _exec_single_context line:1901 [INFO]: [cached since 268s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好,你是什么模型?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:05:10,239.239] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:10,293.293] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:10,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:05:10,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 278.9s ago] {'pk_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:10,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:05:10,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 268s ago] {'conversation_id_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:05:10,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:05:10,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 268s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:05:13,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:05:13,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 267.8s ago] {'pk_1': UUID('8c08edc1-72ba-4999-bed0-74589a04c659')}
[2025-06-08 12:05:13,355.355] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:05:16,430.430] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:05:16,433.433] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:16,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.3s ago] {'pk_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:16,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.3s ago] {'pk_1': UUID('8c08edc1-72ba-4999-bed0-74589a04c659')}
[2025-06-08 12:05:16,443.443] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:05:16,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2'), 'message_id': UUID('8c08edc1-72ba-4999-bed0-74589a04c659'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '我是一个基于OpenAI技术的AI助手，旨在为用户提供信息查询、内容生成、问题解答等服务。我的核心能力包括自然语言理解、知识检索和任务执行，可以根据用户的需求提供高效、准确的帮助。如果你有任何问题或需要完成某项任务，随时告诉我！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2948 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "060aba7b-e67c-4b6d-8e0d-19f3775bb184", "example": false}}]', 'answer': '我是一个基于OpenAI技术的AI助手，旨在为用户提供信息查询、内容生成、问题解答等服务。我的核心能力包括自然语言理解、知识检索和任务执行，可以根据用户的需求提供高效、准确的帮助。如果你有任何问题或需要完成某项任务，随时告诉我！', 'latency': 6.105648799999983}
[2025-06-08 12:05:16,450.450] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:16,451.451] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:16,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.9s ago] {'pk_1': UUID('8c08edc1-72ba-4999-bed0-74589a04c659')}
[2025-06-08 12:05:16,458.458] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:05:16,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2948 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "060aba7b-e67c-4b6d-8e0d-19f3775bb184", "example": false}}]', 'answer': '我是一个基于OpenAI技术的AI助手，旨在为用户提供信息查询、内容生成、问题解答等服务。我的核心能力包括自然语言理解、知识检索和任务执行，可以根据用户的需求提供高效、准确的帮助。如果你有任何问题或需要完成某项任务，随时告诉我！', 'latency': 6.105648799999983, 'message_id': UUID('8c08edc1-72ba-4999-bed0-74589a04c659')}
[2025-06-08 12:05:16,462.462] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:16,463.463] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:16,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 285.1s ago] {'pk_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:16,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:05:16,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.3s ago] {'conversation_id_1': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:16,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.9s ago] {'pk_1': UUID('8c08edc1-72ba-4999-bed0-74589a04c659')}
[2025-06-08 12:05:16,753.753] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:16] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:05:16,757.757] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:05:16,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:05:16,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:05:16,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.6s ago] {'pk_1': '8c08edc1-72ba-4999-bed0-74589a04c659'}
[2025-06-08 12:05:24,124.124] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:05:24,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.6s ago] {'name': '询问模型类型', 'conversation_id': UUID('cb8eb6d9-28e9-41d6-b93a-e047ad98cee2')}
[2025-06-08 12:05:24,126.126] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:05:27,015.015] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:05:27,016.016] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:05:27] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:00,341.341] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:00] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:06:00,345.345] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:00] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:06:00,348.348] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:00] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:06:00,349.349] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:00] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:06:00,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:00] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:06:01,735.735] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:01,738.738] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:01,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:01,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 401.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:01,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:01,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 396.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:01,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:01,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 401.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:01,744.744] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:06:01,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 298.1s ago] {'dialog_round': 3, 'updated_at': datetime.datetime(2025, 6, 8, 12, 6, 1, 744928), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:06:01,747.747] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:01,748.748] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:02,070.070] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:02] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:02,379.379] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:02,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:02,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 402s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:02,382.382] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:02,383.383] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:02] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:08,829.829] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:06:08,833.833] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:08,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:08,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 408.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:08,835.835] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:08,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:08,837.837] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:06:08,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:08,838.838] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:08,840.840] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:08] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:06:09,162.162] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:09] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:06:09,471.471] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:09,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:09,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 409.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:09,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:09,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:09,475.475] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:06:09,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:06:09,476.476] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:06:09,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'debug_conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:09,476.476] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:09,479.479] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:09,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:09,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:09,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:06:09,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.8s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:06:09,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:06:09,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.7s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:06:09,488.488] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:09,488.488] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:09] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:06:10,785.785] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:10,790.790] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:10,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:10,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:10,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:10,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:10,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:10,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:10,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:06:10,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:06:10,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:06:10,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.1s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:06:10,803.803] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:06:10,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:06:10,814.814] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:10,864.864] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:10,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:10,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 339.5s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:10,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:06:10,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.5s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:06:10,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:10,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:06:17,651.651] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:17,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:17,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 332.2s ago] {'pk_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:06:17,786.786] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:17,964.964] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:17,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:17,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:17,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:17,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 412.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:17,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:17,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:17,970.970] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:06:17,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 314.3s ago] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 12, 6, 17, 970408), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:06:17,977.977] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:17,978.978] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:17,983.983] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:17] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:18,290.290] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:18,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 418s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:18,299.299] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:18,301.301] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:18] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:18,588.588] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:18,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 418.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:18,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 413.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:18,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:18,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 418.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:18,599.599] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:06:18,600.600] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'updated_at': datetime.datetime(2025, 6, 8, 12, 6, 18, 598990), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:06:18,602.602] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:18,605.605] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:18,821.821] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:18,822.822] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:18,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.7s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:18,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.7s ago] {'pk_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:06:18,826.826] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:06:18,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'message_id': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "2c14da94-f745-4d00-8ea0-4009dcd29493", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 7.934156800000039}
[2025-06-08 12:06:18,828.828] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:18,830.830] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:18,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.3s ago] {'pk_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:06:18,838.838] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:06:18,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "2c14da94-f745-4d00-8ea0-4009dcd29493", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 7.934156800000039, 'message_id': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:06:18,840.840] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:18,841.841] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:18,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.5s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:18,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:06:18,843.843] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.7s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:18,843.843] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:18,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.3s ago] {'pk_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:06:19,135.135] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:19] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:19,447.447] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:19,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:19,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 419.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:19,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:19,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 325.3s ago] {'pk_1': 'ed6ffdb4-18a9-46a0-8cf4-78b19608688e'}
[2025-06-08 12:06:25,820.820] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:25,825.825] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:25,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:25,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:25,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:25,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:25,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:25,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:25,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:06:25,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:06:25,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:06:25,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.1s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:06:25,840.840] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:06:25,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:06:25,843.843] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:25,907.907] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:25,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:25,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 354.6s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:25,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:06:25,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343.6s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:06:25,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:25,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:06:26,128.128] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:26,129.129] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:26] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:27,533.533] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:06:27,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 326s ago] {'name': '用户自我介绍', 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:27,536.536] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:30,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:30,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 345.1s ago] {'pk_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:06:30,660.660] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:30] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:32,951.951] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:32,952.952] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:32,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:32,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:32,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:32,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'pk_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:06:32,956.956] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:06:32,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'message_id': UUID('62be30e7-87e1-4316-9f03-f20f521160a6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我无法直接知道你是谁，因为我没有访问个人身份信息的能力。如果你愿意提供一些背景信息或上下文，我可以更好地帮助你！或者，你可以告诉我你的需求或问题，我会尽力为你提供支持。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "2de4a1ad-3722-4acb-a0ec-4e2e5ab6d1cd", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我没有访问个人身份信息的能力。如果你愿意提供一些背景信息或上下文，我可以更好地帮助你！或者，你可以告诉我你的需求或问题，我会尽力为你提供支持。', 'latency': 7.003303799999969}
[2025-06-08 12:06:32,968.968] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:32,969.969] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:32,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:32,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.4s ago] {'pk_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:06:32,970.970] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:06:32,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "2de4a1ad-3722-4acb-a0ec-4e2e5ab6d1cd", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我没有访问个人身份信息的能力。如果你愿意提供一些背景信息或上下文，我可以更好地帮助你！或者，你可以告诉我你的需求或问题，我会尽力为你提供支持。', 'latency': 7.003303799999969, 'message_id': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:06:32,971.971] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:32,972.972] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:32,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:32,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361.6s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:32,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:06:32,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.8s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:32,974.974] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:33,260.260] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:33] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:33,573.573] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:33,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:33,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 433.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:33,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:06:33,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 339.4s ago] {'pk_1': '62be30e7-87e1-4316-9f03-f20f521160a6'}
[2025-06-08 12:06:37,604.604] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:37,607.607] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:37,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:37,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:37,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:37,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:37,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:37,611.611] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:37,612.612] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:06:37,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334s ago] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 12, 6, 37, 612415), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:06:37,621.621] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:37,623.623] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:37] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:06:37,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:37] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:38,251.251] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:38,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:38,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:38,253.253] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:38,254.254] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:38] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:06:40,314.314] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:40,623.623] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:40,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:40,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 440.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:40,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:06:40,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:06:40,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:06:40,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 440.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:06:40,627.627] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:06:40,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:06:40,627.627] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:06:40,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 434.9s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:06:40,638.638] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:06:40,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:06:40,640.640] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:06:40,699.699] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:40,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:06:40,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.3s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:06:40,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:06:40,702.702] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358.4s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:06:40,703.703] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:40,709.709] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:40] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:06:41,029.029] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:41] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:41,344.344] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:06:41,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:06:41,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 441s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:06:41,346.346] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:41,347.347] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:41] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:06:51,063.063] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:06:51,065.065] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:06:51] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:09:31,934.934] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:31] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:09:32,250.250] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:32,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:09:32,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 611.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:09:32,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:09:32,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 606.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:09:32,255.255] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:09:32,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 611.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:09:32,257.257] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:09:32,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 484.5s ago] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 6, 8, 12, 9, 32, 256639), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:09:32,266.266] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:09:32,268.268] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:09:34,517.517] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:34,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:09:34,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:09:34,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:09:34,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 609s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:09:34,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:09:34,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:09:34,522.522] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:09:34,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.9s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 9, 34, 522479), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:09:34,523.523] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:09:34,525.525] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:34] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:09:34,531.531] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:34] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:09:34,851.851] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:34,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:09:34,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:09:34,853.853] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:09:34,854.854] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:34] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:09:45,652.652] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:45] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:09:45,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:45,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:09:45,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 625.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:09:45,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:09:45,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 620.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:09:45,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:09:45,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 625.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:09:45,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:09:45,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 620.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:09:45,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:09:45,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 619.9s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:09:45,668.668] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:09:45,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 543.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:09:45,670.670] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:09:45,708.708] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:45,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:09:45,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:09:45,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:09:45,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 543.4s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:09:45,711.711] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:09:45,727.727] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:09:45,919.919] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:45] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:09:46,230.230] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:09:46,232.232] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:09:46,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 625.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:09:46,234.234] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:09:46,234.234] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:09:46] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:10:29,946.946] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:29] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:10:29,959.959] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:29,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:29,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 669.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:29,966.966] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:29,967.967] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:29] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:10:30,260.260] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:10:30,261.261] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:10:30,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:10:30,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:10:30,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:10:30,582.582] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:10:30,583.583] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:30,585.585] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:30,586.586] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:30,588.588] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:30,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:30,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:30,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:30,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:30,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:30,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:10:30,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:30,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:30,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:30,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:10:30,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:10:30,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:10:30,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:10:30,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:10:30,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:10:30,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:10:30,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:10:30,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:10:30,617.617] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:30,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:10:30,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:10:30,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,620.620] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:10:30,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:10:30,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:10:30,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:30,631.631] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:30,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:10:30,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:10:30,634.634] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:10:30,634.634] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:10:30,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:30,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'message_id_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:10:30,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:30,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:30,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:10:30,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'message_id_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:10:30,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:30,652.652] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:30,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:30,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:30,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:30,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:30,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:30,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,671.671] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:30,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:30,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:30,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:30,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:30,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:30,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:30,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:30,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:30,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:30,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:30,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:30,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:30,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:30,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:30,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:30,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,693.693] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:30,694.694] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:30,695.695] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:30,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:30,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:30,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:30,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:30,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:30,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:30,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:30,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:30,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:30,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:30,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:30,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:30,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:30,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:30,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:30,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:30,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:30,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:30,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 665s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:30,736.736] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:30,736.736] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:10:30,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:30] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:10:31,011.011] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:31] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:10:31,050.050] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:31,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:31,052.052] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:31] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:10:31,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:31,055.055] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:31,056.056] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:31] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:10:39,322.322] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:10:39,325.325] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:39,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:39,332.332] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:39,332.332] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:10:39,636.636] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:10:39,637.637] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:10:39,638.638] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:10:39,639.639] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:10:39,641.641] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:10:39,947.947] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:10:39,948.948] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:39,950.950] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:39,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,953.953] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:39,954.954] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:39,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:39,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:39,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:39,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:39,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:10:39,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:39,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:10:39,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:39,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:39,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:39,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:10:39,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:10:39,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:10:39,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:10:39,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:10:39,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:10:39,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:10:39,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:39,981.981] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:10:39,981.981] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:10:39,981.981] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:39,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:10:39,997.997] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:39] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:10:39,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:39,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:10:40,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'message_id_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:10:40,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:10:40,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:10:40,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'message_id_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,015.015] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:40,015.015] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:10:40,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:40,026.026] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:10:40,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:40,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:10:40,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:40,037.037] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:40,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,039.039] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:10:40,040.040] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:40,041.041] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,041.041] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:40,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:10:40,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:40,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:40,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:40,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:40,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:10:40,067.067] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,067.067] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:40,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,069.069] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:40,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:10:40,072.072] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:40,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:40,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:10:40,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:40,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:40,080.080] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:40,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:40,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:10:40,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:40,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:40,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:10:40,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:40,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:40,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:10:40,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 674.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:10:40,109.109] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:40,109.109] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:10:40,212.212] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:40,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:40,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:40,216.216] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:40,218.218] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:10:40,347.347] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:10:40,365.365] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:40] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:10:46,373.373] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:10:46,377.377] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:46,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:46,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:46,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:10:46,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:10:46,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:10:46,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:10:46,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:10:46,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:10:46,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:10:46,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680.7s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:10:46,436.436] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:10:46,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 604.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:10:46,448.448] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:10:46,612.612] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:46,614.614] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:10:46,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 615.3s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:10:46,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:10:46,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 604.3s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:10:46,619.619] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:46,651.651] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:46] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:10:46,659.659] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:46] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:10:46,966.966] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:10:46,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:10:46,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:10:46,978.978] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:10:46,980.980] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:46] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:10:51,010.010] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:51] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:10:51,324.324] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:51] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:10:51,325.325] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:51] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:10:51,327.327] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:51] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:10:51,329.329] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:10:51] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:11:12,117.117] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:12] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:11:12,430.430] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:11:12,431.431] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:11:12,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:11:12,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:11:12,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 706.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:11:12,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:11:12,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:11:12,436.436] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:11:12,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 608.8s ago] {'dialog_round': 10, 'updated_at': datetime.datetime(2025, 6, 8, 12, 11, 12, 436529), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:11:12,437.437] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:11:12,438.438] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:12] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:11:12,445.445] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:12] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:11:12,699.699] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:11:12,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:11:12,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:11:12,702.702] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:11:12,703.703] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:12] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:11:27,040.040] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:11:27,042.042] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:11:27,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:11:27,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:11:27,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:11:27,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:11:27,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:11:27,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:11:27,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:11:27,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:11:27,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:11:27,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.3s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:11:27,054.054] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:11:27,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 644.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:11:27,056.056] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:11:27,096.096] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:11:27,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:11:27,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 655.7s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:11:27,099.099] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:11:27,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 644.8s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:11:27,101.101] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:11:27,122.122] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:27] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:11:27,305.305] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:27] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:11:27,619.619] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:11:27,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:11:27,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:11:27,621.621] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:11:27,622.622] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:11:27] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:13:06,497.497] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:06] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 12:13:06,498.498] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:06] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:06,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:06,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:06,808.808] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:06,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 826.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:06,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:06,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 826.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:06,811.811] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:06,812.812] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:06] "GET /account HTTP/1.1" 200 -
[2025-06-08 12:13:06,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:13:06,817.817] base.py -> _exec_single_context line:1901 [INFO]: [cached since 732.7s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-08 12:13:06,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:13:06,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:06,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:13:06,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:06,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:06,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'message_id_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-08 12:13:06,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:06,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'message_id_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-08 12:13:06,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:06,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'message_id_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-08 12:13:06,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:06,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'message_id_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-08 12:13:06,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:06,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 821.1s ago] {'message_id_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-08 12:13:06,871.871] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:06,872.872] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:06] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:11,338.338] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:11] "OPTIONS /assistant-agent/messages?current_page=2&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:11,342.342] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:11,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:11,343.343] base.py -> _exec_single_context line:1901 [INFO]: [cached since 831s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:11,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:13:11,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 737.2s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-08 12:13:11,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:13:11,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 825.6s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 5, 'param_2': 5, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:11,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:13:11,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 825.6s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:11,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:11,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 825.6s ago] {'message_id_1': UUID('ff2aa338-ae70-4e0f-aba2-1f3d0f010f00')}
[2025-06-08 12:13:11,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:11,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 825.6s ago] {'message_id_1': UUID('182da1e9-9de3-482d-a092-35801c888a32')}
[2025-06-08 12:13:11,372.372] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:11,373.373] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:11] "GET /assistant-agent/messages?current_page=2&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:16,194.194] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:16] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:13:16,506.506] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:16,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:16,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:16,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:13:16,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:13:16,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:13:16,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:13:16,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:16,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:16,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:16,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:16,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:16,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:16,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:13:16,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.1s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 12:13:16,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:16,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.2s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:16,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:13:16,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 836.1s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 12:13:16,540.540] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:16,540.540] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:16] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:13:18,186.186] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:13:18,190.190] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:18,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 837.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:18,198.198] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:18,199.199] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:13:18,517.517] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:13:18,518.518] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:13:18,518.518] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:18,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:13:18,522.522] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:13:18,829.829] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:13:18,831.831] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:18,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,833.833] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:18,835.835] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:18,835.835] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:18,837.837] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:18,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:13:18,840.840] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:18,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:13:18,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,843.843] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:18,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:13:18,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:18,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:13:18,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:13:18,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:13:18,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:13:18,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:13:18,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:13:18,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:13:18,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:18,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:18,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:13:18,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:13:18,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:18,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:18,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:18,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:13:18,880.880] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:18,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:13:18,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:13:18,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:13:18,882.882] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:13:18,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:18,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,885.885] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:18,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:13:18,887.887] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:13:18,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:18,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'message_id_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:13:18,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:13:18,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:13:18,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,902.902] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:13:18,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'message_id_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:13:18,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:13:18,909.909] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:18,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,911.911] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:13:18,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:13:18,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:13:18,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:13:18,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:13:18,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:13:18,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:13:18,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:13:18,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:13:18,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:13:18,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:13:18,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:13:18,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:13:18,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:13:18,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:13:18,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:13:18,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:13:18,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:13:18,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:13:18,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:13:18,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:13:18,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:13:18,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:13:18,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:13:18,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:13:18,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:13:18,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:13:18,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:13:18,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:13:18,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:13:18,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,958.958] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:13:18,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:13:18,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:13:18,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:13:18,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:13:18,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,964.964] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:13:18,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:13:18,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:13:18,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:13:18,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:13:18,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:13:18,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:13:18,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:13:18,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:13:18,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:13:18,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:13:18,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:13:18,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:13:18,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:13:18,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:13:18,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:13:18,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:13:18,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:13:18,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:13:18,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:13:18,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:13:18,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 833.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:13:18,995.995] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:18,996.996] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:18] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:13:19,098.098] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:19,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:19,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 838.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:19,100.100] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:19,101.101] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:19] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:13:19,224.224] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:19] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:13:19,225.225] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:19] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:13:23,201.201] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:23] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:13:23,522.522] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:23] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:13:23,524.524] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:23] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:13:23,523.523] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:23] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:13:23,524.524] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:23] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:13:25,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:13:25,576.576] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:25,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:25,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:25,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:13:25,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 840s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:13:25,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:25,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:25,582.582] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:13:25,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 427s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 13, 25, 581340), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:13:25,584.584] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:13:25,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:25] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:13:25,593.593] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:25] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:13:25,840.840] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:25,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:25,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:25,842.842] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:25,843.843] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:25] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:13:30,048.048] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:13:30,052.052] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:30,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:30,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 849.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:30,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:13:30,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 844.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:13:30,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:13:30,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 849.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:13:30,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:13:30,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 844.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:13:30,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:13:30,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 844.3s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:13:30,063.063] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:13:30,063.063] base.py -> _exec_single_context line:1901 [INFO]: [cached since 767.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:13:30,064.064] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:13:30,127.127] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:30,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:13:30,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 778.8s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:13:30,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:13:30,130.130] base.py -> _exec_single_context line:1901 [INFO]: [cached since 767.8s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:13:30,131.131] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:30,148.148] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:30] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:13:30,310.310] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:30] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:13:30,630.630] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:13:30,630.630] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:13:30,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 850.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:13:30,632.632] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:13:30,633.633] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:13:30] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:15:22,933.933] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\schema\\ai_schema.py', reloading
[2025-06-08 12:15:23,452.452] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 12:15:46,170.170] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 12:15:46,173.173] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 12:16:07,516.516] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\handler\\ai_handler.py', reloading
[2025-06-08 12:16:07,929.929] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 12:16:29,625.625] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 12:16:29,627.627] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 12:16:45,334.334] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\ai_service.py', reloading
[2025-06-08 12:16:45,695.695] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 12:17:07,434.434] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 12:17:07,437.437] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 12:17:07,693.693] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:17:07,695.695] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:17:07,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:17:07,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:17:07,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:17:07,697.697] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:17:08,017.017] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:17:08,129.129] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 12:17:08,131.131] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 12:17:08,132.132] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 12:17:08,132.132] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 12:17:08,133.133] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 12:17:08,133.133] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 12:17:08,134.134] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,136.136] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,143.143] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,144.144] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:17:08,189.189] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05496s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:17:08,196.196] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:17:08,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:17:08,289.289] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:17:08,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,291.291] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:17:08,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,297.297] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:17:08,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,300.300] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:17:08,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009593s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:17:08,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007308s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:17:08,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005167s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:17:08,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01411s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:17:08,308.308] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,308.308] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01186s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:17:08,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009534s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:17:08,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01822s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:17:08,312.312] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,312.312] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01599s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0143s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02336s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02127s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01894s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02769s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02544s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02313s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03206s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02996s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02758s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:17:08,328.328] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03672s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:17:08,329.329] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1959s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03561s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:17:08,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03373s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:17:08,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,336.336] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:17:08,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,338.338] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04601s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:17:08,339.339] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:17:08,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04648s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:17:08,342.342] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:17:08,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04491s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00105s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05552s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,346.346] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05468s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:17:08,346.346] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05318s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:17:08,346.346] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2202s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06383s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:17:08,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06286s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:17:08,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02368s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:17:08,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.061s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:17:08,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:17:08,364.364] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00100s] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:17:08,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0726s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:17:08,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0713s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:17:08,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:17:08,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,372.372] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00167s] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:17:08,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07203s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:17:08,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08606s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08632s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00131s] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08432s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:17:08,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:17:08,387.387] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00097s] {'message_id_1': UUID('62be30e7-87e1-4316-9f03-f20f521160a6')}
[2025-06-08 12:17:08,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0974s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:17:08,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0963s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:17:08,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:17:08,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,399.399] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01493s ago] {'message_id_1': UUID('ed6ffdb4-18a9-46a0-8cf4-78b19608688e')}
[2025-06-08 12:17:08,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1028s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:17:08,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,405.405] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,405.405] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2704s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,406.406] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:17:08,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1143s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:17:08,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1144s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:17:08,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07539s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:17:08,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1131s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:17:08,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:17:08,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07652s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:17:08,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1266s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:17:08,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.125s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:17:08,422.422] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1236s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:17:08,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:17:08,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1329s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:17:08,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1315s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1297s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1388s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1365s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1345s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1442s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1423s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1402s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1491s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.147s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:17:08,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:17:08,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1451s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:17:08,448.448] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,448.448] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:17:08,664.664] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:17:08,711.711] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:08,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:08,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5783s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:08,715.715] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:08,716.716] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:17:08,985.985] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:08] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:17:09,329.329] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:09] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:17:14,729.729] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:14] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:17:14,729.729] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:14] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:17:14,734.734] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:14] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:17:14,736.736] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:14] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:17:14,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:14] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:17:17,101.101] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:17:17,105.105] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:17,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:17,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.97s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:17,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:17:17,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.772s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:17:17,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:17:17,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.766s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:17:17,111.111] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:17:17,111.111] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'dialog_round': 9, 'updated_at': datetime.datetime(2025, 6, 8, 12, 17, 17, 109838), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:17:17,113.113] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:17:17,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:17:17,425.425] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:17] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:17:17,729.729] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:17,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:17,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.597s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:17,729.729] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:17,729.729] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:17] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:17:22,368.368] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:17:22,372.372] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:22,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:22,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.24s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:22,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:17:22,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.04s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:17:22,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:17:22,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.04s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:17:22,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:17:22,382.382] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.04s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:17:22,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:17:22,385.385] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.02s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:17:22,388.388] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:17:22,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00433s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:17:22,399.399] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:17:22,463.463] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:22,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:17:22,463.463] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:17:22,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:17:22,463.463] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 9, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:17:22,634.634] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:22,663.663] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:22] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:17:22,978.978] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:22] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:17:23,291.291] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:17:23,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:17:23,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.16s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:17:23,295.295] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:17:23,296.296] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:17:23] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:18:25,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:18:25,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.76s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.56s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.56s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.56s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:18:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:18:25,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.55s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:18:25,915.915] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:18:25,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.53s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:18:25,921.921] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:18:25,989.989] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:25,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:18:25,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.52s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:18:25,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:18:25,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.52s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 9, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:18:25,993.993] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:18:26,010.010] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:18:26,016.016] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:26] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:18:26,165.165] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:26,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:18:26,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:18:26,167.167] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:18:26,167.167] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:26] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:18:44,429.429] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:44] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:18:44,432.432] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:44,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:18:44,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:18:44,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:18:44,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:18:44,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:18:44,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:18:44,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:18:44,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:18:44,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:18:44,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.08s ago] {'id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:18:44,445.445] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:18:44,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.06s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:18:44,452.452] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:18:44,512.512] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:44,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:18:44,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.05s ago] {'pk_1': UUID('915f7b27-0c04-476e-85df-96919808ece8')}
[2025-06-08 12:18:44,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:18:44,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.05s ago] {'conversation_id_1': UUID('915f7b27-0c04-476e-85df-96919808ece8'), 'answer_1': '', 'param_1': 9, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:18:44,512.512] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:18:44,536.536] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:44] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:18:44,680.680] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:44] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:18:45,005.005] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:18:45,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:18:45,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 96.87s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:18:45,008.008] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:18:45,008.008] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:18:45] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:21:32,313.313] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:21:32,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:32,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:21:32,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:21:32,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:21:32,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:21:32,628.628] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:21:32,629.629] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:21:32,631.631] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:32,632.632] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:21:32,640.640] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:21:32,890.890] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:32,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:21:32,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:21:32,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:21:32,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:21:32,897.897] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:21:32,897.897] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:21:32,899.899] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:21:32,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2707s ago] {'debug_conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:21:32,901.901] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:32,902.902] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:32,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:32,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 250.4s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:32,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:21:32,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.5s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:21:32,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:21:32,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 264.5s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:21:32,909.909] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:21:32,910.910] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:32] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:21:41,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:41] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:21:41,088.088] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:41,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:21:41,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 273s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:21:41,092.092] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:21:41,092.092] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:21:41,095.095] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:21:41,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:21:41,099.099] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:21:41,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:21:41,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:21:41,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.7s ago] {'id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:21:41,102.102] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:21:41,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:21:41,107.107] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:41,172.172] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:41,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:41,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.7s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:41,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:21:41,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.7s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'param_1': 9, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:21:41,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:21:41,177.177] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:21:41,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:41,355.355] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00590s] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:41,357.357] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:41] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:21:45,618.618] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:21:45,618.618] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:45,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,621.621] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:45,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,623.623] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:45,627.627] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:21:45,628.628] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:45] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:21:45,629.629] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00173s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'message_id': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 12:21:45,636.636] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:45,638.638] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:45,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 263.2s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:45,639.639] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.29s ago] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:45,640.640] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:21:45,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01419s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'message_id': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！请问有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "63929928-36be-4563-a93e-20d656a3e59d", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 4.272184600000003}
[2025-06-08 12:21:45,653.653] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:45,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:45,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.307s ago] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:45,657.657] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:21:45,657.657] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "63929928-36be-4563-a93e-20d656a3e59d", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 4.272184600000003, 'message_id': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:45,658.658] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:45,659.659] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:45,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.312s ago] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:21:45,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 263.2s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:45,939.939] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:45,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 277.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:21:45,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:45,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3189s ago] {'pk_1': 'cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0'}
[2025-06-08 12:21:53,148.148] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:21:53,148.148] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:21:53] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:21:55,971.971] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:21:55,971.971] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'summary': '人类自我介绍为“好儿”，AI回应问候并询问是否有需要帮助的地方。', 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:55,974.974] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:21:55,975.975] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:21:55,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:21:55,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 273.5s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:55,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:21:55,980.980] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:21:55,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:21:55,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.63s ago] {'pk_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:22:03,293.293] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:22:03,294.294] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'name': '用户自我介绍', 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:22:03,295.295] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:23:40,118.118] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:23:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:23:40,431.431] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:23:40,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:23:40,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:23:40,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:23:40,434.434] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:23:40,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:23:40,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.1s ago] {'id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:23:40,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:23:40,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.1s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:23:40,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:23:40,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.1s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:23:40,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:23:40,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 392.1s ago] {'message_id_1': UUID('cbb9d6a6-3aeb-4326-88d7-59bdf27d77d0')}
[2025-06-08 12:23:40,450.450] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:23:40,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:23:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:24:03,764.764] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:03,768.768] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:03,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:03,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:03,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:03,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:03,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:03,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:03,773.773] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:24:03,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 406.7s ago] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 12, 24, 3, 773411), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:24:03,775.775] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:03,777.777] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:03] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:04,088.088] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:04] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:04,402.402] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:04,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:04,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 416.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:04,405.405] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:04,406.406] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:04] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:14,277.277] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:14,281.281] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:14,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:14,282.282] base.py -> _exec_single_context line:1901 [INFO]: [cached since 426.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:14,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:14,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:14,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:14,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:14,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:24:14,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:24:14,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:24:14,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.9s ago] {'id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:24:14,292.292] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:24:14,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 411.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:24:14,295.295] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:14,358.358] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:14,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:14,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 411.9s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:14,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:24:14,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 411.9s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:24:14,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:14,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:24:17,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:17,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.3s ago] {'pk_1': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b')}
[2025-06-08 12:24:17,653.653] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:19,740.740] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:19,741.741] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:19,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:19,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.1s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:19,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:19,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.1s ago] {'pk_1': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b')}
[2025-06-08 12:24:19,745.745] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:24:19,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753'), 'message_id': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '根据我们的历史对话记录，你自我介绍为“好儿”。不过，除此之外，我并没有更多的信息。如果你愿意分享更多关于你的内容，我会尽力记住并提供更个性化的帮助！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3152 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5444defd-5330-41ee-a866-abf89e73d6f0", "example": false}}]', 'answer': '根据我们的历史对话记录，你自我介绍为“好儿”。不过，除此之外，我并没有更多的信息。如果你愿意分享更多关于你的内容，我会尽力记住并提供更个性化的帮助！', 'latency': 5.343747199999996}
[2025-06-08 12:24:19,756.756] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:19,757.757] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:19,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:19,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 158.4s ago] {'pk_1': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b')}
[2025-06-08 12:24:19,759.759] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:24:19,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.1s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3152 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5444defd-5330-41ee-a866-abf89e73d6f0", "example": false}}]', 'answer': '根据我们的历史对话记录，你自我介绍为“好儿”。不过，除此之外，我并没有更多的信息。如果你愿意分享更多关于你的内容，我会尽力记住并提供更个性化的帮助！', 'latency': 5.343747199999996, 'message_id': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b')}
[2025-06-08 12:24:19,761.761] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:19,762.762] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:19,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:19,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 158.4s ago] {'pk_1': UUID('e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b')}
[2025-06-08 12:24:19,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:19,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.3s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:20,060.060] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:20] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:20,373.373] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:20,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:20,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:20,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:20,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.8s ago] {'pk_1': 'e4b251e3-d35b-4ae9-a5fa-4f8a4bd9c05b'}
[2025-06-08 12:24:26,132.132] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:26] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:26,135.135] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:26,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:26,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 438s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:26,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:26,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:26,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:26,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:26,144.144] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:24:26,144.144] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'updated_at': datetime.datetime(2025, 6, 8, 12, 24, 26, 143584), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:24:26,145.145] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:26,147.147] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:26,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:26] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:26,779.779] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:26,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:26,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 438.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:26,787.787] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:26,788.788] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:26] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:27,387.387] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:27,388.388] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:27] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:27,969.969] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:24:27,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152s ago] {'summary': '人类自我介绍为“好儿”，AI回应问候并询问是否有需要帮助的地方。人类询问AI是否知道他们的身份，AI表示根据历史对话记录知道他们是“好儿”，但没有更多信息，欢迎人类分享更多内容以提供更个性化的帮助。', 'conversation_id': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:27,970.970] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:27,971.971] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:27,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:27,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.5s ago] {'pk_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:27,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:24:27,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152s ago] {'conversation_id_1': UUID('00d141ab-b145-403a-8d2f-a4a5a034e753')}
[2025-06-08 12:24:27,973.973] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:28,464.464] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:28,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:28,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 440.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:28,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:28,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 440.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:28,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:28,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 440.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:28,470.470] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:24:28,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.326s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 24, 28, 470019), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:24:28,478.478] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:28,480.480] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:28] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:29,846.846] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:24:29,850.850] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:29,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:29,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 441.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:29,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:29,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 441.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:29,854.854] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:24:29,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177.2s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:29,855.855] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:29,858.858] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:24:30,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:24:30,493.493] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:30,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:30,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 442.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:30,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:30,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 442.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:30,497.497] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:24:30,498.498] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:24:30,499.499] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:24:30,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 177.9s ago] {'debug_conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:30,500.500] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:30,501.501] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:30,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:30,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 428s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:30,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:24:30,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 442.1s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:24:30,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:24:30,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 442.1s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:24:30,512.512] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:30,512.512] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:30] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:24:34,213.213] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:34,217.217] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:34,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:34,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 446.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:34,220.220] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:34,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:34,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:34,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:34,223.223] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:24:34,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.079s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 24, 34, 223322), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:24:34,224.224] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:34,226.226] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:34] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:34,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:34] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:34,861.861] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:34,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:34,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 446.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:34,864.864] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:34,865.865] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:34] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:35,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:35] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:35,765.765] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:35,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:35,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 447.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:35,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:35,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 447.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:35,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:35,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 447.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:35,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:24:35,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 447.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:24:35,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:24:35,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 447.4s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:24:35,784.784] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:24:35,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 433.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:24:35,786.786] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:35,850.850] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:35,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:35,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 433.4s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:35,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:24:35,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 433.4s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:24:35,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:35,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.7s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:24:36,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:36,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.5s ago] {'pk_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:36,882.882] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:36] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:39,941.941] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:39,941.941] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:39,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.3s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:39,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.3s ago] {'pk_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:39,947.947] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:24:39,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'message_id': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 12:24:39,951.951] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:39,953.953] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:39,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.5s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:39,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 178.6s ago] {'pk_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:39,956.956] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:24:39,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'message_id': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "149302f0-79a9-41cd-b35a-cee2e6e6fbe6", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.05286650000005}
[2025-06-08 12:24:39,965.965] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:39,966.966] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:39,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 178.6s ago] {'pk_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:39,968.968] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:24:39,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "149302f0-79a9-41cd-b35a-cee2e6e6fbe6", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.05286650000005, 'message_id': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:39,978.978] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:39,980.980] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:39,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 178.6s ago] {'pk_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:24:39,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:39,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 437.5s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:40,258.258] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:40] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:40,573.573] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:40,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:40,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:40,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:40,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175s ago] {'pk_1': 'af430919-ca2c-4cb0-9777-f989b0ac8eb8'}
[2025-06-08 12:24:46,235.235] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:46,244.244] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:46,245.245] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:46,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 458.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:46,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:46,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:46,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:46,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:46,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:24:46,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:24:46,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:24:46,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.9s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:24:46,257.257] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:24:46,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 443.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:24:46,260.260] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:46,328.328] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:46,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:46,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 443.9s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:46,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:24:46,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 443.9s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:24:46,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:46,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:24:48,242.242] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:24:48,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.3s ago] {'summary': '人类自我介绍为“好儿”，AI回应称自己是助手，并询问有什么可以帮助的。', 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:48,245.245] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:48,246.246] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:48,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:48,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.8s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:48,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:24:48,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.3s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:48,251.251] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:48,391.391] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:48,393.393] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:48] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:48,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:48,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 187.6s ago] {'pk_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:24:48,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:48] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:24:51,484.484] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:51,484.484] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:51,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:51,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.9s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:51,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:51,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.9s ago] {'pk_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:24:51,494.494] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:24:51,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'message_id': UUID('991c0894-312a-4ce5-8345-14d690550ff3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我无法直接知道你是谁，因为我没有访问你的个人信息或身份的能力。不过，如果你愿意告诉我一些关于你的信息（比如你的名字、兴趣等），我可以在对话中记住这些内容，并在后续交流中提供更个性化的帮助！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5b00ff61-e460-4195-86fa-af63e6bd89b7", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我没有访问你的个人信息或身份的能力。不过，如果你愿意告诉我一些关于你的信息（比如你的名字、兴趣等），我可以在对话中记住这些内容，并在后续交流中提供更个性化的帮助！', 'latency': 5.117658300000016}
[2025-06-08 12:24:51,501.501] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:51,502.502] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:51,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:51,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 190.2s ago] {'pk_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:24:51,510.510] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:24:51,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.9s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5b00ff61-e460-4195-86fa-af63e6bd89b7", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我没有访问你的个人信息或身份的能力。不过，如果你愿意告诉我一些关于你的信息（比如你的名字、兴趣等），我可以在对话中记住这些内容，并在后续交流中提供更个性化的帮助！', 'latency': 5.117658300000016, 'message_id': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:24:51,512.512] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:51,513.513] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:51,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:51,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 190.2s ago] {'pk_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:24:51,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:51,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 449.1s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:51,817.817] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:51] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:52,130.130] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:52,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:52,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 464s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:52,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:24:52,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 186.5s ago] {'pk_1': '991c0894-312a-4ce5-8345-14d690550ff3'}
[2025-06-08 12:24:54,532.532] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:54] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:54,534.534] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:54,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:54,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 466.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:54,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:24:54,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 466.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:24:54,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:24:54,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 466.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:24:54,539.539] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:24:54,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.4s ago] {'dialog_round': 4, 'updated_at': datetime.datetime(2025, 6, 8, 12, 24, 54, 539461), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:24:54,540.540] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:54,542.542] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:54] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:24:54,862.862] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:54] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:55,171.171] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:55,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:24:55,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 467s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:24:55,183.183] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:55,183.183] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:55] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:24:57,734.734] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:24:57,736.736] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:24:57] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:24:57,805.805] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:24:57,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.8s ago] {'summary': '人类自我介绍为“好儿”，AI回应称自己是助手，并询问有什么可以帮助的。人类询问AI是否知道自己的身份，AI解释说无法直接知道人类是谁，但愿意通过人类提供的信息来记住并提供更个性化的帮助。', 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:57,807.807] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:24:57,810.810] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:24:57,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:24:57,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 455.3s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:57,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:24:57,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.8s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:24:57,814.814] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:06,670.670] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:07,016.016] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:07,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:07,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:07,024.024] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:07,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:07,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:07,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:25:07,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:25:07,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:25:07,045.045] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.7s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:25:07,051.051] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:25:07,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 464.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:07,054.054] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:25:07,193.193] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:07,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 464.7s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:25:07,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:25:07,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 464.7s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:25:07,198.198] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:07,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:07,251.251] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:07,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 479.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:07,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:07,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:07,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 478.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:07,257.257] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:25:07,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.11s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 25, 7, 257686), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:25:07,265.265] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:25:07,267.267] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:07,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:07] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:07,339.339] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:07,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:07,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 479.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:07,343.343] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:07,344.344] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:07] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:21,802.802] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:21,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:21,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:21,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 493.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:21,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:21,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 493.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:21,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:21,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 493.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:21,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:25:21,817.817] base.py -> _exec_single_context line:1901 [INFO]: [cached since 493.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:25:21,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:25:21,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 493.6s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:25:21,980.980] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:25:21,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 479.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:21,982.982] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:25:22,049.049] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:22,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:25:22,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 479.6s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:25:22,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:25:22,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 479.6s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:25:22,054.054] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:22,070.070] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:22] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:28,749.749] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:28] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:25:29,067.067] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,068.068] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:25:29,069.069] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:25:29,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:25:29,073.073] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:29,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,076.076] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:25:29,084.084] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:25:29,332.332] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:25:29,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:25:29,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:25:29,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:25:29,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,337.337] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:29,339.339] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:29,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:29,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:29,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:29,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:29,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:29,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:29,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:29,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:29,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:29,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:29,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:29,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:29,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:29,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:29,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:29,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:29,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:29,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:29,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:29,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:29,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:29,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:29,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:29,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:29,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:29,379.379] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:25:29,380.380] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:29,384.384] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,387.387] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:29,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:29,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:29,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:29,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:25:29,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:29,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:25:29,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:29,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:29,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:29,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:25:29,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:29,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:25:29,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:25:29,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:29,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:29,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:29,423.423] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,424.424] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:25:29,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:29,426.426] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:29,427.427] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:25:29,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:25:29,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:29,434.434] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:29,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501s ago] {'message_id_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:25:29,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:25:29,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:29,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'message_id_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:25:29,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:29,442.442] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,443.443] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:29,443.443] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:25:29,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:29,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:29,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:29,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:29,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:29,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:29,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:29,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:29,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:29,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:29,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:29,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:29,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:29,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:29,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:29,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:29,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:29,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:29,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:29,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:29,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:29,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:29,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:29,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:29,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:29,498.498] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,499.499] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:25:29,748.748] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:29,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:29,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:29,757.757] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:29,757.757] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:29,765.765] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:25:29,766.766] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:29] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:25:33,576.576] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:33,889.889] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:33,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:33,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:33,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:33,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:33,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:33,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:33,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:25:33,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:25:33,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:25:33,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.5s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:25:33,906.906] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:25:33,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 491.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:33,907.907] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:25:33,973.973] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:33,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:25:33,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 491.5s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:25:33,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:25:33,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 491.5s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 4, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:25:33,979.979] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:33,986.986] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:33] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:25:57,261.261] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:25:57,267.267] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:57,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:57,275.275] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:57,276.276] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:25:57,583.583] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:25:57,584.584] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:25:57,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:25:57,588.588] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:57,590.590] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:25:57,892.892] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:25:57,893.893] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:57,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,896.896] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:57,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:57,898.898] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:57,899.899] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:57,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:25:57,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:57,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:57,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:25:57,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:57,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:57,909.909] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:25:57,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:57,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:25:57,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:25:57,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:57,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:57,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:25:57,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:25:57,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:25:57,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:57,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:25:57,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:25:57,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:25:57,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:25:57,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,931.931] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:57,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:25:57,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:57,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:57,939.939] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:25:57,940.940] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:57,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:25:57,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:25:57,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:25:57,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:25:57,949.949] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:57,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:25:57,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:57,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'message_id_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:25:57,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:57,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:25:57,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:25:57,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'message_id_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:25:57,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,971.971] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:57,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:57,973.973] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:57] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:25:57,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:57,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:25:57,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:57,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:57,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:25:57,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:57,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:57,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:25:57,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:57,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:57,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:25:57,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:57,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:58,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:58,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:25:58,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:58,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:58,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:25:58,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:58,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:58,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:25:58,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:58,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:58,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:25:58,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:58,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:58,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:25:58,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:58,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:58,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:25:58,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:58,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:58,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:25:58,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:58,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,036.036] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:58,037.037] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:25:58,039.039] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,039.039] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:58,040.040] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:58,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:25:58,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:58,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:58,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:25:58,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:58,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:58,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:25:58,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:58,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:58,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:25:58,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,057.057] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:58,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:58,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:25:58,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:58,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:58,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:25:58,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:25:58,067.067] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:58,068.068] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:58] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:25:58,155.155] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:25:58,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:25:58,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 530s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:25:58,158.158] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:25:58,159.159] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:58] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:25:58,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:58] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:25:58,268.268] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:58] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:25:59,413.413] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:59] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 12:25:59,717.717] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:59] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 12:25:59,718.718] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:59] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 12:25:59,720.720] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:59] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 12:25:59,723.723] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:25:59] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 12:26:22,420.420] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:26:22,735.735] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:26:22,735.735] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:26:22,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:26:22,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:26:22,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:26:22,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:26:22,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:26:22,739.739] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:26:22,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 545.6s ago] {'dialog_round': 10, 'updated_at': datetime.datetime(2025, 6, 8, 12, 26, 22, 739525), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:26:22,740.740] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:26:22,742.742] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:22] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:26:22,750.750] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:22] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:26:23,001.001] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:26:23,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:26:23,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 554.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:26:23,003.003] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:26:23,003.003] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:23] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:26:24,871.871] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:24] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:26:24,878.878] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:26:24,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:26:24,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:26:24,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:26:24,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:26:24,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:26:24,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:26:24,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:26:24,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:26:24,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:26:24,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.5s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:26:24,886.886] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:26:24,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 542.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:26:24,888.888] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:26:24,926.926] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:26:24,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:26:24,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 542.5s ago] {'pk_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13')}
[2025-06-08 12:26:24,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:26:24,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 542.5s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:26:24,930.930] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:26:24,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:26:24] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:28:12,721.721] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:12] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:28:12,721.721] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:12] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 12:28:13,037.037] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:13,037.037] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:13,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:13,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:13,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:13,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:13,040.040] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:28:13,041.041] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:13,042.042] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00128s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:28:13,042.042] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:13] "GET /account HTTP/1.1" 200 -
[2025-06-08 12:28:13,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:28:13,044.044] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:28:13,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:13,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.7s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:13,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:13,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.7s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:13,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:13,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.7s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:13,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:28:13,056.056] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 12:28:13,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:13,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 664.7s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:13,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 12:28:13,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005354s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 12:28:13,063.063] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:13,064.064] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:13] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:28:14,633.633] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:28:14,640.640] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:14,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:14,641.641] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:14,645.645] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:14,646.646] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:28:14,952.952] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:28:14,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:28:14,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:28:14,954.954] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:14,955.955] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:28:15,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:28:15,264.264] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:15,265.265] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:15,267.267] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:15,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,269.269] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:15,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:15,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:15,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:15,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:28:15,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:15,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:15,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:15,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:28:15,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:28:15,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:15,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:15,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:28:15,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:28:15,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:15,278.278] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:28:15,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:28:15,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:15,282.282] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:15,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:28:15,282.282] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:28:15,283.283] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:15,284.284] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:15,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:28:15,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:15,285.285] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:28:15,285.285] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:15,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:28:15,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:28:15,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'conversation_id_1': UUID('a89bd548-8498-4618-a2ff-146ad1ad2d13'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:15,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:28:15,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:28:15,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'message_id_1': UUID('991c0894-312a-4ce5-8345-14d690550ff3')}
[2025-06-08 12:28:15,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:28:15,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:28:15,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 666.9s ago] {'message_id_1': UUID('af430919-ca2c-4cb0-9777-f989b0ac8eb8')}
[2025-06-08 12:28:15,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:28:15,295.295] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:15,297.297] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:28:15,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:28:15,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:28:15,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:28:15,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:28:15,304.304] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:15,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:28:15,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:28:15,308.308] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,308.308] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:28:15,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:28:15,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,312.312] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:28:15,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,314.314] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:28:15,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:28:15,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:28:15,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,318.318] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:28:15,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,319.319] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:28:15,320.320] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,320.320] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:28:15,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,321.321] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:28:15,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:28:15,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,325.325] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:28:15,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:28:15,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:28:15,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:28:15,332.332] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:28:15,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:28:15,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:28:15,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:28:15,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:28:15,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:28:15,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:28:15,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:28:15,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:28:15,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:28:15,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:28:15,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:28:15,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:28:15,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:28:15,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:28:15,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:28:15,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:28:15,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:28:15,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:28:15,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:28:15,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:28:15,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:28:15,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:28:15,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:28:15,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:28:15,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:28:15,385.385] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:28:15,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:28:15,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:28:15,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:28:15,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:28:15,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:28:15,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:28:15,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:28:15,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:28:15,399.399] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:15,399.399] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:28:15,527.527] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:15,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:15,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 667.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:15,530.530] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:15,530.530] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:15] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:18,407.407] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:28:18,410.410] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:18,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:18,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:18,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:18,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:18,415.415] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:28:18,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.8s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:18,416.416] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:18,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 12:28:18,731.731] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:18,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:18,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:18,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:18,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:18,734.734] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 12:28:18,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:28:18,735.735] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 12:28:18,735.735] base.py -> _exec_single_context line:1901 [INFO]: [cached since 406.1s ago] {'debug_conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:18,736.736] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:18,736.736] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:18,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:18,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 656.3s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:18,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:28:18,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.4s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:18,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:28:18,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 670.4s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:18,740.740] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:18,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:28:29,553.553] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:29,556.556] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:29,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:29,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 681.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:29,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:29,561.561] base.py -> _exec_single_context line:1901 [INFO]: [cached since 681.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:29,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:29,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 681.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:29,564.564] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:28:29,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 672.5s ago] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 12, 28, 29, 564503), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:28:29,565.565] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:29,568.568] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:29,880.880] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:29] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:30,193.193] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:30,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:30,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 682.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:30,196.196] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:30,196.196] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:30] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:32,783.783] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:32,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:32,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 684.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:32,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:32,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 684.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:32,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:32,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 684.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:32,792.792] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:28:32,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.6s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 28, 32, 792598), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:28:32,794.794] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:32,795.795] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:34,779.779] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:28:35,086.086] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:35,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:35,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 687s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:35,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:35,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:35,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:35,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:35,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:28:35,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:28:35,091.091] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:28:35,092.092] base.py -> _exec_single_context line:1901 [INFO]: [cached since 686.7s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:28:35,093.093] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:28:35,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 672.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:35,094.094] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:35,135.135] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:35,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:35,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 672.7s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:35,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:28:35,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 672.7s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:28:35,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:35,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 414s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:28:39,133.133] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:39,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.8s ago] {'pk_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:28:39,134.134] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:39] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:28:40,782.782] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:40,783.783] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:40,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:40,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.2s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:40,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:40,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.2s ago] {'pk_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:28:40,789.789] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:28:40,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'message_id': UUID('aea1fc71-1362-4291-93b5-4dccd783465b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d6ed445a-a295-4b09-9abf-61768beb4806", "example": false}}]', 'answer': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'latency': 5.6197749000000385}
[2025-06-08 12:28:40,799.799] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:40,801.801] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:40,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:40,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 419.5s ago] {'pk_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:28:40,803.803] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:28:40,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.1s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d6ed445a-a295-4b09-9abf-61768beb4806", "example": false}}]', 'answer': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'latency': 5.6197749000000385, 'message_id': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:28:40,804.804] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:40,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:40,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:40,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 419.5s ago] {'pk_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:28:40,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:40,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 678.3s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:41,103.103] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:41] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:28:41,105.105] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:41,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:41,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:41,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:41,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 415.5s ago] {'pk_1': 'aea1fc71-1362-4291-93b5-4dccd783465b'}
[2025-06-08 12:28:42,054.054] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:28:42,361.361] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:42,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:42,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 694.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:42,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:42,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 694s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:42,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:42,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 694s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:42,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:28:42,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 694s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:28:42,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:28:42,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 694s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:28:42,368.368] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:28:42,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:28:42,370.370] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:42,412.412] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:42,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:42,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.9s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:42,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:28:42,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 679.9s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:28:42,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:42,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 421.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:28:43,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:43,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 422.1s ago] {'pk_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:43,436.436] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:43] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:28:50,493.493] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:50,493.493] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:50,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 424.9s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:50,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 424.9s ago] {'pk_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:50,500.500] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:28:50,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 424.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'message_id': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 12:28:50,504.504] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:50,506.506] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:50,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 688s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:50,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.2s ago] {'pk_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:50,512.512] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 12:28:50,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 424.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'message_id': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录（除非你主动提供）。不过，如果你愿意告诉我一些关于你的信息，我可以在后续对话中更好地为你提供帮助！你可以告诉我你的名字、兴趣或其他相关信息。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3f7a0e34-9b93-4f93-aab8-689edca6a456", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录（除非你主动提供）。不过，如果你愿意告诉我一些关于你的信息，我可以在后续对话中更好地为你提供帮助！你可以告诉我你的名字、兴趣或其他相关信息。', 'latency': 8.056254899999999}
[2025-06-08 12:28:50,516.516] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:50,518.518] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:50,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.2s ago] {'pk_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:50,521.521] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 12:28:50,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 424.9s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3f7a0e34-9b93-4f93-aab8-689edca6a456", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录（除非你主动提供）。不过，如果你愿意告诉我一些关于你的信息，我可以在后续对话中更好地为你提供帮助！你可以告诉我你的名字、兴趣或其他相关信息。', 'latency': 8.056254899999999, 'message_id': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:50,525.525] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:50,527.527] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:50,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.2s ago] {'pk_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:28:50,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:50,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 688.1s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:50,804.804] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:50] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:28:51,118.118] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:51,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:51,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 703s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:51,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 12:28:51,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 425.5s ago] {'pk_1': '815c7619-f4e3-4f6b-b54f-444481ced16c'}
[2025-06-08 12:28:53,373.373] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:28:53,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.4s ago] {'summary': '人类询问AI是否知道自己是谁，AI回应称无法直接知道人类的身份，因为无法访问个人信息或历史记录，但表示如果人类愿意提供一些信息，AI可以在后续对话中更好地提供帮助。', 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:53,375.375] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:53,376.376] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:53,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:53,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 690.9s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:53,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:28:53,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.4s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:53,379.379] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:53,883.883] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:53] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:54,194.194] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:54,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:54,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 706.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:54,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:28:54,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 705.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:28:54,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:28:54,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 705.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:28:54,197.197] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:28:54,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 697.1s ago] {'dialog_round': 10, 'updated_at': datetime.datetime(2025, 6, 8, 12, 28, 54, 197386), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:28:54,198.198] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:54,200.200] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:54] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:28:54,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:54] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:54,832.832] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:54,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:28:54,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 706.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:28:54,834.834] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:54,834.834] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:54] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:28:58,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:58,483.483] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:58] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:28:58,640.640] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 12:28:58,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 422.7s ago] {'summary': '人类自我介绍为“好儿”，AI回应并表示自己是助手，询问是否需要帮助。', 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:58,641.641] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:28:58,643.643] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:28:58,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:28:58,643.643] base.py -> _exec_single_context line:1901 [INFO]: [cached since 696.2s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:58,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 12:28:58,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 422.7s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:28:58,645.645] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:58,721.721] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:28:58,722.722] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:28:58] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 12:29:00,961.961] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:01,274.274] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:01,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:01,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 713.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:01,277.277] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:01,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:01,279.279] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:01,279.279] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:01,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:29:01,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:29:01,282.282] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:29:01,282.282] base.py -> _exec_single_context line:1901 [INFO]: [cached since 712.9s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:29:01,284.284] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:29:01,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 698.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:29:01,286.286] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:01,330.330] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:01,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:29:01,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 698.9s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:29:01,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:29:01,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 698.9s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:29:01,341.341] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:01,349.349] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:23,672.672] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:23,679.679] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:23,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:23,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 735.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:23,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:23,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 735.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:23,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:23,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 735.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:23,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:29:23,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 735.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:29:23,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:29:23,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 735.3s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:29:23,690.690] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:29:23,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:29:23,692.692] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:23,758.758] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:23,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:29:23,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.3s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:29:23,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:29:23,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.3s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:29:23,761.761] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:23,774.774] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:23] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:27,895.895] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 12:29:27,898.898] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:29:27,900.900] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:29:27,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:29:27,902.902] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:27,904.904] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:29:28,223.223] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,223.223] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 12:29:28,224.224] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,225.225] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,227.227] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,227.227] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,235.235] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,237.237] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:29:28,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,239.239] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 12:29:28,239.239] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:28,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 12:29:28,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:28,240.240] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:28,242.242] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 12:29:28,242.242] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:28,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:28,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:29:28,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 12:29:28,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:28,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:28,248.248] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:29:28,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:29:28,250.250] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:29:28,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 12:29:28,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:29:28,253.253] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 12:29:28,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:29:28,255.255] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 12:29:28,258.258] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:28,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:29:28,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:29:28,262.262] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:29:28,262.262] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'message_id_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 12:29:28,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 12:29:28,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 12:29:28,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 739.9s ago] {'message_id_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 12:29:28,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:29:28,270.270] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:29:28,272.272] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 12:29:28,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 12:29:28,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:29:28,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,279.279] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:29:28,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 12:29:28,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,283.283] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:29:28,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:29:28,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 12:29:28,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:29:28,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,290.290] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:29:28,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 12:29:28,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:29:28,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:29:28,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 12:29:28,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:29:28,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:29:28,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 12:29:28,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:29:28,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:29:28,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 12:29:28,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:29:28,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,314.314] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:29:28,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 12:29:28,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,318.318] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:29:28,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,320.320] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:29:28,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 12:29:28,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,324.324] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:29:28,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:29:28,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 12:29:28,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:29:28,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:29:28,332.332] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 12:29:28,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:29:28,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,337.337] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:29:28,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 12:29:28,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:29:28,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:29:28,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 12:29:28,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:29:28,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:29:28,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 12:29:28,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:29:28,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:29:28,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 12:29:28,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:29:28,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:29:28,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 12:29:28,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:29:28,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:29:28,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 12:29:28,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:29:28,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:29:28,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 12:29:28,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:29:28,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:29:28,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 12:29:28,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 12:29:28,383.383] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,385.385] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 12:29:28,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:29:28,610.610] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 12:29:28,612.612] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 12:29:28,922.922] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:28,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:28,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 740.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:28,925.925] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:28,925.925] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:28] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 12:29:30,101.101] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:30] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:30,414.414] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:30,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:30,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 742.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:30,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:30,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 742.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:30,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:30,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 742.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:30,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 12:29:30,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 742.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 12:29:30,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 12:29:30,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 742.1s ago] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 12:29:30,421.421] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 12:29:30,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 728s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 12:29:30,422.422] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:30,460.460] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:30,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 12:29:30,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 728s ago] {'pk_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6')}
[2025-06-08 12:29:30,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 12:29:30,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 728s ago] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 12:29:30,464.464] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 12:29:30,473.473] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:30] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 12:29:46,350.350] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:46,352.352] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:46,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:46,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 758.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:46,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:46,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 758s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:46,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:46,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 758s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:46,356.356] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:29:46,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.2s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 29, 46, 356637), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:29:46,357.357] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:46,359.359] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:46] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:49,682.682] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:49,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:49,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 761.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:49,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:49,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 761.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:49,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:49,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 761.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:49,686.686] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:29:49,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 323.5s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 29, 49, 686275), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:29:49,687.687] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:49,687.687] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:49] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:59,735.735] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 12:29:59,739.739] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 12:29:59,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 12:29:59,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 771.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 12:29:59,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 12:29:59,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 771.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 12:29:59,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 12:29:59,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 771.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 12:29:59,747.747] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 12:29:59,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'updated_at': datetime.datetime(2025, 6, 8, 12, 29, 59, 746621), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 12:29:59,747.747] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 12:29:59,748.748] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 12:29:59] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:51:56,136.136] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 14:51:56,136.136] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 14:51:56,139.139] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 14:52:18,082.082] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 14:52:18,088.088] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 14:52:18,377.377] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:18] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 14:52:18,378.378] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:18] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 14:52:18,849.849] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 14:52:18,849.849] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 14:52:18,851.851] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 14:52:18,852.852] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 14:52:18,852.852] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 14:52:18,854.854] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 14:52:18,854.854] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:18,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:18,857.857] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:18,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:52:18,867.867] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 14:52:18,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 14:52:18,873.873] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:52:18,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:18,877.877] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:18,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:18,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006832s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:18,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:18,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008864s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:18,990.990] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:18,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 14:52:18,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:18,992.992] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00130s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 14:52:18,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1359s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:18,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:18,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1201s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:18,996.996] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:18,999.999] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:18] "GET /account HTTP/1.1" 200 -
[2025-06-08 14:52:18,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 14:52:19,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01489s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 14:52:19,009.009] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:19,010.010] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:19] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 14:52:21,652.652] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 14:52:21,656.656] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:21,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:21,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:21,663.663] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:21,667.667] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 14:52:21,669.669] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 14:52:21,670.670] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 14:52:21,671.671] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:52:21,673.673] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:52:21,675.675] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 14:52:21,980.980] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:21] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 14:52:21,981.981] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:21,982.982] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:21,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:21,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:21,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.133s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:21,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.131s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:21,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:21,995.995] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00261s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:21,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:52:21,996.996] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00125s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 14:52:21,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:52:22,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 14:52:22,000.000] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00211s] {'id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:52:22,001.001] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00086s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:52:22,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,003.003] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 14:52:22,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:52:22,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,009.009] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00324s] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:52:22,009.009] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00239s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 14:52:22,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 14:52:22,016.016] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00295s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 14:52:22,016.016] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00128s] {'conversation_id_1': UUID('1a7a73fb-44ac-4390-9136-41ab3e5aedf6'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:52:22,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.015s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 14:52:22,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 14:52:22,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,025.025] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00424s] {'message_id_1': UUID('815c7619-f4e3-4f6b-b54f-444481ced16c')}
[2025-06-08 14:52:22,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01828s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 14:52:22,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01472s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 14:52:22,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 14:52:22,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00937s ago] {'message_id_1': UUID('aea1fc71-1362-4291-93b5-4dccd783465b')}
[2025-06-08 14:52:22,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02911s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 14:52:22,032.032] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:22,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,034.034] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:52:22,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02699s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 14:52:22,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02943s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 14:52:22,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04086s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 14:52:22,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,045.045] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03778s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 14:52:22,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0334s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 14:52:22,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04467s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 14:52:22,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04158s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 14:52:22,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03718s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 14:52:22,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04841s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 14:52:22,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04535s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 14:52:22,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0411s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 14:52:22,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0528s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 14:52:22,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05072s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 14:52:22,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04671s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 14:52:22,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05831s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 14:52:22,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05547s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 14:52:22,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05129s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 14:52:22,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06269s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 14:52:22,067.067] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,068.068] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06035s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 14:52:22,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05653s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 14:52:22,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06852s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 14:52:22,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,073.073] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06581s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 14:52:22,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06195s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 14:52:22,076.076] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07381s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 14:52:22,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07114s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 14:52:22,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0671s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 14:52:22,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07851s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 14:52:22,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07554s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 14:52:22,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07166s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 14:52:22,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08331s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 14:52:22,087.087] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08072s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 14:52:22,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07699s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 14:52:22,091.091] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,091.091] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08874s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 14:52:22,092.092] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08595s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 14:52:22,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,095.095] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08173s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 14:52:22,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09314s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 14:52:22,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09016s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 14:52:22,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08594s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 14:52:22,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09769s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 14:52:22,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09498s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 14:52:22,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09091s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 14:52:22,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1022s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 14:52:22,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09896s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 14:52:22,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09451s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 14:52:22,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1057s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 14:52:22,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1026s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 14:52:22,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09842s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 14:52:22,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1098s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 14:52:22,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1066s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 14:52:22,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,115.115] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1022s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 14:52:22,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1152s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 14:52:22,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1134s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 14:52:22,121.121] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 14:52:22,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.109s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 14:52:22,124.124] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:22,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 14:52:22,187.187] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:22,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:22,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.332s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:22,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:22,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.199s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:22,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:22,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.316s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:22,196.196] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:22,197.197] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 14:52:22,215.215] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:22,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:22,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.359s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:22,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:22,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2272s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:22,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:22,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.345s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:22,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:52:22,225.225] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:52:22,228.228] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:22,229.229] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:52:22,539.539] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:52:22,570.570] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:22,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:22,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.714s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:22,573.573] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:22,573.573] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:52:22,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 14:52:22,855.855] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:22] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 14:52:39,816.816] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:39] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:52:40,130.130] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:40,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:40,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.27s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:40,133.133] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:40,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.14s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:40,135.135] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:52:40,135.135] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:40,137.137] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:40,139.139] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:40] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:52:40,462.462] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:52:40,465.465] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:40,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:40,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.61s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:40,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:40,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.48s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:40,469.469] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 14:52:40,469.469] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:52:40,479.479] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:52:40,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3449s ago] {'debug_conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:40,480.480] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:40,481.481] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:40,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:52:40,482.482] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:52:40,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:52:40,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.48s ago] {'conversation_id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:52:40,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 14:52:40,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.47s ago] {'conversation_id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:52:40,489.489] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:40,489.489] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:52:48,961.961] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:52:49,277.277] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:49,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:49,278.278] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.42s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:49,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:52:49,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.29s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:52:49,282.282] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:52:49,282.282] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.41s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:52:49,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:52:49,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.06s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:52:49,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:52:49,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.29s ago] {'id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:52:49,288.288] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:52:49,288.288] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:52:49,293.293] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:49,334.334] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:49,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:52:49,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.854s ago] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:52:49,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:52:49,338.338] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'conversation_id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:52:49,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:49,341.341] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:52:49,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:49,821.821] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00357s] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:49,823.823] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:49] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:52:56,488.488] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:56,488.488] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:52:56,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,489.489] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:52:56,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,494.494] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:56,497.497] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 14:52:56,497.497] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'message_id': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 14:52:56,502.502] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:56,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:56,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.02s ago] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:52:56,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.687s ago] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:56,506.506] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 14:52:56,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009778s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'message_id': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！请问有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "816c8da0-57cc-4ee8-abbf-8987e87dfd53", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 6.670549799999996}
[2025-06-08 14:52:56,513.513] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:56,514.514] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:56,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.697s ago] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:56,517.517] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 14:52:56,518.518] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "816c8da0-57cc-4ee8-abbf-8987e87dfd53", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 6.670549799999996, 'message_id': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:56,519.519] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:52:56,520.520] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:56,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.703s ago] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:52:56,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.04s ago] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:52:56,807.807] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:52:56] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:52:56,809.809] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:52:56,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:52:56,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:52:56,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3185s ago] {'pk_1': '09ed6f39-e2b7-44f9-8fa4-1157540613f1'}
[2025-06-08 14:53:04,199.199] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:53:04,200.200] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:04] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:53:06,766.766] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 14:53:06,767.767] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'summary': '人类自我介绍为“好儿”，AI回应问候并询问是否需要帮助。', 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:53:06,768.768] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:53:06,770.770] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:53:06,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:53:06,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 26.29s ago] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:53:06,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 14:53:06,773.773] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:53:06,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:53:06,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.96s ago] {'pk_1': UUID('09ed6f39-e2b7-44f9-8fa4-1157540613f1')}
[2025-06-08 14:53:07,304.304] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:53:07,623.623] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:53:07,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:53:07,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.77s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:53:07,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:53:07,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.63s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:53:07,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:53:07,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.75s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:53:07,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:53:07,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:53:07,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:53:07,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.63s ago] {'id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:53:07,629.629] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:53:07,630.630] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.34s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:53:07,631.631] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:53:07,671.671] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:53:07,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:53:07,671.671] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.19s ago] {'pk_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:53:07,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:53:07,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.33s ago] {'conversation_id_1': UUID('fcc3da67-3694-45ae-93ac-3047fb222984'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:53:07,789.789] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:53:07,803.803] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:53:09,536.536] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:09] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 14:53:09,841.841] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:09] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 14:53:09,841.841] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:09] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 14:53:09,843.843] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:09] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 14:53:09,843.843] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:09] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 14:53:10,888.888] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:53:11,197.197] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:53:11,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:53:11,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.34s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:53:11,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:53:11,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.21s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:53:11,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:53:11,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.32s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:53:11,202.202] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 14:53:11,203.203] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'dialog_round': 3, 'updated_at': datetime.datetime(2025, 6, 8, 14, 53, 11, 201926), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 14:53:11,205.205] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:53:11,206.206] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:53:11,211.211] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:11] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:53:11,464.464] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:53:11,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:53:11,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.61s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:53:11,466.466] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:53:11,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:53:11] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:53:14,209.209] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 14:53:14,210.210] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'name': '用户自我介绍', 'conversation_id': UUID('fcc3da67-3694-45ae-93ac-3047fb222984')}
[2025-06-08 14:53:14,211.211] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:00,860.860] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:54:00,864.864] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:00,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:00,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:00,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:00,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 98.88s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:00,868.868] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:54:00,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.73s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:00,869.869] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:00,871.871] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:00] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:54:01,125.125] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:54:01,436.436] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:01,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:01,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:01,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:01,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.45s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:01,439.439] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 14:54:01,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.97s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:54:01,443.443] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:54:01,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.31s ago] {'debug_conversation_id': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:01,444.444] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:01,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:01,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:01,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.97s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:01,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:54:01,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.44s ago] {'conversation_id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:01,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 14:54:01,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.43s ago] {'conversation_id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:01,450.450] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:01,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:54:08,469.469] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:54:08,472.472] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:08,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:08,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:08,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:08,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 106.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:08,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:54:08,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:54:08,478.478] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 14:54:08,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.28s ago] {'dialog_round': 5, 'updated_at': datetime.datetime(2025, 6, 8, 14, 54, 8, 476958), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 14:54:08,478.478] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:08,479.479] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:08] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 14:54:08,792.792] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:08] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:54:09,103.103] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:09,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:09,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:09,105.105] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:09,106.106] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:09] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 14:54:10,474.474] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:54:10,477.477] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:10,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:10,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:10,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:10,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:10,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:54:10,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:54:10,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:54:10,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:54:10,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:54:10,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.5s ago] {'id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:54:10,489.489] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:54:10,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:10,494.494] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:10,538.538] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:10,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:10,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 90.06s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:10,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:54:10,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.2s ago] {'conversation_id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:54:10,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:10,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:54:13,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:54:13,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 83.64s ago] {'pk_1': UUID('6f422237-169f-4eb1-a14d-5afb59351e10')}
[2025-06-08 14:54:13,462.462] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:54:14,448.448] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:14,449.449] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:14,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:14,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.96s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:14,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:54:14,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.96s ago] {'pk_1': UUID('6f422237-169f-4eb1-a14d-5afb59351e10')}
[2025-06-08 14:54:14,453.453] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 14:54:14,454.454] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.96s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'message_id': UUID('6f422237-169f-4eb1-a14d-5afb59351e10'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "61934304-57fa-4170-a9b7-9f5d8fd5c5c3", "example": false}}]', 'answer': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'latency': 3.885446099999996}
[2025-06-08 14:54:14,455.455] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:14,457.457] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:14,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:54:14,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 84.64s ago] {'pk_1': UUID('6f422237-169f-4eb1-a14d-5afb59351e10')}
[2025-06-08 14:54:14,459.459] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 14:54:14,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.94s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "61934304-57fa-4170-a9b7-9f5d8fd5c5c3", "example": false}}]', 'answer': '你好！我是你的AI助手，请问有什么可以帮你的吗？', 'latency': 3.885446099999996, 'message_id': UUID('6f422237-169f-4eb1-a14d-5afb59351e10')}
[2025-06-08 14:54:14,460.460] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:14,461.461] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:14,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:54:14,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 84.64s ago] {'pk_1': UUID('6f422237-169f-4eb1-a14d-5afb59351e10')}
[2025-06-08 14:54:14,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:14,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.98s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:14,759.759] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:14] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:54:15,070.070] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:15,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:15,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:15,072.072] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:54:15,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.58s ago] {'pk_1': '6f422237-169f-4eb1-a14d-5afb59351e10'}
[2025-06-08 14:54:22,560.560] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:54:22,564.564] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:22,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:22,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:22,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:22,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:22,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:54:22,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:54:22,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:54:22,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:54:22,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:54:22,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.6s ago] {'id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:54:22,573.573] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:54:22,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.28s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:22,576.576] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:22,619.619] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:22,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:22,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.1s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:22,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:54:22,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 93.28s ago] {'conversation_id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:54:22,623.623] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:22,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:22] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:54:24,987.987] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 14:54:24,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.22s ago] {'summary': '人类自我介绍为“好儿”，AI回应并自我介绍为AI助手，询问是否需要帮助。', 'conversation_id': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:24,989.989] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:24,990.990] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:24,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:24,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.5s ago] {'pk_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:24,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 14:54:24,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.22s ago] {'conversation_id_1': UUID('448f73e8-a5fb-4425-ab39-59cf349bbcbf')}
[2025-06-08 14:54:24,993.993] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:36,172.172] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:36,173.173] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:36] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:54:43,512.512] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:54:43,824.824] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:43,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:43,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:43,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:43,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 141.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:43,828.828] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:54:43,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.7s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:43,828.828] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:43,829.829] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:43] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 14:54:43,836.836] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:54:44,088.088] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:44,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:54:44,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:54:44,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:54:44,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 142.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:44,091.091] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 14:54:44,091.091] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:54:44,092.092] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 14:54:44,092.092] base.py -> _exec_single_context line:1901 [INFO]: [cached since 124s ago] {'debug_conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:54:44,093.093] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:54:44,095.095] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:54:44,095.095] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:54:44,095.095] base.py -> _exec_single_context line:1901 [INFO]: [cached since 123.6s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:54:44,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 14:54:44,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 142.1s ago] {'conversation_id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:44,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 14:54:44,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 142.1s ago] {'conversation_id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:54:44,098.098] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:54:44,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:54:44] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 14:55:03,217.217] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:55:03,219.219] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:03,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:55:03,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 164.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:55:03,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:55:03,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 161.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:55:03,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:55:03,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 164.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:55:03,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:55:03,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 161s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:55:03,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:55:03,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 161.2s ago] {'id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:55:03,228.228] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:55:03,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:55:03,230.230] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:03,270.270] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:03,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:03,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 142.8s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:03,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:55:03,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.9s ago] {'conversation_id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:55:03,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:55:03,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.9s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 14:55:04,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:04,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.5s ago] {'pk_1': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:04,307.307] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:04] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:55:07,215.215] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:07,215.215] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:55:07,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.7s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:07,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.7s ago] {'pk_1': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:07,220.220] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 14:55:07,221.221] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:07] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:55:07,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'message_id': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 14:55:07,225.225] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:07,225.225] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:07,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 146.7s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:07,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.4s ago] {'pk_1': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:07,228.228] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 14:55:07,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'message_id': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！请问有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c3c76040-637c-481f-91f2-26cd2042027c", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 3.9101131999999836}
[2025-06-08 14:55:07,229.229] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:07,230.230] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:07,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.4s ago] {'pk_1': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:07,232.232] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 14:55:07,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c3c76040-637c-481f-91f2-26cd2042027c", "example": false}}]', 'answer': '你好！请问有什么可以帮您的吗？', 'latency': 3.9101131999999836, 'message_id': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:07,234.234] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:07,235.235] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:07,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,235.235] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.4s ago] {'pk_1': UUID('73be077b-8db9-4603-8617-c6d5f62ec48c')}
[2025-06-08 14:55:07,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 146.8s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:07,530.530] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:07,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:55:07,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 14:55:07,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 131s ago] {'pk_1': '73be077b-8db9-4603-8617-c6d5f62ec48c'}
[2025-06-08 14:55:14,531.531] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:55:14,535.535] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:14,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 14:55:14,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 14:55:14,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 14:55:14,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 14:55:14,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 14:55:14,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 14:55:14,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 14:55:14,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 14:55:14,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 14:55:14,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 172.5s ago] {'id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 14:55:14,542.542] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 14:55:14,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 14:55:14,543.543] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:14,584.584] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:14,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:14,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.1s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:14,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 14:55:14,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.2s ago] {'conversation_id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 14:55:14,587.587] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:55:14,593.593] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 14:55:14,679.679] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 14:55:14,680.680] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 14:55:14] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 14:55:14,993.993] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 14:55:14,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.2s ago] {'summary': '人类自我介绍为好儿，AI回应问候并询问是否需要帮助。', 'conversation_id': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:14,994.994] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 14:55:14,996.996] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 14:55:14,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 14:55:14,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.5s ago] {'pk_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:14,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 14:55:14,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.2s ago] {'conversation_id_1': UUID('66357030-b186-40e5-8ad2-bcc7f4c22039')}
[2025-06-08 14:55:14,999.999] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:04:03,474.474] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\memory\\token_buffer_memory.py', reloading
[2025-06-08 15:04:03,948.948] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:04:25,297.297] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:04:25,300.300] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:07:27,688.688] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:07:28,203.203] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 15:07:28,203.203] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:07:28,204.204] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 15:07:28,205.205] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:07:28,206.206] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 15:07:28,206.206] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:07:28,206.206] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:28,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:28,209.209] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:07:28,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:07:28,212.212] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:28,215.215] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:07:28,215.215] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:28,217.217] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:28,219.219] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:28] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:07:28,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:07:28,265.265] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:28,265.265] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:28,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0573s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:07:28,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:07:28,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05505s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:28,269.269] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:07:28,269.269] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:07:28,275.275] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:07:28,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06015s ago] {'debug_conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:28,276.276] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:28,277.277] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:28,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:28,278.278] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:28,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:07:28,370.370] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:07:28,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:07:28,376.376] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:07:28,377.377] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:07:28,378.378] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:07:32,587.587] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:07:32,590.590] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:32,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:32,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.383s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:07:32,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:07:32,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.382s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:32,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:07:32,597.597] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:07:32,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:07:32,602.602] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:07:32,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:07:32,606.606] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:07:32,608.608] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:07:32,609.609] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:07:32,612.612] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:32,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:32,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:32,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.378s ago] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:32,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:07:32,659.659] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:07:32,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:32,661.661] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:07:32,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:32,891.891] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:32,891.891] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:07:37,581.581] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:07:37,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:37] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:07:37,689.689] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:37,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,690.690] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:37,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,692.692] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:37,695.695] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:07:37,696.696] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'message_id': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 15:07:37,701.701] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:37,702.702] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:37,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,702.702] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.424s ago] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:37,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.813s ago] {'pk_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:37,704.704] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:07:37,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009043s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'message_id': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d97e1645-5791-421c-8485-5a18c2c97524", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.691169000000002}
[2025-06-08 15:07:37,707.707] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:37,708.708] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:37,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.818s ago] {'pk_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:37,709.709] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:07:37,710.710] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "d97e1645-5791-421c-8485-5a18c2c97524", "example": false}}]', 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.691169000000002, 'message_id': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:37,710.710] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:37,711.711] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:37,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.822s ago] {'pk_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:07:37,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.435s ago] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:37,898.898] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:37,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.69s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:07:37,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:07:37,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2086s ago] {'pk_1': '5bc7edcb-a6c5-497a-be45-87668828a9bf'}
[2025-06-08 15:07:44,832.832] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:07:44,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:44] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:07:45,237.237] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:45] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:07:45,241.241] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:45,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:07:45,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:07:45,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:07:45,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.03s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:07:45,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:07:45,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.65s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:07:45,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:07:45,250.250] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.65s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:07:45,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:07:45,250.250] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.65s ago] {'id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:07:45,251.251] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:07:45,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.64s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:07:45,253.253] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:45,294.294] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:45,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:45,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.02s ago] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:45,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:07:45,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.64s ago] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:07:45,401.401] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:07:45,401.401] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:07:45,402.402] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'summary': '人类自我介绍为“好儿”，AI回应称自己是人类的AI助手，并询问有什么可以帮助的。', 'conversation_id': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:45,403.403] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:07:45,405.405] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:07:45,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:07:45,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.13s ago] {'pk_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:45,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:07:45,408.408] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957')}
[2025-06-08 15:07:45,409.409] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:07:45,417.417] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:07:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:08:10,131.131] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:10,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:10,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:10,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.24s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:10,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:10,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.24s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:10,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:10,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.85s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:10,451.451] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:08:10,452.452] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'updated_at': datetime.datetime(2025, 6, 8, 15, 8, 10, 450908), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:08:10,452.452] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:10,454.454] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:10] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:10,775.775] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:10] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:08:10,777.777] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:10,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:10,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.57s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:10,780.780] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:10,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:10] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:08:15,240.240] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:15] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:08:15,558.558] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:15,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:15,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 47.35s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:15,560.560] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:15,560.560] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:15] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:08:16,931.931] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:16,934.934] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:16,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:16,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:16,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:16,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.72s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:16,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:16,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.34s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:16,938.938] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:08:16,938.938] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'model_config': '{"provider": "openai", "model": "gpt-4o-mini", "parameters": {"temperature": 1, "top_p": 0, "presence_penalty": 0, "frequency_penalty": 0, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 8, 16, 937558), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:08:16,938.938] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:16,940.940] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:16] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:17,259.259] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:17,259.259] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:17,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.05s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:17,262.262] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:17,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:17] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:08:20,355.355] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:20,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:20,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.15s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:20,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:20,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.15s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:20,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:20,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 47.76s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:20,361.361] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:08:20,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.91s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 8, 20, 361336), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:08:20,362.362] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:20,365.365] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:20] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:22,712.712] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:22] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:08:23,027.027] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,028.028] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:08:23,028.028] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:08:23,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:08:23,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:23,032.032] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:08:23,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.82s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,041.041] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,042.042] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:08:23,288.288] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:08:23,336.336] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,337.337] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,337.337] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.13s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,338.338] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.13s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:08:23,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,341.341] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00091s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:08:23,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.13s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:23,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:08:23,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:08:23,343.343] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:08:23,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.74s ago] {'id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:08:23,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:08:23,346.346] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00107s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:08:23,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.98s ago] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:23,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:08:23,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.97s ago] {'conversation_id_1': UUID('d1949c52-a56a-4012-aef5-d96bef29b957'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:23,349.349] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:08:23,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:08:23,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,353.353] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00163s] {'message_id_1': UUID('5bc7edcb-a6c5-497a-be45-87668828a9bf')}
[2025-06-08 15:08:23,355.355] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00278s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:08:23,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01224s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:08:23,358.358] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,359.359] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:08:23,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01118s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:08:23,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00872s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:08:23,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01696s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:08:23,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01487s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:08:23,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0121s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:08:23,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:08:23,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01747s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:08:23,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01458s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:08:23,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02241s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:08:23,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01982s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:08:23,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01695s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:08:23,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0249s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:08:23,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02236s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:08:23,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01949s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:08:23,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02744s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:08:23,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02494s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:08:23,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:08:23,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02996s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:08:23,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02739s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:08:23,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02465s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:08:23,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03269s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:08:23,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03031s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:08:23,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02793s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:08:23,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03629s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:08:23,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,382.382] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03402s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:08:23,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03144s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:08:23,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,385.385] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03981s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:08:23,385.385] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03755s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:08:23,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03503s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:08:23,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04361s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:08:23,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04137s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:08:23,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03876s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:08:23,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04742s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:08:23,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04585s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:08:23,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04375s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:08:23,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05244s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:08:23,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05114s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:08:23,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04913s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:08:23,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05791s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:08:23,405.405] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05664s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:08:23,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05469s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:08:23,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06366s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:08:23,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06152s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:08:23,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05917s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:08:23,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06793s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:08:23,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06592s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:08:23,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06339s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:08:23,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07142s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:08:23,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06889s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:08:23,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06607s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:08:23,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07393s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:08:23,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07139s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:08:23,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06862s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:08:23,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0766s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:08:23,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07408s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:08:23,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:08:23,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07142s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:08:23,425.425] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,426.426] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:08:23,475.475] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.27s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.27s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:23,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:23,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.89s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:23,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:08:23,486.486] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.88s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:08:23,488.488] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,489.489] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:08:23,495.495] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:08:23,543.543] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.34s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.34s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:23,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:23,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.95s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:23,551.551] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,552.552] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:08:23,804.804] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:23,805.805] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:23,805.805] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:23,807.807] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:23,807.807] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:23] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:08:24,036.036] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:24] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:08:24,036.036] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:24] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:08:26,029.029] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:26] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:08:26,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:26,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:26,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.13s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:26,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:26,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.13s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:26,344.344] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:08:26,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.13s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:26,345.345] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:26,346.346] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:08:26,604.604] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:26,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:26,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:26,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:26,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.39s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:26,607.607] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:08:26,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.34s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:08:26,614.614] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:08:26,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.4s ago] {'debug_conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:26,615.615] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:26,617.617] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:26,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:26,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.34s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:26,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:08:26,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.25s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:26,622.622] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:08:26,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.25s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:26,624.624] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:26,624.624] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:26] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:08:28,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:08:28,074.074] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:28,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:28,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.87s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:28,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:28,079.079] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.87s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:28,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:28,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.49s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:28,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:08:28,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.48s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:08:28,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:08:28,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.48s ago] {'id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:08:28,087.087] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:08:28,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.48s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:28,090.090] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:28,140.140] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:28,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:28,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.86s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:28,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:08:28,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.49s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:08:28,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:28,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.49s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:08:35,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.29s ago] {'pk_1': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936')}
[2025-06-08 15:08:35,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:35] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:08:35,204.204] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:35,204.204] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:35,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.52s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:35,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.52s ago] {'pk_1': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936')}
[2025-06-08 15:08:35,213.213] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:08:35,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.52s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'message_id': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！请问有什么我可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a95439b7-28e3-45e6-87da-fd9e84ba834d", "example": false}}]', 'answer': '你好！请问有什么我可以帮您的吗？', 'latency': 7.018538299999989}
[2025-06-08 15:08:35,217.217] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:35,219.219] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:35,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.33s ago] {'pk_1': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936')}
[2025-06-08 15:08:35,221.221] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:08:35,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.51s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a95439b7-28e3-45e6-87da-fd9e84ba834d", "example": false}}]', 'answer': '你好！请问有什么我可以帮您的吗？', 'latency': 7.018538299999989, 'message_id': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936')}
[2025-06-08 15:08:35,223.223] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:35,224.224] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:35,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.34s ago] {'pk_1': UUID('c8835257-7da3-4444-a14f-aeb0fe27c936')}
[2025-06-08 15:08:35,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 66.95s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:35,521.521] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:35] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:08:35,832.832] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:35,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 67.62s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:35,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:35,835.835] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.14s ago] {'pk_1': 'c8835257-7da3-4444-a14f-aeb0fe27c936'}
[2025-06-08 15:08:40,790.790] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:08:40,793.793] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:40,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:40,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.59s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:40,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:08:40,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.59s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:08:40,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:08:40,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:08:40,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:08:40,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:08:40,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:08:40,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.2s ago] {'id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:08:40,803.803] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:08:40,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.19s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:08:40,805.805] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:40,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:40,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:40,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.57s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:40,846.846] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:08:40,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.19s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:08:41,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:41,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.42s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:08:42,746.746] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:42,747.747] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:42] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:08:47,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 74.57s ago] {'pk_1': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562')}
[2025-06-08 15:08:47,458.458] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:47] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:08:47,486.486] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:47,487.487] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:47,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.8s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:47,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.8s ago] {'pk_1': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562')}
[2025-06-08 15:08:47,491.491] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:08:47,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'message_id': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '我不知道您是谁，因为我没有关于用户身份或个人信息的存储。您可以告诉我您的名字或需要的帮助，我会尽力为您提供支持！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3520 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "40c7c330-a5cc-4408-b4f1-3064bbf43e2f", "example": false}}]', 'answer': '我不知道您是谁，因为我没有关于用户身份或个人信息的存储。您可以告诉我您的名字或需要的帮助，我会尽力为您提供支持！', 'latency': 6.353125200000022}
[2025-06-08 15:08:47,496.496] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:47,498.498] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:47,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 74.61s ago] {'pk_1': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562')}
[2025-06-08 15:08:47,500.500] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:08:47,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.79s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3520 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "40c7c330-a5cc-4408-b4f1-3064bbf43e2f", "example": false}}]', 'answer': '我不知道您是谁，因为我没有关于用户身份或个人信息的存储。您可以告诉我您的名字或需要的帮助，我会尽力为您提供支持！', 'latency': 6.353125200000022, 'message_id': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562')}
[2025-06-08 15:08:47,502.502] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:47,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:47,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 74.61s ago] {'pk_1': UUID('df235eaa-dfc0-40a6-a1d8-bd2620483562')}
[2025-06-08 15:08:47,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:47,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 79.23s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:47,808.808] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:47] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:08:48,118.118] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:48,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:08:48,119.119] base.py -> _exec_single_context line:1901 [INFO]: [cached since 79.91s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:08:48,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:08:48,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 70.43s ago] {'pk_1': 'df235eaa-dfc0-40a6-a1d8-bd2620483562'}
[2025-06-08 15:08:50,888.888] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:50] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:08:51,206.206] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:51] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:08:51,206.206] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:51] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:08:51,207.207] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:51] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:08:51,207.207] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:51] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:08:52,611.611] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:52,612.612] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:08:52] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:08:53,654.654] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:08:53,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.25s ago] {'summary': '人类自我介绍为“好儿”，AI回应问候并询问是否需要帮助。', 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:53,655.655] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:53,658.658] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:53,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:53,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.38s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:53,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:08:53,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 68.25s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:53,661.661] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:08:55,740.740] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:08:55,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 70.34s ago] {'summary': '人类询问AI是否知道他们的身份，AI回应说不知道，因为没有关于用户身份或个人信息的存储，并表示可以提供支持。', 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:55,741.741] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:08:55,743.743] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:08:55,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:08:55,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.47s ago] {'pk_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:55,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:08:55,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 70.34s ago] {'conversation_id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:08:55,745.745] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:00,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:09:00,582.582] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:00,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:00,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.38s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:00,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:00,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.38s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:00,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:00,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.99s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:00,590.590] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:09:00,590.590] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 15, 9, 0, 589256), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:09:00,591.591] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:00,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:00] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:09:00,918.918] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:00] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:09:00,921.921] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:00,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:00,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.71s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:00,924.924] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:00,924.924] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:00] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:09:16,769.769] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:17,078.078] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:17,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:17,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:17,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:17,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:17,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:17,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:17,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:09:17,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:09:17,083.083] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:09:17,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 104.5s ago] {'id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:09:17,084.084] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:17,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:25,056.056] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:25,059.059] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:25,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:25,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:25,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:25,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:25,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:25,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:25,063.063] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:09:25,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:09:25,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:09:25,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'id_1': UUID('47399d74-1be8-4247-adf2-85b01ef58d68'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:09:25,066.066] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:09:25,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.66s ago] {'summary': '', 'conversation_id': UUID('47399d74-1be8-4247-adf2-85b01ef58d68')}
[2025-06-08 15:09:25,066.066] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:25,068.068] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:25] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:26,153.153] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:26] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:09:26,460.460] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:26,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:26,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:26,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:26,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:26,462.462] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:09:26,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.2s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:26,463.463] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:26,464.464] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:09:26,774.774] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:26] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:09:26,778.778] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:26,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:26,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:26,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:26,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:26,780.780] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:09:26,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:09:26,782.782] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:09:26,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'debug_conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:26,783.783] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:26,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:26,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:09:26,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.5s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:09:26,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:09:26,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.4s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:09:26,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:09:26,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.4s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:09:26,789.789] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:26,789.789] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:26] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:09:28,913.913] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:28,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:28,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:28,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:28,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:28,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:28,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:28,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:09:28,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:09:28,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:09:28,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.3s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:09:28,919.919] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:28,919.919] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:34,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:09:34,497.497] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:34,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:34,498.498] base.py -> _exec_single_context line:1901 [INFO]: [cached since 126.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:34,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:34,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 126.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:34,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:34,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 121.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:34,502.502] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:09:34,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.91s ago] {'dialog_round': 10, 'updated_at': datetime.datetime(2025, 6, 8, 15, 9, 34, 502400), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:09:34,503.503] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:34,505.505] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:34] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:09:34,819.819] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:34] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:09:35,134.134] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:35,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:35,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 126.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:35,136.136] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:35,137.137] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:35] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:09:35,400.400] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:35,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:35,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 127.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:35,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:35,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 127.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:35,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:35,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 122.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:35,405.405] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:09:35,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 84.95s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 9, 35, 405771), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:09:35,406.406] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:35,408.408] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:35] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:09:45,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:45] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:09:45,528.528] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:45,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:45,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:45,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:45,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:45,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:45,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:45,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:09:45,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:09:45,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:09:45,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:09:45,540.540] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:09:45,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是的名字是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:09:45,543.543] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:45,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:45,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:09:45,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.3s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:09:45,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:09:45,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:09:45,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:45,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.9s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:09:52,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 139.9s ago] {'pk_1': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:09:52,790.790] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:52] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:09:52,802.802] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:52,802.802] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:52,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.1s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:09:52,805.805] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,805.805] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.1s ago] {'pk_1': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:09:52,807.807] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:09:52,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'message_id': UUID('5f86e705-8074-44d0-a38f-94d767c19987'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！有什么我可以帮助你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2946 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4be24b1f-5c3b-404e-b361-35151cf47a9c", "example": false}}]', 'answer': '你好，好儿！有什么我可以帮助你的吗？', 'latency': 7.168297300000006}
[2025-06-08 15:09:52,809.809] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:52,811.811] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:52,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 139.9s ago] {'pk_1': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:09:52,813.813] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:09:52,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.1s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2946 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4be24b1f-5c3b-404e-b361-35151cf47a9c", "example": false}}]', 'answer': '你好，好儿！有什么我可以帮助你的吗？', 'latency': 7.168297300000006, 'message_id': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:09:52,814.814] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:09:52,815.815] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:52,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 139.9s ago] {'pk_1': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:09:52,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:09:52,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 144.5s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:09:53,117.117] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:53] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:09:53,426.426] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:53,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:53,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 145.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:53,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:09:53,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.7s ago] {'pk_1': '5f86e705-8074-44d0-a38f-94d767c19987'}
[2025-06-08 15:09:55,958.958] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:55] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:09:55,962.962] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:09:55,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:09:55,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:09:55,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:09:55,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:09:55,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:09:55,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:09:55,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:09:55,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:09:55,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:09:55,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.4s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:09:55,970.970] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:09:55,971.971] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:09:55] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:10:00,199.199] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:00,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:00,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:00,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:00,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:00,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:00,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:00,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:10:00,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:10:00,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:10:00,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.6s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:10:00,205.205] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:00,205.205] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:00] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:10:00,509.509] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:00,510.510] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:00] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:10:02,959.959] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:10:03,196.196] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:10:03,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.8s ago] {'summary': '人类自我介绍，称自己为好儿，AI回应并询问是否需要帮助。', 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:03,197.197] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:03,199.199] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:03,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:03,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 154.9s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:03,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:10:03,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 137.8s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:03,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:03,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.3s ago] {'pk_1': UUID('5f86e705-8074-44d0-a38f-94d767c19987')}
[2025-06-08 15:10:03,271.271] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:03,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:03,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 155.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:03,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:03,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 155.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:03,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:03,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:03,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:10:03,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:10:03,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:10:03,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.7s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:10:03,276.276] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:03,277.277] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:03] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:10:05,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:10:05,980.980] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:05,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:05,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:05,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:05,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:05,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:05,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:05,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:10:05,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:10:05,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:10:05,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:10:05,991.991] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:10:05,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:10:05,993.993] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:06,042.042] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:06,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:06,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.8s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:06,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:10:06,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:10:06,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:06,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.4s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:10:10,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.3s ago] {'pk_1': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616')}
[2025-06-08 15:10:10,156.156] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:10] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:10:10,177.177] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:10,177.177] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:10,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.5s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:10,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.5s ago] {'pk_1': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616')}
[2025-06-08 15:10:10,183.183] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:10:10,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'message_id': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '当然，您自我介绍时提到您叫好儿。您有什么具体想聊或需要帮助的事情吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3746 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "48a11ee8-a3c4-4c7f-83e2-2ea345411f7d", "example": false}}]', 'answer': '当然，您自我介绍时提到您叫好儿。您有什么具体想聊或需要帮助的事情吗？', 'latency': 4.0901207}
[2025-06-08 15:10:10,188.188] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:10,190.190] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:10,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.3s ago] {'pk_1': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616')}
[2025-06-08 15:10:10,192.192] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:10:10,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.5s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3746 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "48a11ee8-a3c4-4c7f-83e2-2ea345411f7d", "example": false}}]', 'answer': '当然，您自我介绍时提到您叫好儿。您有什么具体想聊或需要帮助的事情吗？', 'latency': 4.0901207, 'message_id': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616')}
[2025-06-08 15:10:10,194.194] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:10,195.195] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:10,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 157.3s ago] {'pk_1': UUID('ebdbae98-76be-4013-943a-4a69a6a1e616')}
[2025-06-08 15:10:10,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 161.9s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:10,499.499] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:10] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:10:10,811.811] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:10,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 162.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:10,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:10:10,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.1s ago] {'pk_1': 'ebdbae98-76be-4013-943a-4a69a6a1e616'}
[2025-06-08 15:10:13,415.415] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:10:13,415.415] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'name': '用户自我介绍', 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:13,416.416] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:15,202.202] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:15,203.203] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:15] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:10:15,959.959] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:10:15,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.6s ago] {'summary': '人类自我介绍，称自己为好儿，AI回应并询问是否需要帮助。人类询问AI是否知道自己的身份，AI确认并提到人类自我介绍时提到的名字，并询问是否有具体想聊或需要帮助的事情。', 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:15,960.960] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:15,963.963] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:15,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:15,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 167.7s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:15,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:10:15,964.964] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.6s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:15,964.964] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:47,648.648] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:10:47,652.652] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:47,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:47,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:47,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:47,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:47,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:47,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:47,659.659] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:10:47,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 107.1s ago] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 15, 10, 47, 658490), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:10:47,661.661] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:47,663.663] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:47] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:10:47,982.982] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:47] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:10:48,294.294] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:48,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:48,295.295] base.py -> _exec_single_context line:1901 [INFO]: [cached since 200.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:48,297.297] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:10:48,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:48] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:10:48,557.557] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:48,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:48,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 200.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:48,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:48,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 200.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:48,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:48,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 196s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:48,572.572] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:10:48,574.574] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00204s] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 10, 48, 571537), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:10:48,575.575] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:48,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:48] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:10:54,055.055] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:10:54] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:10:54,058.058] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:54,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:54,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 205.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:10:54,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:10:54,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 205.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:10:54,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:10:54,067.067] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:10:54,068.068] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:10:54,069.069] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:10:54,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:10:54,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:10:54,073.073] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:10:54,073.073] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:10:54,075.075] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:10:54,133.133] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:10:54,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:10:54,134.134] base.py -> _exec_single_context line:1901 [INFO]: [cached since 205.9s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:10:54,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:10:54,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:10:54,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:10:54,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 201.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:11:01,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:11:01,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 208.5s ago] {'pk_1': UUID('170b39c8-fed8-4537-baf0-76ad5570a58d')}
[2025-06-08 15:11:01,369.369] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:11:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:11:01,392.392] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:11:01,392.392] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:11:01,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:11:01,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 203.7s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:11:01,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:11:01,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 203.7s ago] {'pk_1': UUID('170b39c8-fed8-4537-baf0-76ad5570a58d')}
[2025-06-08 15:11:01,399.399] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:11:01,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 203.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e'), 'message_id': UUID('170b39c8-fed8-4537-baf0-76ad5570a58d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '我没有关于你个人身份的信息。不过，我可以根据我们的对话提供帮助。如果你有任何具体问题或需求，请告诉我！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "14ee8cbc-092f-4fc5-aeb8-3bac0bc7773f", "example": false}}]', 'answer': '我没有关于你个人身份的信息。不过，我可以根据我们的对话提供帮助。如果你有任何具体问题或需求，请告诉我！', 'latency': 7.2093298000000345}
[2025-06-08 15:11:01,413.413] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:11:01,415.415] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:11:01,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:11:01,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 208.5s ago] {'pk_1': UUID('170b39c8-fed8-4537-baf0-76ad5570a58d')}
[2025-06-08 15:11:01,417.417] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:11:01,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 203.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "14ee8cbc-092f-4fc5-aeb8-3bac0bc7773f", "example": false}}]', 'answer': '我没有关于你个人身份的信息。不过，我可以根据我们的对话提供帮助。如果你有任何具体问题或需求，请告诉我！', 'latency': 7.2093298000000345, 'message_id': UUID('170b39c8-fed8-4537-baf0-76ad5570a58d')}
[2025-06-08 15:11:01,419.419] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:11:01,420.420] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:11:01,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:11:01,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 213.1s ago] {'pk_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:11:01,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:11:01,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 196s ago] {'conversation_id_1': UUID('003f97ed-958d-4507-92f3-ffe52bd1b19e')}
[2025-06-08 15:11:01,424.424] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:11:01,709.709] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:11:01] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:11:02,021.021] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:11:02,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:11:02,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 213.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:11:02,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:11:02,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 204.3s ago] {'pk_1': '170b39c8-fed8-4537-baf0-76ad5570a58d'}
[2025-06-08 15:11:12,397.397] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:11:12,398.398] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:11:12] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:12:48,234.234] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:12:48,551.551] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:12:48,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:12:48,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:12:48,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:12:48,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:12:48,554.554] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:12:48,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.3s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:12:48,554.554] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:12:48,556.556] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:48] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:12:48,563.563] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:12:48,817.817] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:12:48,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:12:48,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:12:48,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:12:48,819.819] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:12:48,820.820] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:12:48,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:12:48,822.822] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:12:48,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.6s ago] {'debug_conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:12:48,822.822] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:12:48,824.824] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:12:48,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:12:48,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.5s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:12:48,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:12:48,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.5s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:12:48,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:12:48,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 320.5s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:12:48,831.831] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:12:48,831.831] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:48] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:12:56,323.323] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:56] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:12:56,326.326] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:12:56,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:12:56,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:12:56,329.329] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:12:56,330.330] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:12:56] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:01,363.363] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:01,671.671] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:01,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:01,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:01,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:01,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:01,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:01,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:01,676.676] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:01,676.676] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'model_config': '{"provider": "deepseek", "model": "deepseek-chat", "parameters": {"temperature": 0.85, "top_p": 0.9, "presence_penalty": 0.0, "frequency_penalty": 0.0, "max_tokens": 4096}}', 'dialog_round': 10, 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 1, 676333), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:01,677.677] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:01,679.679] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:01,935.935] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:01,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:01,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:01,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:01,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:01,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:01,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:01,940.940] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:01,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.4s ago] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 1, 939338), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:01,940.940] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:01,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:01,995.995] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:01] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:02,310.310] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:02,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:02,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:02,311.311] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:02,312.312] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:02] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:06,224.224] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:06,227.227] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:06,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:06,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:06,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:06,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:06,232.232] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:06,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:06,234.234] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:13:06,235.235] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:13:06,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:13:06,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:13:06,237.237] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:13:06,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:13:06,239.239] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:06,280.280] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:06,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:06,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:06,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:13:06,283.283] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:13:06,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:06,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 333.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:13:11,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:11,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.3s ago] {'pk_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:11,203.203] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:12,378.378] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:12,379.379] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:12,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:12,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334.7s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:12,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:12,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334.7s ago] {'pk_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:12,384.384] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:13:12,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'message_id': UUID('09dcd408-3a82-4402-9e4e-987a560cf715'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "eb6a666c-717c-45ef-9e02-8cd5b886a713", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 6.072161699999924}
[2025-06-08 15:13:12,386.386] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:12,387.387] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:12,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:12,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 339.5s ago] {'pk_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:12,388.388] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:13:12,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 334.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "eb6a666c-717c-45ef-9e02-8cd5b886a713", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 6.072161699999924, 'message_id': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:12,397.397] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:12,398.398] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:12,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:12,399.399] base.py -> _exec_single_context line:1901 [INFO]: [cached since 339.5s ago] {'pk_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:12,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:12,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.1s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:12,691.691] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:12] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:13:13,005.005] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:13,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:13,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:13,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:13,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.3s ago] {'pk_1': '09dcd408-3a82-4402-9e4e-987a560cf715'}
[2025-06-08 15:13:19,606.606] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:19,607.607] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:19] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:13:20,495.495] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:20] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:20,498.498] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:20,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:20,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:20,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:20,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:20,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:20,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:20,502.502] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:20,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 259.9s ago] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 20, 502790), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:20,512.512] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:20,513.513] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:20] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:20,822.822] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:20] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:21,131.131] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:21,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:21,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:21,133.133] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:21,133.133] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:21] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:21,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:21,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:21,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:21,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:21,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:21,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:21,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 348.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:21,508.508] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:21,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.9s ago] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 21, 508343), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:21,510.510] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:21,511.511] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:21] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:22,677.677] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:13:22,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.3s ago] {'summary': '人类自我介绍为好儿，AI回应并确认身份为助手，询问是否需要帮助。', 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:22,678.678] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:22,680.680] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:22,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:22,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 354.4s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:22,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:13:22,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.3s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:22,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:22,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 349.8s ago] {'pk_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:28,889.889] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:29,199.199] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:29,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:29,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:29,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:29,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:29,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:29,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:29,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:13:29,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:13:29,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:13:29,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:13:29,214.214] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:13:29,214.214] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:13:29,216.216] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:29,254.254] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:29,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:29,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:29,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:13:29,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:13:29,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:29,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:13:30,449.449] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:13:30,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 197s ago] {'name': '用户自我介绍', 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:30,450.450] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:32,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:32,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 359.9s ago] {'pk_1': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:13:32,767.767] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:35,642.642] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:35,643.643] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:35,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:35,646.646] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358s ago] {'pk_1': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:13:35,648.648] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:13:35,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'message_id': UUID('ace99761-da43-4f3b-869a-0394743cf7e5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意告诉我一些关于你的信息（比如你的名字或兴趣），我可以在接下来的对话中记住这些内容，为你提供更个性化的服务！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "8a6cb3c1-e91d-4273-887b-79dea51aea7f", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意告诉我一些关于你的信息（比如你的名字或兴趣），我可以在接下来的对话中记住这些内容，为你提供更个性化的服务！', 'latency': 6.367380599999933}
[2025-06-08 15:13:35,651.651] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:35,653.653] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:35,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 362.8s ago] {'pk_1': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:13:35,654.654] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:13:35,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 357.9s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "8a6cb3c1-e91d-4273-887b-79dea51aea7f", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意告诉我一些关于你的信息（比如你的名字或兴趣），我可以在接下来的对话中记住这些内容，为你提供更个性化的服务！', 'latency': 6.367380599999933, 'message_id': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:13:35,655.655] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:35,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:35,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,665.665] base.py -> _exec_single_context line:1901 [INFO]: [cached since 367.4s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:35,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:13:35,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 350.3s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:35,667.667] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:35,962.962] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:35] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:13:35,965.965] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:35,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 367.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:35,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:13:35,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 358.3s ago] {'pk_1': 'ace99761-da43-4f3b-869a-0394743cf7e5'}
[2025-06-08 15:13:37,638.638] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:37,942.942] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:37,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:37,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:37,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:37,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:37,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:37,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 365.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:37,946.946] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:37,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 277.4s ago] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 37, 946773), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:37,956.956] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:37,959.959] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:37] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:38,268.268] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:38] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:38,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:38,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:38,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 370.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:38,580.580] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:38,581.581] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:38] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:38,687.687] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:38,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:38,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 370.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:38,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:38,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 370.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:38,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:38,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 366.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:38,691.691] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:38,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 170.1s ago] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 38, 691548), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:38,691.691] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:38,693.693] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:38] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:40,191.191] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:40,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:40] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:13:43,389.389] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:43,695.695] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:43,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:43,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 375.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:43,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:43,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 375.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:43,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:43,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 371.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:43,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:13:43,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 371.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:13:43,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:13:43,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 371.1s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:13:43,711.711] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:13:43,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 371.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:13:43,712.712] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:43,748.748] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:43,748.748] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:13:43,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 375.5s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:13:43,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:13:43,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 371.1s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:13:43,751.751] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:43,758.758] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:43] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:13:53,977.977] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:53] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:53,979.979] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:53,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:53,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 385.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:53,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:53,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 385.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:53,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:53,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 381.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:53,983.983] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:13:53,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343.5s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 13, 53, 982976), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:13:53,989.989] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:13:53,991.991] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:53] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:58,050.050] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:13:58,360.360] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,361.361] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:13:58,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,363.363] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:13:58,366.366] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,367.367] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:13:58,368.368] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:13:58,368.368] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:13:58,370.370] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:58,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:58,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 385.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:58,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:13:58,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 385.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:13:58,380.380] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,380.380] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:13:58,622.622] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:13:58,623.623] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:13:58,668.668] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,669.669] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:13:58,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:58,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:13:58,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:13:58,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:13:58,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 386.1s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:13:58,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.3s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:13:58,684.684] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:13:58,686.686] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:13:58,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.3s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:13:58,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.3s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:13:58,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:13:58,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.3s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:13:58,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:13:58,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:13:58,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:13:58,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'message_id_1': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:13:58,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:13:58,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 386.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:13:58,731.731] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:13:58,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,732.732] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:13:58,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'message_id_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:13:58,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:13:58,746.746] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:13:58,747.747] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,748.748] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:13:58,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:13:58,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:13:58,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:13:58,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:13:58,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:13:58,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:13:58,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:13:58,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:13:58,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,761.761] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:13:58,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:13:58,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:13:58,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:13:58,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:13:58,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:13:58,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:13:58,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:13:58,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:13:58,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:13:58,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:13:58,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:13:58,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:13:58,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:13:58,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:13:58,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:13:58,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:13:58,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:13:58,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:13:58,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:13:58,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:13:58,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:13:58,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:13:58,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:13:58,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:13:58,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:13:58,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:13:58,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:13:58,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:13:58,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:13:58,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:13:58,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:13:58,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:13:58,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:13:58,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:13:58,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:13:58,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:13:58,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:13:58,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:13:58,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:13:58,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:13:58,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:13:58,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,817.817] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:13:58,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:13:58,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:13:58,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:13:58,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:13:58,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:13:58,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:13:58,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 335.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:13:58,829.829] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,830.830] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:13:58,933.933] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:13:58,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:13:58,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:13:58,935.935] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:13:58,935.935] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:13:58] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:14:01,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:01] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:14:01,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:01] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:14:01,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:01] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:14:01,275.275] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:01] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:14:01,276.276] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:01] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:14:12,797.797] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:12] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:14:12,799.799] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:12,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:12,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 404.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:12,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:14:12,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 404.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:14:12,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:14:12,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 400.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:14:12,804.804] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:14:12,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.2s ago] {'dialog_round': 5, 'updated_at': datetime.datetime(2025, 6, 8, 15, 14, 12, 803899), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:14:12,804.804] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:14:12,806.806] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:12] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:14:13,123.123] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:13] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:14:13,438.438] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:13,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:13,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:13,440.440] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:14:13,440.440] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:13] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:14:16,272.272] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:14:16,275.275] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:16,275.275] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:16,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 408.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:16,277.277] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:14:16,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 408.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:14:16,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:14:16,278.278] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:14:16,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:14:16,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:14:16,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:14:16,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.7s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:14:16,281.281] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:14:16,282.282] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:16] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:14:19,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:19] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:14:20,212.212] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:20,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:20,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 412s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:20,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:14:20,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 412s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:14:20,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:14:20,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:14:20,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:14:20,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:14:20,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:14:20,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.6s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:14:20,227.227] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:14:20,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:14:20,229.229] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:14:20,269.269] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:20,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:14:20,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 412s ago] {'pk_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c')}
[2025-06-08 15:14:20,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:14:20,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.6s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:14:20,272.272] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:14:20,280.280] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:20] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:14:58,380.380] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:58] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:14:58,383.383] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:58,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:58,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:58,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:14:58,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:14:58,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:14:58,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:14:58,388.388] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:14:58,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.9s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 14, 58, 388066), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:14:58,392.392] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:14:58,395.395] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:58] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:14:58,716.716] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:58] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:14:59,046.046] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:14:59,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:14:59,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:14:59,049.049] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:14:59,051.051] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:14:59] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:15:53,514.514] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:15:53,523.523] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:53,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:53,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:53,528.528] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:53,529.529] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:15:53,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:15:53,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:15:53,833.833] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:15:53,833.833] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:15:53,834.834] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:53] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:15:54,147.147] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:15:54,148.148] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:54,151.151] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:54,152.152] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:54,153.153] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:54,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:54,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:54,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:54,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:54,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:15:54,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:15:54,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:15:54,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:15:54,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:15:54,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:15:54,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:15:54,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:15:54,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:15:54,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:15:54,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:15:54,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.6s ago] {'id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:15:54,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:15:54,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:15:54,167.167] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:54,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:15:54,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:15:54,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.8s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:15:54,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 501.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:15:54,168.168] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:15:54,170.170] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:54,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:15:54,172.172] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:15:54,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.8s ago] {'conversation_id_1': UUID('5313dd21-f37e-45b2-9e69-e011dbf5b85c'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:15:54,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:15:54,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:15:54,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'message_id_1': UUID('ace99761-da43-4f3b-869a-0394743cf7e5')}
[2025-06-08 15:15:54,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:15:54,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:15:54,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'message_id_1': UUID('09dcd408-3a82-4402-9e4e-987a560cf715')}
[2025-06-08 15:15:54,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,181.181] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:54,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:15:54,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:15:54,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:15:54,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:15:54,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:15:54,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:15:54,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:15:54,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:15:54,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:15:54,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:15:54,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:15:54,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:15:54,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:15:54,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:15:54,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:15:54,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:15:54,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:15:54,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:15:54,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:15:54,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:15:54,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:15:54,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:15:54,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:15:54,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,214.214] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:15:54,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:15:54,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:15:54,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:15:54,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:15:54,220.220] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:15:54,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:15:54,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:15:54,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:15:54,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:15:54,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:15:54,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:15:54,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:15:54,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:15:54,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:15:54,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:15:54,234.234] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:15:54,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,235.235] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:15:54,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:15:54,237.237] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,237.237] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:15:54,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:15:54,239.239] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:15:54,240.240] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,240.240] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:15:54,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:15:54,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:15:54,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,244.244] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:15:54,245.245] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:15:54,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:15:54,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,248.248] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:15:54,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:15:54,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,250.250] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:15:54,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:15:54,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:15:54,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:15:54,255.255] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:15:54,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:15:54,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:15:54,258.258] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:54,259.259] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:15:54,411.411] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:15:54,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:15:54,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 506.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:15:54,413.413] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:15:54,414.414] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:15:54,489.489] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:15:54,505.505] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:54] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:15:56,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:56] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:15:57,255.255] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:57] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:15:57,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:57] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:15:57,258.258] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:57] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:15:57,259.259] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:15:57] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:16:00,731.731] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:16:00,734.734] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:16:01,044.044] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:01,045.045] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:01,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:01,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:01,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:01,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:01,051.051] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:16:01,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.8s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:01,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:16:01,052.052] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:01,057.057] base.py -> _exec_single_context line:1901 [INFO]: [cached since 508.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:16:01,058.058] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:16:01,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.5s ago] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 15, 16, 1, 57549), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:16:01,058.058] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:16:01,060.060] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:01,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:16:01,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:16:01,306.306] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:01,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:01,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:01,311.311] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:16:01,312.312] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:16:01,313.313] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:16:01,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.1s ago] {'debug_conversation_id': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:01,315.315] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:01,316.316] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:01,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:01,317.317] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:16:01,320.320] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513s ago] {'conversation_id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:16:01,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:16:01,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.9s ago] {'conversation_id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:16:01,323.323] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:01,323.323] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:16:01,383.383] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:16:01,387.387] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:01,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:01,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:01,389.389] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:01,390.390] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:01] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:16:05,557.557] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:16:05,870.870] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:05,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:05,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 517.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:05,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:16:05,874.874] base.py -> _exec_single_context line:1901 [INFO]: [cached since 517.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:05,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:16:05,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:16:05,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:16:05,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:16:05,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:16:05,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:16:05,885.885] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:16:05,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:16:05,886.886] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:05,950.950] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:05,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:05,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 517.7s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:05,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:16:05,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'conversation_id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:16:05,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:05,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:16:11,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:16:11,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 518.5s ago] {'pk_1': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7')}
[2025-06-08 15:16:11,370.370] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:16:12,569.569] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:12,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:12,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.9s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:12,575.575] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:12] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:16:12,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.9s ago] {'pk_1': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7')}
[2025-06-08 15:16:12,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:12,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 524.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:12,580.580] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:16:12,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'message_id': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4b262620-c670-42cd-b366-d9344d554eae", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 6.591559599999982}
[2025-06-08 15:16:12,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.9s ago] {'pk_1': '61c6f6c1-c310-498e-9cee-3cc009d5dac7'}
[2025-06-08 15:16:12,589.589] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:12,595.595] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:12,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 519.7s ago] {'pk_1': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7')}
[2025-06-08 15:16:12,597.597] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:16:12,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.9s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4b262620-c670-42cd-b366-d9344d554eae", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 6.591559599999982, 'message_id': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7')}
[2025-06-08 15:16:12,602.602] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:12,604.604] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:12,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 519.7s ago] {'pk_1': UUID('61c6f6c1-c310-498e-9cee-3cc009d5dac7')}
[2025-06-08 15:16:12,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:12,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 524.3s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:14,487.487] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:16:14,801.801] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:14,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:16:14,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:16:14,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:16:14,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:16:14,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:16:14,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 522.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:16:14,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:16:14,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 522.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:16:14,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:16:14,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 522.3s ago] {'id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:16:14,862.862] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:16:14,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 522.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:16:14,867.867] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:14,951.951] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:14,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:14,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526.7s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:14,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:16:14,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 522.3s ago] {'conversation_id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:16:14,960.960] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:14,988.988] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:16:19,782.782] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:16:19,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.4s ago] {'summary': '人类自我介绍为好儿，AI回应并询问有什么可以帮助的。', 'conversation_id': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:19,784.784] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:16:19,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:16:19,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:16:19,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 531.5s ago] {'pk_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:19,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:16:19,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 514.4s ago] {'conversation_id_1': UUID('e0a769f1-5f0f-436f-a9ab-098ac4d99751')}
[2025-06-08 15:16:19,790.790] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:19,837.837] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:16:19,839.839] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:16:19] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:19:28,080.080] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:28] "OPTIONS /language-models/tongyi/qwen-plus HTTP/1.1" 200 -
[2025-06-08 15:19:28,391.391] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:28,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:28,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 720.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:28,394.394] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:28,394.394] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:28] "GET /language-models/tongyi/qwen-plus HTTP/1.1" 200 -
[2025-06-08 15:19:29,360.360] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:19:29,364.364] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:29,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:29,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:29,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:19:29,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:29,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:19:29,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 716.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:19:29,368.368] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:19:29,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 672.4s ago] {'model_config': '{"provider": "tongyi", "model": "qwen-plus", "parameters": {"temperature": 1, "top_p": 0, "presence_penalty": 0, "frequency_penalty": 0, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 19, 29, 367173), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:19:29,369.369] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:29,371.371] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:19:29,690.690] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:29,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:29,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:29,692.692] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:29,693.693] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:29] "GET /language-models/tongyi/qwen-plus HTTP/1.1" 200 -
[2025-06-08 15:19:33,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:19:33,634.634] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:33,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:33,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:33,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:19:33,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:33,639.639] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:19:33,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.4s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:33,640.640] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:33,641.641] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:33] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:19:33,898.898] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:19:34,207.207] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:34,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:34,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:34,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:19:34,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:34,209.209] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:19:34,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:19:34,211.211] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:19:34,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726s ago] {'debug_conversation_id': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:34,211.211] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:34,213.213] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:34,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:19:34,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.9s ago] {'pk_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08')}
[2025-06-08 15:19:34,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:19:34,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.8s ago] {'conversation_id_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:19:34,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:19:34,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.8s ago] {'conversation_id_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:19:34,218.218] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:34,218.218] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:34] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:19:35,944.944] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:35] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:19:35,946.946] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:35,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:35,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:35,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:19:35,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 727.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:35,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:19:35,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 723.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:19:35,951.951] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:19:35,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 685.5s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 19, 35, 951109), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:19:35,952.952] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:35,954.954] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:35] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:19:36,275.275] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:36] "OPTIONS /language-models/tongyi/qwen-plus HTTP/1.1" 200 -
[2025-06-08 15:19:36,589.589] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:36,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:36,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 728.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:36,592.592] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:36,593.593] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:36] "GET /language-models/tongyi/qwen-plus HTTP/1.1" 200 -
[2025-06-08 15:19:38,039.039] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:19:38,045.045] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:38,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:38,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 729.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:38,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:19:38,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 729.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:19:38,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:19:38,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:19:38,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:19:38,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:19:38,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:19:38,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.4s ago] {'id_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:19:38,055.055] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:19:38,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:19:38,057.057] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:38,232.232] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:38,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:19:38,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 730s ago] {'pk_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08')}
[2025-06-08 15:19:38,234.234] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:19:38,235.235] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.6s ago] {'conversation_id_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:19:38,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:38,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 725.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:19:38,398.398] function_call_agent.py -> _llm_node line:204 [ERROR]: LLM节点发生错误, 错误信息: request_id: 7745d80b-ce83-9795-83c5-7f5edba89454 
 status_code: 400 
 code: InvalidParameter 
 message: <400> InternalError.Algo.InvalidParameter: Range of top_p should be (0.0, 1.0]
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 166, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_community\chat_models\tongyi.py", line 726, in _stream
    for stream_resp, is_last_chunk in generate_with_last_element_mark(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_community\llms\tongyi.py", line 136, in generate_with_last_element_mark
    item = next(iterator)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_community\chat_models\tongyi.py", line 575, in _stream_completion_with_retry
    yield check_response(delta_resp)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_community\llms\tongyi.py", line 61, in check_response
    raise ValueError(
ValueError: request_id: 7745d80b-ce83-9795-83c5-7f5edba89454 
 status_code: 400 
 code: InvalidParameter 
 message: <400> InternalError.Algo.InvalidParameter: Range of top_p should be (0.0, 1.0]
[2025-06-08 15:19:39,265.265] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726.4s ago] {'pk_1': UUID('a999fdea-63fd-479e-830d-6394c1826146')}
[2025-06-08 15:19:39,266.266] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:39] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:19:39,270.270] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:39,270.270] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:39,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.6s ago] {'pk_1': UUID('25c36cca-c604-41ca-9eda-a28535db3c08')}
[2025-06-08 15:19:39,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.6s ago] {'pk_1': UUID('a999fdea-63fd-479e-830d-6394c1826146')}
[2025-06-08 15:19:39,275.275] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:19:39,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 721.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('25c36cca-c604-41ca-9eda-a28535db3c08'), 'message_id': UUID('a999fdea-63fd-479e-830d-6394c1826146'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 15:19:39,277.277] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:39,279.279] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:39,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 726.4s ago] {'pk_1': UUID('a999fdea-63fd-479e-830d-6394c1826146')}
[2025-06-08 15:19:39,281.281] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:19:39,281.281] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'status': <QueueEvent.ERROR: 'error'>, 'error': 'LLM节点发生错误, 错误信息: request_id: 7745d80b-ce83-9795-83c5-7f5edba89454 \n status_code: 400 \n code: InvalidParameter \n message: <400> InternalError.Algo.InvalidParameter: Range of top_p should be (0.0, 1.0]', 'message_id': UUID('a999fdea-63fd-479e-830d-6394c1826146')}
[2025-06-08 15:19:39,282.282] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:19:39,591.591] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:39] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:19:39,901.901] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:19:39,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 731.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:19:39,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:19:39,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 722.2s ago] {'pk_1': 'a999fdea-63fd-479e-830d-6394c1826146'}
[2025-06-08 15:19:50,632.632] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:19:50,632.632] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:19:50] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:20:15,776.776] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:15] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:20:15,779.779] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:15,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:15,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 767.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:15,782.782] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:15,783.783] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:15] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:20:17,293.293] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:20:17,605.605] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:17,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:17,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 769.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:17,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:20:17,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 769.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:17,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:20:17,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 765s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:20:17,609.609] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:20:17,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 720.7s ago] {'model_config': '{"provider": "openai", "model": "gpt-4o-mini", "parameters": {"temperature": 1, "top_p": 0, "presence_penalty": 0, "frequency_penalty": 0, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 20, 17, 609194), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:20:17,610.610] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:17,611.611] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:20:17,868.868] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:17,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:17,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 769.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:17,870.870] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:17,870.870] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:17] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 15:20:21,249.249] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:20:21,252.252] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:21,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:21,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:21,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:20:21,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:21,257.257] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:20:21,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:21,258.258] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:21,259.259] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:21] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:20:21,569.569] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:20:21,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:21,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:21,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:21,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:20:21,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:21,884.884] http_request.py -> _handle_request line:301 [ERROR]: 
[2025-06-08 15:20:21,888.888] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:20:21,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:20:21,891.891] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:20:21,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.7s ago] {'debug_conversation_id': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:21,891.891] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:21,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:21,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:20:21,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'pk_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:21,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:20:21,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.5s ago] {'conversation_id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:20:21,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:20:21,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.5s ago] {'conversation_id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:20:21,898.898] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:21,899.899] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:20:23,545.545] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:20:23,547.547] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:23,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:23,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:23,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:20:23,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:23,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:20:23,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 771s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:20:23,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:20:23,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 770.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:20:23,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:20:23,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 770.9s ago] {'id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:20:23,554.554] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:23,555.555] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:20:25,849.849] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:20:26,160.160] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:26,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:26,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 778s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:26,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:20:26,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 778s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:20:26,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:20:26,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:20:26,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:20:26,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:20:26,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:20:26,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:20:26,166.166] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:20:26,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:20:26,168.168] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:26,206.206] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:26,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:20:26,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 777.9s ago] {'pk_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:26,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:20:26,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.6s ago] {'conversation_id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:20:26,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:26,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 773.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:20:33,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 780.6s ago] {'pk_1': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:33,455.455] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:33] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:20:33,472.472] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:33,472.472] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:33,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.8s ago] {'pk_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:33,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.8s ago] {'pk_1': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:33,478.478] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:33] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:20:33,478.478] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:20:33,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7af9705d-1828-4ea1-9d56-eae107849d41'), 'message_id': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！很高兴认识你！有什么我可以帮助你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3505e1f9-963b-44cb-be40-b856549ac039", "example": false}}]', 'answer': '你好，好儿！很高兴认识你！有什么我可以帮助你的吗？', 'latency': 7.223838999999998}
[2025-06-08 15:20:33,481.481] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:33,481.481] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:33,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 785.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:20:33,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,484.484] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:33,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.8s ago] {'pk_1': 'cbff37a2-39e5-4013-ba8e-da2941ff8f6d'}
[2025-06-08 15:20:33,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 780.6s ago] {'pk_1': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:33,487.487] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:20:33,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.8s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "3505e1f9-963b-44cb-be40-b856549ac039", "example": false}}]', 'answer': '你好，好儿！很高兴认识你！有什么我可以帮助你的吗？', 'latency': 7.223838999999998, 'message_id': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:33,488.488] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:33,488.488] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:33,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 780.6s ago] {'pk_1': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:33,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:20:33,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 785.2s ago] {'pk_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:40,844.844] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:20:40,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.4s ago] {'summary': '人类自我介绍为好儿，AI回应称很高兴认识好儿，并询问是否有可以帮助的事项。', 'conversation_id': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:40,845.845] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:20:40,847.847] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:20:40,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:20:40,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 792.6s ago] {'pk_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:40,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:20:40,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 775.4s ago] {'conversation_id_1': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:20:40,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:20:40,850.850] base.py -> _exec_single_context line:1901 [INFO]: [cached since 788s ago] {'pk_1': UUID('cbff37a2-39e5-4013-ba8e-da2941ff8f6d')}
[2025-06-08 15:20:41,563.563] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:20:41,563.563] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:20:41] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:21:05,031.031] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:21:05,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 651.6s ago] {'name': '用户自我介绍', 'conversation_id': UUID('7af9705d-1828-4ea1-9d56-eae107849d41')}
[2025-06-08 15:21:05,032.032] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:21:56,407.407] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:56] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:21:56,723.723] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:56,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:21:56,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 868.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:21:56,725.725] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:21:56,725.725] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:56] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:21:57,457.457] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:21:57,461.461] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:57,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:21:57,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:21:57,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:21:57,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:21:57,465.465] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:21:57,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.2s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:21:57,466.466] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:21:57,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:57] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:21:57,771.771] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:21:57,788.788] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:21:58,079.079] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:58,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:21:58,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:21:58,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:21:58,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 865.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:21:58,083.083] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:21:58,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 536.4s ago] {'model_config': '{"provider": "deepseek", "model": "deepseek-chat", "parameters": {"temperature": 0.85, "top_p": 0.9, "presence_penalty": 0.0, "frequency_penalty": 0.0, "max_tokens": 4096}}', 'dialog_round': 5, 'updated_at': datetime.datetime(2025, 6, 8, 15, 21, 58, 83969), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:21:58,084.084] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:21:58,086.086] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:58] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:21:58,095.095] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:58,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:21:58,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:21:58,100.100] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:21:58,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:21:58,103.103] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:21:58,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.9s ago] {'debug_conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:21:58,104.104] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:21:58,105.105] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:58,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.8s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:21:58,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:21:58,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.7s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:21:58,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:21:58,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 869.7s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:21:58,123.123] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:21:58,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:58] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:21:58,345.345] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:21:58,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:21:58,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 870.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:21:58,348.348] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:21:58,348.348] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:21:58] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:22:00,252.252] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:00,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:00,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:22:00,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:22:00,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:22:00,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:22:00,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 867.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:22:00,257.257] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:22:00,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 829.8s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 22, 0, 257417), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:22:00,258.258] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:00,260.260] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:00] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:22:00,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:00,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:00,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:22:00,601.601] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:22:00,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:00] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:22:05,190.190] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:22:05,198.198] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:05,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:05,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 877s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:22:05,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:22:05,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 877s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:22:05,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:22:05,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:22:05,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:22:05,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:22:05,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:22:05,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:22:05,214.214] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:22:05,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:22:05,217.217] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:05,283.283] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:05,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:05,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 877s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:05,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:22:05,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:22:05,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:05,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:22:06,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:06,325.325] base.py -> _exec_single_context line:1901 [INFO]: [cached since 873.4s ago] {'pk_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:06,326.326] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:06] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:22:09,675.675] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:09,675.675] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:22:09,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:09,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'pk_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:09,682.682] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:22:09,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'message_id': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 15:22:09,692.692] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:09,694.694] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:09,694.694] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 881.4s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:09,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 876.8s ago] {'pk_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:09,698.698] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:22:09,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'message_id': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4b8f545b-578a-4f9b-8561-bc9fba295a00", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.351985100000093}
[2025-06-08 15:22:09,708.708] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:09,708.708] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:09,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 876.8s ago] {'pk_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:09,710.710] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:22:09,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4b8f545b-578a-4f9b-8561-bc9fba295a00", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 4.351985100000093, 'message_id': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:09,713.713] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:09,713.713] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:09,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 876.8s ago] {'pk_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:22:09,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:09,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 881.4s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:09,993.993] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:09] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:22:10,307.307] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:10,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:10,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:22:10,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:22:10,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.6s ago] {'pk_1': '0f75893a-0ab2-407c-a3de-71f3913a377e'}
[2025-06-08 15:22:14,877.877] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:22:14,883.883] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:14,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:22:14,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 886.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:22:14,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:22:14,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 886.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:22:14,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:22:14,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:22:14,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:22:14,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:22:14,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:22:14,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.3s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:22:14,907.907] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:22:14,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:22:14,909.909] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:14,974.974] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:14,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:14,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 886.7s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:14,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:22:14,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.3s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:22:14,974.974] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:22:15,011.011] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:15] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:22:18,041.041] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:22:18,041.041] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:22:18] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:22:18,251.251] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:22:18,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.9s ago] {'summary': '人类自我介绍为好儿，AI回应并自我介绍为助手，询问是否需要帮助。', 'conversation_id': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:18,256.256] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:22:18,258.258] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:22:18,259.259] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:22:18,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 890s ago] {'pk_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:18,261.261] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:22:18,262.262] base.py -> _exec_single_context line:1901 [INFO]: [cached since 872.9s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9')}
[2025-06-08 15:22:18,262.262] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,128.128] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:10,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:10,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:10,131.131] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:10,132.132] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:10,135.135] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:10,441.441] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:10,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:10,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,445.445] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:10,447.447] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:10,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:10,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:10,449.449] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:10,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:10,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:10,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:10,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,463.463] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:23:10,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:23:10,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:10,465.465] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:10,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937.9s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:23:10,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:23:10,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:10,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:23:10,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:10,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.1s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:10,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:10,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:10,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:23:10,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:10,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.1s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:10,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:23:10,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:23:10,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:10,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:23:10,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.1s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:23:10,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,502.502] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,503.503] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:10,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:10,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:10,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:10,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:10,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:10,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:10,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:10,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:10,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:10,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:10,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:10,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:10,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:10,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:10,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:10,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:10,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:10,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:10,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:10,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:10,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:10,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:10,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:10,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:10,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:10,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:10,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:10,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:10,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:10,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:10,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:10,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:10,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:10,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:10,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:10,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:10,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:10,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:10,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,561.561] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:10,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:10,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:10,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:10,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,567.567] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:10,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,569.569] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:10,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:10,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:10,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:10,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:10,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:10,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:10,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:10,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:10,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:10,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 938s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:10,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:10,584.584] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:10,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:10,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:10,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:10,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:10,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.3s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:10,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:10,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.2s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:10,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:10,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.3s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:10,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:10,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:10,605.605] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:10,607.607] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:10,827.827] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:10,874.874] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:23:10,875.875] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:10] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:23:11,140.140] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:11,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:11,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 942.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:11,144.144] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:11,147.147] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:11] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:16,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:16,730.730] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:16,731.731] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:16,732.732] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:16,732.732] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:16,734.734] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:16,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:16,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:16,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:16,747.747] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:16,749.749] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:16] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:16,997.997] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:16,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:16,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:17,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:17,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:23:17,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:23:17,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:23:17,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:17,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:17,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:17,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:17,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:17,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:17,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:17,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:17,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:17,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,017.017] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:17,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,017.017] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:17,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:17,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:17,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,020.020] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:17,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:17,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:17,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:17,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:17,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:17,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:17,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:17,031.031] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:17,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:17,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,033.033] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:17,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:17,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:17,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:17,041.041] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:17,045.045] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:17,044.044] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:17,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:17,047.047] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:17,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:17,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,048.048] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:17,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:17,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:17,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:17,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:23:17,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 944.5s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:23:17,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:17,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:17,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:17,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:17,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:17,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,063.063] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 944.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:17,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.7s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:17,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:17,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:17,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:23:17,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:17,080.080] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:23:17,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 944.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:23:17,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 944.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:17,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.7s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:17,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:17,088.088] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:17,088.088] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:17,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:23:17,090.090] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:17,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,091.091] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:17,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:23:17,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:17,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:17,106.106] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:17,108.108] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:17,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:17,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:17,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,115.115] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:17,116.116] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:17,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:17,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:17,121.121] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:17,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:17,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:17,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,126.126] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:17,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:17,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:17,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:17,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:17,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,134.134] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:17,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:17,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:17,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:17,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:17,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:17,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:17,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:17,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:17,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:17,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:17,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 893.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:17,157.157] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:17,159.159] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:17,431.431] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:17,433.433] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:23:17,435.435] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:23:17,738.738] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:17,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:17,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 949.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:17,742.742] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:17,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:17] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:22,109.109] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:22,418.418] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:22,418.418] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:22,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:22,420.420] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:22,422.422] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:22,424.424] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:22,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:22,437.437] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:22,438.438] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:22,683.683] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:22,731.731] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:22,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:22,734.734] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:22,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:22,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,732.732] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:22,736.736] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:22,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:22,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:23:22,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:22,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:22,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:22,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 950.1s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:23:22,748.748] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:22,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:23:22,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:22,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:23:22,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:23:22,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:23:22,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 950.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:22,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.4s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:22,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:23:22,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:23:22,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:23:22,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:23:22,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 950.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:23:22,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:23:22,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 950.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:23:22,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 954.4s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:23:22,776.776] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:22,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,778.778] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:22,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:23:22,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.4s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:22,779.779] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:22,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:22,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.4s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:23:22,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,802.802] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:22,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:22,803.803] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:22,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:23:22,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:22,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:22,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:23:22,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:22,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:22,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:23:22,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,819.819] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:22,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:22,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:23:22,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:22,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:22,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:23:22,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:22,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:22,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:23:22,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:22,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:22,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:23:22,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,841.841] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:22,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:22,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:23:22,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,846.846] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:22,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:22,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:23:22,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:22,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:22,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:23:22,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:22,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:22,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:23:22,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:22,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:22,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:23:22,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:22,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:22,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:23:22,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:22,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,871.871] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:22,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:23:22,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,874.874] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:22,875.875] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:22,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:23:22,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:22,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:22,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:23:22,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:22,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:22,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:23:22,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:22,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:22,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:23:22,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:22,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:22,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:23:22,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.6s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:22,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:22,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:23:22,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:23:22,900.900] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:22,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:22] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:23,121.121] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:23] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:23,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:23] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:23:23,125.125] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:23] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:23:23,432.432] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:23,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:23,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 955.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:23,436.436] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:23,436.436] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:23] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:23:59,533.533] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:23:59,859.859] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:23:59,860.860] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:23:59,861.861] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:23:59,861.861] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:23:59,858.858] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:23:59,862.862] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:23:59,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:23:59,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 991.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:23:59,871.871] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:23:59,876.876] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:23:59] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:24:00,104.104] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:24:00,167.167] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:00,169.169] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:00,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:00,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:00,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:00,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:00,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:24:00,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:24:00,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 987.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:24:00,182.182] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:00,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 987.6s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:24:00,184.184] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:00,185.185] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:00,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:24:00,188.188] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:24:00,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:00,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:00,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 991.8s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:24:00,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:24:00,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:00,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:24:00,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 991.8s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:24:00,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:24:00,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:24:00,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:24:00,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:24:00,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 987.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:24:00,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:24:00,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:24:00,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:24:00,231.231] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:00,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 987.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:24:00,232.232] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:24:00,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:00,234.234] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:00,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,235.235] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:24:00,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:00,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:00,240.240] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,240.240] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:00,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,242.242] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:00,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:00,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:00,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:00,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:00,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,248.248] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:00,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:00,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:00,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:00,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:00,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:00,255.255] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:00,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:00,260.260] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,260.260] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:00,263.263] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,263.263] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:00,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:00,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:00,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:00,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:00,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:00,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,275.275] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:00,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:00,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,279.279] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:00,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:00,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,284.284] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:00,285.285] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:00,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:00,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:00,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:00,292.292] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:24:00,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:00,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:00,299.299] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,299.299] base.py -> _exec_single_context line:1901 [INFO]: [cached since 936.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:00,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:00,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:00,304.304] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:00,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:00,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:00,308.308] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,308.308] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:00,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:00,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:00,312.312] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:00,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,314.314] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:00,315.315] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:00,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:00,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,318.318] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:00,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,319.319] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:00,320.320] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,321.321] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:00,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:00,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,325.325] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:00,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:00,328.328] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:00,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:00,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:00,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:00,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,337.337] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:00,339.339] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:00,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 937s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:00,342.342] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:00,343.343] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:24:00,603.603] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:00,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:00,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 992.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:00,606.606] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:00,606.606] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:24:00,632.632] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:24:00,647.647] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:00] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:24:43,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:24:43,563.563] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:24:43,564.564] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:24:43,565.565] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:24:43,566.566] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:24:43,568.568] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:24:43,859.859] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:43,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:43,864.864] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:43,865.865] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:24:43,877.877] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:24:43,878.878] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:43,880.880] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:43,880.880] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:43,882.882] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:43,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:43,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:43,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:43,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:43,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:24:43,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:43,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:24:43,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:43,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:24:43,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:24:43,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:24:43,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:24:43,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:24:43,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:24:43,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1031s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:24:43,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1031s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:24:43,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:24:43,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1031s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:24:43,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:24:43,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:24:43,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1031s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:24:43,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,922.922] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:43,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:24:43,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:43,924.924] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:43,925.925] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:24:43,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:24:43,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,929.929] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:24:43,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:24:43,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:43,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:24:43,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:24:43,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:24:43,944.944] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:43,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:43,945.945] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:24:43,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:43,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:24:43,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:43,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:43,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:24:43,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:43,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:43,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:24:43,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:43,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:43,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:24:43,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:43,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:43,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:24:43,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:43,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:43,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:24:43,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:43,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:43,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:24:43,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:43,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:43,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:24:43,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:43,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:43,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:43,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:24:43,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:44,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:44,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:24:44,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:44,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:44,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:24:44,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:44,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:44,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:24:44,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:44,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,020.020] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:44,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:24:44,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:44,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:44,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:24:44,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:44,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:44,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:24:44,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,036.036] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:44,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:44,040.040] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:24:44,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:44,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:44,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,045.045] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:24:44,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:44,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:44,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:24:44,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:44,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:44,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:24:44,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 980.7s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:24:44,059.059] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:44,060.060] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:44] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:24:44,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:44] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:24:44,292.292] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:24:44,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:24:44,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1036s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:24:44,295.295] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:44] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:24:44,297.297] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:24:44,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:44] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:24:44,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:24:44] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:25:08,469.469] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:25:08,780.780] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:08,781.781] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:25:08,781.781] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:08,782.782] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:25:08,786.786] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:08,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:08,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:08,794.794] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:25:08,799.799] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:08,801.801] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:08] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:25:09,045.045] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:09,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:09,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:09,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:09,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:09,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:25:09,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:09,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:25:09,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'conversation_id_1': UUID('88235967-20a7-4a3d-9e3a-eec20d0c36f9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:09,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:25:09,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'message_id_1': UUID('0f75893a-0ab2-407c-a3de-71f3913a377e')}
[2025-06-08 15:25:09,063.063] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:09,064.064] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:09,108.108] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:09,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:09,110.110] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:25:09,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:25:09,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:25:09,113.113] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:09,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:25:09,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:25:09,116.116] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,116.116] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:09,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:09,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:09,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:09,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:09,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:09,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:09,126.126] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:09,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:09,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1057s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:09,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:09,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1057s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:09,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:09,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1057s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:09,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,140.140] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:09,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:09,141.141] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:09,142.142] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:25:09,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,143.143] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:09,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:09,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:09,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:09,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:09,157.157] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:09,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:09,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:09,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:09,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:09,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:09,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:09,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:09,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:09,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:09,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:09,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:09,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:09,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:09,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:09,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:09,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:09,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:09,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:09,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:09,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:09,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:09,192.192] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:09,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:09,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:09,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:09,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:09,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:09,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:09,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:09,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:09,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:09,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:09,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:09,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:09,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:09,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:09,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,214.214] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:09,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:09,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:09,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:09,220.220] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:09,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:09,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:09,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:09,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:09,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:09,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:09,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:09,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:09,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:09,232.232] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:09,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:09,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1006s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:09,234.234] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:09,235.235] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:25:09,477.477] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:09,478.478] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:25:09,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:09,479.479] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:25:09,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1061s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:09,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:09,485.485] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:09] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:11,510.510] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:11,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:11,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1063s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:11,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:11,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1063s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:11,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:11,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1059s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:11,514.514] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:25:11,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1021s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 25, 11, 514368), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:25:11,516.516] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:11,517.517] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:14,184.184] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:14] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:25:14,487.487] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:14] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:25:14,491.491] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:14] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:25:14,492.492] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:14] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:25:14,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:14] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:25:17,031.031] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:17,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:17,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:17,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1069s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:17,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:17,343.343] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1069s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:17,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:17,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1065s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:17,345.345] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:25:17,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 976.8s ago] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 15, 25, 17, 344607), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:25:17,345.345] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:17,347.347] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:17,353.353] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:17] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:17,596.596] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:17,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:17,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1069s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:17,599.599] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:17,600.600] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:17] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:18,283.283] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:25:18,288.288] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:18,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:18,290.290] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:18,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:18,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:18,293.293] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:25:18,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:18,294.294] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:18,296.296] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:25:18,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:18,858.858] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:18,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:18,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:18,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:18,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:18,860.860] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:25:18,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:25:18,862.862] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:25:18,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'debug_conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:18,863.863] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:18,863.863] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:18,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:18,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:18,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:25:18,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:18,874.874] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:25:18,874.874] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:18,875.875] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:18,876.876] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:22,459.459] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:25:22,464.464] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:22,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:22,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1074s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:22,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:22,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1074s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:22,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:22,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:22,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:22,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:22,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:22,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:22,478.478] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:25:22,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:22,481.481] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:22,542.542] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:22,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:22,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1074s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:22,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:25:22,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:25:22,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:22,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:25:26,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:26,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1073s ago] {'pk_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:26,119.119] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:25:27,998.998] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:27,998.998] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:28,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:28,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'pk_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:28,009.009] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:25:28,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'message_id': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c2754f2b-2be7-4422-9dc1-6c24066493ab", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 5.420551599999953}
[2025-06-08 15:25:28,016.016] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:28,018.018] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:28,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1075s ago] {'pk_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:28,022.022] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:25:28,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1070s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2932 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "c2754f2b-2be7-4422-9dc1-6c24066493ab", "example": false}}]', 'answer': '你好，好儿！我是你的AI助手，有什么可以帮你的吗？', 'latency': 5.420551599999953, 'message_id': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:28,024.024] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:28,025.025] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:28,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1075s ago] {'pk_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:28,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1080s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:28,312.312] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:28] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:25:28,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:28,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:28,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1080s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:28,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1071s ago] {'pk_1': 'fc1d4925-9a35-4c4d-97ee-4576e2edd08c'}
[2025-06-08 15:25:28,762.762] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:28,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1081s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:28,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:28,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1081s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:28,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:28,765.765] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1076s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:28,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:28,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1076s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:28,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:28,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1076s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:28,777.777] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:28,778.778] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:31,073.073] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:31,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:31,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1083s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:31,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:31,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1083s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:31,076.076] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:31,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1078s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:31,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:31,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1078s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:31,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:31,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1078s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:31,081.081] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:31,082.082] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:31] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:35,605.605] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:35,606.606] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:35] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:25:36,352.352] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:36] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:36,668.668] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:36,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:36,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1088s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:36,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:36,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1088s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:36,678.678] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:36,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1084s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:36,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:36,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1084s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:36,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:36,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1084s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:36,690.690] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:36,692.692] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:36] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:37,172.172] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:25:37,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1072s ago] {'summary': '人类自我介绍为好儿，AI回应并自我介绍为AI助手，询问是否需要帮助。', 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:37,174.174] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:37,177.177] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:37,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:37,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:37,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:25:37,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1072s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:37,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:25:37,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1084s ago] {'pk_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:39,424.424] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:39,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:39,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:39,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:39,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:39,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:39,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1087s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:39,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:39,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1087s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:39,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:39,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1087s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:39,439.439] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:39,440.440] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:39] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:25:40,439.439] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:25:40,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 927s ago] {'name': '用户自我介绍', 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:40,443.443] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:47,187.187] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:25:47,499.499] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:47,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:47,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1099s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:47,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:47,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1099s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:47,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:47,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:47,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:47,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:47,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:47,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:47,516.516] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:25:47,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:47,518.518] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:25:47,581.581] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:47,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:25:47,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1099s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:25:47,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:25:47,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:25:47,586.586] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:47,609.609] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:47] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:25:58,947.947] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:58] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:25:58,953.953] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:58,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:58,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:58,960.960] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:58,961.961] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:58] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:25:59,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:25:59,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:25:59,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:59,266.266] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:59,269.269] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:25:59,589.589] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:25:59,588.588] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:59,590.590] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:59,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:59,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,595.595] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:59,593.593] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:59,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:25:59,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:59,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:25:59,600.600] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:59,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:59,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:59,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:25:59,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:25:59,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:59,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:25:59,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:25:59,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1107s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:25:59,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:59,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:25:59,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:25:59,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1107s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:59,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1107s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:25:59,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:59,633.633] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:59,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:25:59,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1107s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:25:59,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:25:59,636.636] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:59,639.639] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:59,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:59,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1111s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:25:59,641.641] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:25:59,641.641] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:25:59,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,643.643] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:25:59,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:25:59,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'message_id_1': UUID('fc1d4925-9a35-4c4d-97ee-4576e2edd08c')}
[2025-06-08 15:25:59,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:59,653.653] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:59,654.654] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:59,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:59,657.657] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:25:59,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:25:59,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:59,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,665.665] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:59,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:25:59,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:59,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,671.671] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:59,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:25:59,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:59,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:59,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:25:59,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:59,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:59,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:25:59,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:59,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:59,693.693] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,693.693] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:25:59,695.695] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:59,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:59,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:25:59,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:59,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:59,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,705.705] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:25:59,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:59,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:59,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:25:59,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:59,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:59,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:25:59,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:59,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:59,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:25:59,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:59,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:59,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:25:59,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:59,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:59,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,735.735] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:25:59,736.736] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:59,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:59,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:25:59,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:59,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:59,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:25:59,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:59,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:59,748.748] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:25:59,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:59,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:59,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:25:59,753.753] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:59,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:59,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:25:59,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:59,759.759] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:59,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:25:59,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1056s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:25:59,764.764] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:59,765.765] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:25:59,838.838] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:25:59,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:25:59,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1112s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:25:59,842.842] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:25:59,842.842] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:25:59,965.965] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:25:59,979.979] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:25:59] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:26:13,364.364] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:26:13] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:26:13,368.368] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:26:13,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:26:13,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1125s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:26:13,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:26:13,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1125s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:26:13,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:26:13,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1121s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:26:13,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:26:13,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1121s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:26:13,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:26:13,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1121s ago] {'id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:26:13,381.381] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:26:13,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1121s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:26:13,382.382] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:26:13,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:26:13,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:26:13,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1125s ago] {'pk_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3')}
[2025-06-08 15:26:13,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:26:13,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1121s ago] {'conversation_id_1': UUID('c3853f87-c005-4228-b319-a1838bcb10c3'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:26:13,448.448] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:26:13,456.456] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:26:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:29:09,271.271] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\memory\\token_buffer_memory.py', reloading
[2025-06-08 15:29:09,834.834] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:29:30,933.933] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:29:30,935.935] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:35:08,437.437] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:35:08,887.887] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 15:35:08,888.888] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:35:08,890.890] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 15:35:08,891.891] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:35:08,892.892] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 15:35:08,892.892] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:35:08,893.893] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:08,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:35:08,895.895] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:35:08,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:35:08,900.900] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:08,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:35:08,904.904] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:35:08,909.909] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:35:08,910.910] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 35, 8, 908571), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:35:08,912.912] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:35:08,913.913] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:08] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:35:10,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:35:10,742.742] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:35:10,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:35:10,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:35:10,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:35:10,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:10] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:35:14,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:35:14,493.493] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:14,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:35:14,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:35:14,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.601s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:35:14,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:35:14,498.498] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.598s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:14,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:35:14,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.595s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:35:14,499.499] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:35:14,501.501] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 15, 35, 14, 499601), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:35:14,501.501] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:35:14,502.502] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:35:14,756.756] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:14,757.757] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:35:14,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:35:14,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.863s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:35:14,759.759] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:35:14,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.86s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:14,761.761] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:35:14,761.761] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:14,762.762] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:35:14,763.763] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:35:14,802.802] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:14,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:35:14,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.908s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:35:14,805.805] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:35:14,806.806] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:35:14,817.817] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:35:15,070.070] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:15,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:35:15,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.176s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:35:15,072.072] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:35:15,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.173s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:15,074.074] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 15:35:15,075.075] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:35:15,084.084] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 15:35:15,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3234s ago] {'debug_conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:35:15,085.085] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:35:15,086.086] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:35:15,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:35:15,088.088] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:35:15,092.092] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:35:15,093.093] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:35:15,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:35:15,096.096] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:35:15,098.098] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:35:15,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:35:15] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:36:00,282.282] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\memory\\token_buffer_memory.py', reloading
[2025-06-08 15:36:00,703.703] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:36:23,724.724] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:36:59,102.102] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:37:20,817.817] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:37:20,820.820] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:37:41,037.037] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\openapi_service.py', reloading
[2025-06-08 15:37:41,365.365] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:38:02,549.549] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:38:02,551.551] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:38:08,609.609] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:38:09,043.043] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 15:38:09,043.043] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:38:09,044.044] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 15:38:09,044.044] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:38:09,045.045] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 15:38:09,045.045] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:38:09,046.046] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:38:09,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:38:09,048.048] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:38:09,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:38:09,052.052] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:38:09,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:38:09,056.056] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:38:09,059.059] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:38:09,059.059] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'dialog_round': 8, 'updated_at': datetime.datetime(2025, 6, 8, 15, 38, 9, 58836), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:38:09,060.060] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:38:09,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:09] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:38:09,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:09] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:38:09,188.188] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:38:09,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:38:09,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1409s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:38:09,190.190] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:38:09,190.190] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:09] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:38:09,373.373] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:38:09,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:38:09,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3263s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:38:09,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:38:09,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3238s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:38:09,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:38:09,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3208s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:38:09,458.458] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:38:09,458.458] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'long_term_memory': '{"enable": true}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 38, 9, 377923), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:38:09,460.460] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:38:09,462.462] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:09] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:38:14,604.604] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:38:14,607.607] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:38:14,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:38:14,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.56s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:38:14,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:38:14,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.56s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:38:14,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:38:14,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.558s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:38:14,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:38:14,615.615] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:38:14,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:38:14,618.618] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:38:14,622.622] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:38:14,622.622] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:38:14,628.628] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:38:14,676.676] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:38:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:39:00,590.590] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:00] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:00,782.782] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-06-08 15:39:01,176.176] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:39:22,608.608] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:39:22,611.611] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:39:22,736.736] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 15:39:22,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:39:22,738.738] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:39:22,739.739] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:39:22,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:39:22,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:22,844.844] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 15:39:22,845.845] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:39:22,846.846] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 15:39:22,846.846] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:39:22,847.847] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 15:39:22,847.847] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:39:22,848.848] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:22,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:22,850.850] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:22,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:22,854.854] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:22,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:22,859.859] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:22,862.862] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:39:22,862.862] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'updated_at': datetime.datetime(2025, 6, 8, 15, 39, 22, 861334), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:39:22,956.956] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:22,956.956] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:22,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:22,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.107s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:22,958.958] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:22,962.962] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:22,963.963] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:22] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:39:23,048.048] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:39:23,049.049] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:39:23,049.049] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 15:39:23,051.051] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:39:23,052.052] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,056.056] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2086s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2088s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:39:23,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2089s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:23,063.063] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:39:23,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:39:23,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2088s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,067.067] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:39:23,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:39:23,070.070] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00125s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:23,070.070] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:39:23,072.072] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,073.073] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:23,073.073] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:23,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,077.077] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:23,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,079.079] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009635s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:23,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006379s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:23,080.080] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003764s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:23,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01216s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:23,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008758s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:23,083.083] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006338s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:23,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01497s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:23,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,085.085] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01195s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:23,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,087.087] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009976s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:23,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01868s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:23,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0153s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:23,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01264s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:23,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02123s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:23,091.091] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,091.091] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01833s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:23,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01633s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:23,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02494s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:23,095.095] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02235s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:23,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0207s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:23,099.099] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02972s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:23,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02678s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:23,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02436s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:23,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03305s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:23,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03009s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:23,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02754s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:23,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03588s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:23,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03257s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:23,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03024s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:23,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0388s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:23,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03572s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:23,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03359s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:23,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04238s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:23,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03949s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:23,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03767s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:23,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04674s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:23,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04412s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:23,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04185s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:23,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05056s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:23,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04761s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:23,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04531s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:23,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05406s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:23,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05108s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:23,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,126.126] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04859s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:23,126.126] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05724s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:23,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05391s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:23,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05134s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:23,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,129.129] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05972s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:23,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,130.130] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05638s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:23,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0539s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:23,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06263s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:23,133.133] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05979s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:23,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05816s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:23,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06713s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:23,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06416s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:23,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06181s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:23,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07046s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:23,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06755s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:23,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:23,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06559s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:23,144.144] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,145.145] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:39:23,167.167] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3189s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3176s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:23,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:39:23,173.173] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:39:23,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:39:23,176.176] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:23,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:39:23,179.179] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:23,180.180] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,181.181] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:39:23,361.361] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,362.362] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,364.364] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:23,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5143s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5149s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5152s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:23,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,367.367] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:39:23,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5144s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:23,369.369] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:39:23,369.369] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /account HTTP/1.1" 200 -
[2025-06-08 15:39:23,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:39:23,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5128s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,371.371] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:39:23,372.372] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,374.374] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:39:23,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5173s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5189s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5204s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,382.382] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 15:39:23,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:23,385.385] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5264s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:23,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 15:39:23,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004482s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 15:39:23,387.387] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:23,387.387] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:23] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:39:25,555.555] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:25,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.71s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:25,557.557] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:39:25,556.556] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:25,558.558] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:25,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,563.563] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:25,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.714s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:25,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,565.565] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:39:25,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.715s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:25,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.713s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:25,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:25,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.711s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:25,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.716s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:25,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:39:25,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:39:25,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.502s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:39:25,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.399s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:39:25,573.573] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:25,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:39:25,575.575] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:25,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.399s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:25,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:39:25,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.399s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:25,579.579] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:25,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:39:25,735.735] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:25,736.736] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.886s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:25,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:39:25,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.676s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:39:25,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:39:25,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.675s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:39:25,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.674s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:25,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.672s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:25,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.671s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:39:25,748.748] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.679s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:25,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.676s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:25,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.674s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:39:25,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.683s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:25,753.753] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.68s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:25,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.678s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:39:25,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.687s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:25,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.684s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:25,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.681s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:39:25,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.69s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:25,759.759] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.686s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:25,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.684s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:39:25,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,761.761] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.692s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:25,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.689s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:25,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.686s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:39:25,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.695s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:25,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.691s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:25,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,765.765] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.689s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:39:25,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,765.765] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.697s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:25,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.694s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:25,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.691s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:39:25,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.7s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:25,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.697s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:25,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.694s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:39:25,772.772] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:25,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.923s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:25,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.704s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:25,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.701s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:25,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:25,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.699s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:39:25,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.922s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:25,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.708s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:25,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:25,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.921s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:25,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.706s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:25,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.703s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:39:25,781.781] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:25,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.712s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:25,782.782] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:39:25,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.709s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:25,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.708s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:39:25,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.717s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:25,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.714s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:25,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.712s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:39:25,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.721s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:25,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.718s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:25,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.715s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:39:25,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.724s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:25,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.721s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:25,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.719s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:39:25,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.73s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:25,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.727s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:25,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.725s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:39:25,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.734s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:25,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,805.805] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.731s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:25,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.73s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:39:25,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.739s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:25,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.737s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:25,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.736s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:39:25,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.745s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:25,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.742s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:25,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.739s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:39:25,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.749s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:25,820.820] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.748s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:25,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:39:25,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.746s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:39:25,825.825] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:25,826.826] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:39:25,897.897] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:25] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:39:26,121.121] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:26] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:39:26,123.123] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:26] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:39:26,207.207] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:26,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:26,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.358s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:26,208.208] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:26,210.210] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:26] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:39:32,028.028] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:39:32,332.332] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:32,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:32,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.484s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:32,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:32,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.483s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:32,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:32,337.337] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.48s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:32,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:39:32,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.269s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:39:32,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:39:32,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.167s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:39:32,343.343] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:39:32,343.343] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好我的名字是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:32,347.347] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:32,388.388] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:32,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:32,390.390] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:32,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:39:32,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:39:32,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:32,394.394] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:39:32,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:32,561.561] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:32,562.562] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:39:37,083.083] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:37,083.083] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:37,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,084.084] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:37,087.087] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,087.087] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:37,091.091] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:39:37,091.091] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'message_id': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 15:39:37,098.098] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:37,098.098] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:37,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.709s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:37,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.541s ago] {'pk_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:37,104.104] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:39:37,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01266s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'message_id': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好，好儿！很高兴认识你！有什么我可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2953 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "593d6c1b-c9cb-40eb-9bb5-7123e9496c78", "example": false}}]', 'answer': '你好，好儿！很高兴认识你！有什么我可以帮你的吗？', 'latency': 4.525022799999999}
[2025-06-08 15:39:37,109.109] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:37,111.111] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:37,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.551s ago] {'pk_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:37,113.113] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:39:37,114.114] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2953 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "593d6c1b-c9cb-40eb-9bb5-7123e9496c78", "example": false}}]', 'answer': '你好，好儿！很高兴认识你！有什么我可以帮你的吗？', 'latency': 4.525022799999999, 'message_id': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:37,115.115] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:37,116.116] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:37,116.116] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.556s ago] {'pk_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:39:37,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.73s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:37,403.403] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:37] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:39:37,405.405] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:37,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.56s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:37,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:39:37,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3209s ago] {'pk_1': 'af44c51b-5d26-4ee7-9cb1-ff5400a80e52'}
[2025-06-08 15:39:41,151.151] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:41] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:39:41,462.462] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:41,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:41,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.61s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:41,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:41,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.61s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:41,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:41,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.61s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:41,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:39:41,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:39:41,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:39:41,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.3s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:39:41,471.471] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:39:41,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.128s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:39:41,473.473] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:41,512.512] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:41,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:41,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.123s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:41,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:39:41,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.122s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:39:41,627.627] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:41,638.638] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:41] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:39:44,876.876] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:39:44,876.876] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'summary': '人类自我介绍，称自己为好儿。AI回应称很高兴认识好儿，并询问是否有需要帮助的地方。', 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:44,878.878] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:44,879.879] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:44,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:39:44,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.49s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:44,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:39:44,881.881] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:39:44,882.882] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:45,573.573] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:45,574.574] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:45] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:39:48,418.418] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:39:48,736.736] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:48,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:48,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.89s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:48,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:48,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.89s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:48,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:48,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.88s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:48,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:39:48,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.67s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:39:48,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:39:48,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.57s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:39:48,744.744] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:48,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:48] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/summary HTTP/1.1" 200 -
[2025-06-08 15:39:56,610.610] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:56] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:39:56,913.913] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:56] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:39:56,915.915] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:56] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:39:56,916.916] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:56] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:39:56,916.916] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:56] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:39:57,469.469] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:57] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:57,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:57,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:57,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:57,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:39:57,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.93s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:39:57,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:39:57,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.93s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:39:57,790.790] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:39:57,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.93s ago] {'updated_at': datetime.datetime(2025, 6, 8, 15, 39, 57, 790605), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:39:57,791.791] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:39:57,793.793] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:57] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:39:58,109.109] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:58] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:39:58,112.112] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:39:58,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:39:58,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.26s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:39:58,114.114] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:39:58,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:39:58] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:40:02,394.394] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:40:02,703.703] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:40:02,703.703] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:40:02,704.704] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:40:02,705.705] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:02,706.706] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:02,707.707] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:40:02,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:02,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:02,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.86s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:02,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.86s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:02,714.714] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:02,715.715] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:40:02,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:40:02,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.86s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:40:02,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:40:02,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.86s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:40:02,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:40:02,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.65s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:40:02,720.720] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:02,721.721] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:40:02,969.969] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:02] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:40:03,015.015] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:03,016.016] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:03,017.017] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:03,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:03,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:03,020.020] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:03,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:40:03,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.96s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:40:03,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:40:03,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:40:03,024.024] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:40:03,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:40:03,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:40:03,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.96s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:40:03,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.17s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:40:03,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.85s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:40:03,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,028.028] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:03,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:40:03,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.96s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:40:03,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.85s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:40:03,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:40:03,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:40:03,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,033.033] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.85s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:40:03,033.033] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.96s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:40:03,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:40:03,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.96s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:40:03,036.036] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00085s] {'message_id_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:40:03,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,038.038] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:40:03,039.039] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,040.040] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:03,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:40:03,041.041] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:40:03,041.041] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:40:03,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:40:03,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:40:03,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:40:03,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:40:03,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:40:03,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:40:03,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:40:03,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:40:03,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:40:03,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.99s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:40:03,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:40:03,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:40:03,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.99s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:40:03,063.063] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:03,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:03,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.21s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:03,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.99s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:40:03,066.066] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:03,067.067] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,067.067] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:40:03,067.067] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.99s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:40:03,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:40:03,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:40:03,072.072] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:40:03,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:40:03,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:40:03,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:40:03,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:40:03,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:40:03,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:40:03,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:40:03,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,084.084] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:40:03,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:40:03,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,087.087] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:40:03,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:40:03,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:40:03,092.092] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,092.092] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:40:03,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:40:03,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,094.094] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:40:03,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,094.094] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:40:03,095.095] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,095.095] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:40:03,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:40:03,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:40:03,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:40:03,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:40:03,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:40:03,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:40:03,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:40:03,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:40:03,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:40:03,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:40:03,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:40:03,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:40:03,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:40:03,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:40:03,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.05s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:40:03,116.116] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:40:03,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:40:03,121.121] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.05s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:40:03,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.05s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:40:03,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:40:03,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.05s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:40:03,126.126] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:03,127.127] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:40:03,279.279] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:03] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:40:08,557.557] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:40:08,864.864] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:08,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:40:08,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.01s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:40:08,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:40:08,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.01s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:40:08,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:40:08,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.01s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:40:08,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:40:08,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:40:08,869.869] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:40:08,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.7s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:40:08,870.870] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:40:08,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.53s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:40:08,875.875] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:40:08,916.916] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:40:08,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:40:08,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.53s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:40:08,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:40:08,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.53s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:40:08,920.920] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:40:08,928.928] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:40:08] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:42:21,081.081] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\memory\\token_buffer_memory.py', reloading
[2025-06-08 15:42:21,474.474] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 15:42:42,990.990] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 15:42:42,993.993] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 15:42:43,094.094] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 15:42:43,095.095] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:42:43,096.096] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:42:43,098.098] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:42:43,098.098] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:42:43,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:42:43,409.409] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 15:42:43,515.515] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 15:42:43,515.515] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:42:43,516.516] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 15:42:43,516.516] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:42:43,517.517] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 15:42:43,517.517] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 15:42:43,517.517] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:43,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,519.519] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:43,524.524] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:43,524.524] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 15:42:43,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:43,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05952s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:43,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:42:43,583.583] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 15:42:43,662.662] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:43,663.663] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 15:42:43,663.663] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,663.663] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:42:43,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1442s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:43,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,665.665] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:42:43,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,668.668] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00115s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:42:43,669.669] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:42:43,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:42:43,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00143s] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:42:43,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00073s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 15:42:43,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008025s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:42:43,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 15:42:43,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007817s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:42:43,676.676] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:42:43,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005622s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 15:42:43,678.678] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 15:42:43,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01406s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:42:43,679.679] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:42:43,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 15:42:43,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01405s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:42:43,682.682] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'message_id_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 15:42:43,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,684.684] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:43,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01381s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 15:42:43,685.685] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 15:42:43,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02158s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:42:43,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01987s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:42:43,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01749s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 15:42:43,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02558s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:42:43,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02397s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:42:43,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,692.692] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0215s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 15:42:43,693.693] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.029s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:42:43,695.695] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02739s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:42:43,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02509s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 15:42:43,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03269s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:42:43,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03096s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:42:43,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02875s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 15:42:43,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03638s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:42:43,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,702.702] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03491s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:42:43,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03272s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 15:42:43,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,705.705] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04033s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:42:43,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03909s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:42:43,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03707s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 15:42:43,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04465s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:42:43,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04277s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:42:43,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04031s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 15:42:43,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04774s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:42:43,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04596s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:42:43,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04338s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 15:42:43,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05117s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:42:43,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04974s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:42:43,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04774s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 15:42:43,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05564s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:42:43,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,721.721] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:43,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05467s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:42:43,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2043s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:43,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05311s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 15:42:43,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,726.726] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,726.726] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06149s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:42:43,726.726] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05963s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:42:43,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06012s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:42:43,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:42:43,730.730] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,730.730] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00073s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:42:43,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05924s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 15:42:43,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06683s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:42:43,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:42:43,734.734] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:42:43,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0662s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:42:43,735.735] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,736.736] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:43,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06432s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 15:42:43,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:42:43,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07191s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:42:43,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07032s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:42:43,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06862s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 15:42:43,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07655s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:42:43,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07575s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:42:43,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07331s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 15:42:43,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08052s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:42:43,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07852s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:42:43,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07576s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 15:42:43,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08288s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:42:43,748.748] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0808s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:42:43,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07808s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 15:42:43,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0852s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:42:43,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08316s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:42:43,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 15:42:43,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08037s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 15:42:43,753.753] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:43,753.753] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 15:42:43,795.795] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:43,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2769s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:43,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:42:43,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1311s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:42:43,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:42:43,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07055s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:42:43,802.802] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:43,803.803] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 15:42:44,052.052] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:44] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:42:44,070.070] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:44,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:44,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.551s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:44,072.072] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:44,072.072] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:44] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:42:44,200.200] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:44] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 15:42:44,364.364] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:44] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 15:42:50,907.907] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:50] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:42:51,211.211] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:51,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:51,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:51,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:42:51,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.547s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:42:51,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:42:51,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.487s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:42:51,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:42:51,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.486s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:42:51,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:42:51,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.55s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:42:51,222.222] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:42:51,223.223] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:42:51,227.227] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:42:51,269.269] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:51,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:42:51,270.270] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:42:51,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:42:51,273.273] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 8, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:42:51,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:51,374.374] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:42:51,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:51,539.539] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00344s] {'pk_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:51,540.540] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:51] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:42:56,246.246] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:42:56,246.246] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:56,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,248.248] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:42:56,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,254.254] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:56,257.257] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:42:56,258.258] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00075s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'message_id': UUID('46c7a735-a571-4170-8fb6-b723adafd65c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '人类自我介绍，称自己为好儿。AI回应称很高兴认识好儿，并询问是否有需要帮助的地方。', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 15:42:56,264.264] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:42:56,266.266] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:56,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.998s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:42:56,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.734s ago] {'pk_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:56,272.272] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:42:56,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01463s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'message_id': UUID('46c7a735-a571-4170-8fb6-b723adafd65c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '当然记得！你是好儿，我们之前已经互相认识过了。有什么需要我帮忙的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3886 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "881e8e78-a9e5-4035-860b-7709eb5dd490", "example": false}}]', 'answer': '当然记得！你是好儿，我们之前已经互相认识过了。有什么需要我帮忙的吗？', 'latency': 4.711700799999999}
[2025-06-08 15:42:56,278.278] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:42:56,279.279] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:56,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.745s ago] {'pk_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:56,283.283] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:42:56,283.283] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3886 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "881e8e78-a9e5-4035-860b-7709eb5dd490", "example": false}}]', 'answer': '当然记得！你是好儿，我们之前已经互相认识过了。有什么需要我帮忙的吗？', 'latency': 4.711700799999999, 'message_id': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:56,285.285] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:42:56,286.286] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:56,286.286] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.751s ago] {'pk_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 15:42:56,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.018s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:42:56,563.563] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:42:56] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:42:56,567.567] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:42:56,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.05s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:42:56,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:42:56,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3158s ago] {'pk_1': '46c7a735-a571-4170-8fb6-b723adafd65c'}
[2025-06-08 15:43:06,809.809] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:06,809.809] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:06] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:43:11,409.409] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 15:43:11,409.409] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'summary': '人类自我介绍，称自己为好儿。AI回应称很高兴认识好儿，并询问是否有需要帮助的地方。随后，人类询问AI是否记得自己，AI确认记得好儿，并再次询问是否需要帮助。', 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:11,412.412] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:11,414.414] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:11,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:43:11,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.14s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:11,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:43:11,416.416] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:11,417.417] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:17,255.255] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 15:43:17,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 15:43:17,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 15:43:17,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 15:43:17,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:17] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 15:43:20,750.750] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:20] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:43:20,753.753] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:20,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:20,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.24s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:43:20,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:43:20,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.09s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:43:20,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:43:20,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.03s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:43:20,759.759] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET dialog_round=%(dialog_round)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:43:20,759.759] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'dialog_round': 0, 'updated_at': datetime.datetime(2025, 6, 8, 15, 43, 20, 758238), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:43:20,760.760] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:20,760.760] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:20] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:43:21,083.083] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:21] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:43:21,392.392] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:21,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:21,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.87s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:43:21,395.395] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:21,395.395] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:21] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 15:43:21,656.656] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:21,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:21,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.14s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:43:21,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:43:21,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.99s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:43:21,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:43:21,661.661] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.93s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:43:21,662.662] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET long_term_memory=%(long_term_memory)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 15:43:21,662.662] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'long_term_memory': '{"enable": false}', 'updated_at': datetime.datetime(2025, 6, 8, 15, 43, 21, 661720), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 15:43:21,663.663] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:21,665.665] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:21] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 15:43:27,064.064] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:27] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:43:27,070.070] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:27,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:27,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.55s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:43:27,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 15:43:27,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.41s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 15:43:27,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 15:43:27,076.076] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.35s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 15:43:27,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 15:43:27,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.34s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 15:43:27,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 15:43:27,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.41s ago] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 15:43:27,079.079] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 15:43:27,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.86s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道我是谁吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 15:43:27,081.081] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:27,120.120] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:27,121.121] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:43:27,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.85s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:27,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 15:43:27,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.85s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 15:43:27,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:27,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.75s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 15:43:32,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:43:32,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.28s ago] {'pk_1': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0')}
[2025-06-08 15:43:32,813.813] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 15:43:35,645.645] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:35,645.645] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:35,646.646] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:43:35,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.4s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:35,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:43:35,649.649] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.4s ago] {'pk_1': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0')}
[2025-06-08 15:43:35,652.652] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 15:43:35,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.39s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'message_id': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意提供一些背景信息或上下文，我可以更好地为你提供帮助！或者，如果你之前和我有过对话，可以告诉我一些细节，我会尽力回忆并提供更相关的回复。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "6523d3be-2a11-48c7-9be9-506920c0d3ab", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意提供一些背景信息或上下文，我可以更好地为你提供帮助！或者，如果你之前和我有过对话，可以告诉我一些细节，我会尽力回忆并提供更相关的回复。', 'latency': 8.4948768}
[2025-06-08 15:43:35,655.655] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:35,657.657] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:35,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:43:35,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.12s ago] {'pk_1': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0')}
[2025-06-08 15:43:35,659.659] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 15:43:35,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.38s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2940 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "6523d3be-2a11-48c7-9be9-506920c0d3ab", "example": false}}]', 'answer': '目前我无法直接知道你是谁，因为我无法访问个人信息或历史记录。不过，如果你愿意提供一些背景信息或上下文，我可以更好地为你提供帮助！或者，如果你之前和我有过对话，可以告诉我一些细节，我会尽力回忆并提供更相关的回复。', 'latency': 8.4948768, 'message_id': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0')}
[2025-06-08 15:43:35,660.660] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 15:43:35,661.661] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:35,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 15:43:35,661.661] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.39s ago] {'pk_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:35,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 15:43:35,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.25s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed')}
[2025-06-08 15:43:35,663.663] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:35,954.954] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:35] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 15:43:36,267.267] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 15:43:36,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 15:43:36,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.75s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 15:43:36,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 15:43:36,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'pk_1': '4c030e13-f1f9-407e-a0c2-bab90f2321d0'}
[2025-06-08 15:43:43,969.969] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 15:43:43,970.970] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 15:43:43] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 17:30:29,407.407] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 17:30:29,408.408] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 17:30:29,410.410] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 17:30:51,453.453] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 17:30:51,458.458] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 17:30:51,629.629] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:30:51] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 17:30:51,630.630] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:30:51] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 17:30:52,082.082] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 17:30:52,082.082] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 17:30:52,084.084] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 17:30:52,084.084] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 17:30:52,085.085] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 17:30:52,086.086] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 17:30:52,087.087] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:30:52,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:30:52,089.089] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:30:52,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 17:30:52,098.098] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 17:30:52,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 17:30:52,107.107] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 17:30:52,110.110] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:30:52,111.111] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:30:52] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 17:30:52,123.123] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:30:52,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:30:52,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03594s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:30:52,128.128] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:30:52,129.129] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:30:52] "GET /account HTTP/1.1" 200 -
[2025-06-08 17:31:03,727.727] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:03] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-08 17:31:03,731.731] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:03,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:03,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.65s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:03,737.737] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:31:03,737.737] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:31:03,740.740] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:03,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:03] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-08 17:31:04,137.137] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:04] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:31:04,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:04,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:04,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.36s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:04,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:31:04,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.7124s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:31:04,453.453] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:04,454.454] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:04] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:31:11,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:11] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 17:31:11,423.423] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:11,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:11,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.33s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:11,426.426] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:11,427.427] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:11] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 17:31:11,748.748] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:11] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 17:31:12,012.012] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:12,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:12,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.92s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:12,018.018] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:12,019.019] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:12] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 17:31:12,056.056] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:12] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-08 17:31:12,755.755] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:12] "GET /language-models/moonshot/icon HTTP/1.1" 200 -
[2025-06-08 17:31:13,065.065] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:13] "GET /language-models/tongyi/icon HTTP/1.1" 200 -
[2025-06-08 17:31:13,069.069] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:13] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 17:31:13,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:13] "GET /language-models/wenxin/icon HTTP/1.1" 200 -
[2025-06-08 17:31:13,072.072] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:13] "GET /language-models/ollama/icon HTTP/1.1" 200 -
[2025-06-08 17:31:50,068.068] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:50] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 17:31:50,382.382] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:50,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:50,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.29s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:50,384.384] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:50,384.384] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:50] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 17:31:51,291.291] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:51,292.292] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:51,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:51,293.293] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:31:51,295.295] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:51] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 17:31:51,549.549] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:51] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:31:51,853.853] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:31:51,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:31:51,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.77s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:31:51,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:31:51,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.12s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:31:51,857.857] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET is_debug_passed=%(is_debug_passed)s WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-08 17:31:51,858.858] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'is_debug_passed': False, 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:31:51,861.861] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:31:51,863.863] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:31:51] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:32:01,283.283] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:32:01] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:32:01,288.288] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:32:01,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:32:01,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 69.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:32:01,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:32:01,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.55s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:01,293.293] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-08 17:32:01,294.294] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (2104 characters truncated) ... , "source": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "source_type": "start", "target": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target_type": "llm"}]}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:01,297.297] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:32:01,299.299] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:32:01] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:32:04,102.102] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:32:04,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:32:04,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.01s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:32:04,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:32:04,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.37s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:04,107.107] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:32:04,108.108] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:32:04] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 17:32:11,477.477] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:32:11] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-08 17:32:11,480.480] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:32:11,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:32:11,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 79.39s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:32:11,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:32:11,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 67.75s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:11,487.487] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO workflow_result (app_id, account_id, workflow_id, graph, state, latency, status) VALUES (%(app_id)s::UUID, %(account_id)s::UUID, %(workflow_id)s::UUID, %(graph)s::JSONB, %(state)s::JSONB, %(latency)s, %(status)s) RETURNING workflow_result.id, workflow_result.updated_at, workflow_result.created_at
[2025-06-08 17:32:11,487.487] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'app_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9'), 'graph': '{"edges": [{"id": "a961bef9-06a5-4578-80f1-870b35b53da8", "source": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target": "3375ae65-029f-4ae2-8282-281dab ... (2104 characters truncated) ... at", "provider": "deepseek", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.85, "presence_penalty": 0, "frequency_penalty": 0}}}]}', 'state': '[]', 'latency': 0, 'status': <WorkflowResultStatus.RUNNING: 'running'>}
[2025-06-08 17:32:11,501.501] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:32:11,696.696] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:32:11] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-08 17:32:25,139.139] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:32:25,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow_result.id AS workflow_result_id, workflow_result.app_id AS workflow_result_app_id, workflow_result.account_id AS workflow_result_account_id, workflow_result.workflow_id AS workflow_result_workflow_id, workflow_result.graph AS workflow_result_graph, workflow_result.state AS workflow_result_state, workflow_result.latency AS workflow_result_latency, workflow_result.status AS workflow_result_status, workflow_result.updated_at AS workflow_result_updated_at, workflow_result.created_at AS workflow_result_created_at 
FROM workflow_result 
WHERE workflow_result.id = %(pk_1)s::UUID
[2025-06-08 17:32:25,141.141] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('a9c07eee-75d9-4bc2-8717-235bcf73a8a8')}
[2025-06-08 17:32:25,144.144] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow_result SET state=%(state)s::JSONB, latency=%(latency)s, status=%(status)s WHERE workflow_result.id = %(workflow_result_id)s::UUID
[2025-06-08 17:32:25,144.144] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'state': '[{"node_data": {"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\ ... (5139 characters truncated) ... \u662f\\u65e5\\u5e38\\u7591\\u95ee\\uff0c\\u90fd\\u53ef\\u4ee5\\u95ee\\u6211\\uff01\\ud83d\\ude0a"}, "latency": 1.0899999992375342e-05, "error": ""}]', 'latency': 13.636817799999989, 'status': <WorkflowResultStatus.SUCCEEDED: 'succeeded'>, 'workflow_result_id': UUID('a9c07eee-75d9-4bc2-8717-235bcf73a8a8')}
[2025-06-08 17:32:25,148.148] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:32:25,149.149] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:32:25,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 17:32:25,150.150] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:25,152.152] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET is_debug_passed=%(is_debug_passed)s WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-08 17:32:25,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.29s ago] {'is_debug_passed': True, 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 17:32:25,153.153] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 17:33:34,928.928] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:34] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 17:33:34,944.944] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:34] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 17:33:35,238.238] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:33:35,239.239] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:33:35,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 163.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:33:35,242.242] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:33:35,242.242] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:35] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 17:33:35,253.253] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:33:35,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:33:35,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 163.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:33:35,258.258] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:33:35,259.259] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:35] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 17:33:42,713.713] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:42] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 17:33:42,716.716] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 17:33:42,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 17:33:42,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 170.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 17:33:42,718.718] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 17:33:42,718.718] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 17:33:42] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-08 18:15:00,431.431] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 18:15:00,432.432] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 18:15:00,433.433] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 18:15:21,925.925] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 18:15:21,931.931] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 18:19:56,056.056] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-08 18:19:56,425.425] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 18:20:18,022.022] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 18:20:18,025.025] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 18:20:41,439.439] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\memory\\token_buffer_memory.py', reloading
[2025-06-08 18:20:41,758.758] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 18:21:03,104.104] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 18:21:03,106.106] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 18:22:26,837.837] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:26] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 18:22:26,838.838] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:26] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 18:22:27,276.276] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 18:22:27,277.277] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 18:22:27,279.279] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 18:22:27,280.280] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 18:22:27,281.281] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 18:22:27,281.281] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 18:22:27,282.282] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:22:27,284.284] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:22:27,285.285] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:22:27,289.289] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:22:27,290.290] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:27] "GET /account HTTP/1.1" 200 -
[2025-06-08 18:22:27,322.322] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:22:27,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:22:27,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03772s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:22:27,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 18:22:27,329.329] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 18:22:27,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 18:22:27,336.336] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 18:22:27,338.338] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:22:27,338.338] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:27] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 18:22:47,002.002] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:47] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:22:47,006.006] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:22:47,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:22:47,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.72s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:22:47,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:22:47,014.014] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-08 18:22:47,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 18:22:47,110.110] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00079s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:22:47,117.117] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 18:22:47,117.117] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:22:47,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:47,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'message_id_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-08 18:22:47,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:47,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007725s ago] {'message_id_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-08 18:22:47,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:47,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02355s ago] {'message_id_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-08 18:22:47,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:47,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02546s ago] {'message_id_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-08 18:22:47,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:47,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0412s ago] {'message_id_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-08 18:22:47,165.165] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:22:47,166.166] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:47] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:22:58,977.977] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:58] "OPTIONS /assistant-agent/messages?current_page=2&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:22:59,291.291] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:22:59,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:22:59,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.01s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:22:59,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:22:59,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.28s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-08 18:22:59,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 18:22:59,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.19s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 5, 'param_2': 5, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:22:59,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 18:22:59,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.19s ago] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:22:59,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:59,306.306] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.19s ago] {'message_id_1': UUID('ff2aa338-ae70-4e0f-aba2-1f3d0f010f00')}
[2025-06-08 18:22:59,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 18:22:59,321.321] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.2s ago] {'message_id_1': UUID('182da1e9-9de3-482d-a092-35801c888a32')}
[2025-06-08 18:22:59,322.322] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:22:59,322.322] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:22:59] "GET /assistant-agent/messages?current_page=2&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:23:20,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:20] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-08 18:23:20,946.946] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:20,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:23:20,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.66s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:23:20,949.949] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-08 18:23:20,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 18:23:20,952.952] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:20,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:20] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-08 18:23:21,271.271] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:21] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:23:21,576.576] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:21,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:23:21,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:23:21,583.583] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 18:23:21,583.583] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 18:23:21,594.594] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-08 18:23:21,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6457s ago] {'assistant_agent_conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 18:23:21,596.596] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:21,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:21,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:21,599.599] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:21,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 18:23:21,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.49s ago] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:23:21,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 18:23:21,611.611] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.49s ago] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:23:21,612.612] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:23:21,613.613] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:21] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 18:23:32,228.228] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:32] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-08 18:23:32,231.231] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:32,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:23:32,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 64.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:23:32,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:32,237.237] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.22s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:32,240.240] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 18:23:32,241.241] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '什么是LLMOps?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 18:23:32,245.245] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:32,306.306] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:32,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:32,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.71s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:32,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 18:23:32,311.311] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 18:23:32,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:23:32,314.314] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 18:23:32,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:32,566.566] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00654s] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:32,568.568] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:32] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-08 18:23:54,916.916] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:54,917.917] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:23:54,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 67.9s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:54,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,920.920] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:54,925.925] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 18:23:54,925.925] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'message_id': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-08 18:23:54,929.929] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:54,931.931] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:54,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.33s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:54,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.37s ago] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:54,935.935] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 18:23:54,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01236s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'message_id': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'LLMOps（Large Language Model Operations）是一种将大型语言模型（如GPT、BERT等）应用于生产环境的操作和管理实践。它涉及多个方面，包括：\n\n1. **模型开发与训练**：包括数据准备、模型训练、超参数调优等步骤，以确保模型的性能和准确性。\n\n2. * ... (136 characters truncated) ... 更新。\n\n5. **数据管理**：处理和管理用于训练和评估模型的数据，包括数据隐私和合规性的问题。\n\n6. **性能优化**：根据实际使用情况，对模型进行优化，以提高响应速度和降低计算成本。\n\nLLMOps的目标是确保大型语言模型能够在生产环境中高效、稳定地运行，同时提供高质量的服务。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2874 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "07cbba25-2b77-4f9a-8635-33d59e27b63e", "example": false}}]', 'answer': 'LLMOps（Large Language Model Operations）是一种将大型语言模型（如GPT、BERT等）应用于生产环境的操作和管理实践。它涉及多个方面，包括：\n\n1. **模型开发与训练**：包括数据准备、模型训练、超参数调优等步骤，以确保模型的性能和准确性。\n\n2. * ... (136 characters truncated) ... 更新。\n\n5. **数据管理**：处理和管理用于训练和评估模型的数据，包括数据隐私和合规性的问题。\n\n6. **性能优化**：根据实际使用情况，对模型进行优化，以提高响应速度和降低计算成本。\n\nLLMOps的目标是确保大型语言模型能够在生产环境中高效、稳定地运行，同时提供高质量的服务。', 'latency': 22.340238699999986}
[2025-06-08 18:23:54,947.947] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:54,948.948] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:54,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.39s ago] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:54,954.954] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 18:23:54,954.954] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2874 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "07cbba25-2b77-4f9a-8635-33d59e27b63e", "example": false}}]', 'answer': 'LLMOps（Large Language Model Operations）是一种将大型语言模型（如GPT、BERT等）应用于生产环境的操作和管理实践。它涉及多个方面，包括：\n\n1. **模型开发与训练**：包括数据准备、模型训练、超参数调优等步骤，以确保模型的性能和准确性。\n\n2. * ... (136 characters truncated) ... 更新。\n\n5. **数据管理**：处理和管理用于训练和评估模型的数据，包括数据隐私和合规性的问题。\n\n6. **性能优化**：根据实际使用情况，对模型进行优化，以提高响应速度和降低计算成本。\n\nLLMOps的目标是确保大型语言模型能够在生产环境中高效、稳定地运行，同时提供高质量的服务。', 'latency': 22.340238699999986, 'message_id': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:54,957.957] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:23:54,958.958] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:54,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.4s ago] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:23:54,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:23:54,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.36s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:23:55,233.233] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:23:55] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 18:23:55,543.543] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:23:55,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 18:23:55,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 88.26s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 18:23:55,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:23:55,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.625s ago] {'pk_1': 'f0d3dd68-f3d6-44f6-b7ae-541ac95778a1'}
[2025-06-08 18:24:02,737.737] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 18:24:02,738.738] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 18:24:02] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 18:24:03,521.521] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 18:24:03,521.521] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'summary': '人类询问AI什么是LLMOps，AI解释LLMOps（Large Language Model Operations）是一种将大型语言模型应用于生产环境的操作和管理实践，涵盖模型开发与训练、模型部署、监控与维护、版本管理、数据管理和性能优化等多个方面。LLMOps的目标是确保大型语言模型在生产环境中高效、稳定地运行，并提供高质量的服务。', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:24:03,523.523] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 18:24:03,525.525] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 18:24:03,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 18:24:03,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.93s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:24:03,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 18:24:03,528.528] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:24:03,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 18:24:03,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.97s ago] {'pk_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 18:24:08,608.608] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 18:24:08,609.609] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'name': 'LLMOps的定义和解释', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 18:24:08,610.610] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:10:30,061.061] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 21:10:30,062.062] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 21:10:30,063.063] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:10:51,472.472] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:10:51,477.477] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:13:03,711.711] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:03] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:13:03,712.712] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:03] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 21:13:04,197.197] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:13:04,197.197] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:13:04,200.200] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:13:04,200.200] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:13:04,201.201] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:13:04,201.201] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:13:04,206.206] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:04,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:04,209.209] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:04,213.213] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:04,214.214] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:04] "GET /account HTTP/1.1" 200 -
[2025-06-08 21:13:04,237.237] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:04,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:04,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02953s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:04,242.242] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:13:04,242.242] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-08 21:13:04,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:13:04,361.361] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00083s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:13:04,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:13:04,372.372] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:13:04,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:13:04,376.376] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'message_id_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-08 21:13:04,380.380] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:04,381.381] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:04] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:13:05,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:05] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:13:05,942.942] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:05,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:05,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.736s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:05,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:13:05,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:13:05,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:13:05,953.953] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:13:05,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:13:05,957.957] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:13:05,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:13:05,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005169s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:13:05,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:13:05,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0158s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:13:05,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:13:05,978.978] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 21:13:05,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:13:05,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02406s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:13:05,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:13:05,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01023s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 21:13:05,990.990] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:05,990.990] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:05] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:13:17,388.388] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:17] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 21:13:17,701.701] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:17,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:17,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:17,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:13:17,711.711] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00256s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:13:17,719.719] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:13:17,720.720] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00073s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:13:17,722.722] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:17,726.726] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:17] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 21:13:19,777.777] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:19] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-08 21:13:19,780.780] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:19,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:19,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.57s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:19,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 21:13:19,784.784] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 21:13:19,787.787] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:19,788.788] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:19] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-08 21:13:20,120.120] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:20] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 21:13:20,439.439] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:20,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:20,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.23s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:20,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 21:13:20,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6577s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 21:13:20,446.446] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:20,446.446] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:20] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-08 21:13:25,552.552] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:25] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:13:25,557.557] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:25,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:25,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.35s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:25,560.560] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:25,561.561] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:25] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:13:25,884.884] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:25] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 21:13:26,053.053] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:26] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 21:13:26,159.159] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:26,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:26,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:26,165.165] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:13:26,165.165] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:26] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:13:42,142.142] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:42] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-08 21:13:42,146.146] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:42,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:13:42,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:13:42,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 21:13:42,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.37s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 21:13:42,155.155] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO workflow_result (app_id, account_id, workflow_id, graph, state, latency, status) VALUES (%(app_id)s::UUID, %(account_id)s::UUID, %(workflow_id)s::UUID, %(graph)s::JSONB, %(state)s::JSONB, %(latency)s, %(status)s) RETURNING workflow_result.id, workflow_result.updated_at, workflow_result.created_at
[2025-06-08 21:13:42,155.155] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00068s] {'app_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9'), 'graph': '{"edges": [{"id": "a961bef9-06a5-4578-80f1-870b35b53da8", "source": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target": "3375ae65-029f-4ae2-8282-281dab ... (2104 characters truncated) ... at", "provider": "deepseek", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.85, "presence_penalty": 0, "frequency_penalty": 0}}}]}', 'state': '[]', 'latency': 0, 'status': <WorkflowResultStatus.RUNNING: 'running'>}
[2025-06-08 21:13:42,174.174] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:13:42,437.437] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:13:42] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-08 21:13:47,211.211] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:47,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow_result.id AS workflow_result_id, workflow_result.app_id AS workflow_result_app_id, workflow_result.account_id AS workflow_result_account_id, workflow_result.workflow_id AS workflow_result_workflow_id, workflow_result.graph AS workflow_result_graph, workflow_result.state AS workflow_result_state, workflow_result.latency AS workflow_result_latency, workflow_result.status AS workflow_result_status, workflow_result.updated_at AS workflow_result_updated_at, workflow_result.created_at AS workflow_result_created_at 
FROM workflow_result 
WHERE workflow_result.id = %(pk_1)s::UUID
[2025-06-08 21:13:47,213.213] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'pk_1': UUID('16a01724-1bdf-4bb5-8b8b-7f4d842b7793')}
[2025-06-08 21:13:47,217.217] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow_result SET state=%(state)s::JSONB, latency=%(latency)s, status=%(status)s WHERE workflow_result.id = %(workflow_result_id)s::UUID
[2025-06-08 21:13:47,217.217] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'state': '[{"node_data": {"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\ ... (1508 characters truncated) ... \u5230\\u4f60\\uff5e\\u6709\\u4ec0\\u4e48\\u6211\\u53ef\\u4ee5\\u5e2e\\u4f60\\u7684\\u5417\\uff1f"}, "latency": 1.1200000017197453e-05, "error": ""}]', 'latency': 5.032718199999977, 'status': <WorkflowResultStatus.SUCCEEDED: 'succeeded'>, 'workflow_result_id': UUID('16a01724-1bdf-4bb5-8b8b-7f4d842b7793')}
[2025-06-08 21:13:47,222.222] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:13:47,223.223] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:13:47,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-08 21:13:47,226.226] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-08 21:13:47,228.228] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:14:53,077.077] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:53] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 21:14:53,078.078] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:53] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 21:14:53,400.400] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:14:53,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:14:53,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:14:53,402.402] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:14:53,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:14:53,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:14:53,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:14:53,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:14:53,409.409] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:14:53,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:14:53,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 95.69s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:14:53,411.411] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:53] "GET /account HTTP/1.1" 200 -
[2025-06-08 21:14:53,412.412] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:14:53,413.413] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:53] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-08 21:14:56,670.670] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:56] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:14:56,676.676] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:14:56,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:14:56,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:14:56,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:14:56,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:14:56,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:14:56,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:14:56,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:14:56,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:14:56,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:14:56,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:14:56,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:14:56,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:14:56,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:14:56,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 21:14:56,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:14:56,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.8s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:14:56,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:14:56,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 110.7s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 21:14:56,716.716] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:14:56,717.717] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:14:56] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:15:01,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 21:15:01,077.077] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:15:01,079.079] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:15:01,080.080] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:15:01,084.084] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:15:01,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:15:01,376.376] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,381.381] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,382.382] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:15:01,384.384] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:15:01,386.386] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,389.389] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,391.391] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:15:01,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,395.395] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:15:01,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:15:01,399.399] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00187s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:01,399.399] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:15:01,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:15:01,406.406] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00435s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:15:01,406.406] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00352s] {'id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:15:01,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:15:01,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:15:01,420.420] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00237s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:15:01,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:15:01,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'conversation_id_1': UUID('2d936ee6-b15e-447b-b363-75574201a0ed'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:15:01,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:15:01,427.427] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00140s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:15:01,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'message_id_1': UUID('4c030e13-f1f9-407e-a0c2-bab90f2321d0')}
[2025-06-08 21:15:01,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:15:01,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'message_id_1': UUID('46c7a735-a571-4170-8fb6-b723adafd65c')}
[2025-06-08 21:15:01,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03623s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:15:01,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:15:01,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.1s ago] {'message_id_1': UUID('af44c51b-5d26-4ee7-9cb1-ff5400a80e52')}
[2025-06-08 21:15:01,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03614s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:15:01,455.455] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0323s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:15:01,457.457] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:15:01,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05739s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:15:01,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04277s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:15:01,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03766s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:15:01,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06311s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:15:01,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04851s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:15:01,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04255s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:15:01,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0673s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:15:01,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05266s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:15:01,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04651s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:15:01,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07137s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:15:01,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05689s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:15:01,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05184s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:15:01,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07765s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:15:01,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06454s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:15:01,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05946s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:15:01,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08503s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:15:01,488.488] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0713s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:15:01,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06611s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:15:01,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09177s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:15:01,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07775s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:15:01,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07256s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:15:01,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09826s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:15:01,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08456s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:15:01,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07928s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:15:01,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1048s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:15:01,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09073s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:15:01,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08534s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:15:01,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.111s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:15:01,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09692s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:15:01,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09138s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:15:01,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1167s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:15:01,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1025s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:15:01,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09697s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:15:01,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1223s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:15:01,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1079s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:15:01,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1019s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:15:01,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1266s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:15:01,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.112s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:15:01,530.530] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1066s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:15:01,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1331s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:15:01,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1394s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:01,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1195s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:15:01,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:15:01,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1149s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:15:01,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:15:01,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1402s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:15:01,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:15:01,549.549] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00584s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:15:01,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1327s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:15:01,551.551] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,552.552] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:15:01,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1276s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:15:01,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1523s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:15:01,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1376s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:15:01,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1335s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:15:01,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1588s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:15:01,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1443s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:15:01,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1384s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:15:01,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1636s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:15:01,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1491s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:15:01,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:15:01,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1434s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:15:01,571.571] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,572.572] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:15:01,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2056s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:01,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:15:01,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:15:01,612.612] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,613.613] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:15:01,864.864] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:15:01,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:01,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:01,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 117.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:01,898.898] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:01,900.900] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:01] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:15:02,175.175] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:02] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 21:15:04,115.115] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:04] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:15:04,435.435] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:04,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:04,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:04,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:04,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.041s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:04,440.440] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:15:04,440.440] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00075s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:04,442.442] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:15:04,443.443] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:04] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:15:04,685.685] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:04,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:04,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:04,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:04,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.293s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:04,692.692] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:15:04,693.693] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:15:04,697.697] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:15:04,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2581s ago] {'debug_conversation_id': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:04,699.699] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:15:04,702.702] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:04,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:15:04,704.704] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:15:04,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:15:04,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.3s ago] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:15:04,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:15:04,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.3s ago] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:15:04,716.716] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:15:04,717.717] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:04] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:15:10,999.999] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:15:11,003.003] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:11,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:11,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 126.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:15:11,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:15:11,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.611s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:15:11,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:15:11,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 125.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:15:11,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:15:11,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.469s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:15:11,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:15:11,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.612s ago] {'id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:15:11,017.017] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:15:11,018.018] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:15:11,025.025] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:15:11,087.087] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:15:11,087.087] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:15:11,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.384s ago] {'pk_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:15:11,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:15:11,094.094] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:15:11,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:15:11,097.097] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:15:14,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:15:14,452.452] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'pk_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:15:14,453.453] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:15:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:17:43,279.279] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/64ee9b7a-fe05-4d69-ae33-135de1234e33/stop HTTP/1.1" 200 -
[2025-06-08 21:17:43,587.587] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:43,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:43,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 279.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:43,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:43,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 162.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:43,593.593] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:43,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:43] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/64ee9b7a-fe05-4d69-ae33-135de1234e33/stop HTTP/1.1" 200 -
[2025-06-08 21:17:44,318.318] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:44,319.319] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:44,320.320] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,320.320] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280.1s ago] {'pk_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:17:44,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,324.324] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:17:44,326.326] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:17:44,327.327] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:44] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:17:44,327.327] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00125s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'message_id': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是一个AI助手，很高兴为你服务。有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4e4e4128-97c4-4a97-86d2-4e871fbd8a18", "example": false}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '你好！我是一个AI助手，很高兴为你服务。有什么可以帮你的吗？', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 4.6706170999999586}
[2025-06-08 21:17:44,339.339] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:17:44,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:44,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 149.9s ago] {'pk_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:17:44,343.343] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:17:44,343.343] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4e4e4128-97c4-4a97-86d2-4e871fbd8a18", "example": false}}]', 'answer': '你好！我是一个AI助手，很高兴为你服务。有什么可以帮你的吗？', 'latency': 4.6706170999999586, 'message_id': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:17:44,344.344] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:17:44,345.345] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:44,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 159.6s ago] {'pk_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:17:44,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:17:44,349.349] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:17:44,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 149.9s ago] {'pk_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:17:44,646.646] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:44,646.646] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:44,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:17:44,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3246s ago] {'pk_1': 'dc420f22-59b9-4054-9a91-ec0e07fd9138'}
[2025-06-08 21:17:47,107.107] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 21:17:47,110.110] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:17:47,112.112] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:17:47,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:17:47,116.116] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:17:47,117.117] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:17:47,122.122] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 282.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,132.132] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,133.133] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:17:47,420.420] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 844, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 453, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
[2025-06-08 21:17:47,434.434] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "[35m[1mOPTIONS /apps/undefined/conversations/delete-debug-conversation HTTP/1.1[0m" 500 -
[2025-06-08 21:17:47,436.436] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:17:47,437.437] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,440.440] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:17:47,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:17:47,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:47,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:17:47,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:17:47,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:17:47,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:17:47,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:17:47,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:17:47,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.1s ago] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:17:47,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:17:47,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.1s ago] {'conversation_id_1': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:17:47,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:17:47,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:17:47,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.1s ago] {'message_id_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:17:47,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:17:47,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,467.467] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:17:47,468.468] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:17:47,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:17:47,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:17:47,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:17:47,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:17:47,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:17:47,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:17:47,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:17:47,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:17:47,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:17:47,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:17:47,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:17:47,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:17:47,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:17:47,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:17:47,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:17:47,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:17:47,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:17:47,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:17:47,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:17:47,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:17:47,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:17:47,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:17:47,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:17:47,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:17:47,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:17:47,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:17:47,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:17:47,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:17:47,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:17:47,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:17:47,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:17:47,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:17:47,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:17:47,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:17:47,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:17:47,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:17:47,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:17:47,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:17:47,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:17:47,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:17:47,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:17:47,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:17:47,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:17:47,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:17:47,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:17:47,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:17:47,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:17:47,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:17:47,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:17:47,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:17:47,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.2s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:17:47,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:17:47,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:17:47,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.2s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:17:47,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:17:47,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:17:47,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:17:47,561.561] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,562.562] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:17:47,564.564] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:47,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:17:47,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:17:47,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:17:47,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:17:47,578.578] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,578.578] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:17:47,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:17:47,752.752] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 166.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:47,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:17:47,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:17:47,760.760] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:17:47,934.934] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:47,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:47,937.937] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 21:17:47,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 283.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:47,938.938] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:47,939.939] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:17:47,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:47] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 21:17:48,819.819] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:17:49,133.133] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:49,133.133] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:49,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 284.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:49,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:49,134.134] base.py -> _exec_single_context line:1901 [INFO]: [cached since 167.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:49,135.135] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:17:49,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 164.7s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:49,136.136] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:17:49,137.137] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:49] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:17:49,396.396] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:49,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:17:49,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 285.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:17:49,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:17:49,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:49,399.399] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:17:49,399.399] base.py -> _exec_single_context line:1901 [INFO]: [cached since 164.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:17:49,404.404] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:17:49,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 165s ago] {'debug_conversation_id': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:17:49,406.406] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:17:49,409.409] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:17:49,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:17:49,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 164.7s ago] {'pk_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:17:49,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:17:49,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 285.1s ago] {'conversation_id_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:17:49,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:17:49,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 285s ago] {'conversation_id_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:17:49,416.416] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:49,417.417] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:17:57,625.625] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:17:57,626.626] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:17:57] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:18:02,975.975] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:18:02,975.975] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'name': '用户问候我', 'conversation_id': UUID('d4e44246-afcf-4e0c-8f6b-a652ecf37701')}
[2025-06-08 21:18:02,977.977] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:18:02,978.978] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:18:02,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:18:02,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 168.5s ago] {'pk_1': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:18:02,980.980] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:18:02,980.980] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'status': <QueueEvent.STOP: 'stop'>, 'message_id': UUID('dc420f22-59b9-4054-9a91-ec0e07fd9138')}
[2025-06-08 21:18:02,982.982] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:18:11,297.297] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:18:11] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:18:11,303.303] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:18:11,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:18:11,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 307.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:18:11,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:18:11,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 189.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:18:11,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:18:11,309.309] base.py -> _exec_single_context line:1901 [INFO]: [cached since 305.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:18:11,312.312] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 21:18:11,312.312] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'opening_questions': '["\\u4f60\\u77e5\\u9053\\u4ec0\\u4e48\\u662fAI\\u5417?", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'updated_at': datetime.datetime(2025, 6, 8, 21, 18, 11, 310375), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 21:18:11,314.314] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:18:11,316.316] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:18:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:18:15,106.106] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:18:15] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:18:15,355.355] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:18:15,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 311.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:18:15,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:18:15,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:18:15,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 309.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:18:15,361.361] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-08 21:18:15,361.361] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'updated_at': datetime.datetime(2025, 6, 8, 21, 18, 15, 361854), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-08 21:18:15,362.362] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:18:15,364.364] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:18:15] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:18:15,417.417] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:18:15,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 311.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:18:15,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:18:15,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:18:15,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 309.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:18:15,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:18:15,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:18:15,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:18:15,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194s ago] {'id_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:18:15,426.426] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:18:15,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 184.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你知道什么是AI吗?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:18:15,432.432] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:18:15,474.474] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:18:15,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 190.8s ago] {'pk_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:18:15,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:18:15,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 184.4s ago] {'conversation_id_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:18:15,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:18:15,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 184.4s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:18:18,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:18:18,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 184.5s ago] {'pk_1': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:18:18,938.938] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:18:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:20:03,805.805] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/233b9c7a-d478-45e0-92da-8655f4d86e9a/stop HTTP/1.1" 200 -
[2025-06-08 21:20:04,117.117] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:04,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 419.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:20:04,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 302.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:04,122.122] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:20:04,123.123] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:04] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/233b9c7a-d478-45e0-92da-8655f4d86e9a/stop HTTP/1.1" 200 -
[2025-06-08 21:20:04,666.666] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:04,666.666] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:20:04,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.4s ago] {'pk_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:20:04,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.3s ago] {'pk_1': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:04,671.671] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:20:04,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb'), 'message_id': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '是的，AI（Artificial Intelligence，人工智能）是指通过计算机系统模拟人类智能的技术和科学。它涵盖了多个领域，包括机器学习、深度学习、自然语言处理、计算机视觉、机器人技术等。\n\nAI的主要目标是让机器能够执行通常需要人类智能的任务，例如：\n\n1. **学习**：从数据 ... (199 characters truncated) ... **：专注于特定任务，如语音助手（Siri、Alexa）或推荐系统（Netflix、Amazon）。\n- **强人工智能（General AI）**：具备与人类相似的广泛智能，能够处理任何任务（目前尚未实现）。\n\n如果你对某个具体的AI领域或应用感兴趣，可以告诉我，我会为你提供更详细的信息！', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2942 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "64520325-16b6-4f34-b044-6581ab8a9df3", "example": false}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '是的，AI（Artificial Intelligence，人工智能）是指通过计算机系统模拟人类智能的技术和科学。它涵盖了多个领域，包括机器学习、深度学习、自然语言处理、计算机视觉、机器人技术等。\n\nAI的主要目标是让机器能够执行通常需要人类智能的任务，例如：\n\n1. **学习**：从数据 ... (199 characters truncated) ... **：专注于特定任务，如语音助手（Siri、Alexa）或推荐系统（Netflix、Amazon）。\n- **强人工智能（General AI）**：具备与人类相似的广泛智能，能够处理任何任务（目前尚未实现）。\n\n如果你对某个具体的AI领域或应用感兴趣，可以告诉我，我会为你提供更详细的信息！', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 15.114917399999968}
[2025-06-08 21:20:04,676.676] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:04] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:20:04,678.678] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:04,679.679] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:04,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 290.2s ago] {'pk_1': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:04,682.682] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:20:04,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2942 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "64520325-16b6-4f34-b044-6581ab8a9df3", "example": false}}]', 'answer': '是的，AI（Artificial Intelligence，人工智能）是指通过计算机系统模拟人类智能的技术和科学。它涵盖了多个领域，包括机器学习、深度学习、自然语言处理、计算机视觉、机器人技术等。\n\nAI的主要目标是让机器能够执行通常需要人类智能的任务，例如：\n\n1. **学习**：从数据 ... (199 characters truncated) ... **：专注于特定任务，如语音助手（Siri、Alexa）或推荐系统（Netflix、Amazon）。\n- **强人工智能（General AI）**：具备与人类相似的广泛智能，能够处理任何任务（目前尚未实现）。\n\n如果你对某个具体的AI领域或应用感兴趣，可以告诉我，我会为你提供更详细的信息！', 'latency': 15.114917399999968, 'message_id': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:04,684.684] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:04,686.686] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:04,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 300s ago] {'pk_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:20:04,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:20:04,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.3s ago] {'conversation_id_1': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:20:04,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 290.2s ago] {'pk_1': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:04,991.991] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:04,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:20:04,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:04,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.7s ago] {'pk_1': '84d2eadf-25a3-493b-9967-df0d5d30fc8f'}
[2025-06-08 21:20:13,007.007] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:13] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:20:13,010.010] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:13,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:13,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 428.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:20:13,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:20:13,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 311.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:13,014.014] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:20:13,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 308.6s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:13,015.015] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:13,017.017] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:20:13,252.252] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:13] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:20:13,316.316] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:20:13,317.317] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:13] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:20:13,565.565] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:13,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:13,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:20:13,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:20:13,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:13,568.568] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:20:13,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 308.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:20:13,574.574] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:20:13,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 309.1s ago] {'debug_conversation_id': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:13,575.575] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:13,577.577] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:13,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:20:13,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 308.9s ago] {'pk_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:20:13,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:20:13,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.2s ago] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:20:13,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:20:13,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 429.2s ago] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:20:13,581.581] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:20:13,582.582] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:13] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:20:16,347.347] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:20:16,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.4s ago] {'name': '询问AI的定义和概念', 'conversation_id': UUID('59495ba4-5d91-4b58-ad43-1439ad17a8cb')}
[2025-06-08 21:20:16,350.350] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:16,350.350] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:16,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:16,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 301.9s ago] {'pk_1': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:16,351.351] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:20:16,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.4s ago] {'status': <QueueEvent.STOP: 'stop'>, 'message_id': UUID('84d2eadf-25a3-493b-9967-df0d5d30fc8f')}
[2025-06-08 21:20:16,353.353] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:24,345.345] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\conversation_service.py', reloading
[2025-06-08 21:20:24,775.775] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:20:46,064.064] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:20:46,067.067] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:20:46,183.183] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:20:46,582.582] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:20:46,582.582] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:20:46,583.583] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:20:46,583.583] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:20:46,584.584] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:20:46,584.584] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:20:46,585.585] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:46,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:46,586.586] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:20:46,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:20:46,591.591] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:20:46,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:20:46,681.681] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:20:46,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:20:46,685.685] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:20:46,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:20:46,688.688] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:20:46,690.690] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:20:46,691.691] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:20:46,696.696] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:20:46,737.737] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:20:46,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:20:46,738.738] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:20:46,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:20:46,741.741] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:20:46,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:20:46,744.744] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:20:50,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:20:50,543.543] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('0686e0ae-8790-45a1-81e9-329209583617')}
[2025-06-08 21:20:50,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:20:50] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:26:55,288.288] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-08 21:26:55,749.749] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:27:17,025.025] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:27:17,027.027] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:27:41,675.675] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-08 21:27:42,011.011] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:28:03,389.389] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:28:03,391.391] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:28:25,699.699] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-08 21:28:26,096.096] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:28:47,341.341] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:28:47,344.344] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:29:26,336.336] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\react_agent.py', reloading
[2025-06-08 21:29:26,718.718] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:29:48,283.283] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:29:48,286.286] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:30:57,074.074] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 21:30:57,074.074] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 21:30:57,075.075] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:31:18,113.113] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:31:18,116.116] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:31:18,226.226] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/e9bc7bf8-01c6-4e75-bd95-51343c20b70e/stop HTTP/1.1" 200 -
[2025-06-08 21:31:18,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 21:31:18,228.228] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:31:18,230.230] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:31:18,232.232] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:31:18,235.235] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:31:18,531.531] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:31:18,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:31:18,679.679] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:31:18,679.679] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:31:18,680.680] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:31:18,680.680] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:31:18,680.680] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:31:18,681.681] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:31:18,681.681] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:18,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,683.683] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:18,689.689] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:18,689.689] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:31:18,746.746] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:18,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06468s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:18,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:31:18,752.752] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:31:18,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:31:18,757.757] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:31:18,759.759] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,759.759] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:31:18,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,762.762] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:31:18,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,765.765] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:31:18,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007438s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:31:18,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0054s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:31:18,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003654s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:31:18,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01059s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:31:18,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008326s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:31:18,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006602s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:31:18,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01375s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:31:18,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01151s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:31:18,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009387s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:31:18,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0163s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:31:18,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01399s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:31:18,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01171s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:31:18,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01857s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:31:18,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01631s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:31:18,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01421s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:31:18,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0213s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:31:18,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0193s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:31:18,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01778s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:31:18,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02504s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:31:18,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02301s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:31:18,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02115s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:31:18,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02828s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:31:18,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02646s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:31:18,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02494s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:31:18,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03255s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:31:18,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03102s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:31:18,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02985s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:31:18,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03715s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:31:18,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,798.798] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:18,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03689s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:31:18,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1173s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:18,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03647s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:31:18,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,804.804] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00102s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:31:18,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04581s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:31:18,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:31:18,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0464s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:31:18,808.808] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:31:18,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04547s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:31:18,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,812.812] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:18,813.813] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:18,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05455s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:31:18,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,814.814] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:31:18,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1324s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:18,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05482s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:31:18,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:31:18,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05557s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:31:18,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01761s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:31:18,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06391s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:31:18,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:31:18,826.826] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00093s] {'id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:31:18,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06464s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:31:18,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06352s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:31:18,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:31:18,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,833.833] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00136s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:31:18,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07484s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:31:18,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07442s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:31:18,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:31:18,839.839] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00072s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:31:18,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07576s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:31:18,842.842] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:18,843.843] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08475s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:31:18,844.844] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:31:18,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,846.846] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08378s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:31:18,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08258s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:31:18,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09149s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:31:18,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09046s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:31:18,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08897s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:31:18,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09636s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:31:18,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09446s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:31:18,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0935s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:31:18,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.102s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:31:18,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1005s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:31:18,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1008s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:31:18,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1092s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:31:18,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1077s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:31:18,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:31:18,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1064s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:31:18,874.874] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:18,875.875] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:18] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:31:19,000.000] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:19,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:19,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3188s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:19,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:31:19,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2021s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:31:19,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:31:19,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2001s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:31:19,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:31:19,011.011] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:31:19,014.014] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:19,015.015] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:19] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:31:19,333.333] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:19] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:31:19,347.347] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:19,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:19,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6664s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:19,350.350] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:19,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:19] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:31:19,507.507] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:19] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 21:31:19,615.615] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:19] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 21:31:25,719.719] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:31:25,722.722] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:25,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:25,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.042s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:25,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:31:25,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.924s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:31:25,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:31:25,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.921s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:31:25,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:31:25,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.721s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:31:25,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:31:25,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.909s ago] {'id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:31:25,737.737] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:31:25,737.737] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:31:25,745.745] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:31:25,796.796] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:25,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:31:25,798.798] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:31:25,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:31:25,893.893] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:31:25,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:25,896.896] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:31:29,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:31:29,742.742] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'pk_1': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:31:29,743.743] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:31:31,275.275] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:31,275.275] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:31,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,277.277] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:31:31,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,280.280] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:31:31,285.285] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:31:31,286.286] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'message_id': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a1af09fc-f6d1-4464-bf63-f0ecc3f226c1", "example": false}}]', 'message_token_count': 667, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 124, 'answer_unit_price': 0.003, 'answer_price_unit': 0, 'total_token_count': 667, 'total_price': 0.0011865, 'latency': 5.178014200000003}
[2025-06-08 21:31:31,293.293] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:31:31,295.295] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:31,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.555s ago] {'pk_1': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:31:31,300.300] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:31:31,300.300] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a1af09fc-f6d1-4464-bf63-f0ecc3f226c1", "example": false}}]', 'message_token_count': 667, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 124, 'answer_unit_price': 0.003, 'latency': 5.178014200000003, 'total_token_count': 667, 'total_price': 0.0011865, 'message_id': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:31:31,301.301] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:31:31,302.302] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:31,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.507s ago] {'pk_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:31:31,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:31:31,305.305] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8')}
[2025-06-08 21:31:31,306.306] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:31,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:31] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:31:31,907.907] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:31:31,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.22s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:31:31,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:31:31,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.628s ago] {'pk_1': '5d4f2c45-3147-4132-b3ee-98b5fc5fc243'}
[2025-06-08 21:31:40,289.289] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:31:40,290.290] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:31:40] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:34:21,553.553] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-08 21:34:21,949.949] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:34:43,431.431] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:34:43,433.433] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:35:49,031.031] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\react_agent.py', reloading
[2025-06-08 21:35:49,453.453] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:36:10,857.857] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:36:10,860.860] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:36:10,986.986] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:36:10,987.987] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-08 21:36:10,988.988] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:36:10,989.989] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:36:10,990.990] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:36:10,992.992] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:10] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:36:11,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:36:11,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:36:11,309.309] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-08 21:36:11,314.314] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:36:11,418.418] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:36:11,419.419] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:36:11,420.420] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:36:11,420.420] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:36:11,420.420] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:36:11,421.421] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:36:11,421.421] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,423.423] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,429.429] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,430.430] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:36:11,488.488] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,488.488] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06532s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:11,493.493] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:36:11,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:36:11,497.497] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:36:11,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,499.499] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:11,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,501.501] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:11,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,503.503] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:11,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00682s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:11,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005585s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:11,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003764s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:11,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01021s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:11,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008511s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:11,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006425s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:11,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01264s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:11,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01082s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:11,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008691s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:11,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01501s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:11,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0136s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:11,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01182s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:11,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01837s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:11,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01698s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:11,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01524s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:11,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02204s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:11,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02048s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:11,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01851s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:11,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02489s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:11,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0233s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:11,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02157s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:11,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02833s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:11,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02702s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:11,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02597s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:11,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03387s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:11,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03273s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:11,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03109s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:11,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03801s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:11,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03722s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:11,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03576s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:11,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04262s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:11,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0415s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:11,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0399s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:11,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04661s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:11,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04519s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:11,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04361s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:11,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0503s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:11,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04895s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:11,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04719s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:11,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05396s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:11,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05278s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:11,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05169s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:11,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05854s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:11,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05746s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:11,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,559.559] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05637s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:11,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,562.562] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1405s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06627s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:11,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1418s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06823s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:11,569.569] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00135s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:11,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.001722s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:11,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0677s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:11,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:36:11,575.575] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00194s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,576.576] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00154s] {'id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:36:11,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0791s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:11,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,579.579] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:11,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08219s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:11,583.583] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00099s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:11,584.584] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:36:11,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08234s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:11,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08917s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:11,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:36:11,590.590] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00114s] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:11,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09051s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:11,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:36:11,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,597.597] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00138s] {'message_id_1': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:36:11,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09299s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:11,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1004s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:11,600.600] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:36:11,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1012s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:11,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:11,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:11,606.606] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,607.607] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:36:11,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2021s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:11,629.629] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:36:11,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:36:11,631.631] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:36:11,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,633.633] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05959s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06153s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,637.637] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06396s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,641.641] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2184s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,641.641] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00083s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-08 21:36:11,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07682s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:11,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07246s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:11,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.075s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:11,649.649] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008162s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-08 21:36:11,651.651] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:36:11,652.652] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:36:11,652.652] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00104s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:36:11,656.656] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,656.656] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:36:11,749.749] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:11,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:11,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3272s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:11,753.753] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:11,753.753] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:11] "GET /account HTTP/1.1" 200 -
[2025-06-08 21:36:13,893.893] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:13,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:13,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:13,895.895] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:13] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-08 21:36:13,896.896] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:13,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.477s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:13,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.477s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:13,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.478s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:13,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.48s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:13,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:13,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:13,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.336s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:13,908.908] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:13,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.416s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-08 21:36:13,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.341s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:13,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:36:13,910.910] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:13] "GET /language-models HTTP/1.1" 200 -
[2025-06-08 21:36:13,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.336s ago] {'id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:36:13,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-08 21:36:13,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:13,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.417s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:36:13,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.34s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:13,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:13,917.917] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:13,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.419s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:13,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.335s ago] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:13,918.918] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:13] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-08 21:36:13,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.42s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:13,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:36:13,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.336s ago] {'conversation_id_1': UUID('f9bcfb02-e3e5-4871-bca2-6f04a05f0bc8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:13,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.422s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-08 21:36:13,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-08 21:36:13,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.43s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:13,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.333s ago] {'message_id_1': UUID('5d4f2c45-3147-4132-b3ee-98b5fc5fc243')}
[2025-06-08 21:36:13,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.429s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:13,931.931] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:13,933.933] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:13] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:36:13,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.43s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-08 21:36:13,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.439s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:13,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.438s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:13,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.438s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-08 21:36:13,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.445s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:13,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.444s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:13,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.443s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-08 21:36:13,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.451s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:13,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.451s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:13,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,954.954] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.45s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-08 21:36:13,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.458s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:13,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,958.958] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.457s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:13,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.456s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-08 21:36:13,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.464s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:13,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,964.964] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.464s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:13,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.463s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-08 21:36:13,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.47s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:13,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.469s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:13,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.468s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-08 21:36:13,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.476s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:13,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.476s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:13,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.476s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-08 21:36:13,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.484s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:13,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.483s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:13,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.482s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-08 21:36:13,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.49s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:13,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.489s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:13,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.488s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-08 21:36:13,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.496s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:13,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.496s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:13,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.495s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-08 21:36:13,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:13,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.502s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:14,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.501s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:14,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.501s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-08 21:36:14,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.508s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:14,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.507s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:14,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.506s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-08 21:36:14,009.009] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.513s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:14,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.511s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:14,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.51s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-08 21:36:14,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.517s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:14,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.516s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:14,017.017] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.515s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-08 21:36:14,019.019] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.521s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:14,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.52s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:14,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.519s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-08 21:36:14,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.525s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:14,024.024] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.524s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:14,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,025.025] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:14,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.522s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-08 21:36:14,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:14,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.604s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:14,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.529s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:14,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.528s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:14,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:14,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.462s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:14,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.526s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-08 21:36:14,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,031.031] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:14,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.533s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:14,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.458s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:14,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.532s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:14,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-08 21:36:14,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:36:14,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.531s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-08 21:36:14,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.383s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:36:14,037.037] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:14,037.037] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-08 21:36:14,039.039] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:14,039.039] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-08 21:36:14,373.373] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:36:14,742.742] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:14,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:14,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.321s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:14,746.746] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:14,746.746] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-08 21:36:14,777.777] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-08 21:36:14,778.778] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:14] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-08 21:36:16,590.590] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:36:16,594.594] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:16,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:16,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.171s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:16,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:16,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.028s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:16,599.599] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:36:16,599.599] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:16,600.600] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:16,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:16] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:36:16,928.928] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:36:17,239.239] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:17,240.240] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:17,240.240] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.816s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:17,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:17,241.241] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.673s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:17,243.243] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:36:17,243.243] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:36:17,248.248] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:36:17,248.248] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6494s ago] {'debug_conversation_id': UUID('099a7141-0192-4bba-8945-c70097738175'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:17,249.249] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:17,251.251] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:17,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:36:17,252.252] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:17,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:36:17,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.671s ago] {'conversation_id_1': UUID('099a7141-0192-4bba-8945-c70097738175'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:17,254.254] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:36:17,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.666s ago] {'conversation_id_1': UUID('099a7141-0192-4bba-8945-c70097738175'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:17,255.255] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:17,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:36:24,669.669] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:24] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:36:24,673.673] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:24,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:24,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.25s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:24,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:36:24,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.11s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:36:24,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:36:24,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.11s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:36:24,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:36:24,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.03s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:36:24,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:36:24,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.11s ago] {'id_1': UUID('099a7141-0192-4bba-8945-c70097738175'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:36:24,689.689] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:36:24,690.690] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('099a7141-0192-4bba-8945-c70097738175'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '我是好儿', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:36:24,699.699] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:24,756.756] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:24,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:36:24,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.505s ago] {'pk_1': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:24,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:36:24,761.761] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'conversation_id_1': UUID('099a7141-0192-4bba-8945-c70097738175'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:36:24,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:24,763.763] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:36:28,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:36:28,277.277] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'pk_1': UUID('a375b557-7668-457f-a46b-265720105580')}
[2025-06-08 21:36:28,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:28] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:36:29,577.577] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:29,577.577] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:29,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:36:29,578.578] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:29,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:36:29,583.583] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00115s] {'pk_1': UUID('a375b557-7668-457f-a46b-265720105580')}
[2025-06-08 21:36:29,586.586] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:36:29,586.586] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('099a7141-0192-4bba-8945-c70097738175'), 'message_id': UUID('a375b557-7668-457f-a46b-265720105580'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！我是你的AI助手，有什么可以帮你的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9f876792-53b1-4e60-81e4-03bc1fc7519b", "example": false}}]', 'message_token_count': 549, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'answer_token_count': 136, 'answer_unit_price': 0.003, 'answer_price_unit': 0, 'total_token_count': 685, 'total_price': 0.0012315000000000002, 'latency': 4.599336899999997}
[2025-06-08 21:36:29,592.592] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:29,593.593] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:29,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:36:29,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.318s ago] {'pk_1': UUID('a375b557-7668-457f-a46b-265720105580')}
[2025-06-08 21:36:29,596.596] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:36:29,597.597] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2918 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9f876792-53b1-4e60-81e4-03bc1fc7519b", "example": false}}]', 'message_token_count': 549, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！我是你的AI助手，有什么可以帮你的吗？', 'answer_token_count': 136, 'answer_unit_price': 0.003, 'latency': 4.599336899999997, 'total_token_count': 685, 'total_price': 0.0012315000000000002, 'message_id': UUID('a375b557-7668-457f-a46b-265720105580')}
[2025-06-08 21:36:29,598.598] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:29,599.599] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:29,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:36:29,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.35s ago] {'pk_1': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:29,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:36:29,601.601] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'conversation_id_1': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:29,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:36:29,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.327s ago] {'pk_1': UUID('a375b557-7668-457f-a46b-265720105580')}
[2025-06-08 21:36:29,894.894] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:29] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:36:30,205.205] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:36:30,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:36:30,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.78s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:36:30,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:36:30,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.625s ago] {'pk_1': 'a375b557-7668-457f-a46b-265720105580'}
[2025-06-08 21:36:37,415.415] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:36:37,415.415] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'name': '用户自我介绍', 'conversation_id': UUID('099a7141-0192-4bba-8945-c70097738175')}
[2025-06-08 21:36:37,416.416] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:36:37,924.924] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:36:37,925.925] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:36:37] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:40:10,108.108] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 21:40:10,108.108] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 21:40:10,109.109] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:40:31,249.249] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:40:31,252.252] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:40:32,890.890] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:40:33,333.333] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:40:33,334.334] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:40:33,335.335] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:40:33,335.335] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:40:33,335.335] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:40:33,336.336] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:40:33,336.336] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:33,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:40:33,338.338] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:40:33,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:40:33,341.341] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:40:33,343.343] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:40:33,344.344] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:40:33,345.345] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:40:33,346.346] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:33] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:40:33,356.356] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:40:33,464.464] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:33,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:40:33,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1278s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:40:33,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:40:33,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1263s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:40:33,469.469] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:40:33,470.470] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:40:33,475.475] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:40:33,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1324s ago] {'debug_conversation_id': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:40:33,476.476] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:40:33,478.478] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:33,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:40:33,480.480] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:33,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:40:33,485.485] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'conversation_id_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:40:33,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:40:33,490.490] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'conversation_id_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:40:33,492.492] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:40:33,492.492] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:33] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:40:38,877.877] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:40:38,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:38,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:40:38,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.545s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:40:38,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:40:38,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.545s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:40:38,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:40:38,888.888] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:40:38,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:40:38,892.892] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:40:38,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:40:38,894.894] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'id_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:40:38,896.896] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:40:38,896.896] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:40:38,898.898] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:40:38,940.940] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:38,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:40:38,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.462s ago] {'pk_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:38,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:40:38,945.945] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'conversation_id_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:40:38,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:40:38,947.947] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:40:42,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:40:42,602.602] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799')}
[2025-06-08 21:40:42,603.603] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:42] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:40:44,001.001] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:40:44,012.012] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:44] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:40:44,125.125] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:44,126.126] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,127.127] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:44,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,130.130] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799')}
[2025-06-08 21:40:44,134.134] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:40:44,134.134] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('3c5535db-2f55-45ba-a170-971f8525f564'), 'message_id': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4750d0c4-51d3-4153-875a-8ee352184add", "example": false}}]', 'message_token_count': 546, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 126, 'answer_unit_price': 0.003, 'answer_price_unit': 0, 'total_token_count': 672, 'total_price': 0.0011970000000000001, 'latency': 4.733700100000004}
[2025-06-08 21:40:44,139.139] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:40:44,140.140] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:44,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.54s ago] {'pk_1': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799')}
[2025-06-08 21:40:44,143.143] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:40:44,144.144] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4750d0c4-51d3-4153-875a-8ee352184add", "example": false}}]', 'message_token_count': 546, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 126, 'answer_unit_price': 0.003, 'latency': 4.733700100000004, 'total_token_count': 672, 'total_price': 0.0011970000000000001, 'message_id': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799')}
[2025-06-08 21:40:44,144.144] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:40:44,145.145] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:44,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.67s ago] {'pk_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:44,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:40:44,147.147] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'conversation_id_1': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:44,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.546s ago] {'pk_1': UUID('33d5f204-cd3b-4077-bb99-c23d73bc8799')}
[2025-06-08 21:40:44,323.323] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:40:44,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.99s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:40:44,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:40:44,325.325] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.195s ago] {'pk_1': '33d5f204-cd3b-4077-bb99-c23d73bc8799'}
[2025-06-08 21:40:52,052.052] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:40:52,054.054] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:40:52] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:40:52,211.211] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:40:52,212.212] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'name': '用户问候我', 'conversation_id': UUID('3c5535db-2f55-45ba-a170-971f8525f564')}
[2025-06-08 21:40:52,213.213] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:04,849.849] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-08 21:43:04,850.850] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-08 21:43:04,851.851] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-08 21:43:25,455.455] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-08 21:43:25,457.457] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-08 21:43:25,579.579] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:43:26,006.006] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-08 21:43:26,006.006] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:43:26,007.007] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-08 21:43:26,007.007] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:43:26,008.008] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-08 21:43:26,008.008] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-08 21:43:26,009.009] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:26,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:43:26,011.011] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:43:26,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:43:26,015.015] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:43:26,018.018] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:43:26,019.019] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:43:26,020.020] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:26,021.021] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:43:26,031.031] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:26] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:43:26,152.152] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:26,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:43:26,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1418s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:43:26,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:43:26,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1405s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:43:26,157.157] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:43:26,157.157] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:43:26,164.164] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:43:26,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1458s ago] {'debug_conversation_id': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:43:26,165.165] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:26,167.167] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:26,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:43:26,168.168] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:26,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:43:26,172.172] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:43:26,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:43:26,177.177] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'conversation_id_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:43:26,179.179] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:43:26,180.180] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:26] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:43:36,753.753] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:36] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:43:36,756.756] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:36,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:43:36,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.75s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:43:36,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:43:36,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.75s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:43:36,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:43:36,764.764] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:43:36,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:43:36,767.767] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:43:36,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:43:36,770.770] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'id_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:43:36,771.771] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:43:36,772.772] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '你好', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:43:36,774.774] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:36,819.819] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:36,820.820] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:43:36,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.65s ago] {'pk_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:36,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:43:36,822.822] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'conversation_id_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:43:36,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:43:36,825.825] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:43:41,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:43:41,123.123] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f')}
[2025-06-08 21:43:41,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:41] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:43:42,277.277] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:43:42,291.291] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:42] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:43:42,391.391] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:42,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:42,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,396.396] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'pk_1': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f')}
[2025-06-08 21:43:42,400.400] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:43:42,401.401] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa'), 'message_id': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '你好！有什么可以帮您的吗？', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "aca7e3e9-7a2a-4040-9cac-90fa14139c68", "example": false}}]', 'message_token_count': 545, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 126, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 671, 'total_price': 0.0011955, 'latency': 5.099933399999998}
[2025-06-08 21:43:42,406.406] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:42,408.408] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:42,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.286s ago] {'pk_1': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f')}
[2025-06-08 21:43:42,410.410] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:43:42,410.410] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "aca7e3e9-7a2a-4040-9cac-90fa14139c68", "example": false}}]', 'message_token_count': 545, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '你好！有什么可以帮您的吗？', 'answer_token_count': 126, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'latency': 5.099933399999998, 'total_token_count': 671, 'total_price': 0.0011955, 'message_id': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f')}
[2025-06-08 21:43:42,411.411] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:42,412.412] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:42,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.24s ago] {'pk_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:42,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:43:42,414.414] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'conversation_id_1': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:42,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.292s ago] {'pk_1': UUID('7c06aa22-69db-4b93-ac7c-ce94e00d6b9f')}
[2025-06-08 21:43:42,597.597] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:43:42,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.59s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:43:42,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:43:42,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2036s ago] {'pk_1': '7c06aa22-69db-4b93-ac7c-ce94e00d6b9f'}
[2025-06-08 21:43:49,917.917] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:43:49,918.918] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'name': '用户问候我', 'conversation_id': UUID('0f48a6c6-1b7b-4dc0-bb78-036f8c2a5caa')}
[2025-06-08 21:43:49,919.919] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:43:53,255.255] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:43:53,255.255] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:43:53] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:47:03,399.399] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:47:03,711.711] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:03,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:47:03,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:47:03,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:47:03,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:47:03,715.715] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:47:03,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.7s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:47:03,716.716] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:03,717.717] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:03] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-08 21:47:03,723.723] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:47:03,978.978] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:03,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:47:03,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:47:03,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:47:03,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:47:03,981.981] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-08 21:47:03,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:47:03,983.983] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-08 21:47:03,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 218s ago] {'debug_conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:47:03,984.984] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:03,986.986] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:03,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:03,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.8s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:03,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-08 21:47:03,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.8s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:47:03,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-08 21:47:03,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 217.8s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:47:03,994.994] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:47:03,994.994] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:03] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-08 21:47:15,804.804] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:15] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:47:15,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:15,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:47:15,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 229.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:47:15,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-08 21:47:15,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 229.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-08 21:47:15,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-08 21:47:15,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-08 21:47:15,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-08 21:47:15,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-08 21:47:15,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-08 21:47:15,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219.1s ago] {'id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-08 21:47:15,843.843] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-08 21:47:15,843.843] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '帮我检索下今天淄博天气', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-08 21:47:15,845.845] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:15,913.913] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:15,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:15,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 229.7s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:15,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-08 21:47:15,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219.1s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-08 21:47:15,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:47:15,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 219.1s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-08 21:47:23,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:23,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 222.2s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:23,286.286] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:23] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-08 21:47:29,982.982] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:47:29,982.982] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:29,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:29,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:29,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:29,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:29,987.987] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:47:29,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'message_id': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4eca\\u5929\\u6dc4\\u535a\\u5929\\u6c14"}, "id": "call_0_999f4cca-f827-49db-b027-645cb0299e45", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2967 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a4413d85-4663-4554-807a-ec67d5fd2bdb", "example": false}}]', 'message_token_count': 556, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 319, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 875, 'total_price': 0.001791, 'latency': 7.3361394000000075}
[2025-06-08 21:47:29,993.993] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:29] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:47:29,993.993] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:29,994.994] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:29,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:29,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 243.8s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:29,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 228.9s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:30,004.004] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:47:30,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'message_id': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"83\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4eca\\u5929\\u6dc4\\u535a\\u5929\\u6c14"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 1.229374699999994}
[2025-06-08 21:47:30,006.006] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:30,006.006] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:30,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 243.8s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:30,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 228.9s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:30,019.019] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-08 21:47:30,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'message_id': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '今天淄博的天气是83°F（约28°C），天气较为温暖。如果需要更详细的天气信息（如湿度、风速等），可以告诉我，我会进一步为您查询。', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4148 characters truncated) ... "id": "11770c0a-9fb3-468b-9a43-9981658c41c7", "tool_call_id": "call_0_999f4cca-f827-49db-b027-645cb0299e45", "artifact": null, "status": "success"}}]', 'message_token_count': 879, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '今天淄博的天气是83°F（约28°C），天气较为温暖。如果需要更详细的天气信息（如湿度、风速等），可以告诉我，我会进一步为您查询。', 'answer_token_count': 179, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1058, 'total_price': 0.0018555000000000002, 'latency': 5.463637800000015}
[2025-06-08 21:47:30,023.023] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:30,024.024] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:30,024.024] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 228.9s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:30,026.026] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-08 21:47:30,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4148 characters truncated) ... "id": "11770c0a-9fb3-468b-9a43-9981658c41c7", "tool_call_id": "call_0_999f4cca-f827-49db-b027-645cb0299e45", "artifact": null, "status": "success"}}]', 'message_token_count': 879, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '今天淄博的天气是83°F（约28°C），天气较为温暖。如果需要更详细的天气信息（如湿度、风速等），可以告诉我，我会进一步为您查询。', 'answer_token_count': 179, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'latency': 14.029151900000016, 'total_token_count': 1058, 'total_price': 0.0018555000000000002, 'message_id': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:30,054.054] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-08 21:47:30,055.055] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:30,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 243.9s ago] {'pk_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:30,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-08 21:47:30,057.057] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.6s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:30,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 228.9s ago] {'pk_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-08 21:47:30,302.302] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-08 21:47:30,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 244.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-08 21:47:30,304.304] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-08 21:47:30,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.9s ago] {'pk_1': '23de0d2b-5ecb-4b35-8303-3f58acbb553b'}
[2025-06-08 21:47:38,142.142] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-08 21:47:38,143.143] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [08/Jun/2025 21:47:38] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-08 21:47:38,193.193] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-08 21:47:38,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 228.3s ago] {'name': '查询淄博天气', 'conversation_id': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b')}
[2025-06-08 21:47:38,194.194] base.py -> _commit_impl line:1140 [INFO]: COMMIT
