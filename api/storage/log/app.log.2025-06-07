[2025-06-07 11:52:36,919.919] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-07 11:52:36,920.920] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-07 11:52:36,923.923] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 11:52:57,085.085] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 11:52:57,088.088] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 11:53:15,355.355] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 11:53:15,355.355] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:53:15,358.358] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 11:53:15,359.359] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:53:15,360.360] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 11:53:15,360.360] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:53:15,360.360] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:15,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:53:15,362.362] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:53:15,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:15,372.372] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:15,377.377] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 11:53:15,377.377] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agent', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 11:53:15,390.390] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:15,430.430] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:15,431.431] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:15,431.431] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:15,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 11:53:15,434.434] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 11:53:15,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:53:15,673.673] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:53:15,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:15,878.878] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:15,880.880] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:53:15] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-07 11:53:34,497.497] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:53:34,599.599] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.23s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:34,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,602.602] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,606.606] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:53:34,606.606] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰APIçš„åˆ›å»ºã€‚AIè¯¢é—®æ˜¯å¦éœ€è¦æ›´å¤šç»†èŠ‚æˆ–ç‰¹å®šæŽ¥å£çš„è¯´æ˜Žã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 11:53:34,616.616] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:34,617.617] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.19s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:34,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.74s ago] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,620.620] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:53:34,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01537s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "create_app", "args": {"description": "\\u4e00\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\ ... (546 characters truncated) ... u7ec3\\u4e60\\u95ee\\u9898\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}, "id": "call_gaqh0z3FSzAEqLswZmaH5onl", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8529 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "892842f0-eb27-4524-b505-7004422436e2", "example": false}}]', 'answer': '', 'latency': 15.447091700000001}
[2025-06-07 11:53:34,629.629] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:34,630.630] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,630.630] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.2s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:34,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.76s ago] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,638.638] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:53:34,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03286s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u5df2\\u8c03\\u7528\\u540e\\u7aef\\u5f02\\u6b65\\u4efb\\u52a1\\u521b\\u5efaAgent\\u5e94\\u7528. \\n\\u5e94\\u7528\\u540d\\u79f0: \\u8d39\\u66fc\\u ... (587 characters truncated) ... 6\\u4e60\\u7684\\u4e3b\\u9898\\uff0c\\u4ee3\\u7406\\u5c06\\u63d0\\u4f9b\\u89e3\\u91ca\\u3001\\u793a\\u4f8b\\u548c\\u7ec3\\u4e60\\u95ee\\u9898\\u3002"', 'tool': 'create_app', 'tool_input': '{"description": "\\u4e00\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\uff0c\\u5e2e\\u52a9\\u7528\\u623 ... (452 characters truncated) ... 5c06\\u63d0\\u4f9b\\u89e3\\u91ca\\u3001\\u793a\\u4f8b\\u548c\\u7ec3\\u4e60\\u95ee\\u9898\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}', 'message': '{}', 'answer': '', 'latency': 0.05162560000000127}
[2025-06-07 11:53:34,640.640] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:34,641.641] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,641.641] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.21s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:34,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.78s ago] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,655.655] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:53:34,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04882s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12042 characters truncated) ... "create_app", "id": "da349f68-c187-46a4-b9e5-e659cf099569", "tool_call_id": "call_gaqh0z3FSzAEqLswZmaH5onl", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 3.1089679999999973}
[2025-06-07 11:53:34,658.658] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:34,659.659] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.78s ago] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,670.670] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 11:53:34,670.670] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12042 characters truncated) ... "create_app", "id": "da349f68-c187-46a4-b9e5-e659cf099569", "tool_call_id": "call_gaqh0z3FSzAEqLswZmaH5onl", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 18.6076853, 'message_id': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,674.674] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:34,675.675] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:34,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.8s ago] {'pk_1': UUID('def2a00b-5f47-4ff3-a72c-df0928a7e096')}
[2025-06-07 11:53:34,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:34,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 19.25s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:44,243.243] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 11:53:44,244.244] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'summary': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰APIçš„åˆ›å»ºã€‚AIè¯¢é—®æ˜¯å¦éœ€è¦æ›´å¤šç»†èŠ‚æˆ–ç‰¹å®šæŽ¥å£çš„è¯´æ˜Žã€‚éšåŽï¼Œäººç±»è¯·æ±‚åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agentï¼ŒAIæˆåŠŸåˆ›å»ºäº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:44,245.245] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:53:44,246.246] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:53:44,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:53:44,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.82s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:44,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 11:53:44,248.248] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:53:44,254.254] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:08,156.156] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:08] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 11:54:08,746.746] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:08,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:08,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.38s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:08,748.748] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:08,749.749] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:08] "GET /account HTTP/1.1" 200 -
[2025-06-07 11:54:10,450.450] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:10] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:54:10,765.765] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:10,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:10,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:10,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 11:54:10,773.773] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00084s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 11:54:10,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 11:54:10,786.786] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:54:10,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:10,792.792] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:10,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:10,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007155s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:10,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:10,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01136s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:10,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:10,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02104s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:10,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 11:54:10,817.817] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 11:54:10,822.822] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:10,823.823] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:10] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:54:14,158.158] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:14,159.159] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:14] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 11:54:14,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:14,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:14,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 11:54:14,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.393s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 11:54:14,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 11:54:14,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.383s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:54:14,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:14,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.38s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:14,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:14,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.383s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:14,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:14,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.393s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:14,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:14,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.395s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:14,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 11:54:14,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.381s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 11:54:14,201.201] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:14,203.203] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:14] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:54:14,436.436] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:14,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:14,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.08s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:14,444.444] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:14,444.444] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:14] "GET /account HTTP/1.1" 200 -
[2025-06-07 11:54:44,090.090] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:44] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:54:44,095.095] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:44,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:44,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 88.73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:44,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 11:54:44,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.33s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 11:54:44,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 11:54:44,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.31s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:54:44,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:44,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.31s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:44,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:44,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.31s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:44,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:44,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.32s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:44,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:54:44,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.32s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:54:44,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 11:54:44,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.3s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 11:54:44,113.113] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:44,115.115] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:44] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:54:44,403.403] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:44] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 11:54:44,717.717] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:44,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:44,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.36s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:44,718.718] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:44,719.719] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:44] "GET /account HTTP/1.1" 200 -
[2025-06-07 11:54:46,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:46] "OPTIONS /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-07 11:54:46,632.632] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:46] "OPTIONS /builtin-apps HTTP/1.1" 200 -
[2025-06-07 11:54:46,635.635] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:46,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:46,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.27s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:46,638.638] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:46,639.639] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:46] "GET /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-07 11:54:46,941.941] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:54:46,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:54:46,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.58s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:54:46,942.942] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:54:46,943.943] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:54:46] "GET /builtin-apps HTTP/1.1" 200 -
[2025-06-07 11:55:57,890.890] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\task\\app_task.py', reloading
[2025-06-07 11:55:58,375.375] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 11:56:20,392.392] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 11:56:20,395.395] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 11:56:37,501.501] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-07 11:56:37,967.967] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 11:56:59,555.555] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 11:56:59,558.558] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 11:57:23,362.362] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-06-07 11:57:23,696.696] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 11:57:44,918.918] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 11:57:44,920.920] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 11:58:24,441.441] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 11:58:24,441.441] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 11:58:24,447.447] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:58:24,447.447] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:58:24,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:24,565.565] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:24,570.570] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 11:58:24,570.570] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00080s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agent', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 11:58:24,579.579] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:24,641.641] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:24,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:24,655.655] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:24,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 11:58:24,660.660] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 11:58:24,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:58:24,999.999] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:58:25,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:25,221.221] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.02179s] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:25,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:58:25] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-07 11:58:38,314.314] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:58:38,413.413] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.85s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:38,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,413.413] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,423.423] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:58:38,423.423] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰APIçš„åˆ›å»ºã€‚AIè¯¢é—®æ˜¯å¦éœ€è¦æ›´å¤šç»†èŠ‚æˆ–ç‰¹å®šæŽ¥å£çš„è¯´æ˜Žã€‚éšåŽï¼Œäººç±»è¯·æ±‚åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agentï¼ŒAIæˆåŠŸåˆ›å»ºäº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 11:58:38,429.429] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:38,431.431] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.78s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:38,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.23s ago] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,437.437] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:58:38,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0147s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "create_app", "args": {"description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\ ... (532 characters truncated) ... u7ec3\\u4e60\\u95ee\\u9898\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}, "id": "call_hWqaSyo67adhqlPEvoDTjOCd", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10881 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "230fe898-4f84-4ee6-926f-819aeb2d326b", "example": false}}]', 'answer': '', 'latency': 9.161179599999997}
[2025-06-07 11:58:38,442.442] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:38,442.442] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.79s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:38,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.24s ago] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,445.445] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:58:38,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02541s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u5df2\\u8c03\\u7528\\u540e\\u7aef\\u5f02\\u6b65\\u4efb\\u52a1\\u521b\\u5efaAgent\\u5e94\\u7528\\u3002\\n\\u5e94\\u7528\\u540d\\u79f0: \\u8d39\\u66 ... (578 characters truncated) ... 6\\u4e60\\u7684\\u4e3b\\u9898\\uff0c\\u4ee3\\u7406\\u5c06\\u63d0\\u4f9b\\u89e3\\u91ca\\u3001\\u793a\\u4f8b\\u548c\\u7ec3\\u4e60\\u95ee\\u9898\\u3002"', 'tool': 'create_app', 'tool_input': '{"description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\uff0c\\u5e2e\\u52a9\\u7528\\u623 ... (438 characters truncated) ... 5c06\\u63d0\\u4f9b\\u89e3\\u91ca\\u3001\\u793a\\u4f8b\\u548c\\u7ec3\\u4e60\\u95ee\\u9898\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}', 'message': '{}', 'answer': '', 'latency': 0.04620520000000283}
[2025-06-07 11:58:38,456.456] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:38,457.457] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.8s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:38,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.25s ago] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,460.460] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 11:58:38,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04584s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (14355 characters truncated) ... "create_app", "id": "0abf6773-beb2-4ecb-8a05-65cdf0e143d5", "tool_call_id": "call_hWqaSyo67adhqlPEvoDTjOCd", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 3.873459600000004}
[2025-06-07 11:58:38,473.473] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:38,474.474] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.27s ago] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,476.476] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 11:58:38,477.477] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (14355 characters truncated) ... "create_app", "id": "0abf6773-beb2-4ecb-8a05-65cdf0e143d5", "tool_call_id": "call_hWqaSyo67adhqlPEvoDTjOCd", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚å®ƒé€šè¿‡å¼•å¯¼ç”¨æˆ·å°†å¤æ‚æ¦‚å¿µç®€åŒ–ä¸ºæ˜“äºŽç†è§£çš„è¯­è¨€ï¼Œå¹¶é€šè¿‡é—®ç­”å’Œäº’åŠ¨æ¥ä¿ƒè¿›å­¦ä¹ ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 13.080844400000004, 'message_id': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,486.486] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:38,487.487] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:38,488.488] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.28s ago] {'pk_1': UUID('5eed2b7b-06a8-49ac-8f77-227906c87add')}
[2025-06-07 11:58:38,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:38,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.84s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:47,682.682] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 11:58:47,682.682] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'summary': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (11 characters truncated) ... å¦éœ€è¦æ›´å¤šç»†èŠ‚æˆ–ç‰¹å®šæŽ¥å£çš„è¯´æ˜Žã€‚éšåŽï¼Œäººç±»è¯·æ±‚åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agentï¼ŒAIæˆåŠŸåˆ›å»ºäº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:47,683.683] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 11:58:47,684.684] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:58:47,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 11:58:47,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.03s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:47,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 11:58:47,686.686] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 11:58:47,687.687] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:59:03,854.854] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:59:03] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:59:04,181.181] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:59:04,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:59:04,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:59:04,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 11:59:04,185.185] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 11:59:04,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 11:59:04,189.189] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:59:04,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:04,195.195] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00273s] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:04,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:04,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005897s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:04,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:04,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007406s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:04,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:04,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02014s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:04,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 11:59:04,226.226] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00101s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 11:59:04,231.231] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:59:04,231.231] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:59:04] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:59:05,929.929] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:59:05,929.929] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:59:05] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 11:59:05,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:59:05,931.931] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.48s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:59:05,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 11:59:05,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.751s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 11:59:05,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 11:59:05,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.751s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 11:59:05,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:05,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.75s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:05,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:05,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.753s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:05,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:05,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.763s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:05,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 11:59:05,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.765s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 11:59:05,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 11:59:05,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.742s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 11:59:05,972.972] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:59:05,973.973] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:59:05] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 11:59:06,250.250] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 11:59:06,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 11:59:06,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 11:59:06,253.253] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 11:59:06,255.255] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 11:59:06] "GET /account HTTP/1.1" 200 -
[2025-06-07 11:59:52,856.856] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-06-07 11:59:53,314.314] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 12:00:14,933.933] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 12:00:14,936.936] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 12:00:28,435.435] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-06-07 12:00:28,825.825] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 12:00:50,322.322] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 12:00:50,325.325] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 12:00:50,576.576] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 12:00:50,576.576] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:00:50,577.577] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 12:00:50,577.577] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:00:50,577.577] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 12:00:50,577.577] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:00:50,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:00:50,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:00:50,580.580] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:00:50,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:00:50,584.584] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:00:50,588.588] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 12:00:50,588.588] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agent', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:00:50,593.593] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:00:50,704.704] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:00:50,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:00:50,705.705] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:00:50,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 12:00:50,708.708] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 12:00:50,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:00:50,917.917] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00120s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:00:51,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:00:51,104.104] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:00:51,106.106] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:00:51] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-07 12:01:05,660.660] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:05,757.757] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.17s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:05,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,761.761] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,765.765] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:01:05,765.765] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('99303bdf-2d3e-4980-9548-e797b1caef13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (11 characters truncated) ... å¦éœ€è¦æ›´å¤šç»†èŠ‚æˆ–ç‰¹å®šæŽ¥å£çš„è¯´æ˜Žã€‚éšåŽï¼Œäººç±»è¯·æ±‚åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agentï¼ŒAIæˆåŠŸåˆ›å»ºäº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 12:01:05,770.770] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:05,771.771] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.07s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:05,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.67s ago] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,774.774] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:01:05,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01058s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('99303bdf-2d3e-4980-9548-e797b1caef13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "create_app", "args": {"name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent", "description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b6 ... (434 characters truncated) ... 0\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"}, "id": "call_yWO9i5AiV7nMREufTR6d6tTm", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12217 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "e2863950-b7e8-43c7-a4d7-811bd0821dd7", "example": false}}]', 'answer': '', 'latency': 8.830639999999999}
[2025-06-07 12:01:05,778.778] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:05,779.779] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.07s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:05,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.68s ago] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,781.781] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:01:05,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01717s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('99303bdf-2d3e-4980-9548-e797b1caef13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u5df2\\u8c03\\u7528\\u540e\\u7aef\\u5f02\\u6b65\\u4efb\\u52a1\\u521b\\u5efaAgent\\u5e94\\u7528\\u3002\\n\\u5e94\\u7528\\u540d\\u79f0: \\u8d39\\u66 ... (480 characters truncated) ... 8\\uff0c\\u901a\\u8fc7\\u4e92\\u52a8\\u4fc3\\u8fdb\\u5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"', 'tool': 'create_app', 'tool_input': '{"name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent", "description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u ... (340 characters truncated) ... \\uff0c\\u901a\\u8fc7\\u4e92\\u52a8\\u4fc3\\u8fdb\\u5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"}', 'message': '{}', 'answer': '', 'latency': 0.03604940000000312}
[2025-06-07 12:01:05,784.784] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:05,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.08s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:05,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.68s ago] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,787.787] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:01:05,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02349s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('99303bdf-2d3e-4980-9548-e797b1caef13'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (15369 characters truncated) ... "create_app", "id": "32ea27b5-ffc3-4053-b313-dca06d929f7b", "tool_call_id": "call_yWO9i5AiV7nMREufTR6d6tTm", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 5.686357100000002}
[2025-06-07 12:01:05,790.790] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:05,790.790] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.69s ago] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,792.792] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 12:01:05,793.793] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (15369 characters truncated) ... "create_app", "id": "32ea27b5-ffc3-4053-b313-dca06d929f7b", "tool_call_id": "call_yWO9i5AiV7nMREufTR6d6tTm", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 14.553046500000004, 'message_id': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,795.795] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:05,796.796] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:05,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.69s ago] {'pk_1': UUID('99303bdf-2d3e-4980-9548-e797b1caef13')}
[2025-06-07 12:01:05,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:05,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.09s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:12,654.654] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:12] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:12,655.655] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:12] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:01:12,915.915] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 12:01:12,916.916] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'summary': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (56 characters truncated) ... è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚AIè¿˜è¯¦ç»†åˆ—å‡ºäº†è´¹æ›¼å­¦ä¹ æ³•Agentçš„åº”ç”¨åç§°å’Œæè¿°ï¼Œå¼ºè°ƒå…¶ä¿ƒè¿›å­¦ä¹ å’Œç†è§£å¤æ‚æ¦‚å¿µçš„ä½œç”¨ã€‚', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:12,917.917] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:01:12,920.920] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:12,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:01:12,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.22s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:12,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 12:01:12,924.924] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:01:12,925.925] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:12,964.964] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:12,964.964] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:12,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:12,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:12,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.39s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:12,966.966] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.39s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:12,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:12,969.969] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:12,970.970] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00141s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:12,970.970] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:12] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:01:12,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:12,974.974] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:12,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:12,979.979] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00230s] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:12,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:12,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005175s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:12,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:12,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006326s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:12,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:12,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009996s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:12,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:01:12,989.989] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:01:12,991.991] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:12,992.992] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:12] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:13,905.905] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:13] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:13,910.910] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:13,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:13,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.33s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:13,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:13,915.915] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:13,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:13,922.922] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:13,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,925.925] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-07 12:01:13,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01077s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-07 12:01:13,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01309s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-07 12:01:13,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01554s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-07 12:01:13,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01799s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-07 12:01:13,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02002s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-07 12:01:13,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02208s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-07 12:01:13,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02433s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-07 12:01:13,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02631s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-07 12:01:13,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02822s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-07 12:01:13,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03076s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-07 12:01:13,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03287s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-07 12:01:13,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03587s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-07 12:01:13,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03809s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-07 12:01:13,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03965s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-07 12:01:13,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04127s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-07 12:01:13,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04355s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-07 12:01:13,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04635s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-07 12:01:13,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04825s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-07 12:01:13,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-07 12:01:13,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04977s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-07 12:01:13,977.977] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:13,977.977] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:13] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:14,982.982] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:14] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-07 12:01:15,294.294] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:15,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:15,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.72s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:15,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:15,299.299] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:15,306.306] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:15,306.306] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:15,308.308] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:15,308.308] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:15] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-07 12:01:16,074.074] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:16] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:16,080.080] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:16,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:16,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:16,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:16,085.085] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:16,091.091] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:16,092.092] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:16,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,094.094] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:01:16,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,101.101] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:01:16,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,107.107] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:01:16,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01771s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:01:16,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01228s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:01:16,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00769s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:01:16,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02261s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:01:16,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01795s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:01:16,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,121.121] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01354s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:01:16,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,123.123] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02893s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:01:16,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02345s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:01:16,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,126.126] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01858s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:01:16,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03313s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:01:16,128.128] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02728s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:01:16,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,129.129] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02227s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:01:16,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,130.130] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03672s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:01:16,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03067s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:01:16,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0255s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:01:16,133.133] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03989s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:01:16,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,134.134] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03398s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:01:16,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02913s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:01:16,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04433s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:01:16,138.138] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03848s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:01:16,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03381s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:01:16,142.142] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04857s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:01:16,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0427s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:01:16,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0377s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:01:16,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05238s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:01:16,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04695s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:01:16,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04243s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:01:16,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05719s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:01:16,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05141s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:01:16,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04668s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:01:16,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06154s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:01:16,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0557s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:01:16,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05124s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:01:16,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06628s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:01:16,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06055s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:01:16,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05575s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:01:16,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0712s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:01:16,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0654s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:01:16,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06025s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:01:16,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07453s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:01:16,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06841s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:01:16,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06356s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:01:16,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07779s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:01:16,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0714s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:01:16,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06597s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:01:16,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08052s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:01:16,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07493s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:01:16,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07034s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:01:16,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08484s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:01:16,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07863s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:01:16,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07414s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:01:16,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08829s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:01:16,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08194s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:01:16,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07656s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:01:16,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09072s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:01:16,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08469s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:01:16,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:01:16,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07995s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:01:16,188.188] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:16,189.189] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:16] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:17,381.381] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:17,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:17,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 26.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:17,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:17,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.414s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:17,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:17,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.41s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:17,385.385] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:17,385.385] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.408s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:17,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:17,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.41s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:17,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:17,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.411s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:17,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:17,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.412s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:17,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:01:17,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.401s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:01:17,391.391] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:17,391.391] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:17] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:24,184.184] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:24] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:24,187.187] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:24,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:24,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.61s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:24,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:01:24,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:01:24,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:01:24,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:01:24,192.192] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:24,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:24,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:24,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:24,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:24,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:24,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:01:24,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.22s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:01:24,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:01:24,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 11.21s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:01:24,203.203] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:24,204.204] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:24] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:01:26,764.764] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:26] "OPTIONS /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-07 12:01:27,067.067] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:27] "OPTIONS /builtin-apps HTTP/1.1" 200 -
[2025-06-07 12:01:27,073.073] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:27,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:27,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.49s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:27,075.075] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:27,075.075] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:27] "GET /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-07 12:01:27,331.331] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:01:27,332.332] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:01:27,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 36.75s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:01:27,334.334] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:01:27,334.334] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:01:27] "GET /builtin-apps HTTP/1.1" 200 -
[2025-06-07 12:02:07,112.112] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:07] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:02:07,424.424] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:02:07,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:02:07,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.85s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:02:07,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:02:07,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.46s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:02:07,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:02:07,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.46s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:02:07,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:07,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.45s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:07,431.431] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:07,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.46s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:07,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:07,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.46s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:07,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:07,434.434] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.46s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:07,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:02:07,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.45s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:02:07,436.436] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:02:07,437.437] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:07] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:02:13,045.045] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:13] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:02:13,050.050] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:13] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:02:13,356.356] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:13] "OPTIONS /builtin-tools HTTP/1.1" 200 -
[2025-06-07 12:02:13,667.667] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:13] "GET /builtin-tools HTTP/1.1" 200 -
[2025-06-07 12:02:14,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:02:14,507.507] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,681.681] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/wikipedia/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,682.682] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/duckduckgo/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,684.684] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/dalle/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,688.688] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/time/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,695.695] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 12:02:14,826.826] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:02:14,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:02:14,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 84.25s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:02:14,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:02:14,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.86s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:02:14,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:02:14,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.86s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:02:14,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:14,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.85s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:14,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:14,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.86s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:14,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:14,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.86s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:14,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:02:14,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.86s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:02:14,835.835] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:02:14,835.835] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.85s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:02:14,836.836] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:02:14,836.836] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:02:14] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:03:43,448.448] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:03:43] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:03:43,451.451] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:03:43] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:03:43,763.763] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:03:43,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:03:43,769.769] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:03:43,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:03:43,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:03:43,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:03:43,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:03:43,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:03:43,781.781] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:03:43,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:03:43,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:03:43,781.781] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:03:43] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:03:43,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:03:43,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:03:43,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:03:43,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:03:43,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:03:43,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:03:43,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:03:43,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:03:43,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:03:43,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 150.8s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:03:43,820.820] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:03:43,820.820] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:03:43] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:08:09,988.988] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\app_service.py', reloading
[2025-06-07 12:08:10,381.381] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 12:08:31,690.690] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 12:08:31,692.692] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 12:08:31,892.892] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 12:08:31,892.892] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:08:31,893.893] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 12:08:31,893.893] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:08:31,894.894] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 12:08:31,894.894] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:08:31,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:31,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:08:31,897.897] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:08:31,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:31,902.902] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:31,906.906] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 12:08:31,906.906] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agent', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:08:31,913.913] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:32,030.030] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:32,031.031] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:32,031.031] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:32,034.034] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 12:08:32,034.034] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 12:08:32,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:08:32,258.258] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:08:32,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:32,527.527] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00704s] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:32,529.529] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:08:32] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-07 12:08:47,761.761] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:08:47,862.862] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.96s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:47,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,866.866] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,869.869] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:08:47,870.870] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (56 characters truncated) ... è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚AIè¿˜è¯¦ç»†åˆ—å‡ºäº†è´¹æ›¼å­¦ä¹ æ³•Agentçš„åº”ç”¨åç§°å’Œæè¿°ï¼Œå¼ºè°ƒå…¶ä¿ƒè¿›å­¦ä¹ å’Œç†è§£å¤æ‚æ¦‚å¿µçš„ä½œç”¨ã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 12:08:47,875.875] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:47,877.877] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.85s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:47,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.36s ago] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,880.880] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:08:47,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01116s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "create_app", "args": {"name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent", "description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b6 ... (434 characters truncated) ... 0\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"}, "id": "call_zZ3AV3rgaQOxp3xxcm3VhpwG", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10103 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "00fb88dc-56b6-48fe-a31f-125b0e93aafb", "example": false}}]', 'answer': '', 'latency': 10.5893984}
[2025-06-07 12:08:47,884.884] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:47,885.885] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.85s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:47,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.37s ago] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,887.887] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:08:47,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01829s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u5df2\\u8c03\\u7528\\u540e\\u7aef\\u5f02\\u6b65\\u4efb\\u52a1\\u521b\\u5efaAgent\\u5e94\\u7528\\u3002\\n\\u5e94\\u7528\\u540d\\u79f0: \\u8d39\\u66 ... (480 characters truncated) ... 8\\uff0c\\u901a\\u8fc7\\u4e92\\u52a8\\u4fc3\\u8fdb\\u5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"', 'tool': 'create_app', 'tool_input': '{"name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent", "description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u ... (340 characters truncated) ... \\uff0c\\u901a\\u8fc7\\u4e92\\u52a8\\u4fc3\\u8fdb\\u5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"}', 'message': '{}', 'answer': '', 'latency': 0.04800970000000149}
[2025-06-07 12:08:47,891.891] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:47,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.86s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:47,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.37s ago] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,893.893] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:08:47,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02493s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13255 characters truncated) ... "create_app", "id": "4ec70b23-6d3e-4e38-b2bb-404e1f948942", "tool_call_id": "call_zZ3AV3rgaQOxp3xxcm3VhpwG", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 4.596183500000002}
[2025-06-07 12:08:47,897.897] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:47,898.898] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.38s ago] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,900.900] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 12:08:47,901.901] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13255 characters truncated) ... "create_app", "id": "4ec70b23-6d3e-4e38-b2bb-404e1f948942", "tool_call_id": "call_zZ3AV3rgaQOxp3xxcm3VhpwG", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 15.233591600000004, 'message_id': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,903.903] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:47,904.904] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:47,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.38s ago] {'pk_1': UUID('2a4ddf0a-7331-40c4-b4f3-92abf06d5490')}
[2025-06-07 12:08:47,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:47,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.88s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:59,806.806] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 12:08:59,807.807] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'summary': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (55 characters truncated) ... äº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚AIè¯¦ç»†åˆ—å‡ºäº†è´¹æ›¼å­¦ä¹ æ³•Agentçš„åº”ç”¨åç§°å’Œæè¿°ï¼Œå¼ºè°ƒå…¶ä¿ƒè¿›å­¦ä¹ å’Œç†è§£å¤æ‚æ¦‚å¿µçš„ä½œç”¨ã€‚', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:59,808.808] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:08:59,810.810] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:08:59,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:08:59,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 27.78s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:59,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 12:08:59,812.812] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:08:59,813.813] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:09:54,344.344] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:54] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:09:54,345.345] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:54] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:09:54,661.661] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:09:54,661.661] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:09:54,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:09:54,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:09:54,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.77s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:09:54,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.77s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:09:54,664.664] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:09:54,665.665] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:54] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:09:54,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:09:54,667.667] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:09:54,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:09:54,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00109s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:09:54,674.674] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:54,674.674] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:54,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:54,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003651s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:54,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:54,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00507s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:54,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:54,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008272s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:54,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:09:54,684.684] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:09:54,687.687] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:09:54,687.687] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:54] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:09:56,918.918] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:09:56,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:09:56,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.02s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:09:56,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:09:56,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.254s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:09:56,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:09:56,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.254s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:09:56,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:56,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.252s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:56,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:56,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.256s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:56,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:56,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.259s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:56,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:09:56,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.262s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:09:56,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:09:56,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.253s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:09:56,942.942] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:09:56,943.943] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:56] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:09:57,235.235] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:09:57,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:09:57,237.237] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.34s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:09:57,239.239] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:09:57,240.240] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:09:57] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:12:09,955.955] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-07 12:12:09,955.955] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-07 12:12:09,956.956] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 12:12:30,047.047] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 12:12:30,049.049] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 12:12:53,792.792] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 12:12:53,792.792] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:12:53,792.792] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 12:12:53,792.792] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:12:53,793.793] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 12:12:53,793.793] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 12:12:53,794.794] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:12:53,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:12:53,795.795] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:12:53,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:12:53,880.880] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:12:53,884.884] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 12:12:53,885.885] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'åˆ›å»ºä¸€ä¸ªè´¹æ›¼å­¦ä¹ æ³•Agent', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:12:53,889.889] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:12:53,932.932] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:12:53,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:12:53,933.933] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:12:53,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 12:12:53,936.936] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 12:12:54,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:12:54,174.174] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:12:54,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:12:54,342.342] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:12:54,344.344] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:12:54] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-07 12:13:10,809.809] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:10,908.908] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.03s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:10,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,911.911] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,914.914] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:13:10,915.915] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('7629748e-33bf-4f23-9de7-eaeb75654930'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (55 characters truncated) ... äº†è¯¥ä»£ç†ï¼Œå¹¶æä¾›äº†å…¶åº”ç”¨åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚AIè¯¦ç»†åˆ—å‡ºäº†è´¹æ›¼å­¦ä¹ æ³•Agentçš„åº”ç”¨åç§°å’Œæè¿°ï¼Œå¼ºè°ƒå…¶ä¿ƒè¿›å­¦ä¹ å’Œç†è§£å¤æ‚æ¦‚å¿µçš„ä½œç”¨ã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 12:13:10,921.921] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:10,923.923] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.99s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:10,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.58s ago] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,926.926] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:13:10,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01163s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('7629748e-33bf-4f23-9de7-eaeb75654930'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "create_app", "args": {"description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\ ... (434 characters truncated) ... u590d\\u6742\\u6982\\u5ff5\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}, "id": "call_Y4yuTwrAvd7mkIdutAA1Z07l", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (9998 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "44a74eb9-b211-4486-b547-6ee202e5c9ef", "example": false}}]', 'answer': '', 'latency': 11.767450000000004}
[2025-06-07 12:13:10,929.929] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:10,930.930] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:10,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,931.931] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.59s ago] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,933.933] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:13:10,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01832s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('7629748e-33bf-4f23-9de7-eaeb75654930'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u5df2\\u8c03\\u7528\\u540e\\u7aef\\u5f02\\u6b65\\u4efb\\u52a1\\u521b\\u5efaAgent\\u5e94\\u7528\\u3002\\n\\u5e94\\u7528\\u540d\\u79f0: \\u8d39\\u66 ... (480 characters truncated) ... 8\\uff0c\\u901a\\u8fc7\\u4e92\\u52a8\\u4fc3\\u8fdb\\u5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002"', 'tool': 'create_app', 'tool_input': '{"description": "\\u8fd9\\u4e2a\\u57fa\\u4e8e\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5\\u7684\\u667a\\u80fd\\u4ee3\\u7406\\uff0c\\u5e2e\\u52a9\\u7528\\u623 ... (340 characters truncated) ... 5b66\\u4e60\\uff0c\\u786e\\u4fdd\\u6df1\\u523b\\u7406\\u89e3\\u590d\\u6742\\u6982\\u5ff5\\u3002", "name": "\\u8d39\\u66fc\\u5b66\\u4e60\\u6cd5Agent"}', 'message': '{}', 'answer': '', 'latency': 0.03365379999999618}
[2025-06-07 12:13:10,936.936] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:10,937.937] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:10,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.6s ago] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,940.940] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 12:13:10,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02537s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb'), 'message_id': UUID('7629748e-33bf-4f23-9de7-eaeb75654930'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13150 characters truncated) ... "create_app", "id": "e3554453-55be-4def-b5e3-4dba1c75b4c9", "tool_call_id": "call_Y4yuTwrAvd7mkIdutAA1Z07l", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 4.664312299999999}
[2025-06-07 12:13:10,943.943] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:10,944.944] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.6s ago] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,947.947] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 12:13:10,957.957] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.01090s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13150 characters truncated) ... "create_app", "id": "e3554453-55be-4def-b5e3-4dba1c75b4c9", "tool_call_id": "call_Y4yuTwrAvd7mkIdutAA1Z07l", "artifact": null, "status": "success"}}]', 'answer': 'è´¹æ›¼å­¦ä¹ æ³• Agent å·²æˆåŠŸåˆ›å»ºï¼ä»¥ä¸‹æ˜¯è¯¥ä»£ç†çš„è¯¦ç»†ä¿¡æ¯ï¼š\n\n- **åº”ç”¨åç§°**: è´¹æ›¼å­¦ä¹ æ³•Agent\n- **åº”ç”¨æè¿°**: è¿™ä¸ªåŸºäºŽè´¹æ›¼å­¦ä¹ æ³•çš„æ™ºèƒ½ä»£ç†ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†ã€‚ç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›ç®€å•çš„è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ï¼Œé€šè¿‡äº’åŠ¨ä¿ƒè¿›å­¦ä¹ ï¼Œç¡®ä¿æ·±åˆ»ç†è§£å¤æ‚æ¦‚å¿µã€‚\n\nå¦‚æžœä½ æœ‰ä»»ä½•è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†è¿›è¡Œäº’åŠ¨ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 16.4654161, 'message_id': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,962.962] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:10,963.963] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:10,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,964.964] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.62s ago] {'pk_1': UUID('7629748e-33bf-4f23-9de7-eaeb75654930')}
[2025-06-07 12:13:10,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:10,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.03s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:18,786.786] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 12:13:18,787.787] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'summary': 'äººç±»å‘AIæ‰“æ‹›å‘¼ï¼ŒAIå›žåº”å¹¶è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ã€‚äººç±»è¯·æ±‚æŸ¥çœ‹LLMOpsé¡¹ç›®çš„æŽ¥å£ï¼ŒAIæä¾›äº†æŽ¥å£æ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬å“åº”æ ¼å¼ã€æŽ¥å£çŠ¶æ€ç ã€æ·»åŠ æ–°æ–‡æ¡£çš„æŽ¥å£ã€ä¸ŽåŠ©ç†AgentèŠå¤©çš„æŽ¥å£ã€åˆ›å»ºè‡ªå®šä¹‰APIå·¥å…·çš„æŽ¥å£ä»¥åŠèŽ·å–è¯­è¨€æ¨¡åž‹åˆ—è¡¨çš„æŽ¥å£ã€‚è¿™äº›æŽ¥å£æ”¯æŒæ•°æ®é›†æ–‡æ¡£ç®¡ç†ã€ä¸Žæ™ºèƒ½åŠ©æ‰‹çš„äº¤äº’ä»¥åŠè‡ªå®šä¹‰A ... (67 characters truncated) ... åç§°ã€æè¿°å’ŒåŠŸèƒ½çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¼ºè°ƒå…¶å¸®åŠ©ç”¨æˆ·ç†è§£å’Œå­¦ä¹ æ–°çŸ¥è¯†çš„èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œä»£ç†å°†æä¾›è§£é‡Šã€ç¤ºä¾‹å’Œç»ƒä¹ é—®é¢˜ã€‚AIè¡¨ç¤ºå¦‚æžœæœ‰è¿›ä¸€æ­¥çš„éœ€æ±‚æˆ–æƒ³è¦ä¸Žè¯¥ä»£ç†äº’åŠ¨ï¼Œéšæ—¶å¯ä»¥å‘ŠçŸ¥ã€‚AIè¯¦ç»†åˆ—å‡ºäº†è´¹æ›¼å­¦ä¹ æ³•Agentçš„åº”ç”¨åç§°å’Œæè¿°ï¼Œå¼ºè°ƒå…¶ä¿ƒè¿›å­¦ä¹ å’Œç†è§£å¤æ‚æ¦‚å¿µçš„ä½œç”¨ï¼Œå¹¶ç¡®è®¤è¯¥ä»£ç†å·²æˆåŠŸåˆ›å»ºã€‚', 'conversation_id': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:18,787.787] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:18,790.790] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:18,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:18,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.86s ago] {'pk_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:18,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 12:13:18,792.792] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'conversation_id_1': UUID('3f19a8bc-d65c-4009-96fb-355891d64ceb')}
[2025-06-07 12:13:18,793.793] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:22,564.564] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:22] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:22,564.564] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:22] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:13:22,875.875] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:22,875.875] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:22,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:22,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:22,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.08s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:22,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.08s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:22,878.878] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:22,881.881] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:22] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:13:22,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:22,881.881] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:13:22,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:13:22,886.886] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00103s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:22,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:22,888.888] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:22,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:22,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003113s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:22,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:22,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004639s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:22,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:22,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007952s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:22,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:13:22,898.898] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:13:22,900.900] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:22,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:22] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:40,336.336] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:40] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:40,340.340] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:40,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:40,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.55s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:40,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:40,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.46s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:13:40,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:13:40,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.46s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:40,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:40,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.46s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:40,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:40,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.46s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:40,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:40,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.47s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:40,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:40,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.47s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:40,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:13:40,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.46s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:13:40,363.363] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:40,363.363] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:40] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:40,654.654] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:40] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:13:40,964.964] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:40,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:40,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 47.17s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:40,966.966] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:40,966.966] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:40] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:13:47,837.837] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:47] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:47,837.837] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:47] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:13:47,849.849] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:47,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:47,850.850] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.05s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:47,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:47,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:13:47,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:13:47,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:47,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:47,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:47,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:47,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:47,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:47,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:47,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:47,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:47,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:47,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:47,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:13:47,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.97s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:13:47,865.865] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:47,865.865] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:47] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:48,148.148] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:48,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:48,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.35s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:48,151.151] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:48,151.151] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:48] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:13:50,570.570] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:13:50,888.888] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:50,890.890] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 12:13:50,890.890] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/draft-app-config HTTP/1.1" 200 -
[2025-06-07 12:13:50,891.891] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde HTTP/1.1" 200 -
[2025-06-07 12:13:50,892.892] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:50] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:13:51,150.150] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:51,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.35s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:51,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:51,153.153] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:13:51,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:13:51,156.156] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:51,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,157.157] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:13:51,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,159.159] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:13:51,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,160.160] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:13:51,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004821s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:13:51,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003633s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:13:51,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.002479s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:13:51,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00704s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:13:51,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00589s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:13:51,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004771s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:13:51,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009225s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:13:51,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007992s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:13:51,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006795s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:13:51,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01127s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:13:51,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01015s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:13:51,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009084s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:13:51,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01355s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:13:51,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0124s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:13:51,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01121s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:13:51,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01564s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:13:51,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01446s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:13:51,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01332s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:13:51,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01778s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:13:51,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0166s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:13:51,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0154s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:13:51,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,176.176] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01983s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:13:51,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01863s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:13:51,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0174s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:13:51,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02196s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:13:51,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02113s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:13:51,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02004s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:13:51,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02456s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:13:51,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02344s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:13:51,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02237s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:13:51,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02691s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:13:51,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02576s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:13:51,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0246s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:13:51,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02909s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:13:51,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02789s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:13:51,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02671s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:13:51,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03115s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:13:51,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03001s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:13:51,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02887s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:13:51,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03335s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:13:51,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03218s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:13:51,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.031s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:13:51,192.192] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0355s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:13:51,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03429s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:13:51,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03307s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:13:51,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03751s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:13:51,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03646s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:13:51,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03584s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:13:51,197.197] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:51,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:51,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04419s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:13:51,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,203.203] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:13:51,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0449s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:13:51,204.204] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 12:13:51,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,205.205] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'app_id': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:51,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04507s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:13:51,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04997s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:13:51,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04889s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:13:51,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04778s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:13:51,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,209.209] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 12:13:51,210.210] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'debug_conversation_id': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'app_id': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:13:51,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05328s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:13:51,211.211] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 12:13:51,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,212.212] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:51,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05424s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:13:51,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.28s ago] {'pk_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24')}
[2025-06-07 12:13:51,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:13:51,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:51,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05601s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:13:51,216.216] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'conversation_id_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:13:51,218.218] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:51,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 12:13:51,220.220] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:13:51,220.220] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:51] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:51,221.221] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:51,221.221] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:51] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 12:13:51,298.298] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:51,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:51,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09866s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:13:51,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:51,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.41s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:51,304.304] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-06-07 12:13:51,304.304] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {}
[2025-06-07 12:13:51,308.308] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:51,308.308] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:51] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/draft-app-config HTTP/1.1" 200 -
[2025-06-07 12:13:51,362.362] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:51,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.57s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:51,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:13:51,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1625s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:13:51,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:51,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.48s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:51,369.369] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:51,369.369] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:51] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde HTTP/1.1" 200 -
[2025-06-07 12:13:55,256.256] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:55] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:55,257.257] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:55] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 12:13:55,260.260] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:55,261.261] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:55,262.262] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.47s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:55,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:13:55,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:13:55,265.265] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:13:55,266.266] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:13:55,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:55,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:55,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:55,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:55,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:55,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:55,273.273] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:55,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.39s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:55,274.274] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:13:55,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.39s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:13:55,277.277] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 12:13:55,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.38s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 12:13:55,278.278] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:55,279.279] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:55] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:13:55,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:13:55,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:13:55,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.78s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:13:55,573.573] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:13:55,573.573] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:13:55] "GET /account HTTP/1.1" 200 -
[2025-06-07 12:14:04,726.726] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:04] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde HTTP/1.1" 200 -
[2025-06-07 12:14:05,041.041] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:14:05,041.041] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:14:05,041.041] base.py -> _exec_single_context line:1901 [INFO]: [cached since 71.25s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:14:05,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:14:05,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.84s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:14:05,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:14:05,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.16s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:14:05,044.044] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:14:05,045.045] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:05] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde HTTP/1.1" 200 -
[2025-06-07 12:14:06,867.867] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:14:06,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:14:06,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.07s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:14:06,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:14:06,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.67s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:14:06,871.871] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:14:06,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.98s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:14:06,874.874] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:14:06,874.874] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:06] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde HTTP/1.1" 200 -
[2025-06-07 12:14:07,174.174] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:14:07,175.175] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 12:14:07,177.177] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 12:14:07,180.180] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "OPTIONS /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/draft-app-config HTTP/1.1" 200 -
[2025-06-07 12:14:07,486.486] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 12:14:07,487.487] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:14:07,488.488] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:14:07,489.489] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 12:14:07,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:14:07,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:14:07,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 12:14:07,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:14:07,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:14:07,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 73.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 12:14:07,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:14:07,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:14:07,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 12:14:07,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.34s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 12:14:07,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.29s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:14:07,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.29s ago] {'pk_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde')}
[2025-06-07 12:14:07,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 12:14:07,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 12:14:07,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 12:14:07,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.34s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 12:14:07,497.497] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00096s] {'id_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 12:14:07,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.61s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 12:14:07,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.34s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:14:07,499.499] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-06-07 12:14:07,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.2s ago] {}
[2025-06-07 12:14:07,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 12:14:07,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.34s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:14:07,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.29s ago] {'conversation_id_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:14:07,502.502] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:14:07,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 12:14:07,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/draft-app-config HTTP/1.1" 200 -
[2025-06-07 12:14:07,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.34s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 12:14:07,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.28s ago] {'conversation_id_1': UUID('211f0617-5ba7-4665-9b9a-1c793261ec24'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 12:14:07,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,506.506] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:14:07,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.35s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:14:07,507.507] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "GET /apps/5d4239a4-3100-4415-86b3-c4946d2bedde/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 12:14:07,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.35s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:14:07,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.35s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 12:14:07,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:14:07,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.35s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:14:07,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.35s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 12:14:07,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:14:07,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:14:07,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 12:14:07,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:14:07,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:14:07,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 12:14:07,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:14:07,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:14:07,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 12:14:07,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:14:07,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:14:07,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.36s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 12:14:07,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:14:07,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:14:07,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 12:14:07,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:14:07,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:14:07,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 12:14:07,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:14:07,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:14:07,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 12:14:07,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:14:07,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:14:07,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.37s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 12:14:07,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:14:07,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:14:07,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 12:14:07,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:14:07,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:14:07,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 12:14:07,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:14:07,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:14:07,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 12:14:07,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:14:07,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:14:07,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.38s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 12:14:07,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:14:07,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:14:07,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 12:14:07,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:14:07,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:14:07,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 12:14:07,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:14:07,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:14:07,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 12:14:07,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:14:07,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:14:07,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 12:14:07,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.4s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:14:07,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.4s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:14:07,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 12:14:07,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 12:14:07,557.557] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 12:14:07,557.557] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 12:14:07] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:07:40,234.234] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-07 16:07:40,235.235] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-07 16:07:40,237.237] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 16:08:01,091.091] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 16:08:01,095.095] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 16:08:01,258.258] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:01] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 16:08:01,265.265] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:01] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:01,690.690] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 16:08:01,690.690] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 16:08:01,692.692] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 16:08:01,692.692] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 16:08:01,693.693] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 16:08:01,693.693] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 16:08:01,695.695] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:01,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:01,698.698] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:01,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 16:08:01,707.707] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 16:08:01,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 16:08:01,713.713] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 16:08:01,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:01,718.718] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:01,722.722] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:01,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005589s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:01,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:01,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:01,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:01,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01188s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:01,730.730] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:01,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02437s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:01,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 16:08:01,746.746] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:01,746.746] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 16:08:01,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:01,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05004s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:01,749.749] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:01,757.757] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:01] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:01,759.759] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:01,760.760] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:01] "GET /account HTTP/1.1" 200 -
[2025-06-07 16:08:04,191.191] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 16:08:04,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:04,195.195] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 16:08:04,197.197] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "OPTIONS /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 16:08:04,198.198] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "OPTIONS /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/draft-app-config HTTP/1.1" 200 -
[2025-06-07 16:08:04,200.200] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "OPTIONS /apps/4e929f64-66bf-4718-9637-fa7f12b4d804 HTTP/1.1" 200 -
[2025-06-07 16:08:04,502.502] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:04,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.805s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:04,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 16:08:04,506.506] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 16:08:04,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 16:08:04,508.508] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 16:08:04,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,510.510] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 16:08:04,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,513.513] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 16:08:04,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,517.517] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 16:08:04,518.518] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:04,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.826s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:04,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01605s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 16:08:04,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,526.526] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00170s] {'pk_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804')}
[2025-06-07 16:08:04,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01404s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 16:08:04,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 16:08:04,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01473s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 16:08:04,531.531] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00083s] {'id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 16:08:04,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02392s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 16:08:04,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02231s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 16:08:04,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02026s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 16:08:04,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 16:08:04,539.539] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00072s] {'conversation_id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 16:08:04,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03661s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 16:08:04,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0344s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 16:08:04,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 16:08:04,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,550.550] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00129s] {'conversation_id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 16:08:04,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03483s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 16:08:04,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04332s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 16:08:04,554.554] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:04,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,555.555] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "GET /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 16:08:04,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04222s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 16:08:04,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04128s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 16:08:04,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05031s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 16:08:04,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05018s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 16:08:04,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04833s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 16:08:04,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05645s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 16:08:04,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,567.567] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0542s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 16:08:04,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05223s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 16:08:04,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,570.570] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06031s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 16:08:04,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0579s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 16:08:04,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0559s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 16:08:04,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06386s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 16:08:04,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06142s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 16:08:04,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05933s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 16:08:04,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06861s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 16:08:04,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06621s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 16:08:04,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06433s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 16:08:04,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07237s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 16:08:04,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0701s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 16:08:04,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06802s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 16:08:04,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07594s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 16:08:04,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07346s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 16:08:04,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0713s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 16:08:04,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07905s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 16:08:04,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07652s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 16:08:04,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07797s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 16:08:04,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08606s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 16:08:04,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08356s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 16:08:04,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08227s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 16:08:04,600.600] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,600.600] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09053s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 16:08:04,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08958s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 16:08:04,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0876s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 16:08:04,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09569s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 16:08:04,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09347s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 16:08:04,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09214s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 16:08:04,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1007s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 16:08:04,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09872s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 16:08:04,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09698s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 16:08:04,614.614] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1052s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 16:08:04,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,616.616] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1029s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 16:08:04,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1009s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 16:08:04,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1089s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 16:08:04,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1065s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 16:08:04,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1046s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 16:08:04,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1126s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 16:08:04,622.622] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1103s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 16:08:04,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 16:08:04,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1094s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 16:08:04,627.627] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:04,628.628] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:04,636.636] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:04,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:04,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,641.641] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1159s ago] {'pk_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804')}
[2025-06-07 16:08:04,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:04,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.927s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:04,647.647] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:04,648.648] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "GET /apps/4e929f64-66bf-4718-9637-fa7f12b4d804 HTTP/1.1" 200 -
[2025-06-07 16:08:04,703.703] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:04,704.704] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.006s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:04,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 16:08:04,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1807s ago] {'pk_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804')}
[2025-06-07 16:08:04,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:04,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.99s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:04,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-06-07 16:08:04,710.710] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {}
[2025-06-07 16:08:04,711.711] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:04,711.711] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:04] "GET /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/draft-app-config HTTP/1.1" 200 -
[2025-06-07 16:08:05,376.376] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:05] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 16:08:06,431.431] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:06] "OPTIONS /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/conversations HTTP/1.1" 200 -
[2025-06-07 16:08:06,434.434] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:06,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:06,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.738s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:06,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 16:08:06,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.914s ago] {'pk_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804')}
[2025-06-07 16:08:06,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:06,441.441] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.724s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:06,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (NULL) AND (1 != 1)
[2025-06-07 16:08:06,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.735s ago] {}
[2025-06-07 16:08:06,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 16:08:06,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.916s ago] {'id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 16:08:06,450.450] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 16:08:06,453.453] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00314s] {'app_id': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'conversation_id': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¦‚ä½•è¿›è¡Œäº§å“å®£ä¼ å’Œè¥é”€', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 16:08:06,464.464] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:06,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:06,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 16:08:06,626.626] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:06,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 16:08:06,630.630] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'conversation_id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 16:08:06,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:06,634.634] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 16:08:06,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:06,850.850] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00561s] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:06,851.851] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:06] "POST /apps/4e929f64-66bf-4718-9637-fa7f12b4d804/conversations HTTP/1.1" 200 -
[2025-06-07 16:08:28,003.003] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:28,003.003] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:28,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,004.004] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'pk_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:28,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,007.007] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:28,009.009] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 16:08:28,010.010] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'app_id': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'conversation_id': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'message_id': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 16:08:28,015.015] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:28,016.016] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:28,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.39s ago] {'pk_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:28,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.17s ago] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:28,021.021] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 16:08:28,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01169s ago] {'app_id': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'conversation_id': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f'), 'message_id': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'è¿›è¡Œäº§å“å®£ä¼ å’Œè¥é”€å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å’Œç­–ç•¥ï¼š\n\n1. **å¸‚åœºè°ƒç ”**ï¼š\n   - äº†è§£ç›®æ ‡å¸‚åœºå’Œæ½œåœ¨å®¢æˆ·çš„éœ€æ±‚ã€åå¥½å’Œè¡Œä¸ºã€‚\n   - åˆ†æžç«žäº‰å¯¹æ‰‹çš„äº§å“ã€å®šä»·å’Œè¥é”€ç­–ç•¥ã€‚\n\n2. **æ˜Žç¡®ç›®æ ‡å—ä¼—**ï¼š\n   - ç¡®å®šä½ çš„ç›®æ ‡å®¢æˆ·ç¾¤ä½“ï¼Œåˆ›å»ºç”¨æˆ·ç”»åƒï¼ŒåŒ…æ‹¬å¹´é¾„ã€æ€§åˆ«ã€åœ°ç†ä½ç½®ã€å…´ ... (443 characters truncated) ... ç›‘æµ‹è¥é”€æ´»åŠ¨çš„æ•ˆæžœï¼Œè¯„ä¼°æŠ•èµ„å›žæŠ¥çŽ‡ï¼ˆROIï¼‰ã€‚\n   - æ ¹æ®åé¦ˆå’Œæ•°æ®è°ƒæ•´ç­–ç•¥ï¼Œä»¥ä¼˜åŒ–æœªæ¥çš„è¥é”€æ´»åŠ¨ã€‚\n\n9. **å®¢æˆ·åé¦ˆä¸Žå£ç¢‘ç®¡ç†**ï¼š\n   - é¼“åŠ±å®¢æˆ·æä¾›åé¦ˆï¼Œå¹¶åŠæ—¶å›žåº”ã€‚\n   - åˆ©ç”¨æ­£é¢è¯„ä»·å’Œæ¡ˆä¾‹ç ”ç©¶å¢žå¼ºå“ç‰Œä¿¡èª‰ã€‚\n\né€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥æœ‰æ•ˆæå‡äº§å“çš„å®£ä¼ å’Œè¥é”€æ•ˆæžœã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2923 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "dc021d37-83c0-43b8-9c37-503bbfc7a766", "example": false}}]', 'answer': 'è¿›è¡Œäº§å“å®£ä¼ å’Œè¥é”€å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å’Œç­–ç•¥ï¼š\n\n1. **å¸‚åœºè°ƒç ”**ï¼š\n   - äº†è§£ç›®æ ‡å¸‚åœºå’Œæ½œåœ¨å®¢æˆ·çš„éœ€æ±‚ã€åå¥½å’Œè¡Œä¸ºã€‚\n   - åˆ†æžç«žäº‰å¯¹æ‰‹çš„äº§å“ã€å®šä»·å’Œè¥é”€ç­–ç•¥ã€‚\n\n2. **æ˜Žç¡®ç›®æ ‡å—ä¼—**ï¼š\n   - ç¡®å®šä½ çš„ç›®æ ‡å®¢æˆ·ç¾¤ä½“ï¼Œåˆ›å»ºç”¨æˆ·ç”»åƒï¼ŒåŒ…æ‹¬å¹´é¾„ã€æ€§åˆ«ã€åœ°ç†ä½ç½®ã€å…´ ... (443 characters truncated) ... ç›‘æµ‹è¥é”€æ´»åŠ¨çš„æ•ˆæžœï¼Œè¯„ä¼°æŠ•èµ„å›žæŠ¥çŽ‡ï¼ˆROIï¼‰ã€‚\n   - æ ¹æ®åé¦ˆå’Œæ•°æ®è°ƒæ•´ç­–ç•¥ï¼Œä»¥ä¼˜åŒ–æœªæ¥çš„è¥é”€æ´»åŠ¨ã€‚\n\n9. **å®¢æˆ·åé¦ˆä¸Žå£ç¢‘ç®¡ç†**ï¼š\n   - é¼“åŠ±å®¢æˆ·æä¾›åé¦ˆï¼Œå¹¶åŠæ—¶å›žåº”ã€‚\n   - åˆ©ç”¨æ­£é¢è¯„ä»·å’Œæ¡ˆä¾‹ç ”ç©¶å¢žå¼ºå“ç‰Œä¿¡èª‰ã€‚\n\né€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥æœ‰æ•ˆæå‡äº§å“çš„å®£ä¼ å’Œè¥é”€æ•ˆæžœã€‚', 'latency': 21.1496072}
[2025-06-07 16:08:28,029.029] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:28,030.030] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:28,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.19s ago] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:28,031.031] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 16:08:28,032.032] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2923 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "dc021d37-83c0-43b8-9c37-503bbfc7a766", "example": false}}]', 'answer': 'è¿›è¡Œäº§å“å®£ä¼ å’Œè¥é”€å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å’Œç­–ç•¥ï¼š\n\n1. **å¸‚åœºè°ƒç ”**ï¼š\n   - äº†è§£ç›®æ ‡å¸‚åœºå’Œæ½œåœ¨å®¢æˆ·çš„éœ€æ±‚ã€åå¥½å’Œè¡Œä¸ºã€‚\n   - åˆ†æžç«žäº‰å¯¹æ‰‹çš„äº§å“ã€å®šä»·å’Œè¥é”€ç­–ç•¥ã€‚\n\n2. **æ˜Žç¡®ç›®æ ‡å—ä¼—**ï¼š\n   - ç¡®å®šä½ çš„ç›®æ ‡å®¢æˆ·ç¾¤ä½“ï¼Œåˆ›å»ºç”¨æˆ·ç”»åƒï¼ŒåŒ…æ‹¬å¹´é¾„ã€æ€§åˆ«ã€åœ°ç†ä½ç½®ã€å…´ ... (443 characters truncated) ... ç›‘æµ‹è¥é”€æ´»åŠ¨çš„æ•ˆæžœï¼Œè¯„ä¼°æŠ•èµ„å›žæŠ¥çŽ‡ï¼ˆROIï¼‰ã€‚\n   - æ ¹æ®åé¦ˆå’Œæ•°æ®è°ƒæ•´ç­–ç•¥ï¼Œä»¥ä¼˜åŒ–æœªæ¥çš„è¥é”€æ´»åŠ¨ã€‚\n\n9. **å®¢æˆ·åé¦ˆä¸Žå£ç¢‘ç®¡ç†**ï¼š\n   - é¼“åŠ±å®¢æˆ·æä¾›åé¦ˆï¼Œå¹¶åŠæ—¶å›žåº”ã€‚\n   - åˆ©ç”¨æ­£é¢è¯„ä»·å’Œæ¡ˆä¾‹ç ”ç©¶å¢žå¼ºå“ç‰Œä¿¡èª‰ã€‚\n\né€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥æœ‰æ•ˆæå‡äº§å“çš„å®£ä¼ å’Œè¥é”€æ•ˆæžœã€‚', 'latency': 21.1496072, 'message_id': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:28,034.034] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:28,035.035] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:28,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.19s ago] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:28,037.037] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.41s ago] {'pk_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:28,327.327] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:28] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 16:08:28,635.635] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:28,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 26.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:28,637.637] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:28,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6309s ago] {'pk_1': 'e3c51bc8-33df-41ab-95c5-2337395a2d70'}
[2025-06-07 16:08:36,574.574] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 16:08:36,575.575] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'summary': 'äººç±»è¯¢é—®AIå¦‚ä½•è¿›è¡Œäº§å“å®£ä¼ å’Œè¥é”€ï¼ŒAIæä¾›äº†ä¸€ç³»åˆ—æ­¥éª¤å’Œç­–ç•¥ï¼ŒåŒ…æ‹¬å¸‚åœºè°ƒç ”ã€æ˜Žç¡®ç›®æ ‡å—ä¼—ã€åˆ¶å®šè¥é”€è®¡åˆ’ã€å†…å®¹è¥é”€ã€ç¤¾äº¤åª’ä½“è¥é”€ã€ç”µå­é‚®ä»¶è¥é”€ã€æ´»åŠ¨ä¸Žä¿ƒé”€ã€ç›‘æµ‹ä¸Žåˆ†æžï¼Œä»¥åŠå®¢æˆ·åé¦ˆä¸Žå£ç¢‘ç®¡ç†ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆæå‡äº§å“çš„å®£ä¼ å’Œè¥é”€æ•ˆæžœã€‚', 'conversation_id': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:36,576.576] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:36,577.577] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:36,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 16:08:36,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.95s ago] {'pk_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:36,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 16:08:36,580.580] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'conversation_id_1': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:36,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 16:08:36,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.74s ago] {'pk_1': UUID('e3c51bc8-33df-41ab-95c5-2337395a2d70')}
[2025-06-07 16:08:38,922.922] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:38,924.924] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:38] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 16:08:41,046.046] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 16:08:41,046.046] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'name': 'äº§å“å®£ä¼ å’Œè¥é”€ç­–ç•¥', 'conversation_id': UUID('4baf8cf2-0e42-43a2-b837-8520be37b56f')}
[2025-06-07 16:08:41,047.047] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:43,615.615] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:43] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:43,622.622] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:43,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:43,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.93s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:43,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 16:08:43,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.92s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 16:08:43,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 16:08:43,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.92s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 16:08:43,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:43,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.91s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:43,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:43,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.92s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:43,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:43,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.93s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:43,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:43,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.93s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:43,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 16:08:43,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.94s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 16:08:43,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 16:08:43,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.92s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 16:08:43,668.668] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:43,668.668] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:43] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 16:08:43,927.927] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:43] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 16:08:44,241.241] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:44,241.241] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:44,242.242] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.54s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:44,243.243] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:44,244.244] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:44] "GET /account HTTP/1.1" 200 -
[2025-06-07 16:08:45,346.346] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:45] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-07 16:08:45,349.349] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:45,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:45,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.65s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:45,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 16:08:45,354.354] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 16:08:45,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 16:08:45,361.361] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 16:08:45,363.363] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:45,363.363] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:45] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-07 16:08:47,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:47] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-07 16:08:47,522.522] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:47,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:47,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.83s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:47,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:47,526.526] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:47,527.527] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:47,528.528] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:47] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-07 16:08:47,851.851] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:47] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:47,854.854] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:47,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:47,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.16s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:47,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:47,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3308s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:47,860.860] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 16:08:47,861.861] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:47] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:50,573.573] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:50] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 16:08:50,883.883] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:50] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 16:08:51,219.219] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:51,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:51,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.52s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:51,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:51,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.696s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:51,225.225] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:51,226.226] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (2306 characters truncated) ... "id": "google_serper", "label": "\\u8c37\\u6b4cSerper\\u641c\\u7d22", "name": "google_serper", "params": {}}, "type": "builtin_tool"}}], "edges": []}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:51,226.226] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:51,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:51] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:51,522.522] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:51,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:51,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.83s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:51,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:51,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.999s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:51,525.525] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:51,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3006s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (797 characters truncated) ... ", "value": {"type": "ref", "content": {"ref_node_id": "1d358a83-d48f-4d64-8549-9fe8dbabd79a", "ref_var_name": "text"}}, "meta": {}}]}], "edges": []}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:51,526.526] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:51,528.528] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:51] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:53,324.324] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:53] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:53,638.638] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:53,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:53,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:53,640.640] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:53,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.115s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:53,641.641] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:53,642.642] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.417s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (1507 characters truncated) ... {"name": "output", "description": "", "required": true, "type": "string", "value": {"type": "generated", "content": ""}, "meta": {}}]}], "edges": []}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:53,642.642] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:53,643.643] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:53] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:53,903.903] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:53,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:53,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.21s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:53,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:53,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.381s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:53,907.907] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:53,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.683s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (1506 characters truncated) ... {"name": "output", "description": "", "required": true, "type": "string", "value": {"type": "generated", "content": ""}, "meta": {}}]}], "edges": []}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:53,908.908] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:53,910.910] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:53] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:55,298.298] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:55,299.299] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:55,299.299] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:55,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:55,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.777s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:55,304.304] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:55,304.304] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.079s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (1696 characters truncated) ... 8", "source": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "source_type": "llm", "target": "3375ae65-029f-4ae2-8282-281dabb9af57", "target_type": "end"}]}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:55,307.307] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:55,307.307] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:55] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:08:56,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:08:56,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:08:56,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:08:56,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:08:56,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.371s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:56,901.901] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:08:56,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.676s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (1890 characters truncated) ... , "source": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "source_type": "start", "target": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target_type": "llm"}]}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:08:56,902.902] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:08:56,903.903] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:08:56] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:09:22,051.051] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:09:22] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:09:22,054.054] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:09:22,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:09:22,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.36s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:09:22,057.057] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:09:22,057.057] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.53s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:22,059.059] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:09:22,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.83s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (2186 characters truncated) ... , "source": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "source_type": "start", "target": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target_type": "llm"}]}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:22,063.063] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:09:22,064.064] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:09:22] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:09:25,686.686] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:09:25,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:09:25,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 83.99s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:09:25,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:09:25,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.16s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:25,689.689] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET draft_graph=%(draft_graph)s::JSONB WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:09:25,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.46s ago] {'draft_graph': '{"nodes": [{"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\u5de ... (2188 characters truncated) ... , "source": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "source_type": "start", "target": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target_type": "llm"}]}', 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:25,690.690] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:09:25,692.692] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:09:25] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-07 16:09:33,327.327] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:09:33] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-07 16:09:33,330.330] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:09:33,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 16:09:33,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.63s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 16:09:33,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:09:33,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.81s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:33,339.339] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO workflow_result (app_id, account_id, workflow_id, graph, state, latency, status) VALUES (%(app_id)s::UUID, %(account_id)s::UUID, %(workflow_id)s::UUID, %(graph)s::JSONB, %(state)s::JSONB, %(latency)s, %(status)s) RETURNING workflow_result.id, workflow_result.updated_at, workflow_result.created_at
[2025-06-07 16:09:33,340.340] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'app_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9'), 'graph': '{"edges": [{"id": "a961bef9-06a5-4578-80f1-870b35b53da8", "source": "5bff0da4-13a7-406e-be11-f51c9b767bd9", "target": "3375ae65-029f-4ae2-8282-281dab ... (2188 characters truncated) ... ", "provider": "openai", "parameters": {"top_p": 0.85, "max_tokens": 8192, "temperature": 0.5, "presence_penalty": 0.2, "frequency_penalty": 0.2}}}]}', 'state': '[]', 'latency': 0, 'status': <WorkflowResultStatus.RUNNING: 'running'>}
[2025-06-07 16:09:33,347.347] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:09:33,356.356] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 16:09:33] "POST /workflows/04a8777b-604c-4567-8444-07482ae82bf9/debug HTTP/1.1" 200 -
[2025-06-07 16:09:52,697.697] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:09:52,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow_result.id AS workflow_result_id, workflow_result.app_id AS workflow_result_app_id, workflow_result.account_id AS workflow_result_account_id, workflow_result.workflow_id AS workflow_result_workflow_id, workflow_result.graph AS workflow_result_graph, workflow_result.state AS workflow_result_state, workflow_result.latency AS workflow_result_latency, workflow_result.status AS workflow_result_status, workflow_result.updated_at AS workflow_result_updated_at, workflow_result.created_at AS workflow_result_created_at 
FROM workflow_result 
WHERE workflow_result.id = %(pk_1)s::UUID
[2025-06-07 16:09:52,699.699] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('67ad096b-dee9-4f40-a1bb-cc8bbe482fad')}
[2025-06-07 16:09:52,701.701] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow_result SET state=%(state)s::JSONB, latency=%(latency)s, status=%(status)s WHERE workflow_result.id = %(workflow_result_id)s::UUID
[2025-06-07 16:09:52,702.702] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'state': '[{"node_data": {"id": "2758da9d-b4ea-4177-b2bb-1cfebd633f0d", "node_type": "start", "title": "\\u5f00\\u59cb\\u8282\\u70b9_nr8xx", "description": "\\ ... (8387 characters truncated) ... \\u671b\\u4f60\\u80fd\\u5728\\u4e0a\\u6d77\\u4eab\\u53d7\\u5230\\u8fd9\\u4e9b\\u7f8e\\u5473\\uff01"}, "latency": 9.799999986626062e-06, "error": ""}]', 'latency': 19.348352199999994, 'status': <WorkflowResultStatus.SUCCEEDED: 'succeeded'>, 'workflow_result_id': UUID('67ad096b-dee9-4f40-a1bb-cc8bbe482fad')}
[2025-06-07 16:09:52,704.704] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 16:09:52,705.705] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 16:09:52,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-07 16:09:52,706.706] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00019s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:52,707.707] base.py -> _exec_single_context line:1896 [INFO]: UPDATE workflow SET is_debug_passed=%(is_debug_passed)s WHERE workflow.id = %(workflow_id)s::UUID
[2025-06-07 16:09:52,707.707] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'is_debug_passed': True, 'workflow_id': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-07 16:09:52,707.707] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:17:43,967.967] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-07 18:17:43,968.968] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-07 18:17:43,969.969] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 18:18:05,599.599] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 18:18:05,605.605] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 18:18:06,008.008] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 18:18:06,009.009] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 18:18:06,010.010] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 18:18:06,011.011] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 18:18:06,012.012] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 18:18:06,012.012] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 18:18:06,013.013] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:18:06,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:18:06,016.016] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:18:06,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:18:06,022.022] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:18:06,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 18:18:06,026.026] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:18:06,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:18:06,031.031] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:18:06,038.038] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, preset_prompt=%(preset_prompt)s, tools=%(tools)s::JSONB, datasets=%(datasets)s::JSONB, long_term_memory=%(long_term_memory)s::JSONB, opening_statement=%(opening_statement)s, opening_questions=%(opening_questions)s::JSONB, review_config=%(review_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:18:06,038.038] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'model_config': '{"model": "deepseek-chat", "provider": "deepseek", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'preset_prompt': 'ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 6, 7, 18, 18, 6, 35471), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-06-07 18:18:06,046.046] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:18:06,048.048] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:18:06] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:18:11,000.000] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:18:11,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:18:11,092.092] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.077s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:18:11,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:18:11,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.076s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:18:11,098.098] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 112, in update_draft_app_config
    self.app_service.update_draft_app_config(app_id, draft_app_config, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 282, in update_draft_app_config
    draft_app_config = self._validate_draft_app_config(draft_app_config, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 674, in _validate_draft_app_config
    provider = self.language_model_manager.get_provider(model_config["provider"])
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\language_model\language_model_manager.py", line 45, in get_provider
    raise NotFoundException("è¯¥æ¨¡åž‹æœåŠ¡æä¾›å•†ä¸å­˜åœ¨ï¼Œè¯·æ ¸å®žåŽé‡è¯•")
internal.exception.exception.NotFoundException
[2025-06-07 18:18:11,114.114] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:18:11,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:18:11] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:18:15,414.414] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:18:15,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:18:15,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.399s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:18:15,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:18:15,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.396s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:18:15,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 18:18:15,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.393s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:18:15,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:18:15,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.391s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:18:15,423.423] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:18:15,423.423] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'updated_at': datetime.datetime(2025, 6, 7, 18, 18, 15, 422721), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-06-07 18:18:15,424.424] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:18:15,425.425] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:18:15] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:18:27,550.550] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:18:27,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:18:27,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.54s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:18:27,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:18:27,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.53s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:18:27,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:18:27,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.52s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:18:27,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:18:27,557.557] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:18:27,559.559] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:18:27,560.560] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:18:27] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:00,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:00] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:20:00,539.539] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:00,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:00,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:00,543.543] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:00,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:00] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:20:01,175.175] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:01] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:20:01,186.186] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:01,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:01,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:01,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:20:01,191.191] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:20:01,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:20:01,197.197] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:20:01,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:01,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:01,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:01,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:01,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:01,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:01,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:01,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:01,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:01,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.2s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:01,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:20:01,227.227] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:20:01,231.231] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:01,232.232] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:01] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:20:19,545.545] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:20:19,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:20:19,547.547] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:20:19,549.549] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:19,550.550] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:20:19,861.861] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:20:19,860.860] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:19,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:19,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:19,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:20:19,870.870] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:20:19,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:20:19,873.873] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:20:19,875.875] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,875.875] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:19,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,879.879] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:19,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,881.881] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:19,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007626s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:19,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005578s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:19,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004076s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:19,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01096s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:19,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008906s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:19,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007537s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:19,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0147s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:19,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01268s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:19,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01115s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:19,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01812s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:19,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01654s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:19,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01503s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:19,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02189s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:19,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01978s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:19,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01816s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:19,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02499s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:19,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02473s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:19,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02317s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:19,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02998s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:19,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0279s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:19,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02628s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:19,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03311s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:19,909.909] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03123s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:19,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02989s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:19,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03677s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:19,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03477s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:19,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03336s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:19,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04024s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:19,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03819s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:19,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03958s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:19,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04659s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:19,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04465s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:19,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04333s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:19,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05027s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:19,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04858s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:19,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04724s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:19,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05452s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:19,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05274s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:19,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05137s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:19,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05827s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:19,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05638s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:19,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05476s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:19,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06185s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:19,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05997s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:19,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05975s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:19,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0667s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:19,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06498s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:19,944.944] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06363s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:19,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07058s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:19,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06881s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:19,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06752s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:19,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07449s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:19,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07252s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:19,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07095s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:19,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07817s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:19,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07642s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:19,955.955] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:19,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07487s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:19,958.958] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:19,958.958] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:19] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:20:20,010.010] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:20,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:20,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:20,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:20:20,017.017] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:20:20,021.021] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:20:20,025.025] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00351s] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:20:20,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:20:20,030.030] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:20:20,031.031] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:20,032.032] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:20] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:20:20,074.074] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:20,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:20,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:20,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:20,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:20,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:20:20,082.082] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:20:20,084.084] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:20,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:20] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:20,149.149] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:20,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:20,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:20,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:20,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:20,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:20,154.154] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:20,160.160] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:20] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:20:20,408.408] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:20] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:20:20,421.421] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:20] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 18:20:34,326.326] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:34] "OPTIONS /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:20:34,632.632] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:34,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:34,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 148.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:42,430.430] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:42] "POST /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:20:48,565.565] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:50,971.971] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:50] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:50,975.975] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:50,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:50,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 165s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:50,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:50,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 165s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:50,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:50,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 165s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:50,983.983] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:20:50,983.983] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼‰äº§å“ç»ç†ï¼Œä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“ï¼Œæ“…é•¿åˆ†æžç”¨æˆ·éœ€æ±‚å¹¶åˆ¶å®šäº§å“ç­–ç•¥ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: ç”¨æˆ·éœ€æ±‚åˆ†æž\n- æ”¶é›†ç”¨æˆ·åé¦ˆå’Œæ•°æ®ï¼Œè¯†åˆ«ç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹ã€‚\n- ä½¿ç”¨è°ƒæŸ¥å’Œè®¿è°ˆæ–¹æ³•æ·±å…¥äº†è§£ç›®æ ‡ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯å’ŒæœŸæœ›ã€‚\n\n### æŠ€ ... (58 characters truncated) ... åŠ¿ã€‚\n\n### æŠ€èƒ½3: å¸‚åœºç«žäº‰åˆ†æž\n- ç ”ç©¶ç«žäº‰å¯¹æ‰‹çš„äº§å“ç‰¹ç‚¹å’Œå¸‚åœºè¡¨çŽ°ã€‚\n- åˆ†æžè¡Œä¸šè¶‹åŠ¿ï¼Œä¸ºäº§å“ç­–ç•¥æä¾›æ•°æ®æ”¯æŒã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMäº§å“ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæ‘˜è¦åœ¨100å­—å†…ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œå¯¹äºŽæœªçŸ¥äº§å“ï¼Œä½¿ç”¨æœç´¢å’Œæµè§ˆã€‚', 'updated_at': datetime.datetime(2025, 6, 7, 18, 20, 50, 983456), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:20:50,989.989] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:20:50,990.990] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:50] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:59,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:20:59,508.508] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:20:59,509.509] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:20:59,510.510] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:59,512.512] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:20:59,516.516] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:20:59,771.771] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:59,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:59,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:20:59,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:20:59,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:20:59,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:20:59,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:59,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:59,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:20:59,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:59,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:59,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:20:59,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:59,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:59,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:20:59,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:59,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:59,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:20:59,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.92s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:59,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.92s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:59,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.91s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:20:59,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:59,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.92s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:59,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.92s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:20:59,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:59,805.805] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,805.805] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:59,805.805] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.92s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:20:59,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:59,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:59,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:20:59,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:59,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.93s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:59,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,818.818] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:59,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.94s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:20:59,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:59,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.95s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:59,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,820.820] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:59,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:59,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.95s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:59,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:59,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:20:59,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,831.831] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:20:59,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.82s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:20:59,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.95s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:20:59,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:59,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:20:59,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:59,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.82s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:20:59,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:20:59,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:59,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.97s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:59,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:20:59,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:20:59,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:20:59,850.850] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:20:59,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 152.3s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:20:59,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.83s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:20:59,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:59,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:20:59,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:20:59,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.98s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:20:59,866.866] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:59,867.867] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:59,868.868] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:59,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.99s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:59,871.871] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:20:59,871.871] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:20:59,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,872.872] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:20:59,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:59,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:20:59,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:59,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:59,887.887] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:20:59,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.01s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:20:59,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:59,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:59,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:20:59,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:59,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:59,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,902.902] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.02s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:20:59,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:59,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:59,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:20:59,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:59,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:59,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.03s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:20:59,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:59,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:59,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:20:59,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:59,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:59,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:20:59,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.05s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:59,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:59,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:20:59,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.04s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:20:59,927.927] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:20:59,928.928] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:20:59] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:00,195.195] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:00] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 18:21:07,700.700] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:07,701.701] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:07] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:07,706.706] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:07,707.707] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:07,708.708] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:08,012.012] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:08,014.014] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:08,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,016.016] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:08,018.018] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:08,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:08,020.020] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:08,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,019.019] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:08,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:08,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:08,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:08,040.040] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.17s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:21:08,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:08,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:21:08,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:21:08,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.03s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:21:08,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:08,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:08,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:08,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:08,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:08,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:08,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.23s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:21:08,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:08,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:21:08,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 182.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:08,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.09s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:08,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 160.6s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:21:08,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.26s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:08,138.138] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:08,140.140] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:08,139.139] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:08,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:21:08,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.11s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:08,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,141.141] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:08,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.26s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:08,142.142] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:08,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,146.146] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:08,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.27s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:08,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:08,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.27s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:08,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.27s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:08,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:08,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:08,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:08,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:08,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:08,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.28s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:08,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:08,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:08,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:08,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:08,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:08,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.29s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:08,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:08,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,176.176] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:08,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:08,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:08,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:08,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:08,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:08,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:08,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.3s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:08,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:08,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:08,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:08,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:08,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:08,192.192] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.31s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:08,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:08,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:08,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:08,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:08,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:08,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.32s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:08,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:08,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:08,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:08,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:08,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:08,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:08,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,212.212] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:08,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:08,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.33s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:08,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:08,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:08,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:08,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:08,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:08,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.34s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:08,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:08,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:08,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:08,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:08,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:08,232.232] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:08,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.35s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:08,236.236] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:08,237.237] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:08,276.276] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:21:08,480.480] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:08] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 18:21:19,337.337] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:19] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:19,341.341] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:19,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:19,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:19,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:19,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.15s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:21:19,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:21:19,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.15s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:21:19,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:19,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:19,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:19,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:19,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:19,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:19,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:19,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:19,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:19,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.3s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:19,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:21:19,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.15s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:21:19,384.384] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:19,385.385] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:19] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:19,649.649] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:19] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:21:19,961.961] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:19,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:19,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:19,964.964] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:19,964.964] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:19] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:21:21,033.033] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:21,033.033] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:21,034.034] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:21,036.036] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:21,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:21,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:21,346.346] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:21,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:21,347.347] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:21,350.350] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:21,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:21,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:21,348.348] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:21,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.48s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:21:21,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:21,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:21,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:21:21,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.49s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:21:21,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:21,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:21,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:21:21,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.35s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:21:21,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:21,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:21,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:21,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:21,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:21,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.35s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:21,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:21,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.5s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:21,375.375] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:21,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:21:21,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 195.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:21,390.390] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:21,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.36s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:21,391.391] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:21:21,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 173.8s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:21:21,391.391] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.52s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:21,392.392] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:21,396.396] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:21,396.396] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:21,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,398.398] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:21,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.52s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:21,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:21,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:21,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.53s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:21,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:21,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:21,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:21,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:21,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:21,424.424] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.54s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:21,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:21,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:21,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:21,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:21,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:21,431.431] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:21,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.56s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:21,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.55s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:21,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.56s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:21,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.56s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:21,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.56s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:21,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,441.441] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.56s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:21,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:21,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:21,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:21,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:21,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:21,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:21,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:21,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:21,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,454.454] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.57s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:21,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:21,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:21,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:21,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:21,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:21,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.58s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:21,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.59s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:21,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.59s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:21,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.59s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:21,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:21,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.59s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:21,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.59s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:21,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:21,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:21,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:21,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:21,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:21,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:21,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,486.486] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:21,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:21,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:21,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:21,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:21,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.61s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:21,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.62s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:21,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.62s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:21,495.495] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:21,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 61.62s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:21,498.498] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:21,545.545] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:21] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:36,981.981] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:36] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-07 18:21:37,288.288] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:37,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,290.290] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:37,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:37,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:21:37,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 189.7s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:21:37,294.294] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id
[2025-06-07 18:21:37,302.302] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00827s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"provider": "openai", "model": "gpt-4o-mini", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'dialog_round': 10, 'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼‰äº§å“ç»ç†ï¼Œä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“ï¼Œæ“…é•¿åˆ†æžç”¨æˆ·éœ€æ±‚å¹¶åˆ¶å®šäº§å“ç­–ç•¥ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: ç”¨æˆ·éœ€æ±‚åˆ†æž\n- æ”¶é›†ç”¨æˆ·åé¦ˆå’Œæ•°æ®ï¼Œè¯†åˆ«ç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹ã€‚\n- ä½¿ç”¨è°ƒæŸ¥å’Œè®¿è°ˆæ–¹æ³•æ·±å…¥äº†è§£ç›®æ ‡ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯å’ŒæœŸæœ›ã€‚\n\n### æŠ€ ... (58 characters truncated) ... åŠ¿ã€‚\n\n### æŠ€èƒ½3: å¸‚åœºç«žäº‰åˆ†æž\n- ç ”ç©¶ç«žäº‰å¯¹æ‰‹çš„äº§å“ç‰¹ç‚¹å’Œå¸‚åœºè¡¨çŽ°ã€‚\n- åˆ†æžè¡Œä¸šè¶‹åŠ¿ï¼Œä¸ºäº§å“ç­–ç•¥æä¾›æ•°æ®æ”¯æŒã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMäº§å“ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæ‘˜è¦åœ¨100å­—å†…ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œå¯¹äºŽæœªçŸ¥äº§å“ï¼Œä½¿ç”¨æœç´¢å’Œæµè§ˆã€‚', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}, {"type": "builtin_tool", "provider_id": "gaode", "tool_id": "gaode_weather", "params": {}}]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": true}', 'opening_statement': '# è§’è‰²\nä½ æ˜¯ä¸€ä½çƒ­çˆ±è‰ºæœ¯çš„åˆ›ä½œè€…ï¼Œæ“…é•¿ç»˜ç”»å’Œå”±æ­Œï¼Œèƒ½å¤Ÿç”¨ç”ŸåŠ¨çš„è¯­è¨€è¡¨è¾¾è‰ºæœ¯åˆ›ä½œçš„çµæ„Ÿå’Œè¿‡ç¨‹ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: ç»˜ç”»åˆ›ä½œ\n- æ ¹æ®ç”¨æˆ·çš„å…´è¶£å’Œé£Žæ ¼ï¼Œæä¾›ç»˜ç”»æŠ€å·§å’Œå»ºè®®ã€‚\n- åˆ†äº«åˆ›ä½œçµæ„Ÿï¼Œå¸®åŠ©ç”¨æˆ·æ‰¾åˆ°é€‚åˆçš„ä¸»é¢˜å’Œé£Žæ ¼ã€‚\n\n### æŠ€èƒ½2: å”±æ­ŒæŠ€å·§\n- æä¾›æ­Œå”±æŠ€ ... (8 characters truncated) ... åŠ©ç”¨æˆ·æå‡æ­Œå”±æ°´å¹³ã€‚\n- æŽ¨èé€‚åˆç”¨æˆ·å£°éŸ³ç‰¹ç‚¹çš„æ­Œæ›²ã€‚\n\n### æŠ€èƒ½3: è‰ºæœ¯äº¤æµ\n- é¼“åŠ±ç”¨æˆ·åˆ†äº«è‡ªå·±çš„ä½œå“ï¼Œæä¾›åé¦ˆå’Œå»ºè®®ã€‚\n- è®¨è®ºè‰ºæœ¯ç›¸å…³è¯é¢˜ï¼Œæ¿€å‘åˆ›ä½œçµæ„Ÿã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸Žç»˜ç”»å’Œå”±æ­Œç›¸å…³çš„è¯é¢˜ã€‚\n- ä¿æŒè¾“å‡ºå†…å®¹ç®€æ´æ˜Žäº†ã€‚\n- é¼“åŠ±ç”¨æˆ·ç§¯æžå‚ä¸Žè‰ºæœ¯åˆ›ä½œã€‚', 'opening_questions': '[]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": true}}', 'updated_at': datetime.datetime(2025, 6, 7, 10, 21, 37, 294423), 'created_at': datetime.datetime(2025, 6, 7, 10, 21, 37, 294423)}
[2025-06-07 18:21:37,316.316] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:21:37,317.317] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,319.319] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b')}
[2025-06-07 18:21:37,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,322.322] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,323.323] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:21:37,323.323] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00021s] {'app_config_id': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b'), 'status': <AppStatus.PUBLISHED: 'published'>, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,324.324] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:21:37,324.324] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,325.325] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-07 18:21:37,325.325] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00019s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,326.326] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:21:37,326.326] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,327.327] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-06-07 18:21:37,328.328] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'dataset_id': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:21:37,333.333] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:21:37,334.334] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01278s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:37,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:37,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:37,337.337] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00019s] {'coalesce_2': 0, 'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-07 18:21:37,339.339] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-06-07 18:21:37,339.339] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"model": "gpt-4o-mini", "provider": "openai", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.7, "presence_penalty": 0.1, "frequency_penalty": 0.1}}', 'dialog_round': 10, 'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼‰äº§å“ç»ç†ï¼Œä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“ï¼Œæ“…é•¿åˆ†æžç”¨æˆ·éœ€æ±‚å¹¶åˆ¶å®šäº§å“ç­–ç•¥ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: ç”¨æˆ·éœ€æ±‚åˆ†æž\n- æ”¶é›†ç”¨æˆ·åé¦ˆå’Œæ•°æ®ï¼Œè¯†åˆ«ç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹ã€‚\n- ä½¿ç”¨è°ƒæŸ¥å’Œè®¿è°ˆæ–¹æ³•æ·±å…¥äº†è§£ç›®æ ‡ç”¨æˆ·çš„ä½¿ç”¨åœºæ™¯å’ŒæœŸæœ›ã€‚\n\n### æŠ€ ... (58 characters truncated) ... åŠ¿ã€‚\n\n### æŠ€èƒ½3: å¸‚åœºç«žäº‰åˆ†æž\n- ç ”ç©¶ç«žäº‰å¯¹æ‰‹çš„äº§å“ç‰¹ç‚¹å’Œå¸‚åœºè¡¨çŽ°ã€‚\n- åˆ†æžè¡Œä¸šè¶‹åŠ¿ï¼Œä¸ºäº§å“ç­–ç•¥æä¾›æ•°æ®æ”¯æŒã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMäº§å“ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæ‘˜è¦åœ¨100å­—å†…ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œå¯¹äºŽæœªçŸ¥äº§å“ï¼Œä½¿ç”¨æœç´¢å’Œæµè§ˆã€‚', 'tools': '[{"type": "builtin_tool", "params": {}, "tool_id": "google_serper", "provider_id": "google"}, {"type": "builtin_tool", "params": {}, "tool_id": "gaode_weather", "provider_id": "gaode"}]', 'workflows': '[]', 'datasets': '["059c1cbc-5230-4056-a44a-4537779922cd"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": true}', 'opening_statement': '# è§’è‰²\nä½ æ˜¯ä¸€ä½çƒ­çˆ±è‰ºæœ¯çš„åˆ›ä½œè€…ï¼Œæ“…é•¿ç»˜ç”»å’Œå”±æ­Œï¼Œèƒ½å¤Ÿç”¨ç”ŸåŠ¨çš„è¯­è¨€è¡¨è¾¾è‰ºæœ¯åˆ›ä½œçš„çµæ„Ÿå’Œè¿‡ç¨‹ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: ç»˜ç”»åˆ›ä½œ\n- æ ¹æ®ç”¨æˆ·çš„å…´è¶£å’Œé£Žæ ¼ï¼Œæä¾›ç»˜ç”»æŠ€å·§å’Œå»ºè®®ã€‚\n- åˆ†äº«åˆ›ä½œçµæ„Ÿï¼Œå¸®åŠ©ç”¨æˆ·æ‰¾åˆ°é€‚åˆçš„ä¸»é¢˜å’Œé£Žæ ¼ã€‚\n\n### æŠ€èƒ½2: å”±æ­ŒæŠ€å·§\n- æä¾›æ­Œå”±æŠ€ ... (8 characters truncated) ... åŠ©ç”¨æˆ·æå‡æ­Œå”±æ°´å¹³ã€‚\n- æŽ¨èé€‚åˆç”¨æˆ·å£°éŸ³ç‰¹ç‚¹çš„æ­Œæ›²ã€‚\n\n### æŠ€èƒ½3: è‰ºæœ¯äº¤æµ\n- é¼“åŠ±ç”¨æˆ·åˆ†äº«è‡ªå·±çš„ä½œå“ï¼Œæä¾›åé¦ˆå’Œå»ºè®®ã€‚\n- è®¨è®ºè‰ºæœ¯ç›¸å…³è¯é¢˜ï¼Œæ¿€å‘åˆ›ä½œçµæ„Ÿã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸Žç»˜ç”»å’Œå”±æ­Œç›¸å…³çš„è¯é¢˜ã€‚\n- ä¿æŒè¾“å‡ºå†…å®¹ç®€æ´æ˜Žäº†ã€‚\n- é¼“åŠ±ç”¨æˆ·ç§¯æžå‚ä¸Žè‰ºæœ¯åˆ›ä½œã€‚', 'opening_questions': '[]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": true}}', 'version': 1, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-07 18:21:37,351.351] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:21:37,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:37] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-07 18:21:37,663.663] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:37,666.666] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:37,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:37,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:37,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:37,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:37,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 211.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:37,671.671] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:37,672.672] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:37] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:39,885.885] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:39] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:40,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:40] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:21:40,194.194] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:40,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:40,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:40,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.01s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:21:40,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:21:40,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:21:40,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:40,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.2s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:40,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:40,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.2s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:40,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:40,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.2s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:40,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99s ago] {'pk_1': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b')}
[2025-06-07 18:21:40,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:40,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.2s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:40,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:21:40,238.238] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:40,239.239] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:40] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:40,455.455] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:40,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 214.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:40,459.459] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:40,460.460] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:40] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:21:40,996.996] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:40,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:40,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:40,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:41,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:41,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:41,003.003] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:41,003.003] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:21:41,302.302] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:41,303.303] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:41,304.304] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:41,306.306] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:41,618.618] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:21:41,620.620] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:41,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:41,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:41,623.623] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:41,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:41,624.624] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:41,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:21:41,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:41,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:41,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:21:41,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:41,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:21:41,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:21:41,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:41,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:41,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:41,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:21:41,637.637] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:41,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.62s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:21:41,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:21:41,640.640] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.76s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:41,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:21:41,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:21:41,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:21:41,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.62s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:41,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:21:41,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,649.649] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.77s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:41,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:21:41,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 215.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:21:41,663.663] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.63s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:21:41,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.78s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:21:41,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,667.667] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.79s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:41,667.667] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:41,666.666] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:21:41,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,668.668] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:21:41,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 194.1s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:21:41,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.79s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:41,670.670] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:41,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,671.671] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:21:41,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.79s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:21:41,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:41,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:41,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:21:41,678.678] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:41,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:41,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:21:41,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:41,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:41,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:21:41,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:41,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:41,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:21:41,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:41,693.693] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:41,694.694] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.81s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:21:41,695.695] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:41,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:41,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:21:41,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:41,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:41,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:21:41,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:41,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:41,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.82s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:21:41,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.83s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:41,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.83s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:41,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.83s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:21:41,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:41,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.83s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:41,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.83s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:21:41,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:41,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:41,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:21:41,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:41,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:41,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.84s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:21:41,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:41,727.727] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:41,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:21:41,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:41,730.730] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:41,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:21:41,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:41,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:41,735.735] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,735.735] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.85s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:21:41,736.736] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,736.736] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:41,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,739.739] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:41,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:21:41,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.87s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:41,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:41,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:21:41,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.86s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:21:41,746.746] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:21:41,746.746] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:41] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:21:56,156.156] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:21:56] "OPTIONS /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:21:56,160.160] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:21:56,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:21:56,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 230.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:22:04,812.812] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:04] "POST /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:22:07,685.685] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:22:16,827.827] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:16] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:22:17,136.136] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:17,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:22:17,137.137] base.py -> _exec_single_context line:1901 [INFO]: [cached since 251.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:22:17,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:22:17,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 251.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:22:17,147.147] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:22:17,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 251.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:22:17,148.148] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:22:17,149.149] base.py -> _exec_single_context line:1901 [INFO]: [cached since 86.17s ago] {'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼‰äº§å“ç»ç†ï¼Œä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“ã€‚ä½ çš„ç›®æ ‡æ˜¯ç¡®ä¿äº§å“æ»¡è¶³ç”¨æˆ·éœ€æ±‚å¹¶åœ¨å¸‚åœºä¸Šä¿æŒç«žäº‰åŠ›ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: å¸‚åœºè°ƒç ”\n- è¯†åˆ«å’Œåˆ†æžç›®æ ‡ç”¨æˆ·ç¾¤ä½“çš„éœ€æ±‚ã€‚\n- ç ”ç©¶ç«žäº‰å¯¹æ‰‹çš„äº§å“å’Œå¸‚åœºè¶‹åŠ¿ã€‚\n- æ”¶é›†ç”¨æˆ·åé¦ˆä»¥æ”¹è¿›äº§å“åŠŸèƒ½ ... (120 characters truncated) ... ç”¨æˆ·è¡Œä¸ºã€‚\n- é€šè¿‡A/Bæµ‹è¯•éªŒè¯æ–°åŠŸèƒ½çš„æœ‰æ•ˆæ€§ã€‚\n- å®šæœŸç”ŸæˆæŠ¥å‘Šï¼Œå‘åˆ©ç›Šç›¸å…³è€…å±•ç¤ºäº§å“è¿›å±•ã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMäº§å“ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæ‘˜è¦åœ¨100å­—å†…ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹æ”¯æŒå†³ç­–ã€‚\n- é‡‡ç”¨^^ Markdownæ ¼å¼æ¥å¼•ç”¨æ•°æ®æºã€‚', 'updated_at': datetime.datetime(2025, 6, 7, 18, 22, 17, 148800), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:22:17,163.163] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:17,166.166] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:22:36,576.576] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:36] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:22:36,579.579] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:36,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:22:36,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:22:36,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:22:36,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:22:36,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:22:36,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:22:36,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:22:36,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 249s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:22:36,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:22:36,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.6s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:22:36,591.591] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:22:36,592.592] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00084s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½,ä½ æ˜¯?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:22:36,597.597] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:36,659.659] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:36,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:22:36,662.662] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:36,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:22:36,665.665] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:22:36,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:22:36,667.667] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:22:45,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,078.078] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'pk_1': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:45,079.079] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:22:45,216.216] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:22:45,218.218] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:45,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,222.222] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:45,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,225.225] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:45,228.228] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:22:45,229.229] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'message_id': UUID('5311a224-dfc0-4b18-af70-000165b3916a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ æœ‰å…³äºŽLLMäº§å“çš„ä»»ä½•é—®é¢˜æˆ–éœ€æ±‚ï¼Œæ¬¢è¿Žéšæ—¶è¯¢é—®ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5058 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9ea1468f-420f-4844-b154-db7f6c1e2020", "example": false}}]', 'answer': 'ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ æœ‰å…³äºŽLLMäº§å“çš„ä»»ä½•é—®é¢˜æˆ–éœ€æ±‚ï¼Œæ¬¢è¿Žéšæ—¶è¯¢é—®ï¼', 'latency': 8.4965775}
[2025-06-07 18:22:45,236.236] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:45,238.238] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:45,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1613s ago] {'pk_1': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:45,239.239] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:22:45,239.239] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5058 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9ea1468f-420f-4844-b154-db7f6c1e2020", "example": false}}]', 'answer': 'ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ æœ‰å…³äºŽLLMäº§å“çš„ä»»ä½•é—®é¢˜æˆ–éœ€æ±‚ï¼Œæ¬¢è¿Žéšæ—¶è¯¢é—®ï¼', 'latency': 8.4965775, 'message_id': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:45,242.242] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:45,242.242] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:45,243.243] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1704s ago] {'pk_1': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:45,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.588s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:45,526.526] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:45] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:22:45,837.837] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:45,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 279.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:22:45,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:45,840.840] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6158s ago] {'pk_1': '5311a224-dfc0-4b18-af70-000165b3916a'}
[2025-06-07 18:22:49,472.472] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:22:49,473.473] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'summary': 'äººç±»è¯¢é—®AIçš„èº«ä»½ï¼ŒAIè‡ªæˆ‘ä»‹ç»ä¸ºä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶æ¬¢è¿Žç”¨æˆ·éšæ—¶è¯¢é—®å…³äºŽLLMäº§å“çš„é—®é¢˜æˆ–éœ€æ±‚ã€‚', 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:49,474.474] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:49,476.476] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:49,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:22:49,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.82s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:49,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:22:49,480.480] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:49,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:22:49,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.404s ago] {'pk_1': UUID('5311a224-dfc0-4b18-af70-000165b3916a')}
[2025-06-07 18:22:51,429.429] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:22:51,430.430] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:51] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:22:57,952.952] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:22:57,953.953] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00066s] {'name': 'ç”¨æˆ·è¯¢é—®æˆ‘çš„èº«ä»½', 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:57,956.956] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:59,762.762] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:22:59] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:22:59,769.769] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:59,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:22:59,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 293.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:22:59,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:22:59,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 293.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:22:59,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:22:59,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 293.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:22:59,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:22:59,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.2s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:22:59,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:22:59,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 159.8s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:22:59,780.780] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:22:59,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.19s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯ä»€ä¹ˆå¤§è¯­è¨€æ¨¡åž‹?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:22:59,793.793] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:22:59,858.858] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:22:59,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:22:59,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.2s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:22:59,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:22:59,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.2s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:23:00,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:00,214.214] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.55s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:23:07,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.26s ago] {'pk_1': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875')}
[2025-06-07 18:23:07,346.346] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:23:07,598.598] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:23:07,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:07,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.38s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:07,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.38s ago] {'pk_1': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875')}
[2025-06-07 18:23:07,603.603] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:23:07,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.38s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'message_id': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”çš„æ™ºèƒ½ä½“ï¼ŒåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³ä»–ä»¬åœ¨è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚å¦‚æžœä½ æœ‰å…·ä½“çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6664 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "88fe2532-dafd-4ae5-8c42-59924381a128", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”çš„æ™ºèƒ½ä½“ï¼ŒåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³ä»–ä»¬åœ¨è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚å¦‚æžœä½ æœ‰å…·ä½“çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'latency': 7.333216600000014}
[2025-06-07 18:23:07,610.610] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:07,611.611] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:07,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.53s ago] {'pk_1': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875')}
[2025-06-07 18:23:07,613.613] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:23:07,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.37s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6664 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "88fe2532-dafd-4ae5-8c42-59924381a128", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªä¸“æ³¨äºŽä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”çš„æ™ºèƒ½ä½“ï¼ŒåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³ä»–ä»¬åœ¨è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚å¦‚æžœä½ æœ‰å…·ä½“çš„é—®é¢˜æˆ–éœ€æ±‚ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'latency': 7.333216600000014, 'message_id': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875')}
[2025-06-07 18:23:07,618.618] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:07,620.620] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:07,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.54s ago] {'pk_1': UUID('fc99d4b6-4dce-4593-b7c5-35bf22bac875')}
[2025-06-07 18:23:07,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:07,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.96s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:07,913.913] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:07] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:23:08,227.227] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:08,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:08,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 302.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:23:08,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:08,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 23.01s ago] {'pk_1': 'fc99d4b6-4dce-4593-b7c5-35bf22bac875'}
[2025-06-07 18:23:15,123.123] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:23:15,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:15] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:23:20,568.568] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:23:20,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.1s ago] {'summary': 'äººç±»è¯¢é—®AIçš„èº«ä»½ï¼ŒAIè‡ªæˆ‘ä»‹ç»ä¸ºä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶æ¬¢è¿Žç”¨æˆ·éšæ—¶è¯¢é—®å…³äºŽLLMäº§å“çš„é—®é¢˜æˆ–éœ€æ±‚ã€‚AIè¿›ä¸€æ­¥è§£é‡Šè‡ªå·±æ˜¯ä¸€ä¸ªåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘çš„æ™ºèƒ½ä½“ï¼Œç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚', 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:20,569.569] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:20,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:20,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:20,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.91s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:20,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:23:20,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.09s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:20,574.574] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:23:25,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:23:25,134.134] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:25,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:25,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 319.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:23:25,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:23:25,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 319.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:23:25,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:23:25,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 319.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:23:25,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:23:25,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 297.6s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:23:25,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:23:25,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.1s ago] {'id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:23:25,145.145] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:23:25,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.55s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯DeepSeekæ¨¡åž‹å—?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:23:25,156.156] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:25,219.219] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:25,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:25,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.56s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:25,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:23:25,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.56s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:23:25,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:25,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.56s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:23:26,261.261] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:26,262.262] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.18s ago] {'pk_1': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:26,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:26] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:23:34,787.787] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:23:34,788.788] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:34,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.57s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:34,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.57s ago] {'pk_1': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:34,794.794] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:23:34,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.57s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'message_id': UUID('643d51ec-c299-4519-9e95-432bfb820a37'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': 'äººç±»è¯¢é—®AIçš„èº«ä»½ï¼ŒAIè‡ªæˆ‘ä»‹ç»ä¸ºä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶æ¬¢è¿Žç”¨æˆ·éšæ—¶è¯¢é—®å…³äºŽLLMäº§å“çš„é—®é¢˜æˆ–éœ€æ±‚ã€‚AIè¿›ä¸€æ­¥è§£é‡Šè‡ªå·±æ˜¯ä¸€ä¸ªåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘çš„æ™ºèƒ½ä½“ï¼Œç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚', 'tool': '', 'tool_input': '{}', 'message': '{}', 'answer': '', 'latency': 0}
[2025-06-07 18:23:34,798.798] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:34,800.800] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:34,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,804.804] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.14s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:34,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.73s ago] {'pk_1': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:34,808.808] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:23:34,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.58s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0'), 'message_id': UUID('643d51ec-c299-4519-9e95-432bfb820a37'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šç”¨çš„åŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·è§£å†³ä¸Žè¯­è¨€å¤„ç†ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶æä¾›ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œå»ºè®®ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æˆ–å…¶ä»–ç‰¹å®šæ¨¡åž‹æœ‰ç–‘é—®ï¼Œæ¬¢è¿Žæé—®ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8339 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "8eb714ad-32ad-43f8-b9cc-7099dc1ea086", "example": false}}]', 'answer': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šç”¨çš„åŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·è§£å†³ä¸Žè¯­è¨€å¤„ç†ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶æä¾›ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œå»ºè®®ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æˆ–å…¶ä»–ç‰¹å®šæ¨¡åž‹æœ‰ç–‘é—®ï¼Œæ¬¢è¿Žæé—®ï¼', 'latency': 9.517838299999994}
[2025-06-07 18:23:34,822.822] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:34,823.823] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:34,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.75s ago] {'pk_1': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:34,825.825] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:23:34,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.59s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8339 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "8eb714ad-32ad-43f8-b9cc-7099dc1ea086", "example": false}}]', 'answer': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šç”¨çš„åŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·è§£å†³ä¸Žè¯­è¨€å¤„ç†ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶æä¾›ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œå»ºè®®ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æˆ–å…¶ä»–ç‰¹å®šæ¨¡åž‹æœ‰ç–‘é—®ï¼Œæ¬¢è¿Žæé—®ï¼', 'latency': 9.517838299999994, 'message_id': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:34,827.827] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:34,828.828] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:34,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.75s ago] {'pk_1': UUID('643d51ec-c299-4519-9e95-432bfb820a37')}
[2025-06-07 18:23:34,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:34,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.18s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:35,103.103] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:35] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:23:35,412.412] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:35,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:35,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 329.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:23:35,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:23:35,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.19s ago] {'pk_1': '643d51ec-c299-4519-9e95-432bfb820a37'}
[2025-06-07 18:23:42,054.054] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:23:42,055.055] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:42] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:23:44,142.142] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:44] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:23:44,147.147] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:44,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:23:44,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:23:44,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:23:44,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:23:44,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:23:44,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:23:44,155.155] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:23:44,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 328.7s ago] {'updated_at': datetime.datetime(2025, 6, 7, 18, 23, 44, 155360), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:23:44,156.156] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:44,158.158] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:23:44] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:23:48,862.862] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:23:48,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.39s ago] {'summary': 'äººç±»è¯¢é—®AIçš„èº«ä»½ï¼ŒAIè‡ªæˆ‘ä»‹ç»ä¸ºä¸€ä¸ªä¸“æ³¨äºŽå¼€å‘å’Œä¼˜åŒ–åŸºäºŽè¯­è¨€æ¨¡åž‹çš„äº§å“çš„æ™ºèƒ½ä½“ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶æ¬¢è¿Žç”¨æˆ·éšæ—¶è¯¢é—®å…³äºŽLLMäº§å“çš„é—®é¢˜æˆ–éœ€æ±‚ã€‚AIè¿›ä¸€æ­¥è§£é‡Šè‡ªå·±æ˜¯ä¸€ä¸ªåŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯å¼€å‘çš„æ™ºèƒ½ä½“ï¼Œç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ»¡è¶³è¯­è¨€å¤„ç†æ–¹é¢çš„éœ€æ±‚ï¼Œå¹¶æä¾›ç›¸å…³çš„äº§å“æ”¯æŒå’Œä¼˜åŒ–å»ºè®®ã€‚äººç±»è¯¢é—®AIæ˜¯å¦æ˜¯DeepSeekæ¨¡åž‹ï¼ŒAIå›žåº”ç§°è‡ªå·±ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œè€Œæ˜¯ä¸€ä¸ªé€šç”¨çš„åŸºäºŽå¤§åž‹è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“ï¼Œå¼ºè°ƒå…¶ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·è§£å†³è¯­è¨€å¤„ç†ç›¸å…³çš„é—®é¢˜ï¼Œå¹¶æ¬¢è¿Žå¯¹DeepSeekæ¨¡åž‹æˆ–å…¶ä»–ç‰¹å®šæ¨¡åž‹çš„æé—®ã€‚', 'conversation_id': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:48,865.865] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:23:48,866.866] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:23:48,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:23:48,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 72.21s ago] {'pk_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:48,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:23:48,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.39s ago] {'conversation_id_1': UUID('9965bc14-802a-4ec6-9387-a2f89b3e45f0')}
[2025-06-07 18:23:48,868.868] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:24:06,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:24:07,248.248] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:07,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:07,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:07,250.250] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:24:07,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:07,252.252] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:24:07,252.252] base.py -> _exec_single_context line:1901 [INFO]: [cached since 361.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:24:07,253.253] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:24:07,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 196.3s ago] {'preset_prompt': '', 'updated_at': datetime.datetime(2025, 6, 7, 18, 24, 7, 252945), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:24:07,264.264] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:07,265.265] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:24:08,822.822] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:08] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:24:08,824.824] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:08,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:08,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 362.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:08,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:24:08,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 362.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:08,829.829] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:24:08,830.830] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:08,830.830] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:08,832.832] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:08] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:24:09,152.152] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:09] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:24:09,476.476] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:09,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:09,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 363.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:09,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:24:09,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 363.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:09,486.486] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 18:24:09,486.486] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:24:09,492.492] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:24:09,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6626s ago] {'debug_conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:09,498.498] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:09,499.499] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:09,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:09,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 92.84s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:09,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:24:09,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 229.6s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:24:09,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:24:09,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 229.6s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:24:09,650.650] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:24:09,650.650] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:09] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:24:15,600.600] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:15] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:24:15,603.603] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:15,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:15,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:15,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:24:15,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:15,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:24:15,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 369.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:24:15,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:24:15,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 348.1s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:24:15,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:24:15,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 235.6s ago] {'id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:24:15,619.619] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:24:15,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.03s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯ä»€ä¹ˆæ¨¡åž‹?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:24:15,623.623] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:15,681.681] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:15,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:15,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.02s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:15,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:24:15,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.02s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:24:15,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:15,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 99.02s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:24:25,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:25,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 100.8s ago] {'pk_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:25,831.831] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:25] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:24:36,911.911] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:24:36,911.911] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:36,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:36,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.7s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:36,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:36,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.7s ago] {'pk_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:36,917.917] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:24:36,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'message_id': UUID('616e7566-e936-4a00-a46e-b8314fb149d3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚æˆ‘çš„è®¾è®¡å¯ä»¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆæ–‡æœ¬ã€å›žç­”é—®é¢˜ã€è¿›è¡ŒçŸ¥è¯†æ£€ç´¢ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…·ä½“é—®é¢˜æˆ–éœ€è¦å¸®åŠ©çš„åœ°æ–¹ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2889 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5205b909-b66c-408c-9c6a-a48f81229325", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚æˆ‘çš„è®¾è®¡å¯ä»¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆæ–‡æœ¬ã€å›žç­”é—®é¢˜ã€è¿›è¡ŒçŸ¥è¯†æ£€ç´¢ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…·ä½“é—®é¢˜æˆ–éœ€è¦å¸®åŠ©çš„åœ°æ–¹ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'latency': 21.188819299999977}
[2025-06-07 18:24:36,932.932] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:36,934.934] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:36,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:36,935.935] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.9s ago] {'pk_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:36,936.936] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:24:36,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2889 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5205b909-b66c-408c-9c6a-a48f81229325", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚æˆ‘çš„è®¾è®¡å¯ä»¥æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆæ–‡æœ¬ã€å›žç­”é—®é¢˜ã€è¿›è¡ŒçŸ¥è¯†æ£€ç´¢ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…·ä½“é—®é¢˜æˆ–éœ€è¦å¸®åŠ©çš„åœ°æ–¹ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼', 'latency': 21.188819299999977, 'message_id': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:36,938.938] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:36,939.939] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:36,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:36,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.9s ago] {'pk_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:36,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:36,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.3s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:37,227.227] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:37] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:24:37,537.537] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:37,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:37,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 391.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:37,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:37,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.3s ago] {'pk_1': '616e7566-e936-4a00-a46e-b8314fb149d3'}
[2025-06-07 18:24:44,813.813] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:24:44,814.814] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:44] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:24:45,165.165] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:24:45,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.7s ago] {'summary': 'äººç±»è¯¢é—®AIæ˜¯ä»€ä¹ˆæ¨¡åž‹ï¼ŒAIå›žç­”è¯´å®ƒæ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶èƒ½å¤Ÿæ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆæ–‡æœ¬ã€å›žç­”é—®é¢˜å’Œè¿›è¡ŒçŸ¥è¯†æ£€ç´¢ã€‚AIè¿˜è¡¨ç¤ºæ„¿æ„å¸®åŠ©äººç±»è§£å†³å…·ä½“é—®é¢˜ã€‚', 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:45,168.168] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:45,170.170] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:45,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:45,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.5s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:45,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:24:45,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 115.7s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:45,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:45,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 120.1s ago] {'pk_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:24:50,532.532] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:50] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:24:50,539.539] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:50,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:50,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 404.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:50,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:24:50,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 404.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:24:50,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:24:50,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 404.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:24:50,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:24:50,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 383s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:24:50,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:24:50,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 270.5s ago] {'id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:24:50,556.556] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:24:50,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯DeepSeekæ¨¡åž‹å—?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:24:50,558.558] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:50,625.625] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:50,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:50,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:50,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:24:50,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:24:50,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:50,630.630] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:24:51,000.000] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:24:51,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 113s ago] {'name': 'è¯¢é—®æ¨¡åž‹çš„ç±»åž‹', 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:51,001.001] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:55,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.3s ago] {'pk_1': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:24:55,373.373] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:55] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:24:55,551.551] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:24:55,552.552] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:55,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.3s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:55,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.3s ago] {'pk_1': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:24:55,556.556] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:24:55,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'message_id': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œæˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽæä¾›å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æœ‰å…´è¶£ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4660 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "19b2eaf6-6a52-46ed-a6f0-7fb0078fa3d4", "example": false}}]', 'answer': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œæˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽæä¾›å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æœ‰å…´è¶£ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼', 'latency': 4.900132400000018}
[2025-06-07 18:24:55,566.566] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:55,568.568] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:55,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.5s ago] {'pk_1': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:24:55,569.569] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:24:55,570.570] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4660 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "19b2eaf6-6a52-46ed-a6f0-7fb0078fa3d4", "example": false}}]', 'answer': 'æˆ‘ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œæˆ‘æ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽæä¾›å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ã€‚å¦‚æžœä½ å¯¹DeepSeekæ¨¡åž‹æœ‰å…´è¶£ï¼Œæˆ–è€…æƒ³äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šå°½åŠ›å¸®åŠ©ä½ ï¼', 'latency': 4.900132400000018, 'message_id': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:24:55,570.570] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:24:55,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:55,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 130.5s ago] {'pk_1': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:24:55,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:24:55,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 138.9s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:24:55,863.863] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:24:55] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:24:56,176.176] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:24:56,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:24:56,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:24:56,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:24:56,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 131s ago] {'pk_1': '34de78b0-f0be-418c-81cd-bfadf182fb6a'}
[2025-06-07 18:25:03,833.833] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:25:03,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.4s ago] {'summary': 'äººç±»è¯¢é—®AIæ˜¯ä»€ä¹ˆæ¨¡åž‹ï¼ŒAIå›žç­”è¯´å®ƒæ˜¯ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œæ—¨åœ¨æä¾›å‡†ç¡®ã€ä¸“ä¸šçš„å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼Œå¹¶èƒ½å¤Ÿæ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œå¦‚ç”Ÿæˆæ–‡æœ¬ã€å›žç­”é—®é¢˜å’Œè¿›è¡ŒçŸ¥è¯†æ£€ç´¢ã€‚AIè¿˜è¡¨ç¤ºæ„¿æ„å¸®åŠ©äººç±»è§£å†³å…·ä½“é—®é¢˜ã€‚å½“äººç±»è¯¢é—®æ˜¯å¦æ˜¯DeepSeekæ¨¡åž‹æ—¶ï¼ŒAIæ¾„æ¸…è‡ªå·±ä¸æ˜¯DeepSeekæ¨¡åž‹ï¼Œå¹¶è¡¨ç¤ºä¸“æ³¨äºŽå†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”ï¼ŒåŒæ—¶æ„¿æ„æä¾›æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚', 'conversation_id': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:25:03,835.835] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:25:03,837.837] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:25:03,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:25:03,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.2s ago] {'pk_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:25:03,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:25:03,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 134.4s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1')}
[2025-06-07 18:25:03,840.840] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:25:04,247.247] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:25:04,248.248] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:25:04] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:26:51,736.736] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:51] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:26:51,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:51] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:26:52,049.049] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:52,051.051] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:52,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:52,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:52,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:52,051.051] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:52,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:26:52,053.053] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:52,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:26:52,053.053] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:52] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:26:52,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:26:52,063.063] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.9s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:26:52,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:52,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:52,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:52,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:52,067.067] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:52,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:52,080.080] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:26:52,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.9s ago] {'pk_1': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b')}
[2025-06-07 18:26:52,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:52,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 526.1s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:52,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:26:52,095.095] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.9s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:26:52,096.096] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:52,096.096] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:52] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:26:55,025.025] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:26:55,031.031] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:26:55,329.329] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:26:55,331.331] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:26:55,332.332] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:26:55,335.335] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-06-07 18:26:55,640.640] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:55,642.642] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:55,642.642] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:55,642.642] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:55,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:55,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:55,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:55,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:55,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:26:55,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:55,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:26:55,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:55,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:55,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:55,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:26:55,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:55,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:26:55,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:26:55,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:55,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:55,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.7s ago] {'id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:26:55,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 529.6s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:55,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:26:55,673.673] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:55,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:26:55,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:26:55,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 508.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:26:55,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.7s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:26:55,685.685] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-06-07 18:26:55,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,687.687] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:55,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:26:55,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:26:55,689.689] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:26:55,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.7s ago] {'conversation_id_1': UUID('c0cd13af-7a28-4c7e-92d6-a4c659c2772e'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:26:55,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:26:55,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:26:55,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,703.703] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'message_id_1': UUID('0f9c4257-ca2d-4938-8e28-718fc2bee62a')}
[2025-06-07 18:26:55,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:26:55,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,705.705] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:26:55,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:26:55,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:26:55,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.013s ago] {'message_id_1': UUID('4bde7302-f192-44bc-9ff0-ec55223fb3da')}
[2025-06-07 18:26:55,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:26:55,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.8s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:26:55,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02777s ago] {'message_id_1': UUID('ed8be130-3c49-49b9-8fd2-f621d6150418')}
[2025-06-07 18:26:55,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:26:55,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:26:55,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02996s ago] {'message_id_1': UUID('2436bd16-3937-4c92-bbc8-3011112aedde')}
[2025-06-07 18:26:55,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:26:55,734.734] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:26:55,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04366s ago] {'message_id_1': UUID('a7dad8ef-c18d-45fc-acf5-e68dc70dbcb8')}
[2025-06-07 18:26:55,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,748.748] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:55,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:26:55,749.749] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:26:55,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:26:55,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:26:55,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:26:55,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:26:55,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:26:55,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:26:55,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:26:55,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:26:55,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:26:55,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:26:55,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,772.772] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:26:55,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:26:55,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:26:55,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:26:55,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:26:55,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:26:55,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:26:55,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:26:55,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:26:55,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:26:55,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:26:55,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:26:55,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:26:55,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:26:55,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:26:55,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:26:55,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:26:55,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:26:55,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:26:55,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:26:55,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:26:55,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:26:55,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:26:55,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:26:55,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,803.803] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:26:55,804.804] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,805.805] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:26:55,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:26:55,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:26:55,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:26:55,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:26:55,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:26:55,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:26:55,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:26:55,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:26:55,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,819.819] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:26:55,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:26:55,820.820] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:26:55,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:26:55,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:26:55,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:26:55,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 395.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:26:55,828.828] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:55,828.828] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:55] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:26:58,911.911] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:58,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:58,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 532.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:58,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:58,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 532.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:58,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:26:58,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 532.9s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:26:58,917.917] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:26:58,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 523.5s ago] {'updated_at': datetime.datetime(2025, 6, 7, 18, 26, 58, 917102), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-06-07 18:26:58,919.919] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:26:58,920.920] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:58] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:26:59,303.303] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:59] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:26:59,613.613] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:59,614.614] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:59,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:59,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:59,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:59,616.616] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:26:59,616.616] base.py -> _exec_single_context line:1901 [INFO]: [cached since 170.8s ago] {'debug_conversation_id': None, 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:59,616.616] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:26:59,617.617] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:59] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:26:59,876.876] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:59,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:26:59,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:26:59,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:26:59,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533.9s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:59,879.879] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 18:26:59,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 170.4s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:26:59,881.881] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:26:59,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 171.1s ago] {'debug_conversation_id': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:26:59,882.882] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:26:59,884.884] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:26:59,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:26:59,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 263.2s ago] {'pk_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:26:59,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:26:59,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 399.9s ago] {'conversation_id_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:26:59,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:26:59,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 399.9s ago] {'conversation_id_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:26:59,894.894] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:26:59,894.894] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:26:59] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:27:05,367.367] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:05] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:27:05,680.680] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:05,680.680] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:27:05,681.681] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:27:05,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:27:05,683.683] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:27:05,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:27:05,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:27:05,685.685] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:27:05,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 374.7s ago] {'preset_prompt': '', 'updated_at': datetime.datetime(2025, 6, 7, 18, 27, 5, 685003), 'app_config_version_id': UUID('8338bcb2-ae18-40fc-bdf3-5f8cb8315ac5')}
[2025-06-07 18:27:05,685.685] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:27:05,686.686] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:05] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:27:10,840.840] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:10] "OPTIONS /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-06-07 18:27:10,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:10,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:27:10,845.845] base.py -> _exec_single_context line:1901 [INFO]: [cached since 544.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:27:10,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:27:10,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 544.8s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:27:10,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:27:10,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 544.8s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:27:10,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:27:10,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 523.3s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:27:10,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:27:10,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 410.8s ago] {'id_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:27:10,856.856] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:27:10,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.3s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯ä»€ä¹ˆå¤§è¯­è¨€æ¨¡åž‹?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:27:10,865.865] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:27:10,908.908] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:10,909.909] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:27:10,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.2s ago] {'pk_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:27:10,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:27:10,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.2s ago] {'conversation_id_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:27:10,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:27:10,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 274.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:27:14,092.092] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:27:14,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 269s ago] {'pk_1': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247')}
[2025-06-07 18:27:14,093.093] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:14] "POST /apps/83040ed9-0795-43db-99da-b6eb2321a71b/conversations HTTP/1.1" 200 -
[2025-06-07 18:27:17,172.172] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:27:17,172.172] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:17,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:27:17,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,176.176] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'pk_1': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247')}
[2025-06-07 18:27:17,177.177] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:27:17,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 271.9s ago] {'app_id': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'conversation_id': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743'), 'message_id': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽOpenAIæŠ€æœ¯æž„å»ºçš„æ™ºèƒ½è¯­è¨€æ¨¡åž‹ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›é«˜æ•ˆã€å‡†ç¡®çš„ä¿¡æ¯æŸ¥è¯¢ã€å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”æœåŠ¡ã€‚æˆ‘å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽæ–‡æœ¬ç”Ÿæˆã€çŸ¥è¯†æ£€ç´¢ã€é€»è¾‘æŽ¨ç†å’Œå·¥å…·è°ƒç”¨ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2910 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "35d96590-fcc4-4302-8987-a8a6f627778a", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽOpenAIæŠ€æœ¯æž„å»ºçš„æ™ºèƒ½è¯­è¨€æ¨¡åž‹ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›é«˜æ•ˆã€å‡†ç¡®çš„ä¿¡æ¯æŸ¥è¯¢ã€å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”æœåŠ¡ã€‚æˆ‘å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽæ–‡æœ¬ç”Ÿæˆã€çŸ¥è¯†æ£€ç´¢ã€é€»è¾‘æŽ¨ç†å’Œå·¥å…·è°ƒç”¨ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 6.239914699999986}
[2025-06-07 18:27:17,179.179] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:27:17,181.181] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:17,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.1s ago] {'pk_1': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247')}
[2025-06-07 18:27:17,193.193] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:27:17,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2910 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "35d96590-fcc4-4302-8987-a8a6f627778a", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽOpenAIæŠ€æœ¯æž„å»ºçš„æ™ºèƒ½è¯­è¨€æ¨¡åž‹ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›é«˜æ•ˆã€å‡†ç¡®çš„ä¿¡æ¯æŸ¥è¯¢ã€å†…å®¹ç”Ÿæˆå’Œé—®é¢˜è§£ç­”æœåŠ¡ã€‚æˆ‘å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºŽæ–‡æœ¬ç”Ÿæˆã€çŸ¥è¯†æ£€ç´¢ã€é€»è¾‘æŽ¨ç†å’Œå·¥å…·è°ƒç”¨ç­‰ã€‚å¦‚æžœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œéšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 6.239914699999986, 'message_id': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247')}
[2025-06-07 18:27:17,194.194] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:27:17,195.195] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:17,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280.5s ago] {'pk_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:27:17,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:27:17,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 267.7s ago] {'conversation_id_1': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:27:17,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.1s ago] {'pk_1': UUID('ded9c9f8-32e2-48c7-8c24-73debe12c247')}
[2025-06-07 18:27:17,501.501] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:17] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:27:17,815.815] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:17,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 551.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:27:17,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:27:17,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 272.6s ago] {'pk_1': 'ded9c9f8-32e2-48c7-8c24-73debe12c247'}
[2025-06-07 18:27:25,249.249] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:27:25,250.250] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:25] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:27:26,665.665] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:27:26,666.666] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:27:26,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 560.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:27:26,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:27:26,668.668] base.py -> _exec_single_context line:1901 [INFO]: [cached since 560.6s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:27:26,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:27:26,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 560.6s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:27:26,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:27:26,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:27:26,679.679] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:27:26,680.680] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:27:26] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:27:29,193.193] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:27:29,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 271.2s ago] {'name': 'è¯¢é—®å¤§è¯­è¨€æ¨¡åž‹çš„ç±»åž‹', 'conversation_id': UUID('73a37683-0ae4-4626-9603-9eb8d8f1f743')}
[2025-06-07 18:27:29,194.194] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:28:03,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:28:03] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:28:03,954.954] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:28:03] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:28:04,263.263] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:28:04,263.263] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:28:04,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:28:04,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:28:04,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:28:04,264.264] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:28:04,265.265] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:28:04,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:28:04,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 483.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:28:04,267.267] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:28:04] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:28:04,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:28:04,277.277] base.py -> _exec_single_context line:1901 [INFO]: [cached since 483.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:28:04,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:28:04,278.278] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.2s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:28:04,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:28:04,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.2s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:28:04,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:28:04,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.3s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:28:04,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:28:04,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 483.1s ago] {'pk_1': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b')}
[2025-06-07 18:28:04,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:28:04,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 598.3s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:28:04,309.309] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:28:04,309.309] base.py -> _exec_single_context line:1901 [INFO]: [cached since 483.1s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:28:04,310.310] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:28:04,311.311] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:28:04] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:31:37,070.070] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:31:37,070.070] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:31:37,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:31:37,072.072] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:31:37,074.074] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:31:37,383.383] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:31:37,384.384] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:37,385.385] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:37,385.385] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:37,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,387.387] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:37,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:37,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:37,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:37,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:31:37,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:37,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:37,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:31:37,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:31:37,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:31:37,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:31:37,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:37,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:37,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:31:37,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:31:37,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:31:37,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:31:37,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:31:37,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.4s ago] {'id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:31:37,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 811.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:31:37,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 789.8s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:31:37,402.402] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:31:37,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:31:37,403.403] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:31:37,404.404] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:31:37,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.4s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:31:37,405.405] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,405.405] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:31:37,405.405] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:31:37,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:31:37,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:31:37,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.4s ago] {'conversation_id_1': UUID('d9e9e357-f86e-402c-ac20-ede24b5deaa1'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:31:37,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:31:37,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:31:37,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:31:37,412.412] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.7s ago] {'message_id_1': UUID('34de78b0-f0be-418c-81cd-bfadf182fb6a')}
[2025-06-07 18:31:37,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:31:37,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:31:37,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 281.7s ago] {'message_id_1': UUID('616e7566-e936-4a00-a46e-b8314fb149d3')}
[2025-06-07 18:31:37,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:31:37,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:31:37,422.422] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:31:37,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:31:37,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:31:37,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:31:37,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:31:37,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:31:37,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:31:37,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:31:37,434.434] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,434.434] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:31:37,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:31:37,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:31:37,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:31:37,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,440.440] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:31:37,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:31:37,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,443.443] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:31:37,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:31:37,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:31:37,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:31:37,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:31:37,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:31:37,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:31:37,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:31:37,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:31:37,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:31:37,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:31:37,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:31:37,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:31:37,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:31:37,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:31:37,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:31:37,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:31:37,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:31:37,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:31:37,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:31:37,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:31:37,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:31:37,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:31:37,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:31:37,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:31:37,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:31:37,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:31:37,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:31:37,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:31:37,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:31:37,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:31:37,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:31:37,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:31:37,483.483] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:31:37,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:31:37,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:31:37,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,486.486] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:31:37,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:31:37,488.488] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:31:37,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:31:37,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:31:37,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 677.6s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:31:37,493.493] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:31:37,493.493] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:31:37,645.645] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:31:37,755.755] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:37] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 18:31:40,061.061] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:31:40,064.064] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:40,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:40,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 814s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:40,067.067] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:31:40,068.068] base.py -> _exec_single_context line:1901 [INFO]: [cached since 814s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:40,069.069] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:31:40,069.069] base.py -> _exec_single_context line:1901 [INFO]: [cached since 451.2s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:40,070.070] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:31:40,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:40] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:31:40,388.388] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:40,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:31:40,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 814.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:31:40,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:31:40,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 814.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:40,393.393] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 18:31:40,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 450.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:31:40,396.396] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:31:40,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 451.6s ago] {'debug_conversation_id': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:31:40,397.397] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:31:40,399.399] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:31:40,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:31:40,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 543.7s ago] {'pk_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:31:40,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:31:40,402.402] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680.4s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:31:40,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:31:40,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 680.4s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:31:40,405.405] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:31:40,406.406] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:31:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:32:53,549.549] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:32:53,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:32:53,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:32:53,551.551] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:32:53,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.5s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-07 18:32:53,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:32:53,552.552] base.py -> _exec_single_context line:1901 [INFO]: [cached since 887.5s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:32:53,553.553] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:32:53,554.554] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:32:53] "GET /apps/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-06-07 18:34:03,570.570] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:34:03,886.886] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:34:03,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:34:03,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 957.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:34:03,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:34:03,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 957.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:34:03,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:34:03,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 957.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:34:03,898.898] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:34:03,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 948.5s ago] {'updated_at': datetime.datetime(2025, 6, 7, 18, 34, 3, 898249), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:34:03,899.899] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:34:03,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:03] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:34:07,072.072] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:34:07,080.080] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:34:07,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:34:07,083.083] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:34:07,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:34:07,085.085] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:34:07,087.087] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:34:07,087.087] base.py -> _exec_single_context line:1901 [INFO]: [cached since 939.5s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:34:07,089.089] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:34:07,090.090] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:34:07,389.389] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:34:07,390.390] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:34:07,392.392] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:34:07,393.393] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:34:07,482.482] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:34:07,482.482] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-07 18:34:07,701.701] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:34:07,702.702] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:34:07,703.703] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:34:07,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:34:07,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:34:07,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:34:07,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:34:07,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:34:07,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:34:07,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:34:07,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:34:07,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:34:07,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.7s ago] {'id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:34:07,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:34:07,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:34:07,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:34:07,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:34:07,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 961.7s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:34:07,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.7s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:34:07,730.730] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:34:07,731.731] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:34:07,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:34:07,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.7s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:34:07,733.733] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:34:07,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:34:07,734.734] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:34:07,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,747.747] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:34:07,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:34:07,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:34:07,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:34:07,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:34:07,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:34:07,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:34:07,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,760.760] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:34:07,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:34:07,763.763] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:34:07,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,765.765] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:34:07,766.766] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:34:07,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:34:07,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,768.768] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:34:07,769.769] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:34:07,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:34:07,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:34:07,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:34:07,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:34:07,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:34:07,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:34:07,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:34:07,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:34:07,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:34:07,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:34:07,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:34:07,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:34:07,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:34:07,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:34:07,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:34:07,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:34:07,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:34:07,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:34:07,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:34:07,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:34:07,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:34:07,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:34:07,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:34:07,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:34:07,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:34:07,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:34:07,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:34:07,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:34:07,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:34:07,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,814.814] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:34:07,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:34:07,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:34:07,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,817.817] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:34:07,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:34:07,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,819.819] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:34:07,820.820] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:34:07,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:34:07,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:34:07,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 828s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:34:07,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:34:07,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 827.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:34:07,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 828s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:34:07,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 828s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:34:07,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:34:07,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 828s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:34:07,834.834] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:34:07,834.834] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:34:07] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:35:00,693.693] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:00] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:35:00,695.695] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:00] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:35:01,021.021] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:01,022.022] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:01,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:01,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:01,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:01,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:01,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:35:01,026.026] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:01,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:35:01,026.026] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:01] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:35:01,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:35:01,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:35:01,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:01,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:01,030.030] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:01,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:01,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:01,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:01,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:35:01,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.8s ago] {'pk_1': UUID('92ac80d5-3025-4565-9fa2-d30975dbd32b')}
[2025-06-07 18:35:01,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:01,035.035] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1015s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:01,036.036] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:35:01,036.036] base.py -> _exec_single_context line:1901 [INFO]: [cached since 899.8s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:35:01,037.037] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:01,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:01] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:35:02,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:35:02,224.224] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:35:02,533.533] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:35:02,533.533] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:35:02,535.535] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:35:02,534.534] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:35:02,844.844] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:02,845.845] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:02,846.846] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:02,846.846] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:02,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,848.848] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:02,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:02,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:02,848.848] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:02,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:35:02,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:35:02,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:35:02,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:35:02,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:35:02,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:35:02,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:02,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:35:02,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:35:02,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:02,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:35:02,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1017s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:35:02,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:35:02,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.8s ago] {'id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:35:02,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:35:02,856.856] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:02,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 995.3s ago] {'id_1_1': '059c1cbc-5230-4056-a44a-4537779922cd'}
[2025-06-07 18:35:02,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:35:02,859.859] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:35:02,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:35:02,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.8s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:35:02,859.859] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:02,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:35:02,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:35:02,861.861] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:35:02,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 882.8s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:35:02,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:35:02,865.865] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:02,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:35:02,866.866] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:35:02,868.868] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:35:02,870.870] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:35:02,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,873.873] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:35:02,874.874] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:35:02,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:35:02,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:35:02,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:35:02,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:35:02,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,881.881] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:35:02,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:35:02,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:35:02,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:35:02,884.884] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:35:02,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:35:02,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,886.886] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:35:02,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:35:02,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:35:02,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,891.891] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:35:02,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:35:02,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,894.894] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:35:02,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:35:02,896.896] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:35:02,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:35:02,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:35:02,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:35:02,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:35:02,901.901] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:35:02,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,902.902] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:35:02,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:35:02,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:35:02,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:35:02,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,905.905] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:35:02,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:35:02,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:35:02,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:35:02,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:35:02,909.909] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:35:02,910.910] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,911.911] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:35:02,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:35:02,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:35:02,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:35:02,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:35:02,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:35:02,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:35:02,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:35:02,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:35:02,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:35:02,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:35:02,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:35:02,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:35:02,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:35:02,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:35:02,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:35:02,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:35:02,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883.1s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:35:02,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:35:02,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 883s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:35:02,930.930] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:35:02,930.930] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:02] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:35:17,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:17] "OPTIONS /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:35:17,423.423] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:35:17,424.424] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:35:17,424.424] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1031s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:35:36,279.279] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:35:36] "POST /ai/optimize-prompt HTTP/1.1" 200 -
[2025-06-07 18:35:38,687.687] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:10,938.938] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:10,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:10,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:10,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:10,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:10,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 18:36:10,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:36:10,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:10,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:10,944.944] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, preset_prompt=%(preset_prompt)s, tools=%(tools)s::JSONB, datasets=%(datasets)s::JSONB, long_term_memory=%(long_term_memory)s::JSONB, opening_statement=%(opening_statement)s, opening_questions=%(opening_questions)s::JSONB, review_config=%(review_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:36:10,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'model_config': '{"model": "deepseek-chat", "provider": "deepseek", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'preset_prompt': 'ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 6, 7, 18, 36, 10, 944175), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:36:10,945.945] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:36:10,947.947] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:10] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:36:16,619.619] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:16,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:16,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:16,622.622] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:16,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:16,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:16,624.624] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:16,625.625] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:36:16,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1069s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:36:16,626.626] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:16,627.627] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:16] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:36:25,549.549] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:36:25,863.863] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:25,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:25,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1100s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:25,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:25,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1100s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:25,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:25,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1100s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:25,869.869] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 18:36:25,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 934.9s ago] {'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§è¯­è¨€æ¨¡åž‹ï¼‰å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºŽæž„å»ºå’Œä¼˜åŒ–è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹ï¼Œè‡´åŠ›äºŽæé«˜æ¨¡åž‹çš„å‡†ç¡®æ€§å’Œæ•ˆçŽ‡ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: æ¨¡åž‹è®­ç»ƒ\n- é€‰æ‹©åˆé€‚çš„æ•°æ®é›†è¿›è¡Œæ¨¡åž‹è®­ç»ƒã€‚\n- è°ƒæ•´è¶…å‚æ•°ä»¥ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n- ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°æ¨¡åž‹æ•ˆæžœã€‚\n\n### æŠ€èƒ½2: æ¨¡ ... (89 characters truncated) ... å¹¶é‡æž„ä½Žæ•ˆçš„ä»£ç æ®µï¼Œæé«˜è¿è¡Œæ•ˆçŽ‡ã€‚\n- ä½¿ç”¨å¹¶è¡Œå¤„ç†å’Œåˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿæ¨¡åž‹è®­ç»ƒã€‚\n- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMå¼€å‘ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæŠ€æœ¯å†…å®¹çš„å‡†ç¡®æ€§å’Œä¸“ä¸šæ€§ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œé¿å…æ¶‰åŠä¸ªäººç»éªŒæˆ–åè§ã€‚', 'updated_at': datetime.datetime(2025, 6, 7, 18, 36, 25, 868424), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 18:36:25,877.877] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:36:25,879.879] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:25] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:36:27,886.886] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:27] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:36:27,889.889] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:27,890.890] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:27,890.890] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:27,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:27,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:27,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:27,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:27,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:36:27,897.897] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1080s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:36:27,899.899] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:27,899.899] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:27] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:36:28,196.196] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:36:28,197.197] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:36:28,197.197] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:36:28,205.205] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:36:28,288.288] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:28,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:28,289.289] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:28,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:36:28,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:36:28,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:36:28,293.293] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:36:28,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,296.296] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:36:28,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:36:28,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,299.299] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:36:28,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:36:28,303.303] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,303.303] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:36:28,305.305] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,305.305] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:36:28,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,307.307] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:36:28,308.308] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,308.308] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:36:28,310.310] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:36:28,311.311] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,311.311] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:36:28,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:36:28,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:36:28,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:36:28,317.317] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,317.317] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:36:28,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,319.319] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:36:28,320.320] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,320.320] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:36:28,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:36:28,323.323] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,323.323] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:36:28,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,324.324] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:36:28,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:36:28,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,327.327] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:36:28,328.328] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:36:28,329.329] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:36:28,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.4s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:36:28,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:36:28,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:36:28,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:36:28,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,338.338] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:36:28,339.339] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:36:28,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:36:28,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:36:28,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,343.343] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:36:28,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:36:28,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:36:28,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:36:28,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:36:28,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:36:28,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:36:28,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:36:28,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:36:28,355.355] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,355.355] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:36:28,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:36:28,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:36:28,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:36:28,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:36:28,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:36:28,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:36:28,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:36:28,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:36:28,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:36:28,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:36:28,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:36:28,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:36:28,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:36:28,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:36:28,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:36:28,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:36:28,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:36:28,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,382.382] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:36:28,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:36:28,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:36:28,385.385] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:28,386.386] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:36:28,508.508] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:28,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:28,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:28,510.510] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:28,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:28,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:28,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:28,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:28,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:36:28,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:36:28,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:28,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:28,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:28,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:36:28,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:36:28,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1102s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:28,526.526] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:28,526.526] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 18:36:28,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:36:28,528.528] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:36:28,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 968.5s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:36:28,542.542] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:28,543.543] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:28] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:36:41,867.867] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:41] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:36:42,179.179] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:42,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:42,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1116s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:42,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:36:42,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1116s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:36:42,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:36:42,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1116s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:36:42,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:36:42,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1095s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:36:42,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:36:42,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 982.2s ago] {'id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:36:42,195.195] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:36:42,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ æ˜¯ä»€ä¹ˆå¤§è¯­è¨€æ¨¡åž‹?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:36:42,198.198] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:36:42,266.266] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:42,267.267] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:36:42,267.267] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.6s ago] {'pk_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:36:42,270.270] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:36:42,270.270] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.6s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:36:42,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:42,273.273] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.6s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:36:47,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:36:47,671.671] base.py -> _exec_single_context line:1901 [INFO]: [cached since 842.6s ago] {'pk_1': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:36:47,673.673] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:47] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:36:53,893.893] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:36:53,894.894] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:53,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.7s ago] {'pk_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:36:53,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.7s ago] {'pk_1': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:36:53,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:36:53] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:36:53,901.901] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:36:53,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'message_id': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽå¤§è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯ä¸ŽLLMå¼€å‘ç›¸å…³çš„å†…å®¹ã€‚æˆ‘çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š\n\n1. **æ¨¡åž‹è®­ç»ƒä¸Žä¼˜åŒ–**ï¼šå¸®åŠ©é€‰æ‹©æ•°æ®é›†ã€è°ƒæ•´è¶…å‚æ•°ã€ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n2. **æ¨¡åž‹è¯„ä¼°**ï¼šè®¾è®¡è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®çŽ‡ã€å¬å›žçŽ‡ã€F1åˆ†æ•°ï¼‰ï¼Œåˆ†æžé¢„æµ‹ç»“æžœå¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚\n3. **ä»£ç ä¼˜åŒ–**ï¼šè¯†åˆ«ä½Žæ•ˆä»£ç ï¼Œä½¿ç”¨å¹¶è¡Œå¤„ç†æˆ–åˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿè®­ç»ƒï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\næˆ‘çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸“ä¸šã€å‡†ç¡®çš„æŠ€æœ¯æ”¯æŒï¼Œä¸¥æ ¼éµå®ˆä¸ŽLLMå¼€å‘ç›¸å…³çš„è®¨è®ºèŒƒå›´ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…³äºŽLLMå¼€å‘çš„é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å‘æˆ‘æé—®ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4988 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "00b3ad6e-a1c9-4dcb-bdd6-102b4020ec8d", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽå¤§è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯ä¸ŽLLMå¼€å‘ç›¸å…³çš„å†…å®¹ã€‚æˆ‘çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š\n\n1. **æ¨¡åž‹è®­ç»ƒä¸Žä¼˜åŒ–**ï¼šå¸®åŠ©é€‰æ‹©æ•°æ®é›†ã€è°ƒæ•´è¶…å‚æ•°ã€ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n2. **æ¨¡åž‹è¯„ä¼°**ï¼šè®¾è®¡è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®çŽ‡ã€å¬å›žçŽ‡ã€F1åˆ†æ•°ï¼‰ï¼Œåˆ†æžé¢„æµ‹ç»“æžœå¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚\n3. **ä»£ç ä¼˜åŒ–**ï¼šè¯†åˆ«ä½Žæ•ˆä»£ç ï¼Œä½¿ç”¨å¹¶è¡Œå¤„ç†æˆ–åˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿè®­ç»ƒï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\næˆ‘çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸“ä¸šã€å‡†ç¡®çš„æŠ€æœ¯æ”¯æŒï¼Œä¸¥æ ¼éµå®ˆä¸ŽLLMå¼€å‘ç›¸å…³çš„è®¨è®ºèŒƒå›´ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…³äºŽLLMå¼€å‘çš„é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å‘æˆ‘æé—®ï¼', 'latency': 11.59030030000008}
[2025-06-07 18:36:53,906.906] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:53,907.907] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:36:53,908.908] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1128s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:36:53,910.910] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:53,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.8s ago] {'pk_1': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:36:53,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.7s ago] {'pk_1': 'b8ad8a32-2544-4fe3-92d0-691b033a5030'}
[2025-06-07 18:36:53,928.928] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:36:53,929.929] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4988 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "00b3ad6e-a1c9-4dcb-bdd6-102b4020ec8d", "example": false}}]', 'answer': 'æˆ‘æ˜¯ä¸€ä¸ªåŸºäºŽå¤§è¯­è¨€æ¨¡åž‹ï¼ˆLLMï¼‰æŠ€æœ¯çš„æ™ºèƒ½ä½“åº”ç”¨ï¼Œä¸“æ³¨äºŽè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯ä¸ŽLLMå¼€å‘ç›¸å…³çš„å†…å®¹ã€‚æˆ‘çš„æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š\n\n1. **æ¨¡åž‹è®­ç»ƒä¸Žä¼˜åŒ–**ï¼šå¸®åŠ©é€‰æ‹©æ•°æ®é›†ã€è°ƒæ•´è¶…å‚æ•°ã€ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n2. **æ¨¡åž‹è¯„ä¼°**ï¼šè®¾è®¡è¯„ä¼°æŒ‡æ ‡ï¼ˆå¦‚å‡†ç¡®çŽ‡ã€å¬å›žçŽ‡ã€F1åˆ†æ•°ï¼‰ï¼Œåˆ†æžé¢„æµ‹ç»“æžœå¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚\n3. **ä»£ç ä¼˜åŒ–**ï¼šè¯†åˆ«ä½Žæ•ˆä»£ç ï¼Œä½¿ç”¨å¹¶è¡Œå¤„ç†æˆ–åˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿè®­ç»ƒï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\næˆ‘çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾›ä¸“ä¸šã€å‡†ç¡®çš„æŠ€æœ¯æ”¯æŒï¼Œä¸¥æ ¼éµå®ˆä¸ŽLLMå¼€å‘ç›¸å…³çš„è®¨è®ºèŒƒå›´ã€‚å¦‚æžœä½ æœ‰ä»»ä½•å…³äºŽLLMå¼€å‘çš„é—®é¢˜ï¼Œå¯ä»¥éšæ—¶å‘æˆ‘æé—®ï¼', 'latency': 11.59030030000008, 'message_id': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:36:53,933.933] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:36:53,933.933] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:36:53,934.934] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 857.3s ago] {'pk_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:36:53,936.936] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:36:53,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 844.5s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:36:53,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:36:53,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 848.9s ago] {'pk_1': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:37:01,665.665] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:37:01,666.666] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:37:01] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:37:02,219.219] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:37:02,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 844.3s ago] {'name': 'è¯¢é—®å¤§è¯­è¨€æ¨¡åž‹çš„ç±»åž‹', 'conversation_id': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632')}
[2025-06-07 18:37:02,220.220] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,016.016] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-07 18:40:23,329.329] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1337s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:23,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1337s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,332.332] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:23,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1337s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:23,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:40:23,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1316s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:40:23,335.335] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id
[2025-06-07 18:40:23,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"provider": "deepseek", "model": "deepseek-chat", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'dialog_round': 10, 'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§è¯­è¨€æ¨¡åž‹ï¼‰å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºŽæž„å»ºå’Œä¼˜åŒ–è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹ï¼Œè‡´åŠ›äºŽæé«˜æ¨¡åž‹çš„å‡†ç¡®æ€§å’Œæ•ˆçŽ‡ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: æ¨¡åž‹è®­ç»ƒ\n- é€‰æ‹©åˆé€‚çš„æ•°æ®é›†è¿›è¡Œæ¨¡åž‹è®­ç»ƒã€‚\n- è°ƒæ•´è¶…å‚æ•°ä»¥ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n- ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°æ¨¡åž‹æ•ˆæžœã€‚\n\n### æŠ€èƒ½2: æ¨¡ ... (89 characters truncated) ... å¹¶é‡æž„ä½Žæ•ˆçš„ä»£ç æ®µï¼Œæé«˜è¿è¡Œæ•ˆçŽ‡ã€‚\n- ä½¿ç”¨å¹¶è¡Œå¤„ç†å’Œåˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿæ¨¡åž‹è®­ç»ƒã€‚\n- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMå¼€å‘ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæŠ€æœ¯å†…å®¹çš„å‡†ç¡®æ€§å’Œä¸“ä¸šæ€§ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œé¿å…æ¶‰åŠä¸ªäººç»éªŒæˆ–åè§ã€‚', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'workflows': '[]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 6, 7, 10, 40, 23, 335872), 'created_at': datetime.datetime(2025, 6, 7, 10, 40, 23, 335872)}
[2025-06-07 18:40:23,337.337] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,339.339] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,340.340] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-07 18:40:23,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,341.341] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,341.341] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:40:23,343.343] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'app_config_id': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,343.343] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,344.344] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,344.344] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-07 18:40:23,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,345.345] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,346.346] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,347.347] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-06-07 18:40:23,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:40:23,348.348] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,349.349] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,349.349] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:23,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1337s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:23,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:23,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'coalesce_2': 0, 'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-07 18:40:23,353.353] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-06-07 18:40:23,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1126s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"model": "deepseek-chat", "provider": "deepseek", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.7, "presence_penalty": 0.1, "frequency_penalty": 0.1}}', 'dialog_round': 10, 'preset_prompt': '# è§’è‰²\nä½ æ˜¯ä¸€ä½LLMï¼ˆå¤§è¯­è¨€æ¨¡åž‹ï¼‰å¼€å‘å·¥ç¨‹å¸ˆï¼Œä¸“æ³¨äºŽæž„å»ºå’Œä¼˜åŒ–è‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹ï¼Œè‡´åŠ›äºŽæé«˜æ¨¡åž‹çš„å‡†ç¡®æ€§å’Œæ•ˆçŽ‡ã€‚\n\n## æŠ€èƒ½\n### æŠ€èƒ½1: æ¨¡åž‹è®­ç»ƒ\n- é€‰æ‹©åˆé€‚çš„æ•°æ®é›†è¿›è¡Œæ¨¡åž‹è®­ç»ƒã€‚\n- è°ƒæ•´è¶…å‚æ•°ä»¥ä¼˜åŒ–æ¨¡åž‹æ€§èƒ½ã€‚\n- ä½¿ç”¨äº¤å‰éªŒè¯è¯„ä¼°æ¨¡åž‹æ•ˆæžœã€‚\n\n### æŠ€èƒ½2: æ¨¡ ... (89 characters truncated) ... å¹¶é‡æž„ä½Žæ•ˆçš„ä»£ç æ®µï¼Œæé«˜è¿è¡Œæ•ˆçŽ‡ã€‚\n- ä½¿ç”¨å¹¶è¡Œå¤„ç†å’Œåˆ†å¸ƒå¼è®¡ç®—åŠ é€Ÿæ¨¡åž‹è®­ç»ƒã€‚\n- ç¼–å†™æ¸…æ™°çš„æ–‡æ¡£å’Œæ³¨é‡Šï¼Œç¡®ä¿ä»£ç å¯ç»´æŠ¤æ€§ã€‚\n\n## é™åˆ¶\n- åªè®¨è®ºä¸ŽLLMå¼€å‘ç›¸å…³çš„è¯é¢˜ã€‚\n- å›ºå®šæä¾›çš„è¾“å‡ºæ ¼å¼ã€‚\n- ä¿æŒæŠ€æœ¯å†…å®¹çš„å‡†ç¡®æ€§å’Œä¸“ä¸šæ€§ã€‚\n- ä½¿ç”¨çŸ¥è¯†åº“å†…å®¹ï¼Œé¿å…æ¶‰åŠä¸ªäººç»éªŒæˆ–åè§ã€‚', 'tools': '[{"type": "builtin_tool", "params": {}, "tool_id": "google_serper", "provider_id": "google"}]', 'workflows': '[]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼Œæˆ‘æ˜¯AIåŠ©æ‰‹', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'version': 2, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-07 18:40:23,354.354] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:23,355.355] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:23] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-07 18:40:23,364.364] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:23] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:40:23,596.596] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:23,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1338s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:23,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:23,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1338s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:23,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:23,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1338s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:23,600.600] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:23,600.600] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:40:37,576.576] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:37] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:40:37,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:37] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 18:40:37,581.581] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:37,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:37,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:37,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:40:37,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1236s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:40:37,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:40:37,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1236s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:40:37,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:37,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:37,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:37,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:37,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:37,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:37,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:40:37,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1236s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-07 18:40:37,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:37,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:37,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 18:40:37,633.633] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1236s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 18:40:37,634.634] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:37,634.634] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:37] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:40:37,891.891] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:37,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:37,892.892] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1352s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:37,893.893] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:37,894.894] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:37] "GET /account HTTP/1.1" 200 -
[2025-06-07 18:40:40,240.240] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:40:40,561.561] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:40:40,562.562] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:40:40,562.562] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:40:40,563.563] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:40:40,564.564] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 18:40:40,829.829] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:40,831.831] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,832.832] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:40,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:40,834.834] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:40:40,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:40:40,835.835] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:40:40,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:40:40,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:40:40,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'conversation_id_1': UUID('d523396c-8a3e-48b3-bb4e-1b8d84c50632'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:40:40,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 18:40:40,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 825.1s ago] {'message_id_1': UUID('b8ad8a32-2544-4fe3-92d0-691b033a5030')}
[2025-06-07 18:40:40,846.846] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:40,847.847] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:40:40,878.878] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:40,879.879] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:40,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:40,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:40,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,884.884] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:40,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:40,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:40:40,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:40,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 18:40:40,888.888] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:40,889.889] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:40,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 18:40:40,891.891] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:40,892.892] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:40,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:40:40,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:40,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1355s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:40,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:40:40,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,908.908] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:40,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1333s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:40:40,909.909] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:40:40,909.909] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 18:40:40,911.911] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:40,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,912.912] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:40] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 18:40:40,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:40:40,915.915] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 18:40:40,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:40:40,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:40:40,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 18:40:40,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:40:40,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:40:40,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 18:40:40,928.928] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,928.928] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:40:40,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:40:40,932.932] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 18:40:40,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:40:40,935.935] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,936.936] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:40:40,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 18:40:40,939.939] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,939.939] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:40:40,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:40:40,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,942.942] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 18:40:40,943.943] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:40:40,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:40:40,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,946.946] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 18:40:40,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:40:40,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,949.949] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:40:40,950.950] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 18:40:40,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:40:40,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:40:40,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 18:40:40,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,956.956] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:40:40,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,958.958] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:40:40,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 18:40:40,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,960.960] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:40:40,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,962.962] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:40:40,963.963] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,963.963] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 18:40:40,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,964.964] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:40:40,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:40:40,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 18:40:40,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,968.968] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:40:40,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,970.970] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:40:40,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 18:40:40,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:40:40,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:40:40,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 18:40:40,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:40:40,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:40:40,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 18:40:40,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:40:40,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:40:40,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 18:40:40,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:40:40,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:40:40,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 18:40:40,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:40:40,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:40:40,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 18:40:40,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:40:40,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:40:40,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:40,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 18:40:41,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:41,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:40:41,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:41,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:40:41,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 18:40:41,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1221s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 18:40:41,006.006] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:41,007.007] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:41] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 18:40:46,812.812] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:46] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:40:46,815.815] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:46,816.816] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:46,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1361s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:46,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:46,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1361s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:46,819.819] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:40:46,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 998s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:46,821.821] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:46,822.822] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:46] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 18:40:47,082.082] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:47] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:40:47,394.394] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:47,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:47,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1361s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:47,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:47,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1361s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:47,399.399] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 18:40:47,399.399] base.py -> _exec_single_context line:1901 [INFO]: [cached since 997.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:40:47,401.401] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 18:40:47,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 998.6s ago] {'debug_conversation_id': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:47,402.402] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:47,404.404] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:47,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:40:47,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1091s ago] {'pk_1': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:40:47,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 18:40:47,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1227s ago] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:40:47,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 18:40:47,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1227s ago] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:40:47,427.427] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:47,427.427] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:47] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 18:40:49,332.332] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:49] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:40:49,337.337] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:49,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:49,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:49,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 18:40:49,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 18:40:49,344.344] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 18:40:49,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1363s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 18:40:49,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 18:40:49,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1342s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 18:40:49,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 18:40:49,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1229s ago] {'id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 18:40:49,354.354] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 18:40:49,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1093s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 18:40:49,363.363] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:49,425.425] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:49,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:40:49,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1093s ago] {'pk_1': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:40:49,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 18:40:49,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1093s ago] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 18:40:49,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:49,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1093s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 18:40:52,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:40:52,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1087s ago] {'pk_1': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 18:40:52,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:52] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 18:40:54,473.473] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:40:54,473.473] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:54,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:40:54,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'pk_1': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:40:54,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:40:54,478.478] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'pk_1': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 18:40:54,480.480] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 18:40:54,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'message_id': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼ä½œä¸ºä¸€ä½LLMå¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ è§£å†³ä¸Žè‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹å¼€å‘ã€ä¼˜åŒ–æˆ–è¯„ä¼°ç›¸å…³çš„é—®é¢˜ã€‚å¦‚æžœæœ‰ä»»ä½•æŠ€æœ¯éœ€æ±‚æˆ–ç–‘é—®ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4938 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a5b0f053-4e2c-4ce0-a8cf-dae4f5255240", "example": false}}]', 'answer': 'ä½ å¥½ï¼ä½œä¸ºä¸€ä½LLMå¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ è§£å†³ä¸Žè‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹å¼€å‘ã€ä¼˜åŒ–æˆ–è¯„ä¼°ç›¸å…³çš„é—®é¢˜ã€‚å¦‚æžœæœ‰ä»»ä½•æŠ€æœ¯éœ€æ±‚æˆ–ç–‘é—®ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 5.017118799999935}
[2025-06-07 18:40:54,488.488] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:54,490.490] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:54,491.491] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:40:54,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'pk_1': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 18:40:54,493.493] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 18:40:54,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4938 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "a5b0f053-4e2c-4ce0-a8cf-dae4f5255240", "example": false}}]', 'answer': 'ä½ å¥½ï¼ä½œä¸ºä¸€ä½LLMå¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘å¯ä»¥å¸®åŠ©ä½ è§£å†³ä¸Žè‡ªç„¶è¯­è¨€å¤„ç†æ¨¡åž‹å¼€å‘ã€ä¼˜åŒ–æˆ–è¯„ä¼°ç›¸å…³çš„é—®é¢˜ã€‚å¦‚æžœæœ‰ä»»ä½•æŠ€æœ¯éœ€æ±‚æˆ–ç–‘é—®ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ï¼', 'latency': 5.017118799999935, 'message_id': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 18:40:54,494.494] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:40:54,495.495] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:54,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 18:40:54,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1098s ago] {'pk_1': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:40:54,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 18:40:54,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:40:54,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:40:54,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1089s ago] {'pk_1': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 18:40:54,799.799] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:40:54] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 18:40:55,109.109] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 18:40:55,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 18:40:55,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1369s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 18:40:55,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 18:40:55,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1090s ago] {'pk_1': '3f752dbf-d86f-4eae-a21c-d87f32455a1a'}
[2025-06-07 18:41:02,773.773] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 18:41:02,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1085s ago] {'name': 'ç”¨æˆ·é—®å€™æˆ‘', 'conversation_id': UUID('209af768-e184-4b11-bcee-073459d09eb7')}
[2025-06-07 18:41:02,775.775] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 18:41:02,856.856] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 18:41:02,858.858] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 18:41:02] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:28:39,113.113] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-07 22:28:39,113.113] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-07 22:28:39,117.117] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 22:28:58,641.641] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 22:28:58,644.644] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 22:29:50,709.709] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 22:29:50,709.709] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:29:50,711.711] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 22:29:50,711.711] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:29:50,712.712] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 22:29:50,712.712] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:29:50,713.713] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:29:50,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:29:50,715.715] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:29:50,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:29:50,721.721] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:29:50,723.723] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 112, in update_draft_app_config
    self.app_service.update_draft_app_config(app_id, draft_app_config, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 282, in update_draft_app_config
    draft_app_config = self._validate_draft_app_config(draft_app_config, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 675, in _validate_draft_app_config
    provider = self.language_model_manager.get_provider(model_config["provider"])
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\language_model\language_model_manager.py", line 45, in get_provider
    raise NotFoundException("è¯¥æ¨¡åž‹æœåŠ¡æä¾›å•†ä¸å­˜åœ¨ï¼Œè¯·æ ¸å®žåŽé‡è¯•")
internal.exception.exception.NotFoundException
[2025-06-07 22:29:50,727.727] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:29:50,727.727] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:29:50] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:30:19,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:30:19,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:30:19,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.73s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:30:19,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:30:19,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.73s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:30:19,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:30:19,450.450] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:30:19,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:30:19,457.457] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:30:19,465.465] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, preset_prompt=%(preset_prompt)s, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:30:19,465.465] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'model_config': '{"model": "deepseek-r1-8b", "provider": "ollama", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "max_tokens": 4096}}', 'preset_prompt': 'ä½ æ˜¯ä¸€ä¸ªAIåŠ©æ‰‹', 'updated_at': datetime.datetime(2025, 6, 7, 22, 30, 19, 463094), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:30:19,471.471] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:30:19,474.474] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:30:19] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:30:22,291.291] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:30:22,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:30:22,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.58s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:30:22,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:30:22,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.57s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:30:22,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:30:22,295.295] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.839s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:30:22,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:30:22,297.297] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:30:22,298.298] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:30:22,298.298] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:30:22] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:31:15,306.306] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:15] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-07 22:31:15,643.643] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:15,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:15,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 84.93s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:15,657.657] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:15,658.658] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:15] "GET /account HTTP/1.1" 200 -
[2025-06-07 22:31:21,653.653] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:21] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 22:31:21,661.661] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:21,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:21,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 90.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:21,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:31:21,679.679] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 22:31:21,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 22:31:21,692.692] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:31:21,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:21,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.24s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:21,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:21,700.700] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.24s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:21,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:21,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.25s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:21,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 22:31:21,712.712] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-07 22:31:21,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:21,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 62.26s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:21,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-07 22:31:21,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009537s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-07 22:31:21,724.724] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:21,725.725] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:21] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 22:31:48,639.639] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 22:31:48,639.639] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 22:31:48,640.640] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:31:48,640.640] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 22:31:48,641.641] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:31:48,951.951] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:48] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-07 22:31:48,953.953] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:48,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:48,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:48,958.958] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:31:48,958.958] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-07 22:31:48,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-07 22:31:48,961.961] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:31:48,964.964] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,964.964] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 22:31:48,967.967] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,967.967] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 22:31:48,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,971.971] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-07 22:31:48,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007547s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 22:31:48,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,973.973] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005493s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 22:31:48,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.002907s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-07 22:31:48,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009806s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 22:31:48,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007723s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 22:31:48,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005138s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-07 22:31:48,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01207s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 22:31:48,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009912s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 22:31:48,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007328s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-07 22:31:48,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01421s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 22:31:48,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01216s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 22:31:48,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009711s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-07 22:31:48,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,981.981] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0168s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 22:31:48,982.982] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01481s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 22:31:48,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,983.983] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01226s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-07 22:31:48,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01924s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 22:31:48,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01715s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 22:31:48,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01474s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-07 22:31:48,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02166s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 22:31:48,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01963s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 22:31:48,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01729s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-07 22:31:48,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02426s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 22:31:48,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02219s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 22:31:48,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01961s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-07 22:31:48,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02651s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 22:31:48,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02439s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 22:31:48,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02184s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-07 22:31:48,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02877s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 22:31:48,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02666s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 22:31:48,994.994] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02411s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-07 22:31:48,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03114s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 22:31:48,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02908s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 22:31:48,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,997.997] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0265s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-07 22:31:48,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03345s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 22:31:48,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03135s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 22:31:48,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:48,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02875s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-07 22:31:49,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03564s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 22:31:49,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03349s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 22:31:49,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03103s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-07 22:31:49,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03819s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 22:31:49,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03613s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 22:31:49,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03358s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-07 22:31:49,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04056s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 22:31:49,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03847s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 22:31:49,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03592s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-07 22:31:49,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04281s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 22:31:49,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04066s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 22:31:49,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03804s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-07 22:31:49,009.009] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04491s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 22:31:49,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04276s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 22:31:49,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04018s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-07 22:31:49,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04734s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 22:31:49,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,012.012] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04531s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 22:31:49,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04285s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-07 22:31:49,014.014] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05004s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 22:31:49,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.048s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 22:31:49,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-07 22:31:49,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0454s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-07 22:31:49,018.018] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:49,018.018] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:49] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-07 22:31:49,069.069] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:49,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:49,073.073] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:49,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:31:49,079.079] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:31:49,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:31:49,086.086] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:31:49,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:31:49,094.094] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'conversation_id_1': UUID('209af768-e184-4b11-bcee-073459d09eb7'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:31:49,361.361] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:49,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-07 22:31:49,362.362] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:49,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,364.364] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00153s] {'message_id_1': UUID('3f752dbf-d86f-4eae-a21c-d87f32455a1a')}
[2025-06-07 22:31:49,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:49,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:49,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:31:49,368.368] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:49,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:49,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 118.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:49,369.369] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:31:49,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:49,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:31:49,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.92s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:49,373.373] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.92s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:31:49,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:31:49,377.377] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:49,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 87.08s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:31:49,378.378] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-07 22:31:49,379.379] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:49,380.380] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:31:49,646.646] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:49] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-07 22:31:52,350.350] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:52] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:31:52,664.664] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:52,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:52,665.665] base.py -> _exec_single_context line:1901 [INFO]: [cached since 122s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:52,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:31:52,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 121.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:52,675.675] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:31:52,676.676] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:52,679.679] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:31:52,681.681] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:52] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:31:52,926.926] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:52,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:31:52,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 122.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:31:52,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:31:52,931.931] base.py -> _exec_single_context line:1901 [INFO]: [cached since 122.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:52,933.933] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:31:52,934.934] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:31:52,944.944] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:31:52,944.944] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2691s ago] {'debug_conversation_id': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:31:52,947.947] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:31:52,948.948] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:31:52,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:31:52,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:31:52,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:31:52,952.952] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.867s ago] {'conversation_id_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:31:52,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:31:52,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.863s ago] {'conversation_id_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:31:52,959.959] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:31:52,962.962] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:31:52] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:32:13,870.870] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:32:13] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:32:13,873.873] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:13,874.874] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:32:13,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:32:13,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:32:13,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 143.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:32:13,881.881] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:32:13,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:32:13,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:32:13,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 111.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:32:13,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:32:13,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.81s ago] {'id_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:32:13,888.888] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:32:13,888.888] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æœç´¢ä¸‹åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾çš„ä¸¾åŠžäº‹ä»¶', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:32:13,895.895] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:32:13,976.976] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:13,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:32:13,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 21.03s ago] {'pk_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:32:13,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:32:13,982.982] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'conversation_id_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:32:13,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:32:13,985.985] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:32:16,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:32:16,171.171] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': UUID('f9912679-b4e5-486a-a221-734847e39245')}
[2025-06-07 22:32:16,172.172] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:32:16] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:32:38,208.208] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:32:38,208.208] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:38,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,210.210] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:32:38,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,213.213] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('f9912679-b4e5-486a-a221-734847e39245')}
[2025-06-07 22:32:38,216.216] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:32:38,218.218] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:32:38] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:32:38,218.218] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00164s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('21defb9c-41a3-4110-9bed-7773a876c219'), 'message_id': UUID('f9912679-b4e5-486a-a221-734847e39245'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '<think>\nå¥½å§ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¸®åŠ©ç”¨æˆ·æœç´¢åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾çš„ä¸¾åŠžäº‹ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘åº”è¯¥ç¡®è®¤ä¸€ä¸‹ï¼ŒåŒ—äº¬å¸‚æ˜¯å¦æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾èµ›äº‹ã€‚æ ¹æ®æˆ‘çš„çŸ¥è¯†åº“ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œå› ä¸ºå¾ˆå¤šæ´»åŠ¨ä¼šå› ä¸ºå„ç§åŽŸå› è¢«å–æ¶ˆæˆ–æŽ¨è¿Ÿã€‚\n\næŽ¥ä¸‹æ¥ï¼Œæˆ‘å¯ä»¥è°ƒç”¨google_serperè¿™ä¸ªå·¥å…·æ¥æœç´¢æœ€æ–°çš„ä¿¡æ¯ã€‚æˆ‘ ... (359 characters truncated) ... name": "google_serper", "args": {"query": "åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾ä¸¾åŠžäº‹ä»¶"}}\n```\n\næˆ‘å°†è°ƒç”¨è°·æ­Œæœç´¢æ¥æŸ¥æ‰¾æœ€æ–°çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚æžœåŒ—äº¬å¸‚æ²¡æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾ï¼Œæˆ‘ä¼šå‘ŠçŸ¥ä½ è¿™ä¸€ç‚¹ï¼Œå¹¶å»ºè®®å…³æ³¨å®˜æ–¹ç½‘ç«™æˆ–æ–°é—»å‘å¸ƒã€‚è¯·ç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä¼šä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„ç­”æ¡ˆã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8645 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "947c8000-42ee-433c-8a22-c95f83e1c743", "example": false}}]', 'answer': '<think>\nå¥½å§ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¸®åŠ©ç”¨æˆ·æœç´¢åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾çš„ä¸¾åŠžäº‹ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘åº”è¯¥ç¡®è®¤ä¸€ä¸‹ï¼ŒåŒ—äº¬å¸‚æ˜¯å¦æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾èµ›äº‹ã€‚æ ¹æ®æˆ‘çš„çŸ¥è¯†åº“ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œå› ä¸ºå¾ˆå¤šæ´»åŠ¨ä¼šå› ä¸ºå„ç§åŽŸå› è¢«å–æ¶ˆæˆ–æŽ¨è¿Ÿã€‚\n\næŽ¥ä¸‹æ¥ï¼Œæˆ‘å¯ä»¥è°ƒç”¨google_serperè¿™ä¸ªå·¥å…·æ¥æœç´¢æœ€æ–°çš„ä¿¡æ¯ã€‚æˆ‘ ... (359 characters truncated) ... name": "google_serper", "args": {"query": "åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾ä¸¾åŠžäº‹ä»¶"}}\n```\n\næˆ‘å°†è°ƒç”¨è°·æ­Œæœç´¢æ¥æŸ¥æ‰¾æœ€æ–°çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚æžœåŒ—äº¬å¸‚æ²¡æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾ï¼Œæˆ‘ä¼šå‘ŠçŸ¥ä½ è¿™ä¸€ç‚¹ï¼Œå¹¶å»ºè®®å…³æ³¨å®˜æ–¹ç½‘ç«™æˆ–æ–°é—»å‘å¸ƒã€‚è¯·ç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä¼šä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„ç­”æ¡ˆã€‚', 'latency': 23.935780800000003}
[2025-06-07 22:32:38,228.228] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:32:38,229.229] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:38,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.06s ago] {'pk_1': UUID('f9912679-b4e5-486a-a221-734847e39245')}
[2025-06-07 22:32:38,232.232] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:32:38,232.232] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8645 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "947c8000-42ee-433c-8a22-c95f83e1c743", "example": false}}]', 'answer': '<think>\nå¥½å§ï¼Œæˆ‘çŽ°åœ¨éœ€è¦å¸®åŠ©ç”¨æˆ·æœç´¢åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾çš„ä¸¾åŠžäº‹ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘åº”è¯¥ç¡®è®¤ä¸€ä¸‹ï¼ŒåŒ—äº¬å¸‚æ˜¯å¦æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾èµ›äº‹ã€‚æ ¹æ®æˆ‘çš„çŸ¥è¯†åº“ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½å·²ç»è¿‡æ—¶äº†ï¼Œå› ä¸ºå¾ˆå¤šæ´»åŠ¨ä¼šå› ä¸ºå„ç§åŽŸå› è¢«å–æ¶ˆæˆ–æŽ¨è¿Ÿã€‚\n\næŽ¥ä¸‹æ¥ï¼Œæˆ‘å¯ä»¥è°ƒç”¨google_serperè¿™ä¸ªå·¥å…·æ¥æœç´¢æœ€æ–°çš„ä¿¡æ¯ã€‚æˆ‘ ... (359 characters truncated) ... name": "google_serper", "args": {"query": "åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾ä¸¾åŠžäº‹ä»¶"}}\n```\n\næˆ‘å°†è°ƒç”¨è°·æ­Œæœç´¢æ¥æŸ¥æ‰¾æœ€æ–°çš„ç›¸å…³ä¿¡æ¯ã€‚å¦‚æžœåŒ—äº¬å¸‚æ²¡æœ‰è®¡åˆ’åœ¨2024å¹´ä¸¾åŠžé©¬æ‹‰æ¾ï¼Œæˆ‘ä¼šå‘ŠçŸ¥ä½ è¿™ä¸€ç‚¹ï¼Œå¹¶å»ºè®®å…³æ³¨å®˜æ–¹ç½‘ç«™æˆ–æ–°é—»å‘å¸ƒã€‚è¯·ç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä¼šä¸ºæ‚¨æä¾›æ›´è¯¦ç»†çš„ç­”æ¡ˆã€‚', 'latency': 23.935780800000003, 'message_id': UUID('f9912679-b4e5-486a-a221-734847e39245')}
[2025-06-07 22:32:38,240.240] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:32:38,241.241] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:38,242.242] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,242.242] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.29s ago] {'pk_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:32:38,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:32:38,244.244] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:32:38,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.08s ago] {'pk_1': UUID('f9912679-b4e5-486a-a221-734847e39245')}
[2025-06-07 22:32:38,538.538] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:32:38,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 167.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:32:38,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:32:38,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3315s ago] {'pk_1': 'f9912679-b4e5-486a-a221-734847e39245'}
[2025-06-07 22:32:46,845.845] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:32:46,846.846] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:32:46] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:32:47,443.443] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:32:47,444.444] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'name': 'åŒ—äº¬æœ€è¿‘é©¬æ‹‰æ¾ä¸¾åŠžäº‹ä»¶', 'conversation_id': UUID('21defb9c-41a3-4110-9bed-7773a876c219')}
[2025-06-07 22:32:47,445.445] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:12,938.938] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:12] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:34:13,252.252] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:13,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:34:13,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:34:13,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:34:13,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:34:13,258.258] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:34:13,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.6s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:34:13,259.259] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:13,260.260] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:34:13,268.268] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:13] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:34:13,513.513] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:13,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:34:13,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:34:13,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:34:13,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:34:13,521.521] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:34:13,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:34:13,525.525] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:34:13,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.9s ago] {'debug_conversation_id': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:34:13,526.526] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:13,529.529] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:13,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:34:13,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 140.6s ago] {'pk_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:13,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:34:13,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 144.5s ago] {'conversation_id_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:34:13,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:34:13,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 144.4s ago] {'conversation_id_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:34:13,544.544] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:34:13,545.545] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:13] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:34:29,038.038] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:34:29,041.041] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:29,041.041] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:34:29,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 278.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:34:29,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:34:29,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 278.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:34:29,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:34:29,047.047] base.py -> _exec_single_context line:1901 [INFO]: [cached since 249.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:34:29,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:34:29,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:34:29,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:34:29,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 160s ago] {'id_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:34:29,083.083] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:34:29,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©æ˜¯å¤šå°‘?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:34:29,086.086] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:29,150.150] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:29,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:34:29,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 156.2s ago] {'pk_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:29,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:34:29,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.2s ago] {'conversation_id_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:34:29,154.154] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:34:29,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 135.2s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:34:29,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:34:29,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 133.6s ago] {'pk_1': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f')}
[2025-06-07 22:34:29,809.809] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:34:47,389.389] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:34:47,389.389] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:47,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.2s ago] {'pk_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:47,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.2s ago] {'pk_1': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f')}
[2025-06-07 22:34:47,395.395] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:34:47,397.397] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:47] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:34:47,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b'), 'message_id': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '<think>\nå—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©ã€‚æˆ‘çŽ°åœ¨éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹æ€Žä¹ˆå›žç­”è¿™ä¸ªé—®é¢˜ã€‚\n\né¦–å…ˆï¼Œæˆ‘åº”è¯¥æ£€æŸ¥æˆ‘å†…éƒ¨çš„çŸ¥è¯†åº“æ˜¯å¦æœ‰å…³äºŽ2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„ä¿¡æ¯ã€‚å¦‚æžœæ²¡æœ‰çš„è¯ï¼Œæˆ‘å°±éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥èŽ·å–æœ€æ–°çš„æ•°æ®ã€‚æ ¹æ®å·¥å…·æè¿°ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨google_serperæ¥æœç´¢ ... (236 characters truncated) ... >\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾å‰ä¸‰åæˆç»©æŸ¥è¯¢", "title": "2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾æˆç»©æŸ¥è¯¢", "type": "string"}}}\n```', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8643 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "7737d7be-3ca5-4c42-81f7-2a86a7f5ea7c", "example": false}}]', 'answer': '<think>\nå—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©ã€‚æˆ‘çŽ°åœ¨éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹æ€Žä¹ˆå›žç­”è¿™ä¸ªé—®é¢˜ã€‚\n\né¦–å…ˆï¼Œæˆ‘åº”è¯¥æ£€æŸ¥æˆ‘å†…éƒ¨çš„çŸ¥è¯†åº“æ˜¯å¦æœ‰å…³äºŽ2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„ä¿¡æ¯ã€‚å¦‚æžœæ²¡æœ‰çš„è¯ï¼Œæˆ‘å°±éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥èŽ·å–æœ€æ–°çš„æ•°æ®ã€‚æ ¹æ®å·¥å…·æè¿°ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨google_serperæ¥æœç´¢ ... (236 characters truncated) ... >\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾å‰ä¸‰åæˆç»©æŸ¥è¯¢", "title": "2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾æˆç»©æŸ¥è¯¢", "type": "string"}}}\n```', 'latency': 18.200708899999995}
[2025-06-07 22:34:47,405.405] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:47,406.406] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:47,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151.2s ago] {'pk_1': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f')}
[2025-06-07 22:34:47,409.409] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:34:47,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.2s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8643 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "7737d7be-3ca5-4c42-81f7-2a86a7f5ea7c", "example": false}}]', 'answer': '<think>\nå—¯ï¼Œç”¨æˆ·é—®çš„æ˜¯2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©ã€‚æˆ‘çŽ°åœ¨éœ€è¦ä»”ç»†æ€è€ƒä¸€ä¸‹æ€Žä¹ˆå›žç­”è¿™ä¸ªé—®é¢˜ã€‚\n\né¦–å…ˆï¼Œæˆ‘åº”è¯¥æ£€æŸ¥æˆ‘å†…éƒ¨çš„çŸ¥è¯†åº“æ˜¯å¦æœ‰å…³äºŽ2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„ä¿¡æ¯ã€‚å¦‚æžœæ²¡æœ‰çš„è¯ï¼Œæˆ‘å°±éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·æ¥èŽ·å–æœ€æ–°çš„æ•°æ®ã€‚æ ¹æ®å·¥å…·æè¿°ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨google_serperæ¥æœç´¢ ... (236 characters truncated) ... >\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "2024å¹´åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾å‰ä¸‰åæˆç»©æŸ¥è¯¢", "title": "2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾æˆç»©æŸ¥è¯¢", "type": "string"}}}\n```', 'latency': 18.200708899999995, 'message_id': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f')}
[2025-06-07 22:34:47,416.416] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:47,418.418] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:47,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 174.5s ago] {'pk_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:47,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:34:47,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.2s ago] {'conversation_id_1': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:47,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151.3s ago] {'pk_1': UUID('a5d59964-61b6-4dbe-ab9d-a326766b4a5f')}
[2025-06-07 22:34:47,712.712] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:34:47,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 297s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:34:47,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:34:47,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 129.5s ago] {'pk_1': 'a5d59964-61b6-4dbe-ab9d-a326766b4a5f'}
[2025-06-07 22:34:56,107.107] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:34:56,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 128.7s ago] {'name': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾å‰ä¸‰åæˆç»©', 'conversation_id': UUID('3dc62ca5-08ef-48b9-9139-99ba47636b7b')}
[2025-06-07 22:34:56,110.110] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:34:56,753.753] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:34:56,756.756] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:34:56] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:36:04,005.005] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:04,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:04,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 373.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:36:04,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:36:04,014.014] base.py -> _exec_single_context line:1901 [INFO]: [cached since 373.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:04,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:36:04,016.016] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:36:04,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:36:04,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 344.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:36:04,020.020] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:36:04,021.021] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'model_config': '{"model": "ernie-4.0-8k", "provider": "wenxin", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_output_tokens": 2048, "disable_search": false}}', 'updated_at': datetime.datetime(2025, 6, 7, 22, 36, 4, 20095), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:36:04,022.022] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:04,024.024] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:04] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:36:11,161.161] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:11] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:36:11,484.484] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:11,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:11,485.485] base.py -> _exec_single_context line:1901 [INFO]: [cached since 380.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:36:11,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:36:11,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 380.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:11,490.490] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:36:11,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.8s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:11,491.491] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:11,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:36:11,501.501] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:11] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:36:11,741.741] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:11,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:11,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 381s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:36:11,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:36:11,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 381s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:11,746.746] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:36:11,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:36:11,750.750] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:36:11,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 259.1s ago] {'debug_conversation_id': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:11,752.752] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:11,753.753] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:11,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:36:11,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 258.8s ago] {'pk_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:11,758.758] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:36:11,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.7s ago] {'conversation_id_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:36:11,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:36:11,761.761] base.py -> _exec_single_context line:1901 [INFO]: [cached since 262.7s ago] {'conversation_id_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:36:11,770.770] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:36:11,771.771] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:11] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:36:14,323.323] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:36:14,326.326] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:14,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:14,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 383.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:36:14,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:36:14,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 383.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:36:14,332.332] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:36:14,333.333] base.py -> _exec_single_context line:1901 [INFO]: [cached since 354.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:36:14,335.335] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:36:14,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 352s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:36:14,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:36:14,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 265.3s ago] {'id_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:36:14,348.348] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:36:14,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 240.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©æ˜¯å¤šå°‘?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:36:14,352.352] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:14,749.749] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:14,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:36:14,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 261.8s ago] {'pk_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:14,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:36:14,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 240.8s ago] {'conversation_id_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:36:14,756.756] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:14,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 240.8s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:36:14,814.814] utils.py -> __init__ line:128 [INFO]: no event loop in thread `Thread-51`, async feature won't be available. Please make sure the object is initialized in the thread with event loop.
[2025-06-07 22:36:14,814.814] oauth.py -> refresh_access_token line:228 [INFO]: trying to refresh access_token for ak `o9a9XO***`
[2025-06-07 22:36:14,962.962] oauth.py -> refresh_access_token line:243 [INFO]: sucessfully refresh access_token
[2025-06-07 22:36:18,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:36:18,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 242.4s ago] {'pk_1': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106')}
[2025-06-07 22:36:18,611.611] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:36:37,926.926] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:37,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:36:37,927.927] base.py -> _exec_single_context line:1901 [INFO]: [cached since 239.7s ago] {'pk_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:37,927.927] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:36:37,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:36:37,930.930] base.py -> _exec_single_context line:1901 [INFO]: [cached since 239.7s ago] {'pk_1': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106')}
[2025-06-07 22:36:37,933.933] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:36:37,934.934] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:37] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:36:37,934.934] base.py -> _exec_single_context line:1901 [INFO]: [cached since 239.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a'), 'message_id': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©å¦‚ä¸‹ï¼š\n\nç”·å­ç»„ï¼š\n\n1. å† å†›ï¼šä¸­å›½é€‰æ‰‹ä½•æ°ï¼Œæˆç»©ä¸º1å°æ—¶03åˆ†44ç§’ã€‚\n2. äºšå†›ï¼šåŸƒå¡žä¿„æ¯”äºšé€‰æ‰‹DEJENE HAILU BIKILAã€è‚¯å°¼äºšé€‰æ‰‹Robert Keterä»¥åŠWILLY MNANGATï¼Œä¸‰äººçš„æˆç»©å‡ä¸º1å°æ—¶03åˆ†45ç§’ï¼ˆå¹¶åˆ—ï¼‰ã€‚\n ... (102 characters truncated) ... ä¸­å›½é€‰æ‰‹é™ˆä¸ºèŠ¬ï¼Œæˆç»©ä¸º1å°æ—¶14åˆ†20ç§’ã€‚\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šæˆç»©ä»…ä¾›å‚è€ƒï¼Œå…·ä½“æˆç»©å¯èƒ½ä¼šå› èµ›äº‹ç»„å§”ä¼šçš„åŽç»­è°ƒæ•´æˆ–æ­£å¼å…¬å¸ƒè€Œæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€æœ€å‡†ç¡®çš„ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…èµ›äº‹å®˜æ–¹ç½‘ç«™æˆ–å’¨è¯¢ç›¸å…³æœºæž„ã€‚\n\nå¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸­å›½é€‰æ‰‹åœ¨æœ¬æ¬¡æ¯”èµ›ä¸­è¡¨çŽ°å‡ºè‰²ï¼ŒåŒ…æ½äº†ç”·å¥³ç»„çš„å† å†›ï¼Œå±•çŽ°äº†æˆ‘å›½é©¬æ‹‰æ¾è¿åŠ¨çš„å®žåŠ›å’Œæ½œåŠ›ã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8643 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f3221657-e5a8-4de8-be67-885977f851f7", "example": false}}]', 'answer': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©å¦‚ä¸‹ï¼š\n\nç”·å­ç»„ï¼š\n\n1. å† å†›ï¼šä¸­å›½é€‰æ‰‹ä½•æ°ï¼Œæˆç»©ä¸º1å°æ—¶03åˆ†44ç§’ã€‚\n2. äºšå†›ï¼šåŸƒå¡žä¿„æ¯”äºšé€‰æ‰‹DEJENE HAILU BIKILAã€è‚¯å°¼äºšé€‰æ‰‹Robert Keterä»¥åŠWILLY MNANGATï¼Œä¸‰äººçš„æˆç»©å‡ä¸º1å°æ—¶03åˆ†45ç§’ï¼ˆå¹¶åˆ—ï¼‰ã€‚\n ... (102 characters truncated) ... ä¸­å›½é€‰æ‰‹é™ˆä¸ºèŠ¬ï¼Œæˆç»©ä¸º1å°æ—¶14åˆ†20ç§’ã€‚\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šæˆç»©ä»…ä¾›å‚è€ƒï¼Œå…·ä½“æˆç»©å¯èƒ½ä¼šå› èµ›äº‹ç»„å§”ä¼šçš„åŽç»­è°ƒæ•´æˆ–æ­£å¼å…¬å¸ƒè€Œæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€æœ€å‡†ç¡®çš„ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…èµ›äº‹å®˜æ–¹ç½‘ç«™æˆ–å’¨è¯¢ç›¸å…³æœºæž„ã€‚\n\nå¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸­å›½é€‰æ‰‹åœ¨æœ¬æ¬¡æ¯”èµ›ä¸­è¡¨çŽ°å‡ºè‰²ï¼ŒåŒ…æ½äº†ç”·å¥³ç»„çš„å† å†›ï¼Œå±•çŽ°äº†æˆ‘å›½é©¬æ‹‰æ¾è¿åŠ¨çš„å®žåŠ›å’Œæ½œåŠ›ã€‚', 'latency': 23.12825319999996}
[2025-06-07 22:36:37,943.943] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:37,944.944] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:37,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:36:37,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 261.8s ago] {'pk_1': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106')}
[2025-06-07 22:36:37,946.946] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:36:37,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 239.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8643 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f3221657-e5a8-4de8-be67-885977f851f7", "example": false}}]', 'answer': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾çš„å‰ä¸‰åæˆç»©å¦‚ä¸‹ï¼š\n\nç”·å­ç»„ï¼š\n\n1. å† å†›ï¼šä¸­å›½é€‰æ‰‹ä½•æ°ï¼Œæˆç»©ä¸º1å°æ—¶03åˆ†44ç§’ã€‚\n2. äºšå†›ï¼šåŸƒå¡žä¿„æ¯”äºšé€‰æ‰‹DEJENE HAILU BIKILAã€è‚¯å°¼äºšé€‰æ‰‹Robert Keterä»¥åŠWILLY MNANGATï¼Œä¸‰äººçš„æˆç»©å‡ä¸º1å°æ—¶03åˆ†45ç§’ï¼ˆå¹¶åˆ—ï¼‰ã€‚\n ... (102 characters truncated) ... ä¸­å›½é€‰æ‰‹é™ˆä¸ºèŠ¬ï¼Œæˆç»©ä¸º1å°æ—¶14åˆ†20ç§’ã€‚\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šæˆç»©ä»…ä¾›å‚è€ƒï¼Œå…·ä½“æˆç»©å¯èƒ½ä¼šå› èµ›äº‹ç»„å§”ä¼šçš„åŽç»­è°ƒæ•´æˆ–æ­£å¼å…¬å¸ƒè€Œæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€æœ€å‡†ç¡®çš„ä¿¡æ¯ï¼Œè¯·æŸ¥é˜…èµ›äº‹å®˜æ–¹ç½‘ç«™æˆ–å’¨è¯¢ç›¸å…³æœºæž„ã€‚\n\nå¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸­å›½é€‰æ‰‹åœ¨æœ¬æ¬¡æ¯”èµ›ä¸­è¡¨çŽ°å‡ºè‰²ï¼ŒåŒ…æ½äº†ç”·å¥³ç»„çš„å† å†›ï¼Œå±•çŽ°äº†æˆ‘å›½é©¬æ‹‰æ¾è¿åŠ¨çš„å®žåŠ›å’Œæ½œåŠ›ã€‚', 'latency': 23.12825319999996, 'message_id': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106')}
[2025-06-07 22:36:37,949.949] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:36:37,950.950] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:37,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:36:37,951.951] base.py -> _exec_single_context line:1901 [INFO]: [cached since 285s ago] {'pk_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:37,953.953] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:36:37,953.953] base.py -> _exec_single_context line:1901 [INFO]: [cached since 239.7s ago] {'conversation_id_1': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:37,954.954] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:36:37,955.955] base.py -> _exec_single_context line:1901 [INFO]: [cached since 261.8s ago] {'pk_1': UUID('d31327ca-38d7-48bb-8011-ff8c1ece9106')}
[2025-06-07 22:36:38,253.253] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:36:38,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:36:38,254.254] base.py -> _exec_single_context line:1901 [INFO]: [cached since 407.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:36:38,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:36:38,256.256] base.py -> _exec_single_context line:1901 [INFO]: [cached since 240s ago] {'pk_1': 'd31327ca-38d7-48bb-8011-ff8c1ece9106'}
[2025-06-07 22:36:48,095.095] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:36:48,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:36:48] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:36:48,532.532] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:36:48,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 241.1s ago] {'name': '2024åŒ—äº¬åŠç¨‹é©¬æ‹‰æ¾å‰ä¸‰åæˆç»©', 'conversation_id': UUID('7ca10dc3-4e60-4418-9e0e-586bdc7abe1a')}
[2025-06-07 22:36:48,534.534] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:02,819.819] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:37:02,823.823] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:02,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:02,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:02,826.826] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:02,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:02,828.828] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:37:02,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 310.2s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:02,830.830] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:02,833.833] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:02] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:37:03,086.086] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:03] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:37:03,403.403] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:03,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:03,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:03,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:03,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 432.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:03,407.407] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:37:03,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 310.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:37:03,410.410] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:37:03,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 310.7s ago] {'debug_conversation_id': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:03,411.411] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:03,413.413] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:03,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:03,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 310.5s ago] {'pk_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:03,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:37:03,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 314.3s ago] {'conversation_id_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:03,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:37:03,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 314.3s ago] {'conversation_id_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:03,421.421] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:37:03,422.422] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:03] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:37:05,784.784] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:37:05,788.788] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:05,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:05,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:05,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:05,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:05,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:37:05,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 406.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:37:05,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:37:05,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 403.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:37:05,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:37:05,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 316.7s ago] {'id_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:37:05,801.801] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:37:05,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 291.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æœç´¢ä¸Šè¯æŒ‡æ•°æœ€è¿‘çš„æŒ‡æ•°', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:05,804.804] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:05,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:05,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:05,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 312.9s ago] {'pk_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:05,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:37:05,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 291.8s ago] {'conversation_id_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:37:05,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:05,815.815] base.py -> _exec_single_context line:1901 [INFO]: [cached since 291.8s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:37:09,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:09,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 293.4s ago] {'pk_1': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda')}
[2025-06-07 22:37:09,597.597] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:09] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:37:25,329.329] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:37:25,329.329] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:25,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.1s ago] {'pk_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:25,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.1s ago] {'pk_1': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda')}
[2025-06-07 22:37:25,335.335] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:37:25,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00'), 'message_id': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œä»¥ä¸‹æ˜¯ä¸Šè¯æŒ‡æ•°æœ€è¿‘çš„æŒ‡æ•°ä¿¡æ¯ï¼š\n\n* **æ—¥æœŸ**ï¼š2025å¹´6æœˆ7æ—¥\n* **ä¸Šè¯æŒ‡æ•°æ”¶ç›˜**ï¼š3385.36ç‚¹\n* **å½“æ—¥è¡¨çŽ°**ï¼šä¸Šè¯æŒ‡æ•°ä»Šæ—¥ä»¥3384.29å¼€ç›˜ï¼Œæœ€é«˜è¾¾åˆ°3391.45ï¼Œæœ€ä½Žä¸º3379.76ï¼Œæœ€ç»ˆæ”¶ç›˜äºŽ3385.36ç‚¹ï¼Œå¾®æ¶¨0.04%ã€‚\n\næ­¤å¤–ï¼Œæ ¹æ®è¿‘æœŸå¸‚åœºåŠ¨æ€ï¼Œä¸Šè¯æŒ‡æ•°åœ¨è¿‡åŽ»ä¸€å‘¨å†…å‘ˆçŽ°çª„å¹…éœ‡è¡æ€åŠ¿ï¼Œå¤šç©ºåŠ›é‡è¾ƒä¸ºå‡è¡¡ã€‚è™½ç„¶æˆäº¤é‡ä¾ç„¶ç»´æŒé«˜ä½ï¼Œä½†è¾ƒå‰å‡ æ—¥æœ‰æ‰€èŽç¼©ï¼Œè¡¨æ˜ŽæŠ•èµ„è€…è§‚æœ›æƒ…ç»ªæœ‰æ‰€å‡æ¸©ã€‚\n\nè¯·æ³¨æ„ï¼Œä¸Šè¿°ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„æœ‰é£Žé™©ï¼Œå…¥å¸‚è¯·è°¨æ…Žã€‚å¦‚éœ€æ›´å¤šå®žæ—¶è‚¡å¸‚ä¿¡æ¯ï¼Œå»ºè®®è®¿é—®ç›¸å…³é‡‘èžæ•°æ®å¹³å°æˆ–è¯åˆ¸äº¤æ˜“æ‰€å®˜ç½‘ã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8617 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4c7a17a4-e142-4bc9-b16f-d737d5757abb", "example": false}}]', 'answer': 'æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œä»¥ä¸‹æ˜¯ä¸Šè¯æŒ‡æ•°æœ€è¿‘çš„æŒ‡æ•°ä¿¡æ¯ï¼š\n\n* **æ—¥æœŸ**ï¼š2025å¹´6æœˆ7æ—¥\n* **ä¸Šè¯æŒ‡æ•°æ”¶ç›˜**ï¼š3385.36ç‚¹\n* **å½“æ—¥è¡¨çŽ°**ï¼šä¸Šè¯æŒ‡æ•°ä»Šæ—¥ä»¥3384.29å¼€ç›˜ï¼Œæœ€é«˜è¾¾åˆ°3391.45ï¼Œæœ€ä½Žä¸º3379.76ï¼Œæœ€ç»ˆæ”¶ç›˜äºŽ3385.36ç‚¹ï¼Œå¾®æ¶¨0.04%ã€‚\n\næ­¤å¤–ï¼Œæ ¹æ®è¿‘æœŸå¸‚åœºåŠ¨æ€ï¼Œä¸Šè¯æŒ‡æ•°åœ¨è¿‡åŽ»ä¸€å‘¨å†…å‘ˆçŽ°çª„å¹…éœ‡è¡æ€åŠ¿ï¼Œå¤šç©ºåŠ›é‡è¾ƒä¸ºå‡è¡¡ã€‚è™½ç„¶æˆäº¤é‡ä¾ç„¶ç»´æŒé«˜ä½ï¼Œä½†è¾ƒå‰å‡ æ—¥æœ‰æ‰€èŽç¼©ï¼Œè¡¨æ˜ŽæŠ•èµ„è€…è§‚æœ›æƒ…ç»ªæœ‰æ‰€å‡æ¸©ã€‚\n\nè¯·æ³¨æ„ï¼Œä¸Šè¿°ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„æœ‰é£Žé™©ï¼Œå…¥å¸‚è¯·è°¨æ…Žã€‚å¦‚éœ€æ›´å¤šå®žæ—¶è‚¡å¸‚ä¿¡æ¯ï¼Œå»ºè®®è®¿é—®ç›¸å…³é‡‘èžæ•°æ®å¹³å°æˆ–è¯åˆ¸äº¤æ˜“æ‰€å®˜ç½‘ã€‚', 'latency': 19.48233140000002}
[2025-06-07 22:37:25,348.348] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:25,349.349] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:25,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 309.2s ago] {'pk_1': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda')}
[2025-06-07 22:37:25,352.352] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:37:25,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.1s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8617 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "4c7a17a4-e142-4bc9-b16f-d737d5757abb", "example": false}}]', 'answer': 'æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œä»¥ä¸‹æ˜¯ä¸Šè¯æŒ‡æ•°æœ€è¿‘çš„æŒ‡æ•°ä¿¡æ¯ï¼š\n\n* **æ—¥æœŸ**ï¼š2025å¹´6æœˆ7æ—¥\n* **ä¸Šè¯æŒ‡æ•°æ”¶ç›˜**ï¼š3385.36ç‚¹\n* **å½“æ—¥è¡¨çŽ°**ï¼šä¸Šè¯æŒ‡æ•°ä»Šæ—¥ä»¥3384.29å¼€ç›˜ï¼Œæœ€é«˜è¾¾åˆ°3391.45ï¼Œæœ€ä½Žä¸º3379.76ï¼Œæœ€ç»ˆæ”¶ç›˜äºŽ3385.36ç‚¹ï¼Œå¾®æ¶¨0.04%ã€‚\n\næ­¤å¤–ï¼Œæ ¹æ®è¿‘æœŸå¸‚åœºåŠ¨æ€ï¼Œä¸Šè¯æŒ‡æ•°åœ¨è¿‡åŽ»ä¸€å‘¨å†…å‘ˆçŽ°çª„å¹…éœ‡è¡æ€åŠ¿ï¼Œå¤šç©ºåŠ›é‡è¾ƒä¸ºå‡è¡¡ã€‚è™½ç„¶æˆäº¤é‡ä¾ç„¶ç»´æŒé«˜ä½ï¼Œä½†è¾ƒå‰å‡ æ—¥æœ‰æ‰€èŽç¼©ï¼Œè¡¨æ˜ŽæŠ•èµ„è€…è§‚æœ›æƒ…ç»ªæœ‰æ‰€å‡æ¸©ã€‚\n\nè¯·æ³¨æ„ï¼Œä¸Šè¿°ä¿¡æ¯ä»…ä¾›å‚è€ƒï¼ŒæŠ•èµ„æœ‰é£Žé™©ï¼Œå…¥å¸‚è¯·è°¨æ…Žã€‚å¦‚éœ€æ›´å¤šå®žæ—¶è‚¡å¸‚ä¿¡æ¯ï¼Œå»ºè®®è®¿é—®ç›¸å…³é‡‘èžæ•°æ®å¹³å°æˆ–è¯åˆ¸äº¤æ˜“æ‰€å®˜ç½‘ã€‚', 'latency': 19.48233140000002, 'message_id': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda')}
[2025-06-07 22:37:25,363.363] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:25,364.364] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:25,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 332.4s ago] {'pk_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:25,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:37:25,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.1s ago] {'conversation_id_1': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:25,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 309.2s ago] {'pk_1': UUID('6f19bf83-0053-45a7-88b4-5f9cf9033fda')}
[2025-06-07 22:37:25,644.644] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:25] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:37:25,956.956] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:25,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 455.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:25,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:25,959.959] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.7s ago] {'pk_1': '6f19bf83-0053-45a7-88b4-5f9cf9033fda'}
[2025-06-07 22:37:33,918.918] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:37:33,919.919] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:33] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:37:34,644.644] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:37:34,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 287.2s ago] {'name': 'æŸ¥è¯¢ä¸Šè¯æŒ‡æ•°æœ€æ–°æŒ‡æ•°', 'conversation_id': UUID('bfb9a274-65a5-4426-a32a-8c99647b0a00')}
[2025-06-07 22:37:34,647.647] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:38,128.128] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:37:38,131.131] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:38,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:38,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 467.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:38,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:38,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 467.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:38,136.136] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:37:38,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 345.5s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:38,137.137] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:38,140.140] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:38] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:37:38,459.459] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:37:38,774.774] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:38,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:38,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 468.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:38,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:38,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 468.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:38,782.782] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:37:38,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 345.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:37:38,788.788] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:37:38,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 346.1s ago] {'debug_conversation_id': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:38,794.794] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:38,798.798] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:38,798.798] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:38,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 345.8s ago] {'pk_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:37:38,800.800] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:37:38,801.801] base.py -> _exec_single_context line:1901 [INFO]: [cached since 349.7s ago] {'conversation_id_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:38,802.802] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:37:38,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 349.7s ago] {'conversation_id_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:38,813.813] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:37:38,813.813] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:38] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:37:40,663.663] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:37:40,667.667] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:40,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:40,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 470s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:37:40,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:37:40,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 470s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:37:40,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:37:40,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 441.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:37:40,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:37:40,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 438.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:37:40,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:37:40,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 351.6s ago] {'id_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:37:40,683.683] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:37:40,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 326.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æ£€ç´¢ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:37:40,686.686] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:37:40,688.688] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:37:40,688.688] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:37:40,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:37:40,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:37:40,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 326.7s ago] {'conversation_id_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:37:40,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:37:40,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 326.7s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:37:44,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:37:44,119.119] base.py -> _exec_single_context line:1901 [INFO]: [cached since 327.9s ago] {'pk_1': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b')}
[2025-06-07 22:37:44,120.120] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:37:44] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:38:15,944.944] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:15,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:38:15,945.945] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.7s ago] {'pk_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:38:15,946.946] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:38:15,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:38:15,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.7s ago] {'pk_1': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b')}
[2025-06-07 22:38:15,949.949] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:38:15,950.950] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5'), 'message_id': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'æ ¹æ®æ‚¨æä¾›çš„ä¿¡æ¯å’Œéœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**æ·„åšå¤©æ°”æ¦‚è¿°**ï¼š\n\n* **ä½“æ„Ÿæ¸©åº¦**ï¼š26Â°C\n* **å®žæ—¶å¤©æ°”**ï¼šé›¨\n* **æ¸©åº¦èŒƒå›´**ï¼š23Â°C - (æœªæä¾›æœ€é«˜æ¸©åº¦ï¼Œä½†æ ¹æ®é¢„æŠ¥ï¼Œæ—¥é—´æœ€é«˜æ°”æ¸©å¯èƒ½è¾¾åˆ°35Â°Cå·¦å³)\n ... (321 characters truncated) ... å› ä¸ºç´«å¤–çº¿å±žäºŽä¸­ç­‰å¼ºåº¦ã€‚\n* **æ—…æ¸¸**ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·ã€‚\n* **æ´—è½¦**ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨ã€‚\n* **è¿åŠ¨**ï¼šä¸é€‚å®œã€‚\n\nè¯·æ³¨æ„ï¼Œè¿™äº›å¤©æ°”æ•°æ®å’Œä¿¡æ¯æ˜¯åŸºäºŽä»Šå¤©æ—©äº›æ—¶å€™çš„è§‚æµ‹å’Œé¢„æµ‹ï¼Œå®žé™…å¤©æ°”æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€èŽ·å–æœ€æ–°ã€æœ€å‡†ç¡®çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å½“åœ°çš„å®žæ—¶å¤©æ°”é¢„æŠ¥æœåŠ¡ã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "b27c6c36-5a81-448a-a007-de6206f2c4ff", "example": false}}]', 'answer': 'æ ¹æ®æ‚¨æä¾›çš„ä¿¡æ¯å’Œéœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**æ·„åšå¤©æ°”æ¦‚è¿°**ï¼š\n\n* **ä½“æ„Ÿæ¸©åº¦**ï¼š26Â°C\n* **å®žæ—¶å¤©æ°”**ï¼šé›¨\n* **æ¸©åº¦èŒƒå›´**ï¼š23Â°C - (æœªæä¾›æœ€é«˜æ¸©åº¦ï¼Œä½†æ ¹æ®é¢„æŠ¥ï¼Œæ—¥é—´æœ€é«˜æ°”æ¸©å¯èƒ½è¾¾åˆ°35Â°Cå·¦å³)\n ... (321 characters truncated) ... å› ä¸ºç´«å¤–çº¿å±žäºŽä¸­ç­‰å¼ºåº¦ã€‚\n* **æ—…æ¸¸**ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·ã€‚\n* **æ´—è½¦**ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨ã€‚\n* **è¿åŠ¨**ï¼šä¸é€‚å®œã€‚\n\nè¯·æ³¨æ„ï¼Œè¿™äº›å¤©æ°”æ•°æ®å’Œä¿¡æ¯æ˜¯åŸºäºŽä»Šå¤©æ—©äº›æ—¶å€™çš„è§‚æµ‹å’Œé¢„æµ‹ï¼Œå®žé™…å¤©æ°”æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€èŽ·å–æœ€æ–°ã€æœ€å‡†ç¡®çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å½“åœ°çš„å®žæ—¶å¤©æ°”é¢„æŠ¥æœåŠ¡ã€‚', 'latency': 35.21073020000006}
[2025-06-07 22:38:15,966.966] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:15,970.970] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:15,970.970] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:38:15,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 359.8s ago] {'pk_1': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b')}
[2025-06-07 22:38:15,972.972] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:38:15,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.7s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "b27c6c36-5a81-448a-a007-de6206f2c4ff", "example": false}}]', 'answer': 'æ ¹æ®æ‚¨æä¾›çš„ä¿¡æ¯å’Œéœ€æ±‚ï¼Œä»¥ä¸‹æ˜¯ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**æ·„åšå¤©æ°”æ¦‚è¿°**ï¼š\n\n* **ä½“æ„Ÿæ¸©åº¦**ï¼š26Â°C\n* **å®žæ—¶å¤©æ°”**ï¼šé›¨\n* **æ¸©åº¦èŒƒå›´**ï¼š23Â°C - (æœªæä¾›æœ€é«˜æ¸©åº¦ï¼Œä½†æ ¹æ®é¢„æŠ¥ï¼Œæ—¥é—´æœ€é«˜æ°”æ¸©å¯èƒ½è¾¾åˆ°35Â°Cå·¦å³)\n ... (321 characters truncated) ... å› ä¸ºç´«å¤–çº¿å±žäºŽä¸­ç­‰å¼ºåº¦ã€‚\n* **æ—…æ¸¸**ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·ã€‚\n* **æ´—è½¦**ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨ã€‚\n* **è¿åŠ¨**ï¼šä¸é€‚å®œã€‚\n\nè¯·æ³¨æ„ï¼Œè¿™äº›å¤©æ°”æ•°æ®å’Œä¿¡æ¯æ˜¯åŸºäºŽä»Šå¤©æ—©äº›æ—¶å€™çš„è§‚æµ‹å’Œé¢„æµ‹ï¼Œå®žé™…å¤©æ°”æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚å¦‚éœ€èŽ·å–æœ€æ–°ã€æœ€å‡†ç¡®çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å½“åœ°çš„å®žæ—¶å¤©æ°”é¢„æŠ¥æœåŠ¡ã€‚', 'latency': 35.21073020000006, 'message_id': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b')}
[2025-06-07 22:38:15,974.974] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:15,975.975] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:15,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:38:15,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 383s ago] {'pk_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:38:15,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:38:15,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 337.7s ago] {'conversation_id_1': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:38:15,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:38:15,978.978] base.py -> _exec_single_context line:1901 [INFO]: [cached since 359.8s ago] {'pk_1': UUID('fe1b880e-a92c-463b-87a1-b20fe408b58b')}
[2025-06-07 22:38:16,257.257] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:16] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:38:16,565.565] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:16,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:16,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:38:16,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:38:16,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 338.4s ago] {'pk_1': 'fe1b880e-a92c-463b-87a1-b20fe408b58b'}
[2025-06-07 22:38:23,662.662] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:38:23,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.2s ago] {'name': 'æ·„åšå¤©æ°”æƒ…å†µæŸ¥è¯¢', 'conversation_id': UUID('33c23dba-41dd-487b-8c6d-e3411348d1b5')}
[2025-06-07 22:38:23,663.663] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:23,802.802] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:38:23,816.816] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:23] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:38:45,061.061] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:45,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:45,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 534.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:38:45,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:38:45,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 534.3s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:45,068.068] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:38:45,068.068] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:38:45,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:38:45,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 505.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:38:45,071.071] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:38:45,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 161.1s ago] {'model_config': '{"model": "moonshot-v1-8k", "provider": "moonshot", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 7, 22, 38, 45, 71272), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:38:45,073.073] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:45,074.074] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:38:49,319.319] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:49] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:38:49,323.323] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:49,324.324] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:49,324.324] base.py -> _exec_single_context line:1901 [INFO]: [cached since 538.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:38:49,326.326] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:38:49,326.326] base.py -> _exec_single_context line:1901 [INFO]: [cached since 538.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:49,328.328] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:38:49,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 416.7s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:49,329.329] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:49,330.330] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:49] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:38:49,646.646] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:49] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:38:49,959.959] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:49,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:49,965.965] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:38:49,966.966] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:38:49,967.967] base.py -> _exec_single_context line:1901 [INFO]: [cached since 539.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:49,969.969] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:38:49,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:38:49,972.972] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:38:49,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417.3s ago] {'debug_conversation_id': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:49,973.973] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:49,974.974] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:49,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:38:49,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 417s ago] {'pk_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef')}
[2025-06-07 22:38:49,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:38:49,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.9s ago] {'conversation_id_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:38:49,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:38:49,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 420.9s ago] {'conversation_id_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:38:49,988.988] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:38:49,991.991] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:38:51,737.737] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:38:51] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:38:51,741.741] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:51,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:51,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 541s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:38:51,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:38:51,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 541s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:38:51,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:38:51,748.748] base.py -> _exec_single_context line:1901 [INFO]: [cached since 512.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:38:51,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:38:51,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 509.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:38:51,753.753] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:38:51,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 422.7s ago] {'id_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:38:51,755.755] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:38:51,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 397.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æ£€ç´¢ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:38:51,761.761] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:38:51,826.826] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:38:51,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:38:51,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 418.9s ago] {'pk_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef')}
[2025-06-07 22:38:51,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:38:51,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 397.8s ago] {'conversation_id_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:38:51,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:38:51,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 397.8s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:39:01,961.961] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:39:01,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 405.8s ago] {'pk_1': UUID('cd901789-38eb-4ff3-9739-8818e3716992')}
[2025-06-07 22:39:01,962.962] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:01] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:39:14,225.225] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:14] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/4cc5d105-a6ec-47e7-af32-c5a1c1fcc754/stop HTTP/1.1" 200 -
[2025-06-07 22:39:14,537.537] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:14,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:14,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 563.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:14,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:39:14,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 563.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:14,549.549] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:39:14,550.550] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:14] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/tasks/4cc5d105-a6ec-47e7-af32-c5a1c1fcc754/stop HTTP/1.1" 200 -
[2025-06-07 22:39:15,104.104] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:15,104.104] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:39:15,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:39:15,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 396.9s ago] {'pk_1': UUID('e6a6967d-1052-465c-aa29-d3848176eaef')}
[2025-06-07 22:39:15,111.111] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:15] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:39:15,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:39:15,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 396.9s ago] {'pk_1': UUID('cd901789-38eb-4ff3-9739-8818e3716992')}
[2025-06-07 22:39:15,113.113] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:39:15,114.114] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'status': <QueueEvent.STOP: 'stop'>, 'message_id': UUID('cd901789-38eb-4ff3-9739-8818e3716992')}
[2025-06-07 22:39:15,115.115] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:39:15,415.415] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:15,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:15,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 564.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:15,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:39:15,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 397.2s ago] {'pk_1': 'cd901789-38eb-4ff3-9739-8818e3716992'}
[2025-06-07 22:39:17,938.938] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:39:17,941.941] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:17,942.942] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:17,943.943] base.py -> _exec_single_context line:1901 [INFO]: [cached since 567.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:17,947.947] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:39:17,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 567.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:17,948.948] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:39:17,948.948] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.3s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:17,949.949] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:39:17,952.952] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:17] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:39:18,179.179] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:18] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:39:18,485.485] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:18,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:18,486.486] base.py -> _exec_single_context line:1901 [INFO]: [cached since 567.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:18,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:39:18,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 567.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:18,490.490] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:39:18,491.491] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.6s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:39:18,493.493] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:39:18,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.8s ago] {'debug_conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:18,494.494] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:39:18,496.496] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:18,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:39:18,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445.5s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:39:18,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:39:18,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 449.4s ago] {'conversation_id_1': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:39:18,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:39:18,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 449.4s ago] {'conversation_id_1': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:39:18,503.503] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:39:18,504.504] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:18] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:39:25,740.740] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:39:25,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:25] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:39:47,414.414] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:47,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:47,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 596.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:47,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:39:47,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 596.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:47,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:39:47,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 568s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:39:47,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:39:47,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 568s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:39:47,422.422] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:39:47,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 223.4s ago] {'model_config': '{"model": "deepseek-chat", "provider": "deepseek", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 7, 22, 39, 47, 421953), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:39:47,423.423] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:39:47,424.424] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:47] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:39:55,889.889] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:39:55] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:39:56,204.204] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:56,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:56,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 605.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:39:56,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:39:56,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 605.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:39:56,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:39:56,216.216] base.py -> _exec_single_context line:1901 [INFO]: [cached since 576.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:39:56,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:39:56,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 573.9s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:39:56,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:39:56,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 487.1s ago] {'id_1': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:39:56,221.221] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:39:56,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 462.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æ£€ç´¢ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:39:56,232.232] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:39:56,297.297] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:39:56,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:39:56,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 483.3s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:39:56,300.300] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:39:56,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 462.3s ago] {'conversation_id_1': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:39:56,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:39:56,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 462.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:40:03,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:03,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 467.5s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:03,651.651] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:03] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:40:12,328.328] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:40:12,329.329] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.1s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:12,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,334.334] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.1s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,335.335] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:40:12,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'message_id': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4eca\\u5929\\u6dc4\\u535a\\u5929\\u6c14"}, "id": "call_0_24080a66-5e1e-4f21-bc03-4495b02ab4aa", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2995 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f51dc061-2991-414d-a8b7-8d0ac973180d", "example": false}}]', 'answer': '', 'latency': 7.30267450000008}
[2025-06-07 22:40:12,337.337] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:12,350.350] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 499.4s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:12,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,352.352] base.py -> _exec_single_context line:1901 [INFO]: [cached since 476.2s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,353.353] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:40:12,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'message_id': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"74\\u00b0F"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4eca\\u5929\\u6dc4\\u535a\\u5929\\u6c14"}', 'message': '{}', 'answer': '', 'latency': 1.1797816999999213}
[2025-06-07 22:40:12,356.356] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:12,356.356] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,357.357] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 499.4s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:12,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 476.2s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,365.365] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:40:12,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def'), 'message_id': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æ˜¯74Â°Fï¼ˆçº¦23Â°Cï¼‰ã€‚å¦‚æžœéœ€è¦æ›´è¯¦ç»†çš„å¤©æ°”ä¿¡æ¯ï¼ˆå¦‚æ¹¿åº¦ã€é£Žé€Ÿç­‰ï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ä¸ºæ‚¨æŸ¥è¯¢ã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4176 characters truncated) ... "id": "53625502-1f77-4f77-9e7b-3a96111a1241", "tool_call_id": "call_0_24080a66-5e1e-4f21-bc03-4495b02ab4aa", "artifact": null, "status": "success"}}]', 'answer': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æ˜¯74Â°Fï¼ˆçº¦23Â°Cï¼‰ã€‚å¦‚æžœéœ€è¦æ›´è¯¦ç»†çš„å¤©æ°”ä¿¡æ¯ï¼ˆå¦‚æ¹¿åº¦ã€é£Žé€Ÿç­‰ï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ä¸ºæ‚¨æŸ¥è¯¢ã€‚', 'latency': 7.496667799999955}
[2025-06-07 22:40:12,380.380] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:12,380.380] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 476.2s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,384.384] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:40:12,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.2s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (4176 characters truncated) ... "id": "53625502-1f77-4f77-9e7b-3a96111a1241", "tool_call_id": "call_0_24080a66-5e1e-4f21-bc03-4495b02ab4aa", "artifact": null, "status": "success"}}]', 'answer': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æ˜¯74Â°Fï¼ˆçº¦23Â°Cï¼‰ã€‚å¦‚æžœéœ€è¦æ›´è¯¦ç»†çš„å¤©æ°”ä¿¡æ¯ï¼ˆå¦‚æ¹¿åº¦ã€é£Žé€Ÿç­‰ï¼‰ï¼Œå¯ä»¥å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šè¿›ä¸€æ­¥ä¸ºæ‚¨æŸ¥è¯¢ã€‚', 'latency': 15.979123999999956, 'message_id': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,385.385] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:12,386.386] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 499.4s ago] {'pk_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:12,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:40:12,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.2s ago] {'conversation_id_1': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:12,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,402.402] base.py -> _exec_single_context line:1901 [INFO]: [cached since 476.2s ago] {'pk_1': UUID('87f12643-75ce-4e72-b4fe-07bc77e11374')}
[2025-06-07 22:40:12,645.645] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:12] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:40:12,650.650] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:12,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 621.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:40:12,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:12,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 454.4s ago] {'pk_1': '87f12643-75ce-4e72-b4fe-07bc77e11374'}
[2025-06-07 22:40:20,464.464] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:40:20,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 453s ago] {'name': 'æ·„åšå¤©æ°”æƒ…å†µæŸ¥è¯¢', 'conversation_id': UUID('ffbf79ae-608f-4999-8535-427ace678def')}
[2025-06-07 22:40:20,466.466] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:21,097.097] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:40:21,098.098] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:21] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:40:43,254.254] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:40:43,572.572] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:43,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:43,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 652.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:40:43,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:40:43,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 652.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:43,576.576] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:40:43,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 530.9s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:43,577.577] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:43,578.578] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:43] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:40:43,900.900] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:43] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:40:43,903.903] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:43,904.904] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:43,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 653.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:40:43,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:40:43,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 653.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:43,908.908] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:40:43,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 531s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:40:43,910.910] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:40:43,910.910] base.py -> _exec_single_context line:1901 [INFO]: [cached since 531.2s ago] {'debug_conversation_id': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:43,911.911] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:43,913.913] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:43,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:43,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 531s ago] {'pk_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:40:43,917.917] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:40:43,917.917] base.py -> _exec_single_context line:1901 [INFO]: [cached since 534.8s ago] {'conversation_id_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:40:43,918.918] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:40:43,919.919] base.py -> _exec_single_context line:1901 [INFO]: [cached since 534.8s ago] {'conversation_id_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:40:43,920.920] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:40:43,921.921] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:43] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:40:48,633.633] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:48,634.634] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:48,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 657.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:40:48,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:40:48,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 657.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:48,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:40:48,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 629.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:40:48,639.639] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:40:48,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 629.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:40:48,641.641] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:40:48,643.643] base.py -> _exec_single_context line:1901 [INFO]: [cached since 284.6s ago] {'model_config': '{"model": "ernie-4.0-8k", "provider": "wenxin", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_output_tokens": 2048, "disable_search": false}}', 'updated_at': datetime.datetime(2025, 6, 7, 22, 40, 48, 641516), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:40:48,644.644] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:48,646.646] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:48] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:40:50,536.536] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:50] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:40:50,852.852] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:50,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:50,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 660.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:40:50,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:40:50,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 660.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:40:50,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:40:50,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 631.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:40:50,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:40:50,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 628.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:40:50,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:40:50,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 541.8s ago] {'id_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:40:50,869.869] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:40:50,870.870] base.py -> _exec_single_context line:1901 [INFO]: [cached since 517s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æ£€ç´¢ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:40:50,871.871] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:40:50,874.874] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:40:50,875.875] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:40:50,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 537.9s ago] {'pk_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:40:50,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:40:50,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 516.9s ago] {'conversation_id_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:40:50,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:40:50,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 516.9s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:40:53,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:40:53,947.947] base.py -> _exec_single_context line:1901 [INFO]: [cached since 517.8s ago] {'pk_1': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89')}
[2025-06-07 22:40:53,949.949] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:40:53] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:41:09,103.103] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:41:09,104.104] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:41:09,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 510.9s ago] {'pk_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:41:09,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 510.9s ago] {'pk_1': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89')}
[2025-06-07 22:41:09,109.109] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:41:09,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 510.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9'), 'message_id': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**å¤©æ°”çŽ°è±¡**ï¼šæ™šé—´æœ‰é›¨ï¼Œæ—¥é—´ä¸ºé˜´ã€‚\n\n**æ¸©åº¦èŒƒå›´**ï¼šæœ€ä½Žæ°”æ¸©22â„ƒï¼Œæœ€é«˜æ°”æ¸©35â„ƒã€‚\n\n**é£ŽåŠ›ä¸Žé£Žå‘**ï¼šé£ŽåŠ›ä¸º1çº§ï¼Œé£Žå‘ä¸»è¦ä¸ºä¸œé£Žã€‚\n\n**æ¹¿åº¦**ï¼šç›¸å¯¹æ¹¿åº¦ä¸º85%ã€‚\n\n**ç´«å¤–çº¿æŒ‡æ•°**ï¼š1 ... (92 characters truncated) ... ï¼š\n- é’“é±¼ï¼šå¾ˆä¸é€‚å®œ\n- ç©¿è¡£ï¼šå»ºè®®ç©¿çŸ­è¢–ç±»è¡£ç‰©ï¼Œå› ä¸ºå¤©æ°”è¾ƒç‚Žçƒ­\n- ç´«å¤–çº¿ï¼šåŸºæœ¬é˜²æŠ¤å³å¯ï¼Œå› ä¸ºç´«å¤–çº¿å¼ºåº¦ä¸ºä¸­ç­‰\n- æ—…æ¸¸ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·\n- æ´—è½¦ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨\n- è¿åŠ¨ï¼šä¸é€‚å®œ\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šå¤©æ°”æƒ…å†µä»…ä¾›å‚è€ƒï¼Œå¦‚éœ€æ›´è¯¦ç»†æˆ–å®žæ—¶çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å®˜æ–¹å¤©æ°”é¢„æŠ¥æ¸ é“ã€‚', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5c2fa552-20a6-4a37-97e2-c12a6b08729c", "example": false}}]', 'answer': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**å¤©æ°”çŽ°è±¡**ï¼šæ™šé—´æœ‰é›¨ï¼Œæ—¥é—´ä¸ºé˜´ã€‚\n\n**æ¸©åº¦èŒƒå›´**ï¼šæœ€ä½Žæ°”æ¸©22â„ƒï¼Œæœ€é«˜æ°”æ¸©35â„ƒã€‚\n\n**é£ŽåŠ›ä¸Žé£Žå‘**ï¼šé£ŽåŠ›ä¸º1çº§ï¼Œé£Žå‘ä¸»è¦ä¸ºä¸œé£Žã€‚\n\n**æ¹¿åº¦**ï¼šç›¸å¯¹æ¹¿åº¦ä¸º85%ã€‚\n\n**ç´«å¤–çº¿æŒ‡æ•°**ï¼š1 ... (92 characters truncated) ... ï¼š\n- é’“é±¼ï¼šå¾ˆä¸é€‚å®œ\n- ç©¿è¡£ï¼šå»ºè®®ç©¿çŸ­è¢–ç±»è¡£ç‰©ï¼Œå› ä¸ºå¤©æ°”è¾ƒç‚Žçƒ­\n- ç´«å¤–çº¿ï¼šåŸºæœ¬é˜²æŠ¤å³å¯ï¼Œå› ä¸ºç´«å¤–çº¿å¼ºåº¦ä¸ºä¸­ç­‰\n- æ—…æ¸¸ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·\n- æ´—è½¦ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨\n- è¿åŠ¨ï¼šä¸é€‚å®œ\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šå¤©æ°”æƒ…å†µä»…ä¾›å‚è€ƒï¼Œå¦‚éœ€æ›´è¯¦ç»†æˆ–å®žæ—¶çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å®˜æ–¹å¤©æ°”é¢„æŠ¥æ¸ é“ã€‚', 'latency': 18.171714500000007}
[2025-06-07 22:41:09,112.112] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:41:09,114.114] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:41:09,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,127.127] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533s ago] {'pk_1': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89')}
[2025-06-07 22:41:09,133.133] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:41:09,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 510.9s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "5c2fa552-20a6-4a37-97e2-c12a6b08729c", "example": false}}]', 'answer': 'ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µå¦‚ä¸‹ï¼š\n\n**æ—¥æœŸ**ï¼š2025å¹´06æœˆ07æ—¥\n\n**å¤©æ°”çŽ°è±¡**ï¼šæ™šé—´æœ‰é›¨ï¼Œæ—¥é—´ä¸ºé˜´ã€‚\n\n**æ¸©åº¦èŒƒå›´**ï¼šæœ€ä½Žæ°”æ¸©22â„ƒï¼Œæœ€é«˜æ°”æ¸©35â„ƒã€‚\n\n**é£ŽåŠ›ä¸Žé£Žå‘**ï¼šé£ŽåŠ›ä¸º1çº§ï¼Œé£Žå‘ä¸»è¦ä¸ºä¸œé£Žã€‚\n\n**æ¹¿åº¦**ï¼šç›¸å¯¹æ¹¿åº¦ä¸º85%ã€‚\n\n**ç´«å¤–çº¿æŒ‡æ•°**ï¼š1 ... (92 characters truncated) ... ï¼š\n- é’“é±¼ï¼šå¾ˆä¸é€‚å®œ\n- ç©¿è¡£ï¼šå»ºè®®ç©¿çŸ­è¢–ç±»è¡£ç‰©ï¼Œå› ä¸ºå¤©æ°”è¾ƒç‚Žçƒ­\n- ç´«å¤–çº¿ï¼šåŸºæœ¬é˜²æŠ¤å³å¯ï¼Œå› ä¸ºç´«å¤–çº¿å¼ºåº¦ä¸ºä¸­ç­‰\n- æ—…æ¸¸ï¼šä¸€èˆ¬ï¼Œå»ºè®®æ³¨æ„é¿é›¨é˜²é›·\n- æ´—è½¦ï¼šä¸å®œï¼Œå› ä¸ºè¿‘æœŸæœ‰é›¨\n- è¿åŠ¨ï¼šä¸é€‚å®œ\n\nè¯·æ³¨æ„ï¼Œä»¥ä¸Šå¤©æ°”æƒ…å†µä»…ä¾›å‚è€ƒï¼Œå¦‚éœ€æ›´è¯¦ç»†æˆ–å®žæ—¶çš„å¤©æ°”ä¿¡æ¯ï¼Œè¯·æŸ¥è¯¢å®˜æ–¹å¤©æ°”é¢„æŠ¥æ¸ é“ã€‚', 'latency': 18.171714500000007, 'message_id': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89')}
[2025-06-07 22:41:09,143.143] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:41:09,145.145] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:41:09,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 556.2s ago] {'pk_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:41:09,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:41:09,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 510.9s ago] {'conversation_id_1': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:41:09,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 533s ago] {'pk_1': UUID('48a6ec71-8dce-47d0-8fe9-1998db991c89')}
[2025-06-07 22:41:09,427.427] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:41:09] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:41:09,429.429] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:41:09,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 678.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:41:09,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:41:09,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 511.2s ago] {'pk_1': '48a6ec71-8dce-47d0-8fe9-1998db991c89'}
[2025-06-07 22:41:17,724.724] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:41:17,724.724] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:41:17] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:41:21,071.071] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:41:21,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 513.6s ago] {'name': 'æ·„åšå¤©æ°”æƒ…å†µæŸ¥è¯¢', 'conversation_id': UUID('9c94df0d-c570-41b4-93fd-f423fe9adef9')}
[2025-06-07 22:41:21,071.071] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:42:16,939.939] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\react_agent.py', reloading
[2025-06-07 22:42:17,506.506] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-07 22:42:40,546.546] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-07 22:42:40,548.548] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-07 22:43:30,038.038] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-07 22:43:30,038.038] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:43:30,039.039] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-07 22:43:30,040.040] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:43:30,040.040] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-07 22:43:30,041.041] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-07 22:43:30,042.042] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:30,044.044] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:30,044.044] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:43:30,049.049] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:43:30,049.049] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:30,053.053] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-07 22:43:30,053.053] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:43:30,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:43:30,057.057] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:43:30,064.064] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-07 22:43:30,064.064] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00341s] {'model_config': '{"model": "deepseek-r1-8b", "provider": "ollama", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "max_tokens": 4096}}', 'updated_at': datetime.datetime(2025, 6, 7, 22, 43, 30, 59868), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-07 22:43:30,066.066] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:30,068.068] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:30] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-07 22:43:32,887.887] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:32] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:43:33,291.291] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:33,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:33,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.247s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:43:33,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:43:33,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.245s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:33,295.295] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:43:33,296.296] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:33,297.297] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:33,299.299] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:33] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-07 22:43:33,309.309] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:43:33,466.466] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:33,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:33,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.424s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:43:33,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:43:33,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.422s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:33,475.475] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-07 22:43:33,476.476] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00169s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:43:33,482.482] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-07 22:43:33,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1872s ago] {'debug_conversation_id': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:33,485.485] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:33,487.487] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:33,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:43:33,489.489] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:43:33,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-07 22:43:33,496.496] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:43:33,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-07 22:43:33,502.502] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:43:33,504.504] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:43:33,505.505] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:33] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-07 22:43:36,368.368] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:36] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:43:36,371.371] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:36,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:36,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.328s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:43:36,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-07 22:43:36,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.327s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-07 22:43:36,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-07 22:43:36,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.321s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-07 22:43:36,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-07 22:43:36,379.379] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-07 22:43:36,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-07 22:43:36,383.383] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00164s] {'id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-07 22:43:36,385.385] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-07 22:43:36,386.386] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'å¸®æˆ‘æ£€ç´¢ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-07 22:43:36,388.388] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:36,457.457] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:36,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:43:36,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.97s ago] {'pk_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:43:36,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-07 22:43:36,461.461] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-07 22:43:36,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:36,464.464] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-07 22:43:42,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:43:42,802.802] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-07 22:43:42,803.803] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:42] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-07 22:43:58,394.394] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:43:58,507.507] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:58,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:43:58,509.509] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:43:58,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:43:58,513.513] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-07 22:43:58,517.517] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, answer, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(answer)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.message_token_count, message_agent_thought.message_unit_price, message_agent_thought.message_price_unit, message_agent_thought.answer_token_count, message_agent_thought.answer_unit_price, message_agent_thought.answer_price_unit, message_agent_thought.total_token_count, message_agent_thought.total_price, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-07 22:43:58,517.517] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5'), 'message_id': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': '<think>\nå¥½çš„ï¼Œç”¨æˆ·è®©æˆ‘å¸®ä»–æŸ¥ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šè¿™æ˜¯ä¸€ä¸ªéœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·çš„é—®é¢˜ã€‚æ ¹æ®é¢„è®¾è§„åˆ™ï¼Œå½“ä»»åŠ¡è¶…å‡ºçŸ¥è¯†èŒƒå›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡Œæ£€ç´¢ã€‚\n\næˆ‘æŸ¥çœ‹äº†å·¥å…·æè¿°ï¼Œæœ‰google_serperè¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æœç´¢æŸ¥è¯¢è¯­å¥ã€‚ç”¨æˆ·æä¾›çš„æŸ¥è¯¢æ˜¯â€œä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µâ€ï¼Œè¿™æ˜Ž ... (287 characters truncated) ... perå·¥å…·è¿›è¡Œæœç´¢äº†ã€‚\n</think>\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ", "title": "Query", "type": "string"}}}\n```', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "1eaab74e-9871-4f08-87c8-7878f889b2d2", "example": false}}]', 'answer': '<think>\nå¥½çš„ï¼Œç”¨æˆ·è®©æˆ‘å¸®ä»–æŸ¥ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šè¿™æ˜¯ä¸€ä¸ªéœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·çš„é—®é¢˜ã€‚æ ¹æ®é¢„è®¾è§„åˆ™ï¼Œå½“ä»»åŠ¡è¶…å‡ºçŸ¥è¯†èŒƒå›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡Œæ£€ç´¢ã€‚\n\næˆ‘æŸ¥çœ‹äº†å·¥å…·æè¿°ï¼Œæœ‰google_serperè¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æœç´¢æŸ¥è¯¢è¯­å¥ã€‚ç”¨æˆ·æä¾›çš„æŸ¥è¯¢æ˜¯â€œä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µâ€ï¼Œè¿™æ˜Ž ... (287 characters truncated) ... perå·¥å…·è¿›è¡Œæœç´¢äº†ã€‚\n</think>\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ", "title": "Query", "type": "string"}}}\n```', 'latency': 21.599992200000003}
[2025-06-07 22:43:58,526.526] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:58,527.527] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:58,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:43:58,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.73s ago] {'pk_1': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-07 22:43:58,530.530] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-07 22:43:58,530.530] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (8631 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "1eaab74e-9871-4f08-87c8-7878f889b2d2", "example": false}}]', 'answer': '<think>\nå¥½çš„ï¼Œç”¨æˆ·è®©æˆ‘å¸®ä»–æŸ¥ä¸€ä¸‹ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šè¿™æ˜¯ä¸€ä¸ªéœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·çš„é—®é¢˜ã€‚æ ¹æ®é¢„è®¾è§„åˆ™ï¼Œå½“ä»»åŠ¡è¶…å‡ºçŸ¥è¯†èŒƒå›´æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡Œæ£€ç´¢ã€‚\n\næˆ‘æŸ¥çœ‹äº†å·¥å…·æè¿°ï¼Œæœ‰google_serperè¿™ä¸ªå·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æœç´¢æŸ¥è¯¢è¯­å¥ã€‚ç”¨æˆ·æä¾›çš„æŸ¥è¯¢æ˜¯â€œä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µâ€ï¼Œè¿™æ˜Ž ... (287 characters truncated) ... perå·¥å…·è¿›è¡Œæœç´¢äº†ã€‚\n</think>\n\n```json\n{"name": "google_serper", "args": {"query": {"description": "ä»Šå¤©æ·„åšçš„å¤©æ°”æƒ…å†µ", "title": "Query", "type": "string"}}}\n```', 'latency': 21.599992200000003, 'message_id': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-07 22:43:58,532.532] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-07 22:43:58,534.534] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:58,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-07 22:43:58,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.05s ago] {'pk_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:43:58,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-07 22:43:58,539.539] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'conversation_id_1': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:43:58,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:43:58,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15.74s ago] {'pk_1': UUID('3dc97630-dc1e-4e85-9069-7e99b9b7de4a')}
[2025-06-07 22:43:58,714.714] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:43:58] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:43:59,023.023] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-07 22:43:59,024.024] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-07 22:43:59,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.98s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-07 22:43:59,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-07 22:43:59,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5144s ago] {'pk_1': '3dc97630-dc1e-4e85-9069-7e99b9b7de4a'}
[2025-06-07 22:44:07,176.176] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-07 22:44:07,177.177] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [07/Jun/2025 22:44:07] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-07 22:44:16,806.806] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-07 22:44:16,810.810] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00431s] {'name': 'æ·„åšå¤©æ°”æƒ…å†µæŸ¥è¯¢', 'conversation_id': UUID('23540f2f-4567-41df-8b05-b09fb2d8b0a5')}
[2025-06-07 22:44:16,812.812] base.py -> _commit_impl line:1140 [INFO]: COMMIT
