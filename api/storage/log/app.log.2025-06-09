[2025-06-09 10:11:55,703.703] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 10:11:55,707.707] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 10:11:55,709.709] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:12:18,797.797] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:12:18,801.801] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:13:10,570.570] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:13:10,571.571] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:13:10,575.575] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:13:10,575.575] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:13:10,577.577] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:13:10,577.577] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:13:10,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:13:10,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:13:10,581.581] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-09 10:13:10,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:13:10,590.590] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:13:10,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:13:10,610.610] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 6, 2, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 9, 0, 0), 'answer_1': ''}
[2025-06-09 10:13:10,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:13:10,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009303s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 5, 26, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 2, 0, 0), 'answer_1': ''}
[2025-06-09 10:13:10,620.620] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type Decimal is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\analysis_handler.py", line 17, in get_app_analysis
    app_analysis = self.analysis_service.get_app_analysis(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\analysis_service.py", line 78, in get_app_analysis
    self.redis_client.setex(cache_key, 24 * 60 * 60, json.dumps(app_analysis))
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
[2025-06-09 10:13:10,645.645] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:13:10,683.683] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:13:10] "[35m[1mGET /analysis/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1[0m" 500 -
[2025-06-09 10:16:52,265.265] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:16:52,266.266] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:16:52,266.266] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.7s ago] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-09 10:16:52,269.269] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:16:52,269.269] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:16:52,271.271] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:16:52,271.271] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 6, 2, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 9, 0, 0), 'answer_1': ''}
[2025-06-09 10:16:52,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:16:52,272.272] base.py -> _exec_single_context line:1901 [INFO]: [cached since 221.7s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 5, 26, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 2, 0, 0), 'answer_1': ''}
[2025-06-09 10:16:52,273.273] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type Decimal is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\analysis_handler.py", line 17, in get_app_analysis
    app_analysis = self.analysis_service.get_app_analysis(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\analysis_service.py", line 78, in get_app_analysis
    self.redis_client.setex(cache_key, 24 * 60 * 60, json.dumps(app_analysis))
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
[2025-06-09 10:16:52,274.274] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:16:52,285.285] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:16:52] "[35m[1mGET /analysis/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1[0m" 500 -
[2025-06-09 10:18:32,608.608] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 10:18:32,608.608] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 10:18:32,609.609] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:18:56,725.725] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:18:56,727.727] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:18:57,054.054] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:18:57,054.054] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:18:57,055.055] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:18:57,055.055] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:18:57,056.056] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:18:57,056.056] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:18:57,056.056] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:18:57,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:18:57,059.059] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-09 10:18:57,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:18:57,143.143] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:18:57,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:18:57,150.150] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 6, 2, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 9, 0, 0), 'answer_1': ''}
[2025-06-09 10:18:57,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:18:57,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003343s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 5, 26, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 2, 0, 0), 'answer_1': ''}
[2025-06-09 10:18:57,153.153] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Object of type Decimal is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\analysis_handler.py", line 17, in get_app_analysis
    app_analysis = self.analysis_service.get_app_analysis(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\analysis_service.py", line 78, in get_app_analysis
    self.redis_client.setex(cache_key, 24 * 60 * 60, json.dumps(app_analysis))
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\Lenovo\.pyenv\pyenv-win\versions\3.9.12\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Decimal is not JSON serializable
[2025-06-09 10:18:57,155.155] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:18:57,169.169] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:18:57] "[35m[1mGET /analysis/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1[0m" 500 -
[2025-06-09 10:22:35,560.560] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\analysis_service.py', reloading
[2025-06-09 10:22:35,912.912] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:22:59,211.211] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:23:23,676.676] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:23:23,679.679] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:23:50,705.705] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\analysis_service.py', reloading
[2025-06-09 10:23:51,068.068] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:24:15,269.269] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:24:15,271.271] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:24:41,302.302] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\analysis_service.py', reloading
[2025-06-09 10:24:41,677.677] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:25:06,348.348] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:25:06,350.350] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:25:06,736.736] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:25:06,738.738] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:25:06,738.738] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:25:06,738.738] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:25:06,739.739] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:25:06,739.739] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:25:06,740.740] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:25:06,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:25:06,819.819] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-09 10:25:06,822.822] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:25:06,822.822] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:25:06,828.828] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: float() argument must be a string or a number, not 'InstrumentedAttribute'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\analysis_handler.py", line 17, in get_app_analysis
    app_analysis = self.analysis_service.get_app_analysis(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\analysis_service.py", line 47, in get_app_analysis
    seven_days_messages = self.get_messages_by_time_range(app, seven_days_ago, today_midnight)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\analysis_service.py", line 86, in get_messages_by_time_range
    Message.latency, float(Message.total_token_count), float(Message.total_price),
TypeError: float() argument must be a string or a number, not 'InstrumentedAttribute'
[2025-06-09 10:25:06,830.830] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:25:06,838.838] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:25:06] "[35m[1mGET /analysis/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1[0m" 500 -
[2025-06-09 10:25:39,390.390] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\analysis_service.py', reloading
[2025-06-09 10:25:39,754.754] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:26:03,981.981] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:26:03,985.985] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:26:04,473.473] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:26:04,474.474] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:26:04,475.475] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:26:04,475.475] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:26:04,476.476] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:26:04,476.476] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:26:04,564.564] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:26:04,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:26:04,573.573] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00424s] {'pk_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b')}
[2025-06-09 10:26:04,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:26:04,581.581] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:26:04,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:26:04,589.589] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 6, 2, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 9, 0, 0), 'answer_1': ''}
[2025-06-09 10:26:04,592.592] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:26:04,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003453s ago] {'app_id_1': UUID('83040ed9-0795-43db-99da-b6eb2321a71b'), 'created_at_1': datetime.datetime(2025, 5, 26, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 2, 0, 0), 'answer_1': ''}
[2025-06-09 10:26:04,597.597] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:26:04,598.598] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:26:04] "GET /analysis/83040ed9-0795-43db-99da-b6eb2321a71b HTTP/1.1" 200 -
[2025-06-09 10:28:17,045.045] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:28:17,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:28:17,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:28:17,047.047] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:28:17,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:28:17,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:28:17,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'created_at_1': datetime.datetime(2025, 6, 2, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 9, 0, 0), 'answer_1': ''}
[2025-06-09 10:28:17,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.conversation_id AS message_conversation_id, message.created_by AS message_created_by, message.latency AS message_latency, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.created_at AS message_created_at 
FROM message 
WHERE message.app_id = %(app_id_1)s::UUID AND message.created_at >= %(created_at_1)s AND message.created_at < %(created_at_2)s AND message.answer != %(answer_1)s
[2025-06-09 10:28:17,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 132.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'created_at_1': datetime.datetime(2025, 5, 26, 0, 0), 'created_at_2': datetime.datetime(2025, 6, 2, 0, 0), 'answer_1': ''}
[2025-06-09 10:28:17,054.054] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:28:17,055.055] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:28:17] "GET /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 10:48:47,637.637] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 10:48:47,638.638] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 10:48:47,640.640] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:49:11,367.367] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:49:11,377.377] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:49:11,747.747] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:11] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:49:11,750.750] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:11] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 10:49:11,752.752] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:11] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 10:49:12,237.237] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:49:12,238.238] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:49:12,239.239] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:49:12,240.240] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:49:12,240.240] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:49:12,241.241] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:49:12,242.242] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:12,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,245.245] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:12,248.248] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:12,249.249] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:12] "GET /account HTTP/1.1" 200 -
[2025-06-09 10:49:12,301.301] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:12,302.302] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,302.302] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05767s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:12,307.307] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,307.307] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-09 10:49:12,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:49:12,316.316] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:12,322.322] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:49:12,323.323] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:12,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 10:49:12,331.331] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'message_id_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-09 10:49:12,337.337] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:12,338.338] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:12] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:49:12,369.369] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:12,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.126s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:12,374.374] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06812s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-09 10:49:12,379.379] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 10:49:12,379.379] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:12,392.392] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:12,437.437] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:12,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,438.438] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-09 10:49:12,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 10:49:12,443.443] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 10:49:12,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:12,719.719] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:49:13,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:13,235.235] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.01882s] {'pk_1': UUID('ee0600e1-316c-400e-bd8c-d715852676e1')}
[2025-06-09 10:49:13,237.237] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:13] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 10:49:16,272.272] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:16,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:16,274.274] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:16,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:16,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.969s ago] {'pk_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba')}
[2025-06-09 10:49:16,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:49:16,285.285] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.97s ago] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:16,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:49:16,290.290] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.969s ago] {'conversation_id_1': UUID('d8c73758-a773-4bd7-87c2-fd3215056fba'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:16,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 10:49:16,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.964s ago] {'message_id_1': UUID('f0d3dd68-f3d6-44f6-b7ae-541ac95778a1')}
[2025-06-09 10:49:16,296.296] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:16,297.297] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:16] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:49:16,581.581] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:16,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:16,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.339s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:16,584.584] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:16,585.585] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:16] "GET /account HTTP/1.1" 200 -
[2025-06-09 10:49:22,695.695] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:39,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:39] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 10:49:40,263.263] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:40,264.264] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:40,265.265] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.02s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:40,267.267] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 10:49:40,267.267] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:49:40,272.272] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:40,274.274] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:40] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 10:49:40,284.284] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:40] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:49:40,529.529] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:40,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:40,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.29s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:40,535.535] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 10:49:40,535.535] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:49:40,538.538] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 10:49:40,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2714s ago] {'assistant_agent_conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:49:40,539.539] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:40,540.540] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:40,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:40,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.1s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:40,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:49:40,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.23s ago] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:40,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:49:40,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.22s ago] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:40,547.547] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:40,551.551] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:40] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:49:43,210.210] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:43] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 10:49:43,213.213] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:43,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:43,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.97s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:43,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:43,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.91s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:43,218.218] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 10:49:43,219.219] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.84s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:49:43,226.226] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:43,290.290] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:43,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:43,292.292] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.85s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:43,293.293] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 10:49:43,294.294] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.85s ago] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 10:49:43,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:43,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 30.58s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:49:50,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.53s ago] {'pk_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:49:50,747.747] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:50] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 10:49:50,760.760] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:50,761.761] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:50,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.46s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:50,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,768.768] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00068s] {'pk_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:49:50,772.772] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 10:49:50,773.773] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:50] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 10:49:50,773.773] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00145s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'message_id': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2860 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "68aee00f-50d8-4282-a400-d0ae0f954191", "example": false}}]', 'message_token_count': 535, 'message_unit_price': 0.0, 'message_price_unit': 0.0, 'answer': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'answer_token_count': 92, 'answer_unit_price': 0.0, 'answer_price_unit': 0.0, 'total_token_count': 627, 'total_price': 0.0, 'latency': 7.424337999999999}
[2025-06-09 10:49:50,786.786] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:50,787.787] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:50,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.57s ago] {'pk_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:49:50,792.792] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, latency=%(latency)s, total_token_count=%(total_token_count)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 10:49:50,792.792] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2860 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "68aee00f-50d8-4282-a400-d0ae0f954191", "example": false}}]', 'message_token_count': 535, 'answer': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'answer_token_count': 92, 'latency': 7.424337999999999, 'total_token_count': 627, 'message_id': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:49:50,793.793] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:50,794.794] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:50,795.795] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,795.795] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.58s ago] {'pk_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:49:50,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:50,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.36s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:51,085.085] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:51,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:49:51,086.086] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.84s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:49:51,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:51,088.088] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.321s ago] {'pk_1': 'aae8c4a3-1057-4d3b-a511-ebbdaf11d6de'}
[2025-06-09 10:49:58,799.799] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:49:58,800.800] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:49:58] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 10:49:58,980.980] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 10:49:58,980.980] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'summary': 'äººç±»ä¸AIææå¼ï¼AIååºå¹¶è¯¢é®æ¯å¦éè¦å¸®å©ã', 'conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:58,986.986] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:49:58,988.988] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:49:58,989.989] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:49:58,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.55s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:58,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 10:49:58,995.995] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:49:58,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:49:58,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.78s ago] {'pk_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:50:01,708.708] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:50:01] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:50:01,710.710] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:50:01] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 10:50:01,713.713] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:50:01,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:50:01,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.47s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:50:01,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:50:01,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.41s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:50:01,719.719] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:50:01,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.41s ago] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:50:01,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:50:01,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.4s ago] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:50:01,726.726] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 10:50:01,726.726] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.4s ago] {'message_id_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:50:01,728.728] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:50:01,729.729] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:50:01] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:50:02,022.022] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:50:02,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:50:02,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 49.78s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:50:02,025.025] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:50:02,026.026] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:50:02] "GET /account HTTP/1.1" 200 -
[2025-06-09 10:50:04,598.598] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 10:50:04,598.598] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'name': 'ç¨æ·é®åæ', 'conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:50:04,600.600] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:13,244.244] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:13] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 10:52:13,563.563] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:13,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:13,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 181.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:13,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:52:13,576.576] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00279s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 10:52:13,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 10:52:13,581.581] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:52:13,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:13,584.584] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:13,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:13,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006791s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:13,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:13,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008267s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:13,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 10:52:13,606.606] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00076s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 10:52:13,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:13,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0254s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:13,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 10:52:13,616.616] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01079s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 10:52:13,620.620] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:13,621.621] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:13] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 10:52:16,680.680] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:16] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 10:52:16,684.684] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:16,684.684] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:16,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 184.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:16,693.693] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:16,694.694] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:16] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 10:52:17,014.014] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 10:52:17,016.016] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 10:52:17,022.022] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:52:17,023.023] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 10:52:17,025.025] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 10:52:17,327.327] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 10:52:17,329.329] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:17,330.330] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:17,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:17,339.339] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:17,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:17,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,345.345] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00096s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:17,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:52:17,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:17,349.349] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00108s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 10:52:17,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 10:52:17,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01149s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:17,356.356] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00474s] {'id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 10:52:17,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:52:17,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 10:52:17,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:17,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:52:17,361.361] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00121s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:52:17,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.778s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:17,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 10:52:17,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:52:17,366.366] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00203s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 10:52:17,366.366] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00130s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 10:52:17,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185s ago] {'conversation_id_1': UUID('12c90745-6006-4adb-9fbd-c5c1ba09b26b'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:52:17,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 10:52:17,369.369] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:17,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185s ago] {'message_id_1': UUID('23de0d2b-5ecb-4b35-8303-3f58acbb553b')}
[2025-06-09 10:52:17,372.372] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 10:52:17,374.374] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00332s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 10:52:17,376.376] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:17,377.377] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:52:17,381.381] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 10:52:17,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,382.382] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00255s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 10:52:17,385.385] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02266s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 10:52:17,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01817s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 10:52:17,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01087s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 10:52:17,391.391] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02785s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 10:52:17,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02259s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 10:52:17,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01479s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 10:52:17,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03194s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 10:52:17,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02707s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 10:52:17,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,399.399] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01975s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 10:52:17,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03742s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 10:52:17,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03245s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 10:52:17,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02554s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 10:52:17,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,408.408] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04383s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 10:52:17,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03926s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 10:52:17,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03202s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 10:52:17,413.413] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,413.413] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04934s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 10:52:17,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04469s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 10:52:17,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03759s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 10:52:17,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,419.419] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05526s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 10:52:17,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05093s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 10:52:17,422.422] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04385s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 10:52:17,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06102s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 10:52:17,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05634s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 10:52:17,428.428] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04925s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 10:52:17,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06678s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 10:52:17,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06195s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 10:52:17,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05431s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 10:52:17,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07142s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 10:52:17,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,437.437] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06645s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 10:52:17,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05877s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 10:52:17,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07571s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 10:52:17,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,441.441] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07064s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 10:52:17,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,443.443] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06326s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 10:52:17,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08023s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 10:52:17,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07503s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 10:52:17,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0673s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 10:52:17,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08419s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 10:52:17,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07894s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 10:52:17,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07145s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 10:52:17,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08928s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 10:52:17,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08519s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 10:52:17,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07791s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 10:52:17,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09516s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 10:52:17,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09024s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 10:52:17,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08255s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 10:52:17,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09958s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 10:52:17,463.463] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:17,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09484s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 10:52:17,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:17,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08816s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 10:52:17,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1249s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:17,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1061s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 10:52:17,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:17,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1026s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 10:52:17,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.889s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:17,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09534s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 10:52:17,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,476.476] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:17,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.118s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 10:52:17,483.483] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 10:52:17,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1137s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 10:52:17,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,486.486] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1064s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 10:52:17,487.487] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,488.488] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1241s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 10:52:17,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,489.489] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1191s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 10:52:17,490.490] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 10:52:17,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1114s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 10:52:17,493.493] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:17,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 10:52:17,594.594] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:17,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:17,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 185.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:17,597.597] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:17,597.597] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:17] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 10:52:18,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:18] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 10:52:18,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:18] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 10:52:20,088.088] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:20] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 10:52:20,091.091] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:20,091.091] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:20,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 187.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:20,094.094] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:20,094.094] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.75s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:20,096.096] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 10:52:20,096.096] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:20,098.098] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:20,100.100] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:20] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 10:52:20,416.416] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:20,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:20,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 188.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:20,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:20,421.421] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.076s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:20,422.422] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 10:52:20,422.422] base.py -> _exec_single_context line:1901 [INFO]: [cached since 159.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:52:20,427.427] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 10:52:20,428.428] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3315s ago] {'debug_conversation_id': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:20,431.431] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:20,432.432] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:20,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:52:20,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 188s ago] {'pk_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:20,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:52:20,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 188.1s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:52:20,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:52:20,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 188.1s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:52:20,449.449] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:20,454.454] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:20] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:52:25,773.773] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:25] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 10:52:25,776.776] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:25,778.778] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:25,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:25,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 10:52:25,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.436s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 10:52:25,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 10:52:25,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 12.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 10:52:25,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 10:52:25,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.42s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 10:52:25,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 10:52:25,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.436s ago] {'id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 10:52:25,789.789] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 10:52:25,796.796] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:52:25,799.799] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:25,851.851] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:25,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:52:25,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.4s ago] {'pk_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:25,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 10:52:25,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.4s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 10:52:25,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:25,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 193.1s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:52:29,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:52:29,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 196.3s ago] {'pk_1': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 10:52:29,535.535] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 10:52:30,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:30,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:52:30,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 198.1s ago] {'pk_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:30,446.446] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:30,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:52:30,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 159.7s ago] {'pk_1': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 10:52:30,454.454] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 10:52:30,454.454] base.py -> _exec_single_context line:1901 [INFO]: [cached since 159.7s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'message_id': UUID('624a21be-90f0-4256-9d44-4935236dda50'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "765cdd25-5334-4f35-b70b-217ac0d3ad88", "example": false}}]', 'message_token_count': 544, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 128, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 672, 'total_price': 0.0012000000000000001, 'latency': 4.558735500000012}
[2025-06-09 10:52:30,461.461] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:30,462.462] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:30,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:52:30,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 197.2s ago] {'pk_1': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 10:52:30,465.465] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 10:52:30,465.465] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "765cdd25-5334-4f35-b70b-217ac0d3ad88", "example": false}}]', 'message_token_count': 544, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 128, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'latency': 4.558735500000012, 'total_token_count': 672, 'total_price': 0.0012000000000000001, 'message_id': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 10:52:30,466.466] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:30,469.469] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:30,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:52:30,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 198s ago] {'pk_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:30,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 10:52:30,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 151.5s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:30,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:52:30,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 197.3s ago] {'pk_1': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 10:52:30,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:30] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 10:52:31,068.068] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:52:31,068.068] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:52:31,069.069] base.py -> _exec_single_context line:1901 [INFO]: [cached since 198.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:52:31,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:52:31,072.072] base.py -> _exec_single_context line:1901 [INFO]: [cached since 160.3s ago] {'pk_1': '624a21be-90f0-4256-9d44-4935236dda50'}
[2025-06-09 10:52:38,184.184] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 10:52:38,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 153.6s ago] {'name': 'ç¨æ·é®åæ', 'conversation_id': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6')}
[2025-06-09 10:52:38,185.185] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:52:38,356.356] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:52:38,356.356] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:52:38] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 10:55:57,188.188] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\language_model\\providers\\openai\\chat.py', reloading
[2025-06-09 10:55:57,676.676] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:56:28,683.683] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 10:56:28,683.683] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 10:56:28,684.684] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 10:56:53,020.020] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 10:56:53,022.022] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 10:56:53,183.183] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:56:53] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:56:53,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:56:53] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 10:56:53,592.592] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 10:56:53,592.592] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:56:53,594.594] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 10:56:53,594.594] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:56:53,594.594] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 10:56:53,595.595] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 10:56:53,595.595] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:56:53,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:56:53,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,677.677] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:56:53,680.680] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 10:56:53,681.681] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:56:53,687.687] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 10:56:53,728.728] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:56:53,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,730.730] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:56:53,733.733] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 10:56:53,733.733] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 10:56:53,770.770] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 10:56:53,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,838.838] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1669s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 10:56:53,839.839] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 10:56:53,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 10:56:53,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1653s ago] {'pk_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a')}
[2025-06-09 10:56:53,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 10:56:53,852.852] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00081s] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:56:53,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 10:56:53,857.857] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'conversation_id_1': UUID('5303af68-2690-43fe-94ee-6aca16a43a8a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 10:56:53,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 10:56:53,865.865] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00483s] {'message_id_1': UUID('aae8c4a3-1057-4d3b-a511-ebbdaf11d6de')}
[2025-06-09 10:56:53,867.867] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 10:56:53,868.868] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:56:53] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 10:56:54,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 10:56:54,098.098] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00138s] {'pk_1': UUID('19232829-7aca-483e-bc9f-00eb9c851913')}
[2025-06-09 10:56:54,099.099] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 10:56:54] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:00:18,104.104] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-09 11:00:18,520.520] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:00:43,471.471] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:00:43,486.486] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:03:16,770.770] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:03:16,770.770] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:03:16,771.771] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:03:40,981.981] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:03:40,984.984] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:03:41,144.144] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "OPTIONS /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,145.145] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "OPTIONS /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,148.148] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "OPTIONS /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,582.582] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:03:41,582.582] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:03:41,583.583] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:03:41,583.583] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:03:41,585.585] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:03:41,585.585] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:03:41,585.585] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:41,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:41,587.587] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:41,593.593] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:03:41,594.594] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "POST /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,646.646] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:41,646.646] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:41,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0594s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:41,651.651] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:03:41,651.651] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "POST /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,711.711] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:41,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:41,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1256s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:41,716.716] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:03:41,717.717] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "POST /assistant-agent/chat/125bd8a5-be46-46c7-8139-3b77ab5480cd/stop HTTP/1.1" 200 -
[2025-06-09 11:03:41,916.916] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:03:41,918.918] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:41,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:41,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.333s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:41,922.922] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:03:41,922.922] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:03:41,925.925] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:03:41,926.926] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:03:41,962.962] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:41] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:03:42,154.154] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:42] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:03:42,276.276] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:42,276.276] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:42,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.6893s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:42,278.278] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:03:42,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:42] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:03:42,462.462] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:42,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:42,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.876s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:42,465.465] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:03:42,465.465] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:03:42,473.473] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:03:42,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5517s ago] {'assistant_agent_conversation_id': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:03:42,474.474] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:03:42,475.475] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:42,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:03:42,477.477] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:03:42,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:03:42,481.481] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:03:42,485.485] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:03:42,486.486] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:03:42,492.492] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:03:42,493.493] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:42] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:03:42,540.540] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:03:42,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:03:42,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.9537s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:03:42,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:03:42,543.543] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00024s] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:03:42,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:03:42,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06383s ago] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:03:42,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:03:42,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0714s ago] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:03:42,557.557] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:03:42,558.558] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:03:42] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:04:22,614.614] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:22] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:04:22,617.617] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:22,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:04:22,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:04:22,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:04:22,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.08s ago] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:04:22,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:04:22,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.14s ago] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:04:22,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:04:22,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 40.14s ago] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:04:22,628.628] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:04:22,628.628] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:22] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:04:22,917.917] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:22] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:04:23,228.228] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:23,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:04:23,229.229] base.py -> _exec_single_context line:1901 [INFO]: [cached since 41.64s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:04:23,230.230] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:04:23,231.231] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:23] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:04:26,817.817] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:26] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:04:26,820.820] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:26,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:04:26,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.23s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:04:26,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:04:26,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.28s ago] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:04:26,827.827] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:04:26,827.827] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:04:26,834.834] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:04:26,876.876] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:26,876.876] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:04:26,876.876] base.py -> _exec_single_context line:1901 [INFO]: [cached since 44.4s ago] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:04:26,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:04:26,879.879] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'conversation_id_1': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:04:26,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:04:26,882.882] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:04:27,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:04:27,214.214] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('d04e45e1-f54e-4c5b-b9c3-6c296444118b')}
[2025-06-09 11:04:27,216.216] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:27] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:04:34,744.744] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:04:34,750.750] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:34,750.750] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:04:34,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:04:34,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.21s ago] {'pk_1': UUID('88223d9d-9062-478d-93db-de6092d95162')}
[2025-06-09 11:04:34,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:04:34,757.757] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('d04e45e1-f54e-4c5b-b9c3-6c296444118b')}
[2025-06-09 11:04:34,761.761] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:04:34,762.762] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:34] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:04:34,763.763] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00208s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('88223d9d-9062-478d-93db-de6092d95162'), 'message_id': UUID('d04e45e1-f54e-4c5b-b9c3-6c296444118b'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:04:34,773.773] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:04:34,774.774] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:34,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:04:34,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.561s ago] {'pk_1': UUID('d04e45e1-f54e-4c5b-b9c3-6c296444118b')}
[2025-06-09 11:04:34,777.777] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:04:34,777.777] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('d04e45e1-f54e-4c5b-b9c3-6c296444118b')}
[2025-06-09 11:04:34,778.778] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:04:35,075.075] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:04:35,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:04:35,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.49s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:04:35,077.077] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:04:35,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3197s ago] {'pk_1': 'd04e45e1-f54e-4c5b-b9c3-6c296444118b'}
[2025-06-09 11:04:43,634.634] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:04:43,634.634] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:04:43] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:04:51,124.124] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-09 11:04:51,489.489] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:05:15,476.476] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:05:15,480.480] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:05:15,805.805] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:05:15] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:05:16,323.323] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:05:16,323.323] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:05:16,324.324] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:05:16,324.324] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:05:16,325.325] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:05:16,325.325] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:05:16,326.326] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:05:16,328.328] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:05:16,329.329] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:05:16,332.332] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:05:16,333.333] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:05:16,334.334] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:05:16,337.337] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:05:16] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:05:16,357.357] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:05:16] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:05:16,383.383] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:05:16,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:05:16,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05522s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:05:16,387.387] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:05:16,387.387] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:05:16,392.392] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:05:16,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06012s ago] {'assistant_agent_conversation_id': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:05:16,394.394] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:05:16,394.394] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:05:16,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:05:16,397.397] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'pk_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3')}
[2025-06-09 11:05:16,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:05:16,403.403] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'conversation_id_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:05:16,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:05:16,408.408] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'conversation_id_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:05:16,413.413] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:05:16,414.414] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:05:16] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:06:04,531.531] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:06:04] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:06:04,534.534] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:06:04,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:06:04,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.21s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:06:04,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:06:04,540.540] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3')}
[2025-06-09 11:06:04,542.542] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:06:04,543.543] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:06:04,545.545] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:06:04,606.606] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:06:04,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:06:04,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.21s ago] {'pk_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3')}
[2025-06-09 11:06:04,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:06:04,611.611] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:06:04,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:06:04,618.618] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:06:04,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:06:04,885.885] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00731s] {'pk_1': UUID('637da5a8-96a4-47df-9d75-b508f225a5b5')}
[2025-06-09 11:06:04,886.886] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:06:04] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:06:12,813.813] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:06:12,819.819] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:06:12,831.831] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:06:12] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:06:12,940.940] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:06:12,941.941] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:06:12,941.941] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.402s ago] {'pk_1': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3')}
[2025-06-09 11:06:12,945.945] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:06:12,945.945] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('637da5a8-96a4-47df-9d75-b508f225a5b5')}
[2025-06-09 11:06:12,950.950] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:06:12,950.950] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('af83c4e9-afec-40b9-a643-69c094a6b2a3'), 'message_id': UUID('637da5a8-96a4-47df-9d75-b508f225a5b5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:06:12,957.957] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:06:12,960.960] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:06:12,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:06:12,961.961] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.083s ago] {'pk_1': UUID('637da5a8-96a4-47df-9d75-b508f225a5b5')}
[2025-06-09 11:06:12,962.962] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:06:12,963.963] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('637da5a8-96a4-47df-9d75-b508f225a5b5')}
[2025-06-09 11:06:12,963.963] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:06:13,141.141] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:06:13,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:06:13,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 56.81s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:06:13,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:06:13,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2037s ago] {'pk_1': '637da5a8-96a4-47df-9d75-b508f225a5b5'}
[2025-06-09 11:06:21,357.357] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:06:21,358.358] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:06:21] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:07:05,542.542] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:07:05,542.542] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:07:05,543.543] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:07:29,366.366] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:07:29,369.369] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:07:29,706.706] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:29] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:07:30,160.160] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:07:30,160.160] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:07:30,161.161] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:07:30,161.161] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:07:30,162.162] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:07:30,162.162] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:07:30,162.162] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:30,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:07:30,166.166] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:07:30,169.169] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:07:30,169.169] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:07:30,170.170] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:07:30,174.174] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:30] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:07:30,190.190] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:30] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:07:30,296.296] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:30,297.297] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:07:30,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1315s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:07:30,301.301] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:07:30,301.301] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:07:30,307.307] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:07:30,308.308] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1385s ago] {'assistant_agent_conversation_id': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:07:30,308.308] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:07:30,311.311] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:30,312.312] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:07:30,313.313] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:07:30,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:07:30,319.319] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:07:30,325.325] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:07:30,326.326] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:07:30,329.329] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:07:30,330.330] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:30] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:07:44,154.154] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:44] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:07:44,157.157] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:44,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:07:44,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.99s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:07:44,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:07:44,165.165] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00108s] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:07:44,168.168] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:07:44,169.169] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:07:44,171.171] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:07:44,232.232] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:44,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:07:44,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.92s ago] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:07:44,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:07:44,236.236] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:07:44,239.239] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:07:44,239.239] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:07:44,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:07:44,595.595] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00523s] {'pk_1': UUID('567dc64a-221f-4c27-ad2f-24b3629b6e46')}
[2025-06-09 11:07:44,597.597] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:44] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:07:51,902.902] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:07:51,908.908] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:07:51,918.918] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:51] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:07:52,007.007] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:52,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:07:52,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.844s ago] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:07:52,012.012] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:07:52,012.012] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('567dc64a-221f-4c27-ad2f-24b3629b6e46')}
[2025-06-09 11:07:52,017.017] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:07:52,017.017] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00073s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'message_id': UUID('567dc64a-221f-4c27-ad2f-24b3629b6e46'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:07:52,023.023] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:07:52,025.025] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:52,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:07:52,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.436s ago] {'pk_1': UUID('567dc64a-221f-4c27-ad2f-24b3629b6e46')}
[2025-06-09 11:07:52,029.029] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:07:52,029.029] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('567dc64a-221f-4c27-ad2f-24b3629b6e46')}
[2025-06-09 11:07:52,030.030] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:07:52,230.230] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:07:52,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:07:52,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.07s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:07:52,234.234] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:07:52,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2224s ago] {'pk_1': '567dc64a-221f-4c27-ad2f-24b3629b6e46'}
[2025-06-09 11:07:59,937.937] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:07:59,938.938] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:07:59] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:08:02,176.176] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:02] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:02,180.180] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:02,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:02,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.02s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:02,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:02,186.186] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:08:02,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:08:02,190.190] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:08:02,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:02,193.193] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:02,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:02,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003257s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:02,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:02,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01353s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:02,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:08:02,213.213] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00055s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 11:08:02,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:02,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02875s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:02,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:08:02,224.224] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01227s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 11:08:02,226.226] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:02,226.226] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:02] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:05,037.037] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 11:08:05,349.349] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:05,350.350] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 11:08:05,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:05,353.353] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:08:05,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,354.354] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 11:08:05,355.355] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 11:08:05,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.19s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:05,365.365] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:05,369.369] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 11:08:05,613.613] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 11:08:05,659.659] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:05,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,661.661] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:05,661.661] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:05,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,663.663] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:05,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:05,666.666] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:08:05,667.667] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,668.668] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00067s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:05,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:08:05,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 11:08:05,672.672] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00159s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:08:05,673.673] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00167s] {'id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 11:08:05,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,679.679] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:05,679.679] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00422s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:08:05,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.36s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:05,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:08:05,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,685.685] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.36s ago] {'conversation_id_1': UUID('7782e08c-49d9-435c-9265-f56b6cbcfac6'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:05,685.685] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00066s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:08:05,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 11:08:05,693.693] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,693.693] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00186s] {'message_id_1': UUID('624a21be-90f0-4256-9d44-4935236dda50')}
[2025-06-09 11:08:05,694.694] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:08:05,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0211s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:08:05,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,699.699] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:05,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01466s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:08:05,700.700] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:08:05,700.700] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,701.701] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007813s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:08:05,702.702] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,705.705] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02968s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:08:05,706.706] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02186s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:08:05,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0146s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:08:05,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03492s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:08:05,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02668s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:08:05,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01959s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:08:05,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03976s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:08:05,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03192s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:08:05,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02471s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:08:05,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04472s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:08:05,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03671s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:08:05,722.722] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02934s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:08:05,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04948s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:08:05,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0413s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:08:05,726.726] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,727.727] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03387s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:08:05,728.728] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,728.728] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05373s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:08:05,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0455s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:08:05,731.731] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,731.731] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03833s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:08:05,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,733.733] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05861s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:08:05,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,735.735] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05094s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:08:05,736.736] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,737.737] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0439s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:08:05,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06405s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:08:05,739.739] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,740.740] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.056s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:08:05,741.741] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,741.741] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04872s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:08:05,743.743] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,743.743] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06893s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:08:05,744.744] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,744.744] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06068s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:08:05,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,745.745] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:08:05,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0728s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:08:05,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,749.749] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06462s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:08:05,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05706s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:08:05,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,752.752] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07685s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:08:05,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06862s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:08:05,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06116s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:08:05,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,756.756] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08131s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:08:05,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,758.758] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07339s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:08:05,759.759] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,759.759] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06618s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:08:05,760.760] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,761.761] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08629s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:08:05,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07821s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:08:05,764.764] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07096s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:08:05,765.765] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,766.766] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09107s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:08:05,767.767] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,767.767] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08306s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:08:05,768.768] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,769.769] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07562s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:08:05,770.770] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,770.770] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09547s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:08:05,771.771] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,771.771] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08719s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:08:05,772.772] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07961s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:08:05,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09934s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:08:05,775.775] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,775.775] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.091s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:08:05,776.776] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0834s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:08:05,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,778.778] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1032s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:08:05,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09485s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:08:05,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08732s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:08:05,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,783.783] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1085s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:08:05,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1006s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:08:05,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:08:05,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0934s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:08:05,787.787] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:05,789.789] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:05,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,791.791] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:05,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.63s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:05,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.127s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:05,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:05,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.606s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:05,803.803] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 11:08:05,803.803] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 11:08:05,807.807] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:05,808.808] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 11:08:05,828.828] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 11:08:05,868.868] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:05,869.869] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,869.869] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:05,872.872] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:05,872.872] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2053s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:05,874.874] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:05,875.875] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.682s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:05,877.877] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:05,878.878] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:05] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 11:08:06,145.145] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:06,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:06,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.98s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:06,150.150] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:06,151.151] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:06] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 11:08:06,652.652] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:06] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 11:08:06,652.652] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:06] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 11:08:07,609.609] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 11:08:07,920.920] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:07,921.921] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:07,921.921] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.76s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:07,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:07,923.923] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.256s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:07,924.924] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 11:08:07,925.925] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:07,927.927] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:08:07,931.931] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:07] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 11:08:08,183.183] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:08,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:08,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.02s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:08,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:08,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.519s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:08,187.187] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:08:08,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.89s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:08:08,194.194] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 11:08:08,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2694s ago] {'debug_conversation_id': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:08,196.196] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:08:08,197.197] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:08,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:08:08,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.89s ago] {'pk_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:08,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:08,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.88s ago] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:08,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:08:08,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 37.89s ago] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:08,213.213] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:08,214.214] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:08:09,696.696] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:09] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 11:08:09,703.703] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:09,704.704] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:09,705.705] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.54s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:09,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:08:09,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.042s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:08:09,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:09,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.518s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:09,713.713] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 11:08:09,714.714] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.912s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 11:08:09,717.717] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 11:08:09,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.048s ago] {'id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 11:08:09,721.721] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:08:09,721.721] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.55s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:09,725.725] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:08:09,788.788] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:09,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:08:09,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 39.48s ago] {'pk_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:09,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:08:09,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.56s ago] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:08:09,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:09,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.56s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:08:15,839.839] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:08:15,839.839] base.py -> _exec_single_context line:1901 [INFO]: [cached since 31.25s ago] {'pk_1': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:08:15,841.841] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:15] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 11:08:16,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:16,807.807] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:16,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:08:16,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.65s ago] {'pk_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:16,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:08:16,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.8s ago] {'pk_1': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:08:16,816.816] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:08:16,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'message_id': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "855c2b43-6489-41d6-938a-e97effb037ca", "example": false}}]', 'message_token_count': 541, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 125, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 666, 'total_price': 0.0011865, 'latency': 6.982535200000001}
[2025-06-09 11:08:16,823.823] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:08:16,824.824] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:16,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:08:16,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.24s ago] {'pk_1': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:08:16,827.827] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:08:16,827.827] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "855c2b43-6489-41d6-938a-e97effb037ca", "example": false}}]', 'message_token_count': 541, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 125, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'latency': 6.982535200000001, 'total_token_count': 666, 'total_price': 0.0011865, 'message_id': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:08:16,829.829] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:08:16,830.830] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:16,832.832] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:08:16,833.833] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.52s ago] {'pk_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:16,835.835] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 11:08:16,835.835] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:16,836.836] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:08:16,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.25s ago] {'pk_1': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:08:17,129.129] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:17] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:08:17,441.441] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:17,441.441] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:17,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 47.28s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:17,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:08:17,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.43s ago] {'pk_1': '283f48f7-8b4a-457f-8ab4-6f4b88704369'}
[2025-06-09 11:08:18,188.188] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:18] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:18,193.193] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:18,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:18,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.03s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:18,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:18,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.01s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:08:18,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:08:18,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.01s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:08:18,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:18,206.206] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.01s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:18,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:18,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.01s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:18,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:18,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.02s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:18,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:08:18,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.01s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 11:08:18,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:08:18,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.03s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:08:18,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:08:18,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.02s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 11:08:18,238.238] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:18,239.239] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:18] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:08:18,501.501] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:18] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:08:18,811.811] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:18,812.812] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:18,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 48.65s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:18,813.813] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:18,814.814] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:18] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:08:22,607.607] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:22] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:08:22,919.919] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:08:22,920.920] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:08:22,920.920] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.76s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:08:22,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:08:22,922.922] base.py -> _exec_single_context line:1901 [INFO]: [cached since 38.76s ago] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:08:22,923.923] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:08:22,924.924] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.61s ago] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:22,937.937] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:08:22,937.937] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.61s ago] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:08:22,942.942] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:22,942.942] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:22] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:08:24,418.418] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:08:24,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:08:24] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:08:29,272.272] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 11:08:29,273.273] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'name': 'ç¨æ·é®åæ', 'conversation_id': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf')}
[2025-06-09 11:08:29,274.274] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:13:09,431.431] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:13:09,849.849] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:13:34,119.119] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:13:34,121.121] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:14:06,905.905] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:14:07,302.302] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:14:31,647.647] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:14:31,650.650] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:14:31,822.822] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:14:31] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:14:32,241.241] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:14:32,241.241] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:14:32,242.242] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:14:32,242.242] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:14:32,243.243] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:14:32,243.243] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:14:32,244.244] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:14:32,247.247] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:14:32,247.247] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:14:32,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:14:32,338.338] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:14:32,342.342] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:14:32,342.342] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:14:32,347.347] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:14:32,391.391] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:14:32,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:14:32,393.393] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:14:32,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:14:32,395.395] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'conversation_id_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:14:32,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:14:32,399.399] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:14:32,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:14:32,575.575] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00519s] {'pk_1': UUID('77f0d678-92ea-4b19-8a2c-9005fc11cdea')}
[2025-06-09 11:14:32,576.576] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:14:32] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:14:40,268.268] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 169, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:14:40,273.273] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:14:40,284.284] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:14:40] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:14:40,287.287] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:14:40,287.287] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:14:40,287.287] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.04s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:14:40,289.289] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:14:40,289.289] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': '77f0d678-92ea-4b19-8a2c-9005fc11cdea'}
[2025-06-09 11:14:40,375.375] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:14:40,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:14:40,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.038s ago] {'pk_1': UUID('6db385d4-76f4-4401-a333-e04c503031ab')}
[2025-06-09 11:14:40,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:14:40,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08836s ago] {'pk_1': UUID('77f0d678-92ea-4b19-8a2c-9005fc11cdea')}
[2025-06-09 11:14:40,380.380] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:14:40,380.380] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('6db385d4-76f4-4401-a333-e04c503031ab'), 'message_id': UUID('77f0d678-92ea-4b19-8a2c-9005fc11cdea'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:14:40,385.385] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:14:40,386.386] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:14:40,386.386] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:14:40,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.818s ago] {'pk_1': UUID('77f0d678-92ea-4b19-8a2c-9005fc11cdea')}
[2025-06-09 11:14:40,388.388] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:14:40,389.389] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('77f0d678-92ea-4b19-8a2c-9005fc11cdea')}
[2025-06-09 11:14:40,389.389] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:14:48,254.254] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:14:48,255.255] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:14:48] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:14:51,771.771] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:14:52,132.132] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:15:16,212.212] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:15:16,214.214] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:17:12,866.866] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:17:13,213.213] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:17:37,394.394] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:17:37,396.396] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:18:01,208.208] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:18:01,208.208] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:18:01,209.209] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:18:25,282.282] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:18:25,284.284] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:18:30,815.815] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:30] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:18:31,246.246] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:18:31,246.246] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:18:31,247.247] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:18:31,247.247] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:18:31,248.248] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:18:31,248.248] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:18:31,249.249] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:31,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:18:31,251.251] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:18:31,337.337] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:18:31,338.338] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:18:31,339.339] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:18:31,341.341] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:31] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:18:31,351.351] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:31] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:18:31,392.392] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:31,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:18:31,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1423s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:18:31,395.395] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:18:31,396.396] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:18:31,402.402] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:18:31,402.402] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06551s ago] {'assistant_agent_conversation_id': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:18:31,403.403] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:18:31,405.405] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:31,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:18:31,407.407] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:18:31,411.411] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:18:31,412.412] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:18:31,417.417] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:18:31,417.417] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:18:31,418.418] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:18:31,419.419] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:31] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:18:35,453.453] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:35] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:18:35,457.457] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:35,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:18:35,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.207s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:18:35,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:18:35,462.462] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:18:35,464.464] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:18:35,464.464] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:18:35,468.468] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:18:35,507.507] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:35,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:18:35,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.101s ago] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:18:35,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:18:35,510.510] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:18:35,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:18:35,512.512] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:18:35,840.840] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:18:35,844.844] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00315s] {'pk_1': UUID('664ef191-6dba-4075-bbfb-724e04fb04a0')}
[2025-06-09 11:18:35,845.845] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:35] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:18:44,389.389] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:18:44,395.395] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:18:44,404.404] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:44] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:18:44,489.489] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:44,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:18:44,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 9.028s ago] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:18:44,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:18:44,492.492] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': UUID('664ef191-6dba-4075-bbfb-724e04fb04a0')}
[2025-06-09 11:18:44,496.496] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:18:44,496.496] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'message_id': UUID('664ef191-6dba-4075-bbfb-724e04fb04a0'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:18:44,501.501] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:18:44,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:44,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:18:44,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.663s ago] {'pk_1': UUID('664ef191-6dba-4075-bbfb-724e04fb04a0')}
[2025-06-09 11:18:44,505.505] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:18:44,505.505] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00023s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('664ef191-6dba-4075-bbfb-724e04fb04a0')}
[2025-06-09 11:18:44,505.505] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:18:44,722.722] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:18:44,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:18:44,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.47s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:18:44,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:18:44,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2336s ago] {'pk_1': '664ef191-6dba-4075-bbfb-724e04fb04a0'}
[2025-06-09 11:18:52,809.809] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:18:52,809.809] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:18:52] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:23:15,938.938] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:23:16,309.309] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:23:42,805.805] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:23:42,806.806] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:23:42,807.807] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:24:07,338.338] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:24:07,340.340] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:24:07,517.517] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:07] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:24:07,519.519] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:07] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:24:07,519.519] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:07] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:24:07,521.521] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:07] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:24:08,042.042] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:24:08,042.042] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:24:08,044.044] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:24:08,044.044] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:24:08,045.045] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:24:08,045.045] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:24:08,046.046] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:08,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,049.049] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:08,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,056.056] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:24:08,060.060] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:24:08,060.060] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:08,065.065] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:08,106.106] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:08,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05885s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:08,110.110] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:08,111.111] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:08] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:24:08,118.118] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:08,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:24:08,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:24:08,123.123] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:24:08,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,127.127] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:24:08,173.173] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:08,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1259s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:08,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1243s ago] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:24:08,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:24:08,182.182] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:08,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:24:08,188.188] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00081s] {'conversation_id_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:08,190.190] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:08,191.191] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:08] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:24:08,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:08,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'pk_1': UUID('8dea17ea-02d0-417b-a8ee-c3d105b0f488')}
[2025-06-09 11:24:08,394.394] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:08] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:24:16,181.181] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:24:16,186.186] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:16,186.186] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:16,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:16,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.135s ago] {'pk_1': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a')}
[2025-06-09 11:24:16,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:16,194.194] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'pk_1': UUID('8dea17ea-02d0-417b-a8ee-c3d105b0f488')}
[2025-06-09 11:24:16,199.199] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:24:16,200.200] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('753b55ea-1cb4-4dad-8254-3bbf9d3a366a'), 'message_id': UUID('8dea17ea-02d0-417b-a8ee-c3d105b0f488'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:24:16,206.206] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:16,207.207] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:16,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:16,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.816s ago] {'pk_1': UUID('8dea17ea-02d0-417b-a8ee-c3d105b0f488')}
[2025-06-09 11:24:16,209.209] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:24:16,210.210] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('8dea17ea-02d0-417b-a8ee-c3d105b0f488')}
[2025-06-09 11:24:16,211.211] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:22,475.475] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:22] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:24:22,478.478] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:22,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:22,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.43s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:22,481.481] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:24:22,482.482] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:24:22,484.484] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:22,486.486] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:22] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:24:22,740.740] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:22] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:24:23,051.051] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:23,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:23,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 15s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:23,054.054] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:24:23,054.054] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:24:23,056.056] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:24:23,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5746s ago] {'assistant_agent_conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:24:23,057.057] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:23,058.058] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:23,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:23,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.94s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:24:23,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:24:23,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.88s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:23,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:24:23,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.87s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:23,062.062] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:23,062.062] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:23] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:24:25,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:25] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:24:25,188.188] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:25,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:25,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.14s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:25,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:25,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.14s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:24:25,192.192] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:24:25,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.13s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:24:25,195.195] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:25,244.244] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:25,244.244] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:25,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.12s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:24:25,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:24:25,246.246] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.12s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:24:25,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:25,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.12s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:24:32,781.781] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:24:32,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:32,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.39s ago] {'pk_1': UUID('541e615b-3cdd-48b2-b247-b6ef04aca670')}
[2025-06-09 11:24:32,783.783] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:32] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:24:32,788.788] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:32,788.788] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:32,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:24:32,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.73s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:24:32,793.793] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:32,793.793] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.6s ago] {'pk_1': UUID('541e615b-3cdd-48b2-b247-b6ef04aca670')}
[2025-06-09 11:24:32,794.794] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:24:32,794.794] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.58s ago] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('541e615b-3cdd-48b2-b247-b6ef04aca670')}
[2025-06-09 11:24:32,794.794] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:24:33,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:33] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:24:33,424.424] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:24:33,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:24:33,425.425] base.py -> _exec_single_context line:1901 [INFO]: [cached since 25.38s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:24:33,426.426] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:24:33,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 17.23s ago] {'pk_1': '541e615b-3cdd-48b2-b247-b6ef04aca670'}
[2025-06-09 11:24:42,809.809] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:24:42,809.809] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:24:42] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:26:17,400.400] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-09 11:26:17,850.850] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:26:42,678.678] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:26:42,681.681] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:26:42,850.850] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:42] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:26:42,851.851] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:42] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:26:42,852.852] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:42] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:26:43,352.352] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:26:43,352.352] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:26:43,353.353] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:26:43,353.353] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:26:43,354.354] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:26:43,354.354] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:26:43,355.355] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:26:43,445.445] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:26:43,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,447.447] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00089s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:26:43,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.001183s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:26:43,450.450] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:26:43,452.452] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:43] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:26:43,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,454.454] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:26:43,458.458] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:26:43,459.459] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:26:43,464.464] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:26:43,523.523] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:26:43,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07798s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:26:43,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07401s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:26:43,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:26:43,533.533] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:26:43,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:26:43,538.538] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:26:43,539.539] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:26:43,540.540] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:43] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:26:43,544.544] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:43] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:26:43,862.862] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:43] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:26:43,866.866] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:26:43,867.867] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:26:43,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.4206s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:26:43,868.868] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:26:43,868.868] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:26:43] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:28:03,240.240] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:28:03,769.769] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:28:27,848.848] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:28:27,853.853] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:28:28,109.109] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:28] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:28:28,111.111] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:28] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:28:28,113.113] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:28] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:28:28,623.623] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:28:28,624.624] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:28:28,625.625] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:28:28,626.626] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:28:28,627.627] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:28:28,627.627] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:28:28,628.628] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:28,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,631.631] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:28:28,634.634] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:28:28,635.635] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:28] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:28:28,797.797] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:28,797.797] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,797.797] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1671s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:28:28,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,802.802] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:28:28,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:28:28,808.808] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:28:28,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:28:28,814.814] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:28:28,816.816] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:28:28,816.816] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:28] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:28:28,823.823] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:28,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1935s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:28:28,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02665s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:28:28,832.832] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:28:28,832.832] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:28:28,838.838] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:28:28,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:28,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,882.882] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:28:28,886.886] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:28:28,886.886] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:28:28,889.889] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:28:28,890.890] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:28:29,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:28:29,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00274s] {'pk_1': UUID('9bdc0335-71f6-4e55-8efd-45af0b18d3e3')}
[2025-06-09 11:28:29,122.122] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:28:29] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:28:36,495.495] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:28:36,502.502] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:36,502.502] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:28:36,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:28:36,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.702s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:28:36,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:28:36,507.507] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'pk_1': UUID('9bdc0335-71f6-4e55-8efd-45af0b18d3e3')}
[2025-06-09 11:28:36,510.510] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:28:36,510.510] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'message_id': UUID('9bdc0335-71f6-4e55-8efd-45af0b18d3e3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:28:36,516.516] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:28:36,519.519] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:28:36,520.520] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:28:36,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.402s ago] {'pk_1': UUID('9bdc0335-71f6-4e55-8efd-45af0b18d3e3')}
[2025-06-09 11:28:36,522.522] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:28:36,523.523] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('9bdc0335-71f6-4e55-8efd-45af0b18d3e3')}
[2025-06-09 11:28:36,524.524] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:28:54,881.881] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\agent\\agents\\function_call_agent.py', reloading
[2025-06-09 11:28:55,426.426] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:29:23,402.402] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:29:23,402.402] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:29:23,403.403] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:29:46,910.910] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:29:46,912.912] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:29:47,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:29:47] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:29:47,546.546] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:29:47,547.547] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:29:47,548.548] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:29:47,548.548] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:29:47,549.549] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:29:47,549.549] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:29:47,550.550] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:29:47,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:29:47,553.553] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:29:47,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:29:47,558.558] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:29:47,561.561] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:29:47,562.562] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä»ä¹æ¯LLMOps?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:29:47,568.568] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:29:47,609.609] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:29:47,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:29:47,611.611] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:29:47,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:29:47,613.613] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:29:47,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:29:47,618.618] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:29:47,951.951] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:29:47,951.951] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': UUID('33d44935-0dcf-4b59-a08e-856c810e547f')}
[2025-06-09 11:29:47,953.953] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:29:47] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:29:55,172.172] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:29:55,177.177] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:29:55,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:29:55] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:29:55,195.195] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:29:55,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:29:55,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.643s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:29:55,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:29:55,198.198] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'pk_1': '33d44935-0dcf-4b59-a08e-856c810e547f'}
[2025-06-09 11:29:55,414.414] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:29:55,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:29:55,415.415] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.858s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:29:55,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:29:55,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2205s ago] {'pk_1': UUID('33d44935-0dcf-4b59-a08e-856c810e547f')}
[2025-06-09 11:29:55,421.421] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:29:55,421.421] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'message_id': UUID('33d44935-0dcf-4b59-a08e-856c810e547f'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:29:55,427.427] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:29:55,429.429] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:29:55,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:29:55,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.479s ago] {'pk_1': UUID('33d44935-0dcf-4b59-a08e-856c810e547f')}
[2025-06-09 11:29:55,432.432] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:29:55,432.432] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('33d44935-0dcf-4b59-a08e-856c810e547f')}
[2025-06-09 11:29:55,433.433] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:03,136.136] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:03,137.137] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:03] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:30:32,326.326] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:32] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:32,641.641] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:32,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:32,642.642] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.09s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:32,646.646] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:32,646.646] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:30:32,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:30:32,650.650] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:30:32,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:32,653.653] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:32,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:32,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.002851s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:32,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:32,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004137s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:32,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:30:32,660.660] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 11:30:32,663.663] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:32,663.663] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0103s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:32,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:30:32,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003928s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 11:30:32,665.665] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:32,666.666] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:32] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:38,337.337] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 11:30:38,341.341] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:38,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:38,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 50.79s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:38,348.348] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:38,349.349] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 11:30:38,661.661] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 11:30:38,661.661] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:38,662.662] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:30:38,663.663] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 11:30:38,664.664] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 11:30:38,970.970] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:38,971.971] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:38,971.971] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.42s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:38,972.972] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:38,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:38,975.975] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00117s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:38,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:38,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.42s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:38,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:38,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.325s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:38,979.979] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:38,975.975] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 11:30:38,979.979] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:38] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 11:30:38,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:38,981.981] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:30:38,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:30:38,985.985] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:30:38,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:38,988.988] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:30:38,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:38,991.991] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:30:38,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:38,996.996] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 11:30:38,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:38,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01052s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:30:38,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:38,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008908s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:30:39,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005985s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 11:30:39,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01516s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:30:39,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01356s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:30:39,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,007.007] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0108s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 11:30:39,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,009.009] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02047s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:30:39,011.011] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01978s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:30:39,013.013] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0174s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 11:30:39,015.015] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,015.015] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02688s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:30:39,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,017.017] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02525s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:30:39,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,019.019] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02291s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 11:30:39,020.020] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,021.021] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03253s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:30:39,022.022] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,022.022] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03062s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:30:39,023.023] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,023.023] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02768s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 11:30:39,025.025] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0369s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:30:39,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03492s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:30:39,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,027.027] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03173s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 11:30:39,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04068s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:30:39,029.029] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,029.029] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0386s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:30:39,031.031] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,031.031] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03571s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 11:30:39,032.032] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,032.032] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04475s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:30:39,033.033] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,034.034] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04284s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:30:39,035.035] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,036.036] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03994s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 11:30:39,037.037] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,037.037] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04913s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:30:39,038.038] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,039.039] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04744s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:30:39,040.040] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,041.041] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04491s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 11:30:39,042.042] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,042.042] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05421s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:30:39,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,044.044] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05252s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:30:39,045.045] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05033s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 11:30:39,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,049.049] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06066s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:30:39,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05903s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:30:39,051.051] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05595s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 11:30:39,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,053.053] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06476s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:30:39,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06264s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:30:39,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,055.055] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05959s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 11:30:39,056.056] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,057.057] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06855s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:30:39,058.058] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,058.058] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0667s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:30:39,059.059] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,059.059] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06367s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 11:30:39,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07275s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:30:39,061.061] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,061.061] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07062s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:30:39,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06717s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 11:30:39,063.063] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,063.063] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07587s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:30:39,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07373s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:30:39,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0704s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 11:30:39,066.066] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,067.067] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07938s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:30:39,068.068] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,068.068] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0775s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:30:39,069.069] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,069.069] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07414s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 11:30:39,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08274s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:30:39,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,071.071] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0807s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:30:39,072.072] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,073.073] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0777s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 11:30:39,074.074] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,074.074] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08718s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:30:39,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08548s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:30:39,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08259s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 11:30:39,079.079] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,080.080] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09176s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:30:39,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0899s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:30:39,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 11:30:39,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08674s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 11:30:39,084.084] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:39,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:39,089.089] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:39,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:39,090.090] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.54s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:39,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:39,093.093] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1194s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:39,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 11:30:39,097.097] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 11:30:39,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:39,101.101] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:39,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:30:39,107.107] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00068s] {'conversation_id_1': UUID('34d921a1-8ea2-4961-8a89-15ec2483a4bf'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:39,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 11:30:39,112.112] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'message_id_1': UUID('283f48f7-8b4a-457f-8ab4-6f4b88704369')}
[2025-06-09 11:30:39,116.116] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:39,117.117] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:30:39,169.169] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:39,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:39,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.62s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:39,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:39,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1991s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:39,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:39,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6.523s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:39,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 11:30:39,178.178] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 11:30:39,181.181] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:39,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 11:30:39,195.195] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 11:30:39,238.238] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:39,239.239] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:39,239.239] base.py -> _exec_single_context line:1901 [INFO]: [cached since 51.69s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:39,242.242] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:39,243.243] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 11:30:39,851.851] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 11:30:39,851.851] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:39] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 11:30:40,874.874] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:40] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 11:30:40,877.877] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:40,878.878] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:40,878.878] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.33s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:40,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:40,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1.906s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:40,881.881] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 11:30:40,881.881] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:40,882.882] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:40,885.885] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:40] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 11:30:41,201.201] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:41,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:41,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.65s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:41,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:41,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.231s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:41,206.206] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:30:41,207.207] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:30:41,213.213] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 11:30:41,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.3316s ago] {'debug_conversation_id': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:41,214.214] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:41,216.216] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:41,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:30:41,217.217] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.61s ago] {'pk_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:41,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:41,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.119s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:41,223.223] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:30:41,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.117s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:41,225.225] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:41,226.226] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:41] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:30:42,888.888] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 11:30:42,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:42,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:42,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.34s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:42,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 11:30:42,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.922s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 11:30:42,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:42,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.25s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:42,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 11:30:42,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.723s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 11:30:42,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 11:30:42,904.904] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.808s ago] {'id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 11:30:42,907.907] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:30:42,907.907] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.35s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:42,910.910] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:42,974.974] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:42,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:30:42,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.36s ago] {'pk_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:42,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:30:42,977.977] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.36s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 0, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:30:42,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:42,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.36s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:30:46,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:30:46,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 58.5s ago] {'pk_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 11:30:46,450.450] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:46] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 11:30:47,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:47,443.443] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:47,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:30:47,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.89s ago] {'pk_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:47,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:30:47,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.25s ago] {'pk_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 11:30:47,448.448] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:30:47,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.03s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'message_id': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9902802d-59f4-4476-9021-17557ab5da11", "example": false}}]', 'message_token_count': 539, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 129, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 668, 'total_price': 0.0011955, 'latency': 4.442400000000006}
[2025-06-09 11:30:47,453.453] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:47,454.454] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:47,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:30:47,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.5s ago] {'pk_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 11:30:47,457.457] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:30:47,458.458] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2904 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "9902802d-59f4-4476-9021-17557ab5da11", "example": false}}]', 'message_token_count': 539, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': 'ä½ å¥½ï¼æä»ä¹å¯ä»¥å¸®æ¨çåï¼', 'answer_token_count': 129, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'latency': 4.442400000000006, 'total_token_count': 668, 'total_price': 0.0011955, 'message_id': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 11:30:47,459.459] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:30:47,461.461] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:47,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:30:47,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.85s ago] {'pk_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:47,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 11:30:47,464.464] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00029s] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:47,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:30:47,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.51s ago] {'pk_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 11:30:47,761.761] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:47] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:30:48,075.075] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:48,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:48,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 60.52s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:48,076.076] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:30:48,077.077] base.py -> _exec_single_context line:1901 [INFO]: [cached since 52.88s ago] {'pk_1': '8d8e8857-4766-414e-af4b-ba0a89c5122c'}
[2025-06-09 11:30:51,148.148] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:51] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:51,154.154] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:51,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:51,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:51,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:51,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 11:30:51,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 11:30:51,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:30:51,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:51,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:51,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:51,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:51,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:51,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:51,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:30:51,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 11:30:51,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 11:30:51,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.52s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 11:30:51,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 11:30:51,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 18.51s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 11:30:51,173.173] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:51,174.174] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:51] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 11:30:51,459.459] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:51] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:30:51,773.773] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:51,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:51,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 64.22s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:51,775.775] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:51,776.776] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:51] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:30:53,147.147] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:53] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:30:53,460.460] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:30:53,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:30:53,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.91s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:30:53,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:30:53,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 65.9s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:30:53,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:30:53,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.36s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:53,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:30:53,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.36s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:30:53,466.466] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:53,466.466] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:53] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:30:55,418.418] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:30:55,418.418] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:30:55] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:30:55,703.703] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 11:30:55,704.704] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'name': 'ç¨æ·é®åæ', 'conversation_id': UUID('4905c333-6347-45ef-a80e-a238b90dbce8')}
[2025-06-09 11:30:55,705.705] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:31:07,919.919] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:31:07] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:31:08,230.230] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:31:08,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:31:08,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.68s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:31:08,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:31:08,233.233] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.67s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:31:08,234.234] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:31:08,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.67s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:31:08,238.238] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:31:08,279.279] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:31:08,280.280] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:31:08,280.280] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.67s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:31:08,281.281] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:31:08,281.281] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.67s ago] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:31:08,283.283] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:31:08,283.283] base.py -> _exec_single_context line:1901 [INFO]: [cached since 80.67s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:31:17,345.345] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:31:17,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:31:17,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.39s ago] {'pk_1': UUID('8d669691-dcab-4655-b156-69865579201c')}
[2025-06-09 11:31:17,348.348] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:31:17] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:31:17,351.351] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:31:17,352.352] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:31:17,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:31:17,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.79s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:31:17,354.354] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:31:17,356.356] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.16s ago] {'pk_1': UUID('8d669691-dcab-4655-b156-69865579201c')}
[2025-06-09 11:31:17,357.357] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:31:17,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 81.92s ago] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('8d669691-dcab-4655-b156-69865579201c')}
[2025-06-09 11:31:17,358.358] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:31:17,679.679] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:31:17] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:31:17,682.682] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:31:17,682.682] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:31:17,682.682] base.py -> _exec_single_context line:1901 [INFO]: [cached since 90.13s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:31:17,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:31:17,684.684] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.49s ago] {'pk_1': '8d669691-dcab-4655-b156-69865579201c'}
[2025-06-09 11:31:26,738.738] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:31:26,739.739] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:31:26] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:32:28,256.256] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:32:28,257.257] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:32:28,258.258] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:32:51,046.046] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:32:51,048.048] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:33:04,104.104] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\assistant_agent_service.py', reloading
[2025-06-09 11:33:04,512.512] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:33:28,807.807] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:33:28,810.810] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:33:28,988.988] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:28] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:33:28,989.989] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:28] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:33:28,990.990] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:28] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 11:33:28,992.992] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:28] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:33:29,516.516] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:33:29,517.517] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:33:29,518.518] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:33:29,518.518] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:33:29,519.519] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:33:29,519.519] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:33:29,520.520] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:29,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,523.523] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:33:29,525.525] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:33:29,525.525] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:29] "GET /account HTTP/1.1" 200 -
[2025-06-09 11:33:29,582.582] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:29,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06149s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:33:29,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,589.589] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:33:29,594.594] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:33:29,594.594] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:33:29,602.602] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:33:29,646.646] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:29,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,647.647] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:29,647.647] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:33:29,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1267s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:33:29,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:33:29,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,652.652] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00106s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:33:29,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06394s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:33:29,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,658.658] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00077s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:33:29,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:33:29,659.659] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:33:29,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:33:29,665.665] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:33:29,674.674] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:33:29,675.675] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:29] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:33:29,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:33:29,939.939] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'pk_1': UUID('22724b65-f9aa-4a91-811a-525d7315f827')}
[2025-06-09 11:33:29,940.940] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:33:29] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:33:37,265.265] function_call_agent.py -> _llm_node line:206 [ERROR]: LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\core\agent\agents\function_call_agent.py", line 168, in _llm_node
    for chunk in llm.stream(state["messages"]):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\runnables\base.py", line 5607, in stream
    yield from self.bound.stream(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_core\language_models\chat_models.py", line 499, in stream
    for chunk in self._stream(input_messages, stop=stop, **kwargs):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 849, in _stream
    generation_chunk = self._convert_chunk_to_generation_chunk(
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 707, in _convert_chunk_to_generation_chunk
    _create_usage_metadata(token_usage) if token_usage else None
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\langchain_openai\chat_models\base.py", line 2808, in _create_usage_metadata
    total_tokens = oai_token_usage.get("total_tokens", input_tokens + output_tokens)
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
[2025-06-09 11:33:37,272.272] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:37,272.272] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:33:37,272.272] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:33:37,276.276] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.687s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:33:37,278.278] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:33:37,278.278] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('22724b65-f9aa-4a91-811a-525d7315f827')}
[2025-06-09 11:33:37,283.283] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:33:37,284.284] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00077s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'message_id': UUID('22724b65-f9aa-4a91-811a-525d7315f827'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:33:37,288.288] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:33:37,290.290] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:33:37,290.290] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:33:37,291.291] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.352s ago] {'pk_1': UUID('22724b65-f9aa-4a91-811a-525d7315f827')}
[2025-06-09 11:33:37,293.293] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET status=%(status)s, error=%(error)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:33:37,294.294] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'status': <QueueEvent.ERROR: 'error'>, 'error': "LLMèç¹åçéè¯¯, éè¯¯ä¿¡æ¯: unsupported operand type(s) for +: 'NoneType' and 'NoneType'", 'message_id': UUID('22724b65-f9aa-4a91-811a-525d7315f827')}
[2025-06-09 11:33:37,295.295] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:37:42,098.098] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\core\\language_model\\providers\\openai\\chat.py', reloading
[2025-06-09 11:37:42,474.474] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:38:01,181.181] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:42:51,408.408] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 11:42:51,408.408] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 11:42:51,410.410] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 11:43:15,402.402] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 11:43:15,406.406] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 11:43:15,586.586] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:15] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:43:16,139.139] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 11:43:16,140.140] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:43:16,141.141] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 11:43:16,141.141] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:43:16,142.142] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 11:43:16,142.142] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 11:43:16,143.143] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:16,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:16,144.144] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:16,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:16,151.151] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:16,155.155] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:43:16,156.156] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä½ å¥½', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:43:16,166.166] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:16,211.211] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:16,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:16,213.213] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00074s] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:16,216.216] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:43:16,216.216] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:43:16,221.221] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:16,221.221] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:43:16,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:16,519.519] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:16,521.521] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:16] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:43:24,770.770] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:43:24,777.777] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:24] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:43:24,780.780] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:24,781.781] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.637s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:24,783.783] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,783.783] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': '176e28b0-c19d-4c21-949e-321b3ea2b161'}
[2025-06-09 11:43:24,878.878] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:24,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.729s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:24,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09955s ago] {'pk_1': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:24,887.887] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:43:24,888.888] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'message_id': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:43:24,894.894] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:24,897.897] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:24,898.898] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.685s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:24,899.899] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,899.899] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.38s ago] {'pk_1': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:24,900.900] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:43:24,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01325s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78'), 'message_id': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2860 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "1dea7dee-06e2-4ff8-88c7-4bd46701d860", "example": false}}]', 'message_token_count': 539, 'message_unit_price': 0.0, 'message_price_unit': 0.0, 'answer': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'answer_token_count': 134, 'answer_unit_price': 0.0, 'answer_price_unit': 0.0, 'total_token_count': 673, 'total_price': 0.0, 'latency': 8.253474600000004}
[2025-06-09 11:43:24,904.904] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:24,905.905] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:24,906.906] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.387s ago] {'pk_1': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:24,908.908] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, latency=%(latency)s, total_token_count=%(total_token_count)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:43:24,909.909] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2860 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "1dea7dee-06e2-4ff8-88c7-4bd46701d860", "example": false}}]', 'message_token_count': 539, 'answer': 'ä½ å¥½ï¼æä»ä¹æå¯ä»¥å¸®å©ä½ çåï¼', 'answer_token_count': 134, 'latency': 8.253474600000004, 'total_token_count': 673, 'message_id': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:24,911.911] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:24,912.912] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:24,912.912] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.393s ago] {'pk_1': UUID('176e28b0-c19d-4c21-949e-321b3ea2b161')}
[2025-06-09 11:43:24,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:24,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 8.701s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:27,103.103] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:43:27,104.104] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:27] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:43:32,595.595] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 11:43:32,595.595] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'summary': 'äººç±»åAIé®å¥½ï¼AIååºå¹¶è¯¢é®æ¯å¦éè¦å¸®å©ã', 'conversation_id': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:32,597.597] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:32,598.598] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:32,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:32,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 16.39s ago] {'pk_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:32,600.600] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 11:43:32,600.600] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00022s] {'conversation_id_1': UUID('0d02f197-31ce-4966-bb83-d7f374169f78')}
[2025-06-09 11:43:32,602.602] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:43:44,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:44] "OPTIONS /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:43:44,810.810] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:44,810.810] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:44,810.810] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.67s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:44,813.813] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:43:44,813.813] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'assistant_agent_conversation_id': None, 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:43:44,814.814] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:44,815.815] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:44] "POST /assistant-agent/delete-conversation HTTP/1.1" 200 -
[2025-06-09 11:43:44,827.827] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:44] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:43:45,074.074] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:45,075.075] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:45,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.93s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:45,077.077] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 11:43:45,077.077] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'name': 'New Conversation', 'invoke_from': <InvokeFrom.ASSISTANT_AGENT: 'assistant_agent'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:43:45,080.080] base.py -> _exec_single_context line:1896 [INFO]: UPDATE account SET assistant_agent_conversation_id=%(assistant_agent_conversation_id)s::UUID WHERE account.id = %(account_id)s::UUID
[2025-06-09 11:43:45,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2682s ago] {'assistant_agent_conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'account_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:43:45,081.081] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:45,082.082] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:45,082.082] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:45,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 28.87s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:45,086.086] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 11:43:45,086.086] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:43:45,089.089] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 11:43:45,089.089] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:43:45,091.091] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:43:45,091.091] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:45] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 11:43:50,459.459] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:50] "OPTIONS /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:43:50,463.463] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:50,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:50,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.32s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:50,465.465] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:50,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.32s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:50,467.467] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 11:43:50,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.31s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'ä»ä¹æ¯LLMOps?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 11:43:50,469.469] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:50,472.472] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:50,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:50,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.26s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:50,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 11:43:50,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.26s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'param_1': 3, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 11:43:50,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:50,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.26s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 11:43:50,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:50,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.97s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:50,503.503] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:50] "POST /assistant-agent/chat HTTP/1.1" 200 -
[2025-06-09 11:43:59,459.459] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:43:59,459.459] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:59,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.31s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:59,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.68s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:59,472.472] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:43:59,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.59s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'message_id': UUID('c6a55483-3238-401d-91b2-3df09bc276bc'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.LONG_TERM_MEMORY_RECALL: 'long_term_memory_recall'>, 'thought': '', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 0}
[2025-06-09 11:43:59,480.480] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:59,482.482] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:59,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.27s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:59,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 42.97s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:59,486.486] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 11:43:59,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.6s ago] {'app_id': '6774fcef-b594-8008-b30c-a05b8190afe6', 'conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'message_id': UUID('c6a55483-3238-401d-91b2-3df09bc276bc'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'LLMOpsæ¯æâLarge Language Model Operationsâçç¼©åï¼æ¨å¨ç®¡çåä¼åå¤§åè¯­è¨æ¨¡åçå¼åãé¨ç½²åç»´æ¤è¿ç¨ãéçå¤§åè¯­è¨æ¨¡åçæ®åï¼LLMOpsåå¾è¶æ¥è¶éè¦ï¼å¶åå®¹åæ¬ä»¥ä¸å ä¸ªæ¹é¢ï¼\n\n1. **æ¨¡åç®¡ç**ï¼åæ¬çæ¬æ§å¶ãæ¨¡åè®­ç»åè°ä¼ï¼ç¡®ä¿æ¨¡åå¨çäº§ç¯å¢ä¸­ ... (114 characters truncated) ... å®å¨ä¸åè§æ§**ï¼ç¡®ä¿å¨è®­ç»åé¨ç½²è¿ç¨ä¸­éµå¾ªç¸å³çæ³å¾æ³è§åéå¾·æ åï¼ä¿æ¤ç¨æ·æ°æ®åéç§ã\n\n5. **åºç¡è®¾æ½ç®¡ç**ï¼ç®¡çæ¯ææ¨¡åè®­ç»åæ¨çæéçè®¡ç®èµæºï¼åæ¬äºæå¡ãç¡¬ä»¶å éç­ã\n\néè¿ä¸è¿°åä¸ªæ¹é¢ï¼LLMOpså¸®å©ç»ç»ææå°å©ç¨å¤§åè¯­è¨æ¨¡åï¼æåå¶å¨ç¹å®åºæ¯ä¸çåºç¨ææåä¸å¡ä»·å¼ã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2874 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "453d3ae0-5a95-4e5c-8db5-dbd63c5750ed", "example": false}}]', 'message_token_count': 543, 'message_unit_price': 0.0, 'message_price_unit': 0.0, 'answer': 'LLMOpsæ¯æâLarge Language Model Operationsâçç¼©åï¼æ¨å¨ç®¡çåä¼åå¤§åè¯­è¨æ¨¡åçå¼åãé¨ç½²åç»´æ¤è¿ç¨ãéçå¤§åè¯­è¨æ¨¡åçæ®åï¼LLMOpsåå¾è¶æ¥è¶éè¦ï¼å¶åå®¹åæ¬ä»¥ä¸å ä¸ªæ¹é¢ï¼\n\n1. **æ¨¡åç®¡ç**ï¼åæ¬çæ¬æ§å¶ãæ¨¡åè®­ç»åè°ä¼ï¼ç¡®ä¿æ¨¡åå¨çäº§ç¯å¢ä¸­ ... (114 characters truncated) ... å®å¨ä¸åè§æ§**ï¼ç¡®ä¿å¨è®­ç»åé¨ç½²è¿ç¨ä¸­éµå¾ªç¸å³çæ³å¾æ³è§åéå¾·æ åï¼ä¿æ¤ç¨æ·æ°æ®åéç§ã\n\n5. **åºç¡è®¾æ½ç®¡ç**ï¼ç®¡çæ¯ææ¨¡åè®­ç»åæ¨çæéçè®¡ç®èµæºï¼åæ¬äºæå¡ãç¡¬ä»¶å éç­ã\n\néè¿ä¸è¿°åä¸ªæ¹é¢ï¼LLMOpså¸®å©ç»ç»ææå°å©ç¨å¤§åè¯­è¨æ¨¡åï¼æåå¶å¨ç¹å®åºæ¯ä¸çåºç¨ææåä¸å¡ä»·å¼ã', 'answer_token_count': 491, 'answer_unit_price': 0.0, 'answer_price_unit': 0.0, 'total_token_count': 1034, 'total_price': 0.0, 'latency': 8.946288500000009}
[2025-06-09 11:43:59,500.500] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:43:59] "OPTIONS /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 11:43:59,507.507] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:59,509.509] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:59,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:59,516.516] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, latency=%(latency)s, total_token_count=%(total_token_count)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 11:43:59,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.61s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (2874 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "453d3ae0-5a95-4e5c-8db5-dbd63c5750ed", "example": false}}]', 'message_token_count': 543, 'answer': 'LLMOpsæ¯æâLarge Language Model Operationsâçç¼©åï¼æ¨å¨ç®¡çåä¼åå¤§åè¯­è¨æ¨¡åçå¼åãé¨ç½²åç»´æ¤è¿ç¨ãéçå¤§åè¯­è¨æ¨¡åçæ®åï¼LLMOpsåå¾è¶æ¥è¶éè¦ï¼å¶åå®¹åæ¬ä»¥ä¸å ä¸ªæ¹é¢ï¼\n\n1. **æ¨¡åç®¡ç**ï¼åæ¬çæ¬æ§å¶ãæ¨¡åè®­ç»åè°ä¼ï¼ç¡®ä¿æ¨¡åå¨çäº§ç¯å¢ä¸­ ... (114 characters truncated) ... å®å¨ä¸åè§æ§**ï¼ç¡®ä¿å¨è®­ç»åé¨ç½²è¿ç¨ä¸­éµå¾ªç¸å³çæ³å¾æ³è§åéå¾·æ åï¼ä¿æ¤ç¨æ·æ°æ®åéç§ã\n\n5. **åºç¡è®¾æ½ç®¡ç**ï¼ç®¡çæ¯ææ¨¡åè®­ç»åæ¨çæéçè®¡ç®èµæºï¼åæ¬äºæå¡ãç¡¬ä»¶å éç­ã\n\néè¿ä¸è¿°åä¸ªæ¹é¢ï¼LLMOpså¸®å©ç»ç»ææå°å©ç¨å¤§åè¯­è¨æ¨¡åï¼æåå¶å¨ç¹å®åºæ¯ä¸çåºç¨ææåä¸å¡ä»·å¼ã', 'answer_token_count': 491, 'latency': 8.946288500000009, 'total_token_count': 1034, 'message_id': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:59,522.522] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:43:59,523.523] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:59,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.01s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:43:59,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.31s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:43:59,808.808] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:43:59,809.809] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 43.66s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 11:43:59,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:43:59,812.812] base.py -> _exec_single_context line:1901 [INFO]: [cached since 35.03s ago] {'pk_1': 'c6a55483-3238-401d-91b2-3df09bc276bc'}
[2025-06-09 11:44:02,310.310] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET summary=%(summary)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 11:44:02,310.310] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.72s ago] {'summary': 'äººç±»è¯¢é®AIä»ä¹æ¯LLMOpsï¼AIè§£éè¯´LLMOpsæ¯âLarge Language Model Operationsâçç¼©åï¼æ¨å¨ç®¡çåä¼åå¤§åè¯­è¨æ¨¡åçå¼åãé¨ç½²åç»´æ¤è¿ç¨ãLLMOpsçéè¦æ§ä½ç°å¨ä»¥ä¸å ä¸ªæ¹é¢ï¼æ¨¡åç®¡çï¼åæ¬çæ¬æ§å¶ãè®­ç»åè°ä¼ï¼ï¼æ°æ®ç®¡çï¼å¤çè®­ç»åæµè¯æ°æ®ï¼ï¼çæ§ä¸è¯ä¼°ï¼å®æ¶çæ§æ¨¡åæ§è½ï¼ï¼å®å¨ä¸åè§æ§ï¼éµå¾ªæ³å¾æ³è§åä¿æ¤ç¨æ·æ°æ®ï¼ï¼ä»¥ååºç¡è®¾æ½ç®¡çï¼ç®¡çè®¡ç®èµæºï¼ãéè¿è¿äºæ¹é¢ï¼LLMOpså¸®å©ç»ç»ææå©ç¨å¤§åè¯­è¨æ¨¡åï¼æååºç¨ææåä¸å¡ä»·å¼ã', 'conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:44:02,311.311] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:44:02,313.313] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 11:44:02,313.313] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 11:44:02,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 46.1s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:44:02,314.314] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 11:44:02,315.315] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.71s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:44:02,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 11:44:02,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 45.8s ago] {'pk_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 11:44:05,005.005] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 11:44:05,005.005] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'name': 'LLMOpsçå®ä¹åè§£é', 'conversation_id': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 11:44:05,006.006] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 11:44:08,082.082] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 11:44:08,082.082] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 11:44:08] "POST /ai/suggested-questions HTTP/1.1" 200 -
[2025-06-09 12:15:25,741.741] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:25] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:15:25,744.744] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:25] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 12:15:26,082.082] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:26,085.085] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:26,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:26,088.088] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:26,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1930s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:26,089.089] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1930s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:26,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 12:15:26,106.106] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:26,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1930s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 12:15:26,107.107] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:26] "GET /account HTTP/1.1" 200 -
[2025-06-09 12:15:26,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:15:26,112.112] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1901s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:15:26,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 12:15:26,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1901s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:15:26,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 12:15:26,129.129] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'message_id_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 12:15:26,136.136] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:26,137.137] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:26] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:15:28,876.876] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:28] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:15:28,881.881] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:28,882.882] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:28,882.882] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1933s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:28,887.887] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:15:28,887.887] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 12:15:28,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 12:15:28,894.894] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 12:15:28,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:28,902.902] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00147s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:28,907.907] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:28,908.908] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008525s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:28,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:28,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01244s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:28,927.927] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 12:15:28,927.927] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00050s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 12:15:28,931.931] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:28,932.932] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03163s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:28,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 12:15:28,933.933] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006071s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 12:15:28,938.938] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:28,939.939] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:28] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:15:33,293.293] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 12:15:33,296.296] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:15:33,297.297] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:15:33,299.299] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:15:33,301.301] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:15:33,302.302] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:15:33,610.610] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:33,612.612] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:33,614.614] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:15:33,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1937s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:33,621.621] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1937s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:33,628.628] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:33,629.629] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 12:15:33,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:15:33,632.632] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 12:15:33,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 12:15:33,636.636] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00080s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 12:15:33,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,639.639] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:15:33,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,641.641] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:15:33,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,648.648] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:15:33,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01177s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:15:33,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,651.651] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01008s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:15:33,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005092s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:15:33,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01529s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:15:33,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01345s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:15:33,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008468s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:15:33,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01855s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:15:33,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01695s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:15:33,659.659] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01213s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:15:33,660.660] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,660.660] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02222s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:15:33,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,661.661] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02004s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:15:33,662.662] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01482s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:15:33,663.663] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,663.663] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02476s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:15:33,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02255s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:15:33,668.668] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02179s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:15:33,669.669] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,669.669] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0317s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:15:33,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02952s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:15:33,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,671.671] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02442s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:15:33,671.671] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,673.673] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03437s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:15:33,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03231s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:15:33,675.675] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,675.675] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0276s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:15:33,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,676.676] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03777s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:15:33,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,677.677] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03592s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:15:33,677.677] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,678.678] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03083s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:15:33,678.678] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,679.679] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0408s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:15:33,685.685] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,686.686] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04434s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:15:33,686.686] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03946s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:15:33,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04947s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:15:33,689.689] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,689.689] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04735s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:15:33,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,690.690] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0422s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:15:33,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,691.691] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05213s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:15:33,691.691] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,692.692] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05001s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:15:33,692.692] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,693.693] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04494s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:15:33,693.693] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,693.693] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05482s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:15:33,694.694] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,694.694] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05261s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:15:33,695.695] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,695.695] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04735s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:15:33,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,702.702] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06298s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:15:33,703.703] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,703.703] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06153s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:15:33,704.704] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,704.704] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05685s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:15:33,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,706.706] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06717s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:15:33,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06522s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:15:33,707.707] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,707.707] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06019s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:15:33,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07022s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:15:33,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,709.709] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06807s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:15:33,710.710] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,710.710] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06293s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:15:33,711.711] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07296s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:15:33,712.712] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,712.712] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07082s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:15:33,716.716] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,717.717] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06976s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:15:33,718.718] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,718.718] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08007s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:15:33,719.719] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,720.720] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07808s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:15:33,720.720] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,721.721] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:15:33,721.721] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0831s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:15:33,722.722] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,722.722] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08093s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:15:33,723.723] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,723.723] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07582s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:15:33,724.724] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,724.724] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08583s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:15:33,725.725] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,725.725] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08377s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:15:33,726.726] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:15:33,726.726] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07875s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:15:33,727.727] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:33,728.728] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:15:33,737.737] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:33,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1938s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:33,742.742] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,742.742] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00056s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:15:33,745.745] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 12:15:33,746.746] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 12:15:33,749.749] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:15:33,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1909s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:15:33,754.754] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 12:15:33,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1909s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:15:33,757.757] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 12:15:33,763.763] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7.634s ago] {'message_id_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 12:15:33,766.766] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:33,767.767] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:15:33,824.824] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:33,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1938s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:33,828.828] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,828.828] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08597s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:15:33,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:33,830.830] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.93s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:33,833.833] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:33,833.833] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:15:33,895.895] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:33,895.895] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1938s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:33,897.897] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:15:33,898.898] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1563s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:15:33,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:15:33,900.900] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:15:33,903.903] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 12:15:33,904.904] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 12:15:33,906.906] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:33,906.906] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:33] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:15:34,230.230] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:15:34,479.479] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "OPTIONS /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:15:34,511.511] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:34,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:34,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1938s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:34,515.515] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:34,516.516] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:15:34,519.519] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 12:15:34,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 12:15:34,541.541] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:15:34,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:15:34,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.7998s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:15:34,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:15:34,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 1938s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:15:34,549.549] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:15:34,549.549] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:15:34] "GET /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:25:06,076.076] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 12:25:06,078.078] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:25:06,081.081] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:06,082.082] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:06,084.084] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:25:06,085.085] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:25:06,404.404] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,405.405] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:25:06,406.406] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,408.408] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2510s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,411.411] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,413.413] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2510s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2510s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2510s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,417.417] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2510s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,426.426] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:06,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:06,431.431] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 12:25:06,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:06,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 12:25:06,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:06,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:06,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 12:25:06,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 12:25:06,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:06,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 577.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:06,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.7s ago] {'id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 12:25:06,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 12:25:06,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 577.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:06,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 12:25:06,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:06,450.450] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 12:25:06,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2481s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:06,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:06,464.464] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:25:06,466.466] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,467.467] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:25:06,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 12:25:06,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2481s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:06,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:06,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 12:25:06,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 580.4s ago] {'message_id_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 12:25:06,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:06,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:06,484.484] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:06,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:06,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,487.487] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:06,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,492.492] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:06,493.493] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:06,494.494] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,495.495] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:06,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:06,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,497.497] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:06,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:06,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:06,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:06,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:06,504.504] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,504.504] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:06,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:06,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:06,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:06,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:06,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:06,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:06,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:06,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:06,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:06,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,519.519] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:06,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:06,522.522] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,522.522] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:06,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:06,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:06,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,527.527] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:06,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:06,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:06,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:06,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:06,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:06,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:06,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:06,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:06,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:06,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:06,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:06,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:06,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:06,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:06,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:06,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:06,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:06,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:06,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:06,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:06,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:06,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:06,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:06,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:06,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,561.561] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:06,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:06,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:06,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:06,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:06,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:06,571.571] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,572.572] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:06,792.792] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:25:06,806.806] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:06,806.806] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:06,807.807] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2511s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:06,808.808] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 12:25:06,809.809] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:06,810.810] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:06] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:25:07,100.100] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:07] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 12:25:45,479.479] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:45] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:45,783.783] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:45] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 12:25:45,785.785] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:45,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:45,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2550s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:45,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 12:25:45,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2550s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 12:25:45,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:45,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2521s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:45,794.794] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 12:25:45,798.798] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2521s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:45,799.799] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 12:25:45,799.799] base.py -> _exec_single_context line:1901 [INFO]: [cached since 619.7s ago] {'message_id_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 12:25:45,802.802] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:45,803.803] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:45] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:46,050.050] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:46,050.050] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:46,050.050] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2550s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:46,052.052] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:46,052.052] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:46] "GET /account HTTP/1.1" 200 -
[2025-06-09 12:25:46,966.966] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:46] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:46,971.971] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:46,972.972] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:46,972.972] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2551s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:46,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:46,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 12:25:46,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 12:25:46,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 12:25:46,976.976] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:46,982.982] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:46,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:46,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:46,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:46,985.985] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:46,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 12:25:46,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 12:25:47,000.000] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:47,000.000] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:47,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 12:25:47,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 618.1s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 12:25:47,013.013] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:47,014.014] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:47] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:47,802.802] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:47] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 12:25:48,120.120] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,121.121] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:25:48,121.121] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:48,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,123.123] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:48,123.123] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:25:48,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2552s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,127.127] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:25:48,132.132] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,133.133] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 12:25:48,384.384] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 12:25:48,431.431] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,432.432] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2552s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2552s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:48,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 12:25:48,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:48,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 12:25:48,438.438] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 12:25:48,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.7s ago] {'id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 12:25:48,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.8s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 12:25:48,446.446] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 12:25:48,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,448.448] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2523s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:48,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2552s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,449.449] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:48,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 12:25:48,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2552s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2523s ago] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 12:25:48,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:48,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 12:25:48,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:48,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:25:48,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.8s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:48,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 622.3s ago] {'message_id_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 12:25:48,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 619.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:48,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:25:48,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,478.478] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 12:25:48,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 619.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:25:48,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.8s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 12:25:48,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.6s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 12:25:48,490.490] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 12:25:48,491.491] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,492.492] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,494.494] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:48,494.494] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:25:48,495.495] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 12:25:48,496.496] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:48,498.498] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,499.499] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 12:25:48,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:48,501.501] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,501.501] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:48,502.502] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,502.502] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 12:25:48,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:48,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:48,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 12:25:48,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:48,512.512] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,512.512] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:48,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 12:25:48,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:48,514.514] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,514.514] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:48,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 12:25:48,516.516] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:48,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,518.518] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:48,518.518] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 12:25:48,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:48,523.523] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,523.523] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:48,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,524.524] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 12:25:48,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,525.525] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:48,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:48,527.527] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 12:25:48,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:48,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,530.530] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:48,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 12:25:48,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,532.532] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:48,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:48,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 12:25:48,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:48,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:48,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,541.541] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 12:25:48,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:48,543.543] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:25:48,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:48,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,546.546] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 12:25:48,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:48,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:48,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 12:25:48,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:48,554.554] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,554.554] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:48,555.555] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,555.555] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 12:25:48,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:48,557.557] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,557.557] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:48,558.558] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,558.558] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 12:25:48,559.559] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,559.559] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:48,560.560] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,560.560] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:48,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,561.561] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 12:25:48,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:48,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,563.563] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:48,568.568] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 12:25:48,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,570.570] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:48,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:48,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 12:25:48,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:48,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:48,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 12:25:48,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 614.9s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 12:25:48,576.576] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,577.577] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 12:25:48,864.864] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:25:48,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:25:48,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2553s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:25:48,865.865] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 12:25:48,867.867] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:25:48,868.868] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 12:25:48,868.868] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:25:48] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 12:26:27,250.250] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:26:27] "OPTIONS /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:26:27,564.564] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:26:27,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:26:27,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 653.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:26:27,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:26:27,567.567] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2591s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:26:27,571.571] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:26:27,572.572] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:26:27] "GET /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:26:29,936.936] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:26:29,936.936] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:26:29] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:26:29,938.938] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:26:29,938.938] base.py -> _exec_single_context line:1901 [INFO]: [cached since 656.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:26:29,940.940] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:26:29,940.940] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2594s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:26:29,944.944] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:26:29,944.944] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:26:29] "GET /analysis/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 12:26:30,257.257] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 12:26:30,257.257] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 12:26:30,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2594s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 12:26:30,260.260] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 12:26:30,260.260] base.py -> _exec_single_context line:1901 [INFO]: [cached since 656.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 12:26:30,262.262] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 12:26:30,262.262] base.py -> _exec_single_context line:1901 [INFO]: [cached since 661.4s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 12:26:30,263.263] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 12:26:30,264.264] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 12:26:30] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 16:20:39,127.127] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 16:20:39,127.127] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 16:20:39,127.127] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 16:21:03,227.227] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 16:21:03,231.231] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 16:21:03,409.409] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:03,410.410] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:03,411.411] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "OPTIONS /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-09 16:21:03,413.413] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "OPTIONS /builtin-apps HTTP/1.1" 200 -
[2025-06-09 16:21:03,414.414] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:03,916.916] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 16:21:03,916.916] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 16:21:03,918.918] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 16:21:03,918.918] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 16:21:03,919.919] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 16:21:03,919.919] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 16:21:03,920.920] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:03,922.922] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:03,922.922] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:03,927.927] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:03,927.927] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:03] "GET /builtin-apps/categories HTTP/1.1" 200 -
[2025-06-09 16:21:03,969.969] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:03,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:03,969.969] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0468s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:03,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:03,974.974] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:03,981.981] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:03,981.981] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:03,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,985.985] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 16:21:03,988.988] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,989.989] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003867s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 16:21:03,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,990.990] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005102s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 16:21:03,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005968s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 16:21:03,991.991] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,991.991] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006765s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 16:21:03,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,992.992] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007602s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 16:21:03,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,993.993] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008612s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 16:21:03,993.993] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009651s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 16:21:03,995.995] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,995.995] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01079s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 16:21:03,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01213s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 16:21:03,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01355s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 16:21:03,999.999] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:03,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01496s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 16:21:04,001.001] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,001.001] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01659s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 16:21:04,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01779s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 16:21:04,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,003.003] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01904s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 16:21:04,004.004] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,004.004] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02004s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 16:21:04,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,005.005] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02088s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 16:21:04,006.006] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02184s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 16:21:04,007.007] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,008.008] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02311s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 16:21:04,009.009] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:04,010.010] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02484s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 16:21:04,012.012] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:04,013.013] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:04] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:04,042.042] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:04,043.043] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,043.043] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1207s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:04,046.046] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:04,047.047] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:04] "GET /builtin-apps HTTP/1.1" 200 -
[2025-06-09 16:21:04,114.114] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:04,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,115.115] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1925s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:04,120.120] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:04,120.120] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:04,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:04,124.124] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:04,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,127.127] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,130.130] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,130.130] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003051s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,132.132] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004984s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,135.135] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,136.136] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 16:21:04,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01239s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,142.142] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006314s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 16:21:04,143.143] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:04,144.144] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:04] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:04,146.146] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:04,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2238s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:04,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:04,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02884s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:04,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:04,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02757s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:04,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02528s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,154.154] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02738s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02938s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02213s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 16:21:04,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:04,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03228s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:04,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:04,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02512s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 16:21:04,162.162] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:04,162.162] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:04] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:07,779.779] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 16:21:07,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 16:21:07,781.781] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:07,782.782] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 16:21:07,783.783] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 16:21:07,780.780] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:07] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 16:21:08,092.092] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 16:21:08,092.092] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,093.093] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,094.094] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,095.095] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.176s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.176s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.176s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.176s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,103.103] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:08,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,107.107] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 16:21:08,107.107] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00259s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:08,108.108] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00201s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 16:21:08,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.002256s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 16:21:08,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 16:21:08,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:08,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:08,113.113] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00275s] {'id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 16:21:08,113.113] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00148s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:08,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.987s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:08,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:08,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 16:21:08,119.119] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00325s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 16:21:08,119.119] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00135s] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 16:21:08,119.119] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 16:21:08,121.121] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 16:21:08,124.124] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00227s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 16:21:08,124.124] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 16:21:08,125.125] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00082s] {'conversation_id_1': UUID('4905c333-6347-45ef-a80e-a238b90dbce8'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 16:21:08,127.127] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 16:21:08,129.129] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,129.129] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00200s] {'message_id_1': UUID('8d8e8857-4766-414e-af4b-ba0a89c5122c')}
[2025-06-09 16:21:08,130.130] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00090s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 16:21:08,132.132] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,133.133] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,133.133] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01803s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 16:21:08,134.134] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 16:21:08,134.134] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,135.135] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01343s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 16:21:08,136.136] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,136.136] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007426s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 16:21:08,137.137] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,138.138] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0228s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 16:21:08,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,139.139] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01779s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 16:21:08,140.140] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,140.140] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01161s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 16:21:08,141.141] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,141.141] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02641s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 16:21:08,143.143] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0216s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 16:21:08,144.144] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,144.144] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01581s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 16:21:08,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03128s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 16:21:08,148.148] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,148.148] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02689s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 16:21:08,149.149] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02115s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 16:21:08,152.152] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,152.152] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03665s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 16:21:08,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03147s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 16:21:08,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02592s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 16:21:08,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04104s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 16:21:08,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03608s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 16:21:08,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0308s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 16:21:08,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04631s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 16:21:08,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04134s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 16:21:08,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0355s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 16:21:08,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05117s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 16:21:08,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04677s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 16:21:08,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04121s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 16:21:08,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05668s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 16:21:08,174.174] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,174.174] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05221s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 16:21:08,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,175.175] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04658s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 16:21:08,176.176] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,177.177] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06188s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 16:21:08,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05706s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 16:21:08,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05204s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 16:21:08,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06783s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 16:21:08,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,186.186] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06372s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 16:21:08,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0581s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 16:21:08,189.189] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07361s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 16:21:08,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06944s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 16:21:08,193.193] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,193.193] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0638s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 16:21:08,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,195.195] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07892s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 16:21:08,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0739s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 16:21:08,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06828s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 16:21:08,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08363s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 16:21:08,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0792s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 16:21:08,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0735s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 16:21:08,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08837s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 16:21:08,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08334s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 16:21:08,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07824s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 16:21:08,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09345s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 16:21:08,209.209] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08911s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 16:21:08,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.289s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,212.212] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,213.213] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08376s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 16:21:08,214.214] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,215.215] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1094s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 16:21:08,215.215] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0998s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 16:21:08,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:08,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09593s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 16:21:08,218.218] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.091s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:08,219.219] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,220.220] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09043s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 16:21:08,221.221] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,222.222] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 16:21:08,223.223] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1072s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 16:21:08,224.224] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1028s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 16:21:08,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,227.227] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09794s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 16:21:08,228.228] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1133s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 16:21:08,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1084s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 16:21:08,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 16:21:08,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1026s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 16:21:08,234.234] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,235.235] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:08,432.432] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 16:21:08,449.449] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:08,450.450] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:08,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.528s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:08,452.452] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:08,453.453] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 16:21:08,589.589] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 16:21:08,748.748] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:08] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 16:21:27,838.838] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:27] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:28,151.151] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:28,151.151] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:28,151.151] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.23s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:28,153.153] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:28,153.153] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:28,155.155] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:28,155.155] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.17s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:28,156.156] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,156.156] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.17s ago] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 16:21:28,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,158.158] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.17s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 16:21:28,159.159] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,159.159] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.17s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 16:21:28,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,160.160] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 16:21:28,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 16:21:28,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 16:21:28,162.162] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,162.162] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 16:21:28,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,163.163] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 16:21:28,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 16:21:28,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,165.165] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 16:21:28,165.165] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 16:21:28,166.166] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 16:21:28,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 16:21:28,168.168] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,168.168] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 16:21:28,169.169] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,169.169] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.18s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 16:21:28,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,170.170] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.19s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 16:21:28,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.19s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 16:21:28,171.171] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.19s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 16:21:28,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,172.172] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.19s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 16:21:28,173.173] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:28,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 24.19s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 16:21:28,175.175] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:28,176.176] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:28] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:28,498.498] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:28] "OPTIONS /builtin-tools HTTP/1.1" 200 -
[2025-06-09 16:21:28,503.503] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:28] "GET /builtin-tools HTTP/1.1" 200 -
[2025-06-09 16:21:30,049.049] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:30] "GET /builtin-tools/time/icon HTTP/1.1" 200 -
[2025-06-09 16:21:30,050.050] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:30] "GET /builtin-tools/dalle/icon HTTP/1.1" 200 -
[2025-06-09 16:21:30,050.050] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:30] "GET /builtin-tools/duckduckgo/icon HTTP/1.1" 200 -
[2025-06-09 16:21:30,051.051] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:30] "GET /builtin-tools/gaode/icon HTTP/1.1" 200 -
[2025-06-09 16:21:30,051.051] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:30] "GET /builtin-tools/wikipedia/icon HTTP/1.1" 200 -
[2025-06-09 16:21:38,181.181] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:38] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:38,184.184] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:38,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:38,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.26s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:38,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:38,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:38,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:38,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:38,192.192] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 16:21:38,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 16:21:38,196.196] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 16:21:38,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 16:21:38,198.198] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,198.198] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 16:21:38,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,199.199] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.21s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 16:21:38,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 16:21:38,200.200] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,200.200] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 16:21:38,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 16:21:38,201.201] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 16:21:38,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,203.203] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 16:21:38,203.203] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 16:21:38,204.204] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,204.204] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 16:21:38,205.205] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 16:21:38,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 16:21:38,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 16:21:38,208.208] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.22s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 16:21:38,209.209] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,209.209] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.23s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 16:21:38,210.210] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,210.210] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.23s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 16:21:38,211.211] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:21:38,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 34.23s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 16:21:38,214.214] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:38,214.214] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:38] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:38,549.549] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:38] "OPTIONS /builtin-tools HTTP/1.1" 200 -
[2025-06-09 16:21:38,865.865] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:38] "GET /builtin-tools HTTP/1.1" 200 -
[2025-06-09 16:21:57,558.558] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:57] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:57,561.561] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:57,562.562] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:57,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.64s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:57,565.565] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:21:57,565.565] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.45s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:21:57,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:21:57,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.44s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:21:57,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:57,570.570] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.44s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:57,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:57,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.44s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:57,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:57,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.45s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:57,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:57,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.44s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 16:21:57,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 16:21:57,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.45s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 16:21:57,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 16:21:57,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 53.44s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 16:21:57,579.579] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:57,580.580] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:57] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:21:57,864.864] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:57] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 16:21:58,182.182] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:21:58,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:21:58,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.26s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:21:58,185.185] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:21:58,185.185] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:21:58] "GET /account HTTP/1.1" 200 -
[2025-06-09 16:22:01,843.843] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:01] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:22:01,846.846] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:22:01,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:22:01,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.92s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:22:01,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:22:01,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:22:01,850.850] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:22:01,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:22:01,851.851] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 16:22:01,852.852] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 16:22:01,853.853] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,853.853] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 16:22:01,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 16:22:01,855.855] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,855.855] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 16:22:01,856.856] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,856.856] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 16:22:01,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,857.857] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 16:22:01,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,858.858] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 16:22:01,858.858] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 16:22:01,859.859] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,859.859] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.87s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 16:22:01,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,860.860] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 16:22:01,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,861.861] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 16:22:01,861.861] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 16:22:01,862.862] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 16:22:01,863.863] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,863.863] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 16:22:01,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 16:22:01,864.864] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,864.864] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 16:22:01,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 16:22:01,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,866.866] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 16:22:01,866.866] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 16:22:01,867.867] base.py -> _exec_single_context line:1901 [INFO]: [cached since 57.88s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 16:22:01,869.869] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:22:01,870.870] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:01] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 16:22:03,540.540] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:03] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-09 16:22:03,853.853] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:22:03,854.854] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:22:03,854.854] base.py -> _exec_single_context line:1901 [INFO]: [cached since 59.93s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:22:03,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 16:22:03,857.857] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 16:22:03,860.860] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 16:22:03,861.861] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 16:22:03,862.862] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:22:03,862.862] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:03] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-09 16:22:07,094.094] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:07] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-09 16:22:07,097.097] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:22:07,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:22:07,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.18s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:22:07,099.099] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-09 16:22:07,099.099] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-09 16:22:07,102.102] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:22:07,102.102] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:07] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-09 16:22:07,359.359] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:07] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-09 16:22:07,672.672] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 16:22:07,672.672] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 16:22:07,672.672] base.py -> _exec_single_context line:1901 [INFO]: [cached since 63.75s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 16:22:07,673.673] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-09 16:22:07,674.674] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.5741s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-09 16:22:07,677.677] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 16:22:07,677.677] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 16:22:07] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-09 18:54:37,026.026] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 18:54:37,027.027] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 18:54:37,029.029] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 18:55:01,088.088] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 18:55:01,092.092] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 18:55:49,945.945] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 18:55:49,945.945] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:55:49,946.946] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 18:55:49,946.946] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:55:49,947.947] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 18:55:49,947.947] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:55:49,947.947] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:55:49,949.949] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:55:49,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00026s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:55:49,952.952] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:55:49,952.952] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00030s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:55:49,956.956] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 18:55:49,956.956] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 18:55:49,959.959] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 18:55:49,959.959] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 18:55:49,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 18:55:49,962.962] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 18:55:49,965.965] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:55:49,965.965] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:55:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 18:56:04,605.605] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:56:04,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:56:04,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.66s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:56:04,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:56:04,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 14.65s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:56:04,609.609] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Workflow.id has an attribute 'int_'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 1506, in __getattr__
    return getattr(self.comparator, key)
AttributeError: 'Comparator' object has no attribute 'int_'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 1332, in __getattr__
    return self._fallback_getattr(key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\properties.py", line 472, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 1508, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'int_'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 112, in update_draft_app_config
    self.app_service.update_draft_app_config(app_id, draft_app_config, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 282, in update_draft_app_config
    draft_app_config = self._validate_draft_app_config(draft_app_config, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 839, in _validate_draft_app_config
    Workflow.id.int_(workflows),
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Workflow.id has an attribute 'int_'
[2025-06-09 18:56:04,617.617] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:56:04,631.631] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:56:04] "[35m[1mPOST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1[0m" 500 -
[2025-06-09 18:57:06,169.169] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:06] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-09 18:57:06,483.483] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:57:06,484.484] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:57:06,484.484] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.53s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:57:06,486.486] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-09 18:57:06,486.486] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-09 18:57:06,488.488] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:57:06,488.488] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:06] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9 HTTP/1.1" 200 -
[2025-06-09 18:57:06,501.501] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:06] "OPTIONS /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-09 18:57:06,746.746] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:57:06,746.746] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:57:06,746.746] base.py -> _exec_single_context line:1901 [INFO]: [cached since 76.79s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:57:06,747.747] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id = %(pk_1)s::UUID
[2025-06-09 18:57:06,747.747] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2617s ago] {'pk_1': UUID('04a8777b-604c-4567-8444-07482ae82bf9')}
[2025-06-09 18:57:06,751.751] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:57:06,752.752] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:06] "GET /workflows/04a8777b-604c-4567-8444-07482ae82bf9/draft-graph HTTP/1.1" 200 -
[2025-06-09 18:57:08,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:08] "OPTIONS /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 18:57:08,130.130] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:08] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 18:57:08,146.146] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:57:08,146.146] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:57:08,146.146] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.19s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:57:08,148.148] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:57:08,149.149] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:08] "GET /language-models/deepseek/deepseek-chat HTTP/1.1" 200 -
[2025-06-09 18:57:08,408.408] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:57:08,409.409] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:57:08,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.46s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:57:08,414.414] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:57:08,414.414] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:08] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 18:57:08,583.583] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:08] "GET /language-models/deepseek/icon HTTP/1.1" 200 -
[2025-06-09 18:57:35,876.876] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:57:35,877.877] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:57:35,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:57:35,879.879] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:57:35,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:57:35,879.879] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Workflow.id has an attribute 'int_'
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 1506, in __getattr__
    return getattr(self.comparator, key)
AttributeError: 'Comparator' object has no attribute 'int_'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\attributes.py", line 472, in __getattr__
    return getattr(self.comparator, key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\util\langhelpers.py", line 1332, in __getattr__
    return self._fallback_getattr(key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\properties.py", line 472, in _fallback_getattr
    return getattr(self.__clause_element__(), key)
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\sql\elements.py", line 1508, in __getattr__
    raise AttributeError(
AttributeError: Neither 'AnnotatedColumn' object nor 'Comparator' object has an attribute 'int_'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 112, in update_draft_app_config
    self.app_service.update_draft_app_config(app_id, draft_app_config, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 282, in update_draft_app_config
    draft_app_config = self._validate_draft_app_config(draft_app_config, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 839, in _validate_draft_app_config
    Workflow.id.int_(workflows),
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\sqlalchemy\orm\attributes.py", line 474, in __getattr__
    raise AttributeError(
AttributeError: Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Workflow.id has an attribute 'int_'
[2025-06-09 18:57:35,881.881] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:57:35,892.892] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:57:35] "[35m[1mPOST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1[0m" 500 -
[2025-06-09 18:58:46,841.841] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 18:58:46,841.841] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 18:58:46,842.842] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 18:59:11,078.078] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 18:59:11,081.081] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 18:59:11,529.529] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 18:59:11,530.530] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:59:11,530.530] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 18:59:11,530.530] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:59:11,531.531] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 18:59:11,531.531] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 18:59:11,532.532] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:59:11,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:59:11,534.534] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00025s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:59:11,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:59:11,537.537] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:59:11,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.account_id = %(account_id_1)s::UUID AND workflow.status = %(status_1)s
[2025-06-09 18:59:11,541.541] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 18:59:11,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-09 18:59:11,544.544] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 18:59:11,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 18:59:11,547.547] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 18:59:11,551.551] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET model_config=%(model_config)s::JSONB, dialog_round=%(dialog_round)s, workflows=%(workflows)s::JSONB, opening_questions=%(opening_questions)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-09 18:59:11,551.551] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'model_config': '{"model": "gpt-4o-mini", "provider": "openai", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'dialog_round': 10, 'workflows': '["04a8777b-604c-4567-8444-07482ae82bf9"]', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'updated_at': datetime.datetime(2025, 6, 9, 18, 59, 11, 549660), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-09 18:59:11,562.562] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 18:59:11,564.564] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:59:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 18:59:11,568.568] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:59:11,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:59:11,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03546s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:59:11,571.571] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:59:11,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03461s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:59:11,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.account_id = %(account_id_1)s::UUID AND workflow.status = %(status_1)s
[2025-06-09 18:59:11,574.574] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03355s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 18:59:11,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-09 18:59:11,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03256s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 18:59:11,578.578] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 18:59:11,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03072s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 18:59:11,588.588] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-09 18:59:11,589.589] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'updated_at': datetime.datetime(2025, 6, 9, 18, 59, 11, 588085), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-09 18:59:11,589.589] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 18:59:11,591.591] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:59:11] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 18:59:14,473.473] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:59:14,474.474] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:59:14,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.94s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:59:14,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:59:14,475.475] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.938s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:59:14,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 18:59:14,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.93s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 18:59:14,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 18:59:14,478.478] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 18:59:14,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 18:59:14,482.482] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00208s] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 18:59:14,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 18:59:14,483.483] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:59:14] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 18:59:41,024.024] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 18:59:41,024.024] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 18:59:41,024.024] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.49s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 18:59:41,026.026] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 18:59:41,026.026] base.py -> _exec_single_context line:1901 [INFO]: [cached since 29.49s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:59:41,028.028] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 18:59:41,028.028] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00034s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 18:59:41,029.029] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 18:59:41,030.030] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 18:59:41] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 19:00:59,594.594] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:00:59,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:00:59,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:00:59,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:00:59,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 108s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:00:59,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:00:59,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:00:59,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:00:59,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.1s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:00:59,606.606] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:00:59,614.614] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00788s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:00:59,626.626] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 19:00:59,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 78.59s ago] {'debug_conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:00:59,627.627] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:00:59,628.628] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:00:59,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,630.630] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:00:59,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,632.632] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:00:59,634.634] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:00:59,635.635] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµçæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:00:59,643.643] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:00:59,687.687] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:00:59,687.687] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,688.688] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05902s ago] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:00:59,690.690] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:00:59,692.692] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:00:59,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:00:59,696.696] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06377s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:00:59,698.698] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:00:59,698.698] base.py -> _exec_single_context line:1901 [INFO]: [cached since 105.2s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:01:09,065.065] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:09,068.068] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00229s] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:09,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:01:09] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations HTTP/1.1" 200 -
[2025-06-09 19:01:19,959.959] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:01:19,959.959] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:01:19,960.960] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,960.960] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:19,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,962.962] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:19,965.965] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:01:19,965.965] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'message_id': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "wf_haohaoer", "args": {"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38 \\u4fe1\\u606f"}, "id": "call_ZqXXVu6puCmQd52KzaN9jIUK", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3041 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f22422f5-6fd6-43f3-854d-46e5f108c65e", "example": false}}]', 'message_token_count': 565, 'message_unit_price': 0.0011, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 287, 'answer_unit_price': 0.0044, 'answer_price_unit': 0.001, 'total_token_count': 852, 'total_price': 0.0018843000000000002, 'latency': 9.115802299999984}
[2025-06-09 19:01:19,972.972] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:01:19,973.973] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:01:19,973.973] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,974.974] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.34s ago] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:19,975.975] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,975.975] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.91s ago] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:19,976.976] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:01:19,976.976] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01035s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'message_id': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '{"llm_node_output": "\\u4e2d\\u56fd\\u4e0a\\u6d77\\u5b98\\u65b9\\u65c5\\u6e38\\u7f51\\u7ad9\\u662f\\u4e00\\u672c\\u5b9e\\u7528\\u4e14\\u6743\\u5a01\\ ... (5049 characters truncated) ... 5c5\\u6e38\\u4ea7\\u54c1\\u4f53\\u7cfb\\u3001\\u5177\\u6709\\u56fd\\u9645\\u53cb\\u597d\\u5ea6\\u7684\\u57ce\\u5e02\\u4fbf\\u5229\\u670d\\u52a1 ..."}', 'tool': 'wf_haohaoer', 'tool_input': '{"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38 \\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 2.5118155000000115}
[2025-06-09 19:01:19,982.982] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:01:19,983.983] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:01:19,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.35s ago] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:19,985.985] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,986.986] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.92s ago] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:19,987.987] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:01:19,988.988] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02116s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'message_id': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»¥ä¸æ¯å³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ææ¸¸æ¯ç¹**ï¼\n   - ä¸æµ·æè®¸å¤èåçæ¯ç¹ï¼å¦å¤æ»©ãä¸æ¹æç å¡ãä¸æµ·åç©é¦ãè±«å­ç­ã\n   - ä½ å¯ä»¥æ¸¸è§æ°å¤©å°ï¼ä½éªåå²ä¸ç°ä»£äº¤èçé­åã\n\n2. **æåæ´»å¨**ï¼\n   - ä¸æµ·ç»å¸¸ä¸¾ååç§æåæ´»å¨ï¼åæ¬é³ä¹ä¼ãå±è§åèåºæ´»å¨ãæ¯å¦ï¼ ... (119 characters truncated) ... è¡ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èï¼3æå°5æã9æå°11æï¼æ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼æ°åå®äººã\n\n6. **æ³¨æäºé¡¹**ï¼\n   - å¨ææ¸¸æ¶ï¼å»ºè®®æ³¨æä¸ªäººå®å¨ï¼ä¿ç®¡å¥½éèº«ç©åã\n\nå¸æè¿äºä¿¡æ¯è½å¸®å©ä½ æ´å¥½å°è§åä¸æµ·ä¹è¡ï¼å¦æéè¦æ´è¯¦ç»çä¿¡æ¯æå»ºè®®ï¼è¯·åè¯æã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10890 characters truncated) ... wf_haohaoer", "id": "b0dd05ba-3e99-40a1-8aa9-bb3ad6ea1347", "tool_call_id": "call_ZqXXVu6puCmQd52KzaN9jIUK", "artifact": null, "status": "success"}}]', 'message_token_count': 4323, 'message_unit_price': 0.0011, 'message_price_unit': 0.001, 'answer': 'ä»¥ä¸æ¯å³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ææ¸¸æ¯ç¹**ï¼\n   - ä¸æµ·æè®¸å¤èåçæ¯ç¹ï¼å¦å¤æ»©ãä¸æ¹æç å¡ãä¸æµ·åç©é¦ãè±«å­ç­ã\n   - ä½ å¯ä»¥æ¸¸è§æ°å¤©å°ï¼ä½éªåå²ä¸ç°ä»£äº¤èçé­åã\n\n2. **æåæ´»å¨**ï¼\n   - ä¸æµ·ç»å¸¸ä¸¾ååç§æåæ´»å¨ï¼åæ¬é³ä¹ä¼ãå±è§åèåºæ´»å¨ãæ¯å¦ï¼ ... (119 characters truncated) ... è¡ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èï¼3æå°5æã9æå°11æï¼æ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼æ°åå®äººã\n\n6. **æ³¨æäºé¡¹**ï¼\n   - å¨ææ¸¸æ¶ï¼å»ºè®®æ³¨æä¸ªäººå®å¨ï¼ä¿ç®¡å¥½éèº«ç©åã\n\nå¸æè¿äºä¿¡æ¯è½å¸®å©ä½ æ´å¥½å°è§åä¸æµ·ä¹è¡ï¼å¦æéè¦æ´è¯¦ç»çä¿¡æ¯æå»ºè®®ï¼è¯·åè¯æã', 'answer_token_count': 499, 'answer_unit_price': 0.0044, 'answer_price_unit': 0.001, 'total_token_count': 4822, 'total_price': 0.006950900000000001, 'latency': 8.334715200000005}
[2025-06-09 19:01:19,995.995] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:01:19,997.997] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:01:19,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:19,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.93s ago] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:20,001.001] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, message_token_count=%(message_token_count)s, message_unit_price=%(message_unit_price)s, message_price_unit=%(message_price_unit)s, answer=%(answer)s, answer_token_count=%(answer_token_count)s, answer_unit_price=%(answer_unit_price)s, answer_price_unit=%(answer_price_unit)s, latency=%(latency)s, total_token_count=%(total_token_count)s, total_price=%(total_price)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:01:20,001.001] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10890 characters truncated) ... wf_haohaoer", "id": "b0dd05ba-3e99-40a1-8aa9-bb3ad6ea1347", "tool_call_id": "call_ZqXXVu6puCmQd52KzaN9jIUK", "artifact": null, "status": "success"}}]', 'message_token_count': 4323, 'message_unit_price': 0.0011, 'message_price_unit': 0.001, 'answer': 'ä»¥ä¸æ¯å³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ææ¸¸æ¯ç¹**ï¼\n   - ä¸æµ·æè®¸å¤èåçæ¯ç¹ï¼å¦å¤æ»©ãä¸æ¹æç å¡ãä¸æµ·åç©é¦ãè±«å­ç­ã\n   - ä½ å¯ä»¥æ¸¸è§æ°å¤©å°ï¼ä½éªåå²ä¸ç°ä»£äº¤èçé­åã\n\n2. **æåæ´»å¨**ï¼\n   - ä¸æµ·ç»å¸¸ä¸¾ååç§æåæ´»å¨ï¼åæ¬é³ä¹ä¼ãå±è§åèåºæ´»å¨ãæ¯å¦ï¼ ... (119 characters truncated) ... è¡ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èï¼3æå°5æã9æå°11æï¼æ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼æ°åå®äººã\n\n6. **æ³¨æäºé¡¹**ï¼\n   - å¨ææ¸¸æ¶ï¼å»ºè®®æ³¨æä¸ªäººå®å¨ï¼ä¿ç®¡å¥½éèº«ç©åã\n\nå¸æè¿äºä¿¡æ¯è½å¸®å©ä½ æ´å¥½å°è§åä¸æµ·ä¹è¡ï¼å¦æéè¦æ´è¯¦ç»çä¿¡æ¯æå»ºè®®ï¼è¯·åè¯æã', 'answer_token_count': 499, 'answer_unit_price': 0.0044, 'answer_price_unit': 0.001, 'latency': 19.962333, 'total_token_count': 4822, 'total_price': 0.006950900000000001, 'message_id': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:20,004.004] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:01:20,005.005] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:01:20,005.005] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:01:20,006.006] base.py -> _exec_single_context line:1901 [INFO]: [cached since 20.37s ago] {'pk_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:20,008.008] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:01:20,008.008] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'conversation_id_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:20,010.010] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:01:20,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 10.94s ago] {'pk_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:01:22,541.541] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:01:22,541.541] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00042s] {'name': 'ä¸æµ·ææ¸¸ä¿¡æ¯', 'conversation_id': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3')}
[2025-06-09 19:01:22,542.542] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:04,648.648] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:04,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:05:04,649.649] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:05:04,665.665] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,666.666] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.1s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:05:04,670.670] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,670.670] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.1s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:05:04,674.674] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:05:04,675.675] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:05:04,678.678] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:04,680.680] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:04,681.681] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,681.681] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00033s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:05:04,683.683] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,683.683] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'pk_1': UUID('ef075cee-6ea1-4cfa-a22e-ce692ebd62c5')}
[2025-06-09 19:05:04,687.687] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:05:04,687.687] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('ef075cee-6ea1-4cfa-a22e-ce692ebd62c5')}
[2025-06-09 19:05:04,690.690] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:04,696.696] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:04,697.697] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01678s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:05:04,701.701] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,702.702] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00074s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:05:04,705.705] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:05:04,705.705] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:05:04,708.708] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:05:04,708.708] base.py -> _exec_single_context line:1901 [INFO]: [cached since 350.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:05:04,709.709] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:05:04,713.713] base.py -> _exec_single_context line:1901 [INFO]: [cached since 350.2s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:05:04,714.714] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,715.715] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:04,715.715] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,716.716] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03303s ago] {'pk_1': UUID('ef075cee-6ea1-4cfa-a22e-ce692ebd62c5')}
[2025-06-09 19:05:04,718.718] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:05:04,719.719] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('ef075cee-6ea1-4cfa-a22e-ce692ebd62c5'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½å·¥ä½æµæ£ç´¢AIæ¯ä»ä¹?', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:05:04,721.721] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:04,784.784] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:04,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:04,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:05:04,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'conversation_id_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:05:04,790.790] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:05:04,791.791] base.py -> _exec_single_context line:1901 [INFO]: [cached since 245.1s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:05:12,149.149] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:12,150.150] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-09 19:05:12,150.150] base.py -> _exec_single_context line:1901 [INFO]: [cached since 360.6s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:05:18,225.225] base.py -> similarity_search_with_relevance_scores line:576 [WARNING]: No relevant docs were retrieved using the relevance score threshold 0.7
[2025-06-09 19:05:18,227.227] base.py -> _exec_single_context line:1896 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (NULL) AND (1 != 1)
[2025-06-09 19:05:18,227.227] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'hit_count_1': 1}
[2025-06-09 19:05:18,232.232] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:26,777.777] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,777.777] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:05:26,779.779] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,779.779] base.py -> _exec_single_context line:1901 [INFO]: [cached since 257.7s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,782.782] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,782.782] base.py -> _exec_single_context line:1901 [INFO]: [cached since 22.1s ago] {'pk_1': UUID('ef075cee-6ea1-4cfa-a22e-ce692ebd62c5')}
[2025-06-09 19:05:26,783.783] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:26,784.784] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:05:26,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,785.785] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:05:26] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:05:26,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:26,788.788] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,789.789] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,791.791] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:05:26,792.792] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e'), 'message_id': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "dataset_retrieval", "args": {"query": "\\u597d\\u597d\\u5de5\\u4f5c\\u6d41\\u68c0\\u7d22AI"}, "id": "call_0_687c177e-23a8-4bee-9e00-3c69492795b7", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5043 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f519c5fc-70c8-44b7-9abe-a4b3a6f2ff63", "example": false}}]', 'message_token_count': 921, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 330, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1251, 'total_price': 0.0023715000000000003, 'latency': 7.33062910000001}
[2025-06-09 19:05:26,795.795] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:26,796.796] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:26,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,806.806] base.py -> _exec_single_context line:1901 [INFO]: [cached since 267.2s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:26,808.808] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,808.808] base.py -> _exec_single_context line:1901 [INFO]: [cached since 257.7s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,809.809] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:05:26,809.809] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e'), 'message_id': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.DATASET_RETRIEVAL: 'dataset_retrieval'>, 'thought': '', 'observation': '"\\u77e5\\u8bc6\\u5e93\\u5185\\u6ca1\\u6709\\u68c0\\u7d22\\u5230\\u5bf9\\u5e94\\u5185\\u5bb9"', 'tool': 'dataset_retrieval', 'tool_input': '{"query": "\\u597d\\u597d\\u5de5\\u4f5c\\u6d41\\u68c0\\u7d22AI"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 6.084267699999998}
[2025-06-09 19:05:26,812.812] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:26,813.813] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:26,814.814] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,821.821] base.py -> _exec_single_context line:1901 [INFO]: [cached since 267.2s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:26,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,823.823] base.py -> _exec_single_context line:1901 [INFO]: [cached since 257.7s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,825.825] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:05:26,825.825] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e'), 'message_id': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ç¥è¯åºä¸­æ²¡ææ£ç´¢å°ä¸âå¥½å¥½å·¥ä½æµâç¸å³çAIåå®¹ãå¦ææ¨è½æä¾æ´å¤å·ä½ä¿¡æ¯æå³é®è¯ï¼æå¯ä»¥å°è¯è¿ä¸æ­¥å¸®å©æ¨æ¥æ¾ç¸å³åå®¹ã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6359 characters truncated) ... "id": "835b3a64-a89b-4747-93b1-fcf72b482f69", "tool_call_id": "call_0_687c177e-23a8-4bee-9e00-3c69492795b7", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ç¥è¯åºä¸­æ²¡ææ£ç´¢å°ä¸âå¥½å¥½å·¥ä½æµâç¸å³çAIåå®¹ãå¦ææ¨è½æä¾æ´å¤å·ä½ä¿¡æ¯æå³é®è¯ï¼æå¯ä»¥å°è¯è¿ä¸æ­¥å¸®å©æ¨æ¥æ¾ç¸å³åå®¹ã', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 8.535776499999997}
[2025-06-09 19:05:26,828.828] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:26,829.829] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:26,830.830] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,837.837] base.py -> _exec_single_context line:1901 [INFO]: [cached since 257.8s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,839.839] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:05:26,840.840] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00078s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6359 characters truncated) ... "id": "835b3a64-a89b-4747-93b1-fcf72b482f69", "tool_call_id": "call_0_687c177e-23a8-4bee-9e00-3c69492795b7", "artifact": null, "status": "success"}}]', 'answer': 'ç¥è¯åºä¸­æ²¡ææ£ç´¢å°ä¸âå¥½å¥½å·¥ä½æµâç¸å³çAIåå®¹ãå¦ææ¨è½æä¾æ´å¤å·ä½ä¿¡æ¯æå³é®è¯ï¼æå¯ä»¥å°è¯è¿ä¸æ­¥å¸®å©æ¨æ¥æ¾ç¸å³åå®¹ã', 'latency': 21.950673300000005, 'message_id': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:26,842.842] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:05:26,843.843] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:05:26,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,844.844] base.py -> _exec_single_context line:1901 [INFO]: [cached since 267.2s ago] {'pk_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:26,845.845] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:05:26,846.846] base.py -> _exec_single_context line:1901 [INFO]: [cached since 246.8s ago] {'conversation_id_1': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:26,847.847] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:05:26,852.852] base.py -> _exec_single_context line:1901 [INFO]: [cached since 257.8s ago] {'pk_1': UUID('18384bd0-ea8d-4515-811a-4561d5bbefd5')}
[2025-06-09 19:05:35,208.208] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:05:35,208.208] base.py -> _exec_single_context line:1901 [INFO]: [cached since 252.7s ago] {'name': 'AIçå®ä¹åè§£é', 'conversation_id': UUID('e0a4f7dd-f79c-4b1a-92bf-8e096273104e')}
[2025-06-09 19:05:35,213.213] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:29,879.879] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:29,880.880] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:06:29,880.880] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.23s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:06:29,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 438.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:06:29,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 438.3s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:06:29,887.887] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:06:29,887.887] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.21s ago] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:06:29,890.890] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:29,892.892] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:29,893.893] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.21s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:06:29,894.894] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,895.895] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.21s ago] {'pk_1': UUID('a19f4973-565d-427a-be53-5b650c99095b')}
[2025-06-09 19:06:29,896.896] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:06:29,896.896] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('a19f4973-565d-427a-be53-5b650c99095b')}
[2025-06-09 19:06:29,899.899] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:29,900.900] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:29,900.900] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,901.901] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.21s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:06:29,902.902] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,903.903] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.2s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:06:29,905.905] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:06:29,906.906] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:06:29,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:06:29,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.4s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:06:29,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:06:29,913.913] base.py -> _exec_single_context line:1901 [INFO]: [cached since 435.4s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:06:29,914.914] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:29,916.916] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,916.916] base.py -> _exec_single_context line:1901 [INFO]: [cached since 85.23s ago] {'pk_1': UUID('a19f4973-565d-427a-be53-5b650c99095b')}
[2025-06-09 19:06:29,918.918] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:06:29,918.918] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('a19f4973-565d-427a-be53-5b650c99095b'), 'query': 'è¯·å¸®æä½¿ç¨name:å¥½å¥½çå·¥ä½æµçæä¸æµ·ææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:06:29,920.920] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:29,989.989] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:29,992.992] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:29,996.996] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:06:29,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'conversation_id_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:06:29,998.998] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:06:29,999.999] base.py -> _exec_single_context line:1901 [INFO]: [cached since 330.3s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:06:56,750.750] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,750.750] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:06:56,751.751] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,751.751] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,752.752] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,753.753] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:56,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.1s ago] {'pk_1': UUID('a19f4973-565d-427a-be53-5b650c99095b')}
[2025-06-09 19:06:56,753.753] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,753.753] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:56,754.754] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:06:56,755.755] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:06:56] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:06:56,755.755] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,755.755] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,756.756] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:06:56,757.757] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff'), 'message_id': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}, "id": "call_0_f58bbbb4-f49d-4b34-8167-2a8845d823f6", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5062 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "90f3582a-1fa0-4770-a21b-b07024c0fb01", "example": false}}]', 'message_token_count': 922, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 320, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1242, 'total_price': 0.002343, 'latency': 7.094029000000035}
[2025-06-09 19:06:56,760.760] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:56,761.761] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:56,761.761] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,761.761] base.py -> _exec_single_context line:1901 [INFO]: [cached since 357.1s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:56,762.762] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,762.762] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,763.763] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:06:56,764.764] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff'), 'message_id': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u4e2d\\u56fd\\u4e0a\\u6d77\\u5b98\\u65b9\\u65c5\\u6e38\\u7f51\\u7ad9\\u662f\\u4e00\\u672c\\u5b9e\\u7528\\u4e14\\u6743\\u5a01\\u7684\\u6307\\u5357\ ... (4970 characters truncated) ... 201d\\u6218\\u7565\\u3001\\u4e0a\\u6d77\\u6253\\u54cd\\u201c\\u56db\\u5927\\u54c1\\u724c\\u201d\\u3001\\u4e0a\\u6d77\\u65c5\\u6e38\\u53d1\\u5c55 ..."', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 1.2993013999999903}
[2025-06-09 19:06:56,772.772] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:56,773.773] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:56,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,773.773] base.py -> _exec_single_context line:1901 [INFO]: [cached since 357.1s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:56,774.774] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,775.775] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:06:56,776.776] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff'), 'message_id': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çä¿¡æ¯ï¼ä¾æ¨åèï¼\n\n### 1. **ç­é¨æ¯ç¹**\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼å¤æçç¯åç§éå¸¸å£®è§ã\n   - **ä¸æ¹æç å¡**ï¼ä¿¯ç°ä¸æµ·å¨æ¯çæä½³å°ç¹ä¹ä¸ã\n   - **è±«å­**ï¼å¤å¸å­æï¼éåä½éªä¼ ç»æåã\n   - **è¿ªå£«å°¼ä¹å­**ï¼ ... (311 characters truncated) ... **ä½å®¿**ï¼ä»ç»æµåå°è±ªåéåºéæ©å¤æ ·ã\n\n### 5. **ææ°å¨æ**\n   - **2025å¹´ä¸æµ·ææ¸¸äº§ä¸åè§ä¼**ï¼å³å°å¼å¹ï¼å±ç¤ºææ°ææ¸¸äº§åã\n   - **ä¸æµ·å å¿«å»ºè®¾ä¸çèåææ¸¸åå¸**ï¼æªæ¥å°ææ´å¤ææ¸¸é¡¹ç®æ¨åºã\n\nå¦æéè¦æ´è¯¦ç»çè¡ç¨è§åæå·ä½æ¯ç¹çä»ç»ï¼è¯·åè¯æï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12947 characters truncated) ... "id": "7c0e010d-5d7d-4d97-9150-c3f4334686eb", "tool_call_id": "call_0_f58bbbb4-f49d-4b34-8167-2a8845d823f6", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çä¿¡æ¯ï¼ä¾æ¨åèï¼\n\n### 1. **ç­é¨æ¯ç¹**\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼å¤æçç¯åç§éå¸¸å£®è§ã\n   - **ä¸æ¹æç å¡**ï¼ä¿¯ç°ä¸æµ·å¨æ¯çæä½³å°ç¹ä¹ä¸ã\n   - **è±«å­**ï¼å¤å¸å­æï¼éåä½éªä¼ ç»æåã\n   - **è¿ªå£«å°¼ä¹å­**ï¼ ... (311 characters truncated) ... **ä½å®¿**ï¼ä»ç»æµåå°è±ªåéåºéæ©å¤æ ·ã\n\n### 5. **ææ°å¨æ**\n   - **2025å¹´ä¸æµ·ææ¸¸äº§ä¸åè§ä¼**ï¼å³å°å¼å¹ï¼å±ç¤ºææ°ææ¸¸äº§åã\n   - **ä¸æµ·å å¿«å»ºè®¾ä¸çèåææ¸¸åå¸**ï¼æªæ¥å°ææ´å¤ææ¸¸é¡¹ç®æ¨åºã\n\nå¦æéè¦æ´è¯¦ç»çè¡ç¨è§åæå·ä½æ¯ç¹çä»ç»ï¼è¯·åè¯æï¼', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 18.31936810000002}
[2025-06-09 19:06:56,778.778] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:56,779.779] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:56,780.780] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,780.780] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,781.781] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:06:56,781.781] base.py -> _exec_single_context line:1901 [INFO]: [cached since 89.94s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12947 characters truncated) ... "id": "7c0e010d-5d7d-4d97-9150-c3f4334686eb", "tool_call_id": "call_0_f58bbbb4-f49d-4b34-8167-2a8845d823f6", "artifact": null, "status": "success"}}]', 'answer': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çä¿¡æ¯ï¼ä¾æ¨åèï¼\n\n### 1. **ç­é¨æ¯ç¹**\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼å¤æçç¯åç§éå¸¸å£®è§ã\n   - **ä¸æ¹æç å¡**ï¼ä¿¯ç°ä¸æµ·å¨æ¯çæä½³å°ç¹ä¹ä¸ã\n   - **è±«å­**ï¼å¤å¸å­æï¼éåä½éªä¼ ç»æåã\n   - **è¿ªå£«å°¼ä¹å­**ï¼ ... (311 characters truncated) ... **ä½å®¿**ï¼ä»ç»æµåå°è±ªåéåºéæ©å¤æ ·ã\n\n### 5. **ææ°å¨æ**\n   - **2025å¹´ä¸æµ·ææ¸¸äº§ä¸åè§ä¼**ï¼å³å°å¼å¹ï¼å±ç¤ºææ°ææ¸¸äº§åã\n   - **ä¸æµ·å å¿«å»ºè®¾ä¸çèåææ¸¸åå¸**ï¼æªæ¥å°ææ´å¤ææ¸¸é¡¹ç®æ¨åºã\n\nå¦æéè¦æ´è¯¦ç»çè¡ç¨è§åæå·ä½æ¯ç¹çä»ç»ï¼è¯·åè¯æï¼', 'latency': 26.712698500000045, 'message_id': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:06:56,783.783] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:06:56,783.783] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:06:56,784.784] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,784.784] base.py -> _exec_single_context line:1901 [INFO]: [cached since 357.1s ago] {'pk_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:56,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:06:56,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 336.8s ago] {'conversation_id_1': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:06:56,786.786] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:06:56,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 347.7s ago] {'pk_1': UUID('238773b1-3cd7-4d25-a3d2-969eaefd4474')}
[2025-06-09 19:07:05,157.157] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:07:05,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.6s ago] {'name': 'çæä¸æµ·ææ¸¸ä¿¡æ¯', 'conversation_id': UUID('22abbec8-5701-4620-a95a-ec3aadf838ff')}
[2025-06-09 19:07:05,158.158] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:07:30,900.900] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:30] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-09 19:07:30,901.901] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:30] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 19:07:31,220.220] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:31,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:31,222.222] base.py -> _exec_single_context line:1901 [INFO]: [cached since 499.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:31,221.221] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:31,225.225] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:31,225.225] base.py -> _exec_single_context line:1901 [INFO]: [cached since 499.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:31,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:07:31,227.227] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:07:31,230.230] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:31,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:07:31,233.233] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:31] "GET /account HTTP/1.1" 200 -
[2025-06-09 19:07:31,235.235] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00272s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:07:31,237.237] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:31,238.238] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:31] "GET /workflows?current_page=1&page_size=20&search_word=&status= HTTP/1.1" 200 -
[2025-06-09 19:07:32,278.278] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:32] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:07:32,287.287] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:32,288.288] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:32,288.288] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:32,291.291] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:07:32,292.292] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:07:32,295.295] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:07:32,295.295] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:07:32,298.298] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:32,298.298] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.7s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:32,299.299] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:32,300.300] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.7s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:32,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:32,313.313] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.7s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:32,316.316] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:07:32,316.316] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.6s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:07:32,318.318] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:32,328.328] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.7s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:32,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:07:32,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 147.6s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 19:07:32,332.332] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:32,333.333] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:32] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:07:34,183.183] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 19:07:34,184.184] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 19:07:34,189.189] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:07:34,190.190] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 19:07:34,191.191] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:07:34,192.192] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 19:07:34,496.496] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:34,497.497] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,498.498] base.py -> _exec_single_context line:1901 [INFO]: [cached since 502.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:34,498.498] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 19:07:34,500.500] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:34,505.505] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:34,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 502.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:34,507.507] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:34,506.506] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 19:07:34,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,511.511] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:07:34,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 502.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:34,517.517] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00637s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:07:34,519.519] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,521.521] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:07:34,521.521] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:07:34,522.522] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00104s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:07:34,524.524] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 19:07:34,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,526.526] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00273s] {'id_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 19:07:34,526.526] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00087s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:07:34,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:07:34,530.530] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00100s] {'conversation_id_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:07:34,533.533] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 19:07:34,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,540.540] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00645s] {'conversation_id_1': UUID('607fb878-0154-4906-88c2-b3a0a5d1d6d3'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:07:34,540.540] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00557s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:07:34,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 19:07:34,544.544] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00051s] {'message_id_1': UUID('ca9bf78e-239c-42dd-9fd9-ba1bbabd4233')}
[2025-06-09 19:07:34,546.546] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,546.546] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:07:34,547.547] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0216s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:07:34,549.549] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:34,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,550.550] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 19:07:34,551.551] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01566s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:07:34,561.561] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,562.562] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01616s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:07:34,563.563] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,564.564] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03756s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:07:34,566.566] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,566.566] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03112s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:07:34,569.569] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,569.569] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0236s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:07:34,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,571.571] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04461s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:07:34,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03729s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:07:34,573.573] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,573.573] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0279s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:07:34,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04878s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:07:34,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,576.576] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04127s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:07:34,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03236s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:07:34,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,580.580] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05358s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:07:34,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04648s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:07:34,583.583] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03748s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:07:34,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05841s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:07:34,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05112s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:07:34,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04251s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:07:34,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06402s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:07:34,592.592] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,592.592] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05713s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:07:34,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04831s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:07:34,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06981s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:07:34,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,597.597] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0624s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:07:34,598.598] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05346s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:07:34,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,601.601] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0748s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:07:34,602.602] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06766s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:07:34,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05945s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:07:34,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08058s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:07:34,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07331s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:07:34,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06441s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:07:34,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08594s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:07:34,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07898s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:07:34,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07011s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:07:34,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09144s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:07:34,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08459s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:07:34,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07625s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:07:34,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09722s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:07:34,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08975s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:07:34,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08063s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:07:34,627.627] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,627.627] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1014s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:07:34,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09417s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:07:34,630.630] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08559s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:07:34,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,632.632] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1065s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:07:34,634.634] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09909s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:07:34,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09015s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:07:34,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.111s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:07:34,637.637] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1035s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:07:34,639.639] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0943s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:07:34,640.640] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1151s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:07:34,641.641] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,642.642] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1075s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:07:34,643.643] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,643.643] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.09832s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:07:34,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,644.644] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:34,645.645] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1195s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:07:34,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.1s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:34,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,649.649] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1152s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:07:34,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:07:34,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:34,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1078s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:07:34,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:34,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,655.655] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1293s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:07:34,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,656.656] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:34,657.657] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1226s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:07:34,657.657] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 19:07:34,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:07:34,664.664] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1193s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:07:34,667.667] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:34,668.668] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:07:34,728.728] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:34,729.729] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,729.729] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:34,732.732] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:07:34,732.732] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:07:34,734.734] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:34,735.735] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.2s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:34,738.738] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:07:34,738.738] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.2s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:07:34,740.740] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:07:34,742.742] base.py -> _exec_single_context line:1901 [INFO]: [cached since 500.2s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:07:34,744.744] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:34,745.745] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:34] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:07:35,055.055] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:35] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 19:07:35,345.345] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:35,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:35,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 503.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:35,352.352] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:07:35,353.353] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:35] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 19:07:35,615.615] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:35] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-09 19:07:35,615.615] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:35] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 19:07:36,473.473] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:07:36,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:07:36,474.474] base.py -> _exec_single_context line:1901 [INFO]: [cached since 504.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:07:36,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:07:36,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 504.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:07:36,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:07:36,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 504.9s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:07:36,478.478] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET tools=%(tools)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-09 19:07:36,479.479] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'tools': '[]', 'updated_at': datetime.datetime(2025, 6, 9, 19, 7, 36, 478213), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-09 19:07:36,480.480] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:07:36,483.483] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:07:36] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:08:24,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:24,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:08:24,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:08:24,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 552.9s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:08:24,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 552.9s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:08:24,510.510] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:08:24,510.510] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:08:24,512.512] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:24,514.514] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:24,515.515] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,516.516] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:08:24,517.517] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,517.517] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'pk_1': UUID('50651043-a488-4391-a16c-3707f70bdca7')}
[2025-06-09 19:08:24,519.519] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:08:24,520.520] base.py -> _exec_single_context line:1901 [INFO]: [cached since 444.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('50651043-a488-4391-a16c-3707f70bdca7')}
[2025-06-09 19:08:24,526.526] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:24,528.528] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:24,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,529.529] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:08:24,530.530] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,531.531] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:08:24,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:08:24,533.533] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:08:24,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:08:24,534.534] base.py -> _exec_single_context line:1901 [INFO]: [cached since 550s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:08:24,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:08:24,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 550s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:08:24,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 444.9s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:24,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 199.8s ago] {'pk_1': UUID('50651043-a488-4391-a16c-3707f70bdca7')}
[2025-06-09 19:08:24,544.544] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:08:24,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 444.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('50651043-a488-4391-a16c-3707f70bdca7'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµçæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:08:24,547.547] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:24,611.611] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:24,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:24,616.616] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:08:24,616.616] base.py -> _exec_single_context line:1901 [INFO]: [cached since 444.9s ago] {'conversation_id_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:08:24,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:08:24,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 445s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:08:52,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:08:52,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 463s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 227.4s ago] {'pk_1': UUID('50651043-a488-4391-a16c-3707f70bdca7')}
[2025-06-09 19:08:52,108.108] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:52,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.1s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:52,111.111] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:08:52,112.112] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:08:52] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:08:52,112.112] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.1s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,116.116] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:08:52,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd'), 'message_id': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}, "id": "call_0_87b31b86-171d-42dd-a7ad-1b01ee4da94f", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5075 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "f831ac4b-235c-481a-afd4-627e9d8f8d03", "example": false}}]', 'message_token_count': 923, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 323, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1246, 'total_price': 0.0023535, 'latency': 5.034073000000035}
[2025-06-09 19:08:52,120.120] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:52,122.122] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:52,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 472.5s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:52,124.124] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,128.128] base.py -> _exec_single_context line:1901 [INFO]: [cached since 463s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,131.131] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:08:52,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.1s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd'), 'message_id': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u4e2d\\u56fd\\u4e0a\\u6d77\\u5b98\\u65b9\\u65c5\\u6e38\\u7f51\\u7ad9\\u662f\\u4e00\\u672c\\u5b9e\\u7528\\u4e14\\u6743\\u5a01\\u7684\\u6307\\u5357\ ... (5078 characters truncated) ... 0\\u95fb\\u53d1\\u5e03\\u3001\\u653f\\u5e9c\\u4fe1\\u606f\\u516c\\u5f00\\u7b49\\u5185\\u5bb9\\u8bf7\\u4f7f\\u7528tab\\u6309\\u94ae\\u5207\\u6362 ..."', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 2.249242900000013}
[2025-06-09 19:08:52,137.137] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:52,139.139] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:52,139.139] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,143.143] base.py -> _exec_single_context line:1901 [INFO]: [cached since 472.5s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:52,145.145] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 463s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,147.147] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:08:52,147.147] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.2s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd'), 'message_id': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»¥ä¸æ¯ä¸ºæ¨æ´ççä¸æµ·ææ¸¸ä¿¡æ¯ï¼\n\n### 1. **ä¸»è¦æ¯ç¹**\n- **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­ä¸ç°ä»£æ©å¤©å¤§æ¥¼ã\n- **ä¸æ¹æç å¡**ï¼ä¸æµ·çå°æ å»ºç­ï¼å¯ä¿¯ç°åå¸å¨æ¯ã\n- **è±«å­**ï¼å¤å¸å­æï¼ä½éªä¼ ç»æ±åæåã\n- **åäº¬è·¯æ­¥è¡è¡**ï¼è´­ç©å¤©å ï¼ ... (348 characters truncated) ... è¦æ¯ç¹ã\n- **æµ¦ä¸æ°åºé«ç«¯éåº**ï¼éååå¡æè±ªåæè¡ã\n\n### 6. **æ³¨æäºé¡¹**\n- **å¤©æ°**ï¼å¤å­£çç­æ½®æ¹¿ï¼å¬å­£è¾å·ï¼å»ºè®®æ ¹æ®å­£èåå¤è¡£ç©ã\n- **è¯­è¨**ï¼æ®éè¯éç¨ï¼é¨åæ¯ç¹æä¾è±è¯­æå¡ã\n\nå¦éæ´è¯¦ç»çææ¸¸æ»ç¥æç¹å®ä¸»é¢ï¼å¦äº²å­æ¸¸ãç¾é£ä¹æç­ï¼ï¼è¯·åè¯æï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13102 characters truncated) ... "id": "1abdb491-59fe-47bb-8879-99149e1f54e5", "tool_call_id": "call_0_87b31b86-171d-42dd-a7ad-1b01ee4da94f", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ä»¥ä¸æ¯ä¸ºæ¨æ´ççä¸æµ·ææ¸¸ä¿¡æ¯ï¼\n\n### 1. **ä¸»è¦æ¯ç¹**\n- **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­ä¸ç°ä»£æ©å¤©å¤§æ¥¼ã\n- **ä¸æ¹æç å¡**ï¼ä¸æµ·çå°æ å»ºç­ï¼å¯ä¿¯ç°åå¸å¨æ¯ã\n- **è±«å­**ï¼å¤å¸å­æï¼ä½éªä¼ ç»æ±åæåã\n- **åäº¬è·¯æ­¥è¡è¡**ï¼è´­ç©å¤©å ï¼ ... (348 characters truncated) ... è¦æ¯ç¹ã\n- **æµ¦ä¸æ°åºé«ç«¯éåº**ï¼éååå¡æè±ªåæè¡ã\n\n### 6. **æ³¨æäºé¡¹**\n- **å¤©æ°**ï¼å¤å­£çç­æ½®æ¹¿ï¼å¬å­£è¾å·ï¼å»ºè®®æ ¹æ®å­£èåå¤è¡£ç©ã\n- **è¯­è¨**ï¼æ®éè¯éç¨ï¼é¨åæ¯ç¹æä¾è±è¯­æå¡ã\n\nå¦éæ´è¯¦ç»çææ¸¸æ»ç¥æç¹å®ä¸»é¢ï¼å¦äº²å­æ¸¸ãç¾é£ä¹æç­ï¼ï¼è¯·åè¯æï¼', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 20.16209140000001}
[2025-06-09 19:08:52,162.162] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:52,163.163] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:52,163.163] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,164.164] base.py -> _exec_single_context line:1901 [INFO]: [cached since 463.1s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,166.166] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:08:52,166.166] base.py -> _exec_single_context line:1901 [INFO]: [cached since 205.3s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (13102 characters truncated) ... "id": "1abdb491-59fe-47bb-8879-99149e1f54e5", "tool_call_id": "call_0_87b31b86-171d-42dd-a7ad-1b01ee4da94f", "artifact": null, "status": "success"}}]', 'answer': 'ä»¥ä¸æ¯ä¸ºæ¨æ´ççä¸æµ·ææ¸¸ä¿¡æ¯ï¼\n\n### 1. **ä¸»è¦æ¯ç¹**\n- **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­ä¸ç°ä»£æ©å¤©å¤§æ¥¼ã\n- **ä¸æ¹æç å¡**ï¼ä¸æµ·çå°æ å»ºç­ï¼å¯ä¿¯ç°åå¸å¨æ¯ã\n- **è±«å­**ï¼å¤å¸å­æï¼ä½éªä¼ ç»æ±åæåã\n- **åäº¬è·¯æ­¥è¡è¡**ï¼è´­ç©å¤©å ï¼ ... (348 characters truncated) ... è¦æ¯ç¹ã\n- **æµ¦ä¸æ°åºé«ç«¯éåº**ï¼éååå¡æè±ªåæè¡ã\n\n### 6. **æ³¨æäºé¡¹**\n- **å¤©æ°**ï¼å¤å­£çç­æ½®æ¹¿ï¼å¬å­£è¾å·ï¼å»ºè®®æ ¹æ®å­£èåå¤è¡£ç©ã\n- **è¯­è¨**ï¼æ®éè¯éç¨ï¼é¨åæ¯ç¹æä¾è±è¯­æå¡ã\n\nå¦éæ´è¯¦ç»çææ¸¸æ»ç¥æç¹å®ä¸»é¢ï¼å¦äº²å­æ¸¸ãç¾é£ä¹æç­ï¼ï¼è¯·åè¯æï¼', 'latency': 27.445407300000056, 'message_id': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:08:52,177.177] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:08:52,179.179] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:08:52,179.179] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 472.5s ago] {'pk_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:52,181.181] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:08:52,181.181] base.py -> _exec_single_context line:1901 [INFO]: [cached since 452.1s ago] {'conversation_id_1': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:08:52,183.183] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:08:52,183.183] base.py -> _exec_single_context line:1901 [INFO]: [cached since 463.1s ago] {'pk_1': UUID('2521afa1-4416-486d-9274-7fa88d79c2a1')}
[2025-06-09 19:09:00,464.464] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:09:00,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 457.9s ago] {'name': 'ä¸æµ·ææ¸¸ä¿¡æ¯', 'conversation_id': UUID('f8cd5e2e-c9aa-48a4-8e23-00cd5f502cbd')}
[2025-06-09 19:09:00,466.466] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:14:37,047.047] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:14:37,048.048] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:14:37,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.4s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:14:37,052.052] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,052.052] base.py -> _exec_single_context line:1901 [INFO]: [cached since 925.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:14:37,054.054] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,054.054] base.py -> _exec_single_context line:1901 [INFO]: [cached since 925.5s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:14:37,055.055] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:14:37,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.3s ago] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:14:37,059.059] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:14:37,062.062] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:14:37,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,063.063] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:14:37,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,065.065] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.4s ago] {'pk_1': UUID('f725db55-faf2-4346-b383-68648a97cf90')}
[2025-06-09 19:14:37,066.066] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:14:37,066.066] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('f725db55-faf2-4346-b383-68648a97cf90')}
[2025-06-09 19:14:37,068.068] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:14:37,069.069] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:14:37,070.070] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,070.070] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:14:37,071.071] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,075.075] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.3s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:14:37,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:14:37,079.079] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.3s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:14:37,081.081] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:14:37,081.081] base.py -> _exec_single_context line:1901 [INFO]: [cached since 922.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:14:37,083.083] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:14:37,083.083] base.py -> _exec_single_context line:1901 [INFO]: [cached since 922.5s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:14:37,085.085] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,085.085] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.4s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:14:37,087.087] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,087.087] base.py -> _exec_single_context line:1901 [INFO]: [cached since 572.4s ago] {'pk_1': UUID('f725db55-faf2-4346-b383-68648a97cf90')}
[2025-06-09 19:14:37,088.088] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:14:37,096.096] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('f725db55-faf2-4346-b383-68648a97cf90'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµ(wf_haohaoer)çæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:14:37,102.102] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:14:37,177.177] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:14:37,177.177] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,178.178] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.5s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:14:37,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:14:37,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.4s ago] {'conversation_id_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:14:37,182.182] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:14:37,182.182] base.py -> _exec_single_context line:1901 [INFO]: [cached since 817.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:14:43,772.772] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:14:43,773.773] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-09 19:14:43,774.774] base.py -> _exec_single_context line:1901 [INFO]: [cached since 932.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:14:49,709.709] base.py -> similarity_search_with_relevance_scores line:576 [WARNING]: No relevant docs were retrieved using the relevance score threshold 0.7
[2025-06-09 19:14:49,710.710] base.py -> _exec_single_context line:1896 [INFO]: UPDATE segment SET hit_count=(segment.hit_count + %(hit_count_1)s) WHERE segment.id IN (NULL) AND (1 != 1)
[2025-06-09 19:14:49,711.711] base.py -> _exec_single_context line:1901 [INFO]: [cached since 571.5s ago] {'hit_count_1': 1}
[2025-06-09 19:14:49,714.714] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,786.786] base.py -> _exec_single_context line:1901 [INFO]: [cached since 600.1s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:15:04,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,787.787] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.7s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,789.789] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,789.789] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 600.1s ago] {'pk_1': UUID('f725db55-faf2-4346-b383-68648a97cf90')}
[2025-06-09 19:15:04,790.790] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,792.792] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:15:04,793.793] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:15:04] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:15:04,792.792] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,800.800] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,801.801] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:15:04,802.802] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "dataset_retrieval", "args": {"query": "\\u4e0a\\u6d77\\u7684\\u65c5\\u6e38\\u4fe1\\u606f"}, "id": "call_0_38beef87-dabc-4356-808f-905c8c5f64a3", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5088 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "b8124740-1ded-4101-881a-0623d96f69de", "example": false}}]', 'message_token_count': 930, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 329, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1259, 'total_price': 0.002382, 'latency': 6.562950099999966}
[2025-06-09 19:15:04,805.805] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,807.807] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,807.807] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.1s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,817.817] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.7s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,819.819] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:15:04,819.819] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.DATASET_RETRIEVAL: 'dataset_retrieval'>, 'thought': '', 'observation': '"\\u77e5\\u8bc6\\u5e93\\u5185\\u6ca1\\u6709\\u68c0\\u7d22\\u5230\\u5bf9\\u5e94\\u5185\\u5bb9"', 'tool': 'dataset_retrieval', 'tool_input': '{"query": "\\u4e0a\\u6d77\\u7684\\u65c5\\u6e38\\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 5.943413200000009}
[2025-06-09 19:15:04,823.823] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,825.825] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,825.825] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,831.831] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,833.833] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,834.834] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.7s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,835.835] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:15:04,836.836] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38\\u4fe1\\u606f \\u5de5\\u4f5c\\u6d41 wf_haohaoer"}, "id": "call_0_5014f97b-b66d-4c5b-a843-8dbcaf4369f4", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6400 characters truncated) ... "id": "e352ff16-9789-49b2-b8f4-d6356482c5d1", "tool_call_id": "call_0_38beef87-dabc-4356-808f-905c8c5f64a3", "artifact": null, "status": "success"}}]', 'message_token_count': 1318, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 352, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1670, 'total_price': 0.0030330000000000005, 'latency': 7.547754899999973}
[2025-06-09 19:15:04,839.839] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,842.842] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,842.842] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,847.847] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,849.849] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,849.849] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.7s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,851.851] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:15:04,851.851] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 4, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"No good Google Search Result was found"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38\\u4fe1\\u606f \\u5de5\\u4f5c\\u6d41 wf_haohaoer"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 1.3159319000000096}
[2025-06-09 19:15:04,854.854] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,857.857] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,857.857] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,862.862] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,865.865] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,865.865] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.7s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,868.868] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:15:04,868.868] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.9s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85'), 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 5, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ç®åæ æ³éè¿å·¥ä½æµ`wf_haohaoer`çæä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¸®å©ï¼å¯ä»¥æä¾æ´å¤ç»èï¼æå°å°½ååå©æ¨ã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (7677 characters truncated) ... "id": "611904ce-d57c-4254-8cd7-41c38d86e3d2", "tool_call_id": "call_0_5014f97b-b66d-4c5b-a843-8dbcaf4369f4", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ç®åæ æ³éè¿å·¥ä½æµ`wf_haohaoer`çæä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¸®å©ï¼å¯ä»¥æä¾æ´å¤ç»èï¼æå°å°½ååå©æ¨ã', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 6.1911713000000645}
[2025-06-09 19:15:04,871.871] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,872.872] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,873.873] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,877.877] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.8s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,879.879] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:15:04,879.879] base.py -> _exec_single_context line:1901 [INFO]: [cached since 578s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (7677 characters truncated) ... "id": "611904ce-d57c-4254-8cd7-41c38d86e3d2", "tool_call_id": "call_0_5014f97b-b66d-4c5b-a843-8dbcaf4369f4", "artifact": null, "status": "success"}}]', 'answer': 'ç®åæ æ³éè¿å·¥ä½æµ`wf_haohaoer`çæä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¸®å©ï¼å¯ä»¥æä¾æ´å¤ç»èï¼æå°å°½ååå©æ¨ã', 'latency': 27.561221400000022, 'message_id': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:04,881.881] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:15:04,882.882] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:15:04,883.883] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,883.883] base.py -> _exec_single_context line:1901 [INFO]: [cached since 845.2s ago] {'pk_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,885.885] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:15:04,885.885] base.py -> _exec_single_context line:1901 [INFO]: [cached since 824.8s ago] {'conversation_id_1': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:04,888.888] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:15:04,893.893] base.py -> _exec_single_context line:1901 [INFO]: [cached since 835.8s ago] {'pk_1': UUID('7db304b8-c53e-4ae4-8628-80e897ad74a1')}
[2025-06-09 19:15:12,955.955] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:15:12,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 830.4s ago] {'name': 'çæä¸æµ·çææ¸¸ä¿¡æ¯', 'conversation_id': UUID('cd6210de-da6d-4e80-9e32-65abc216ee85')}
[2025-06-09 19:15:12,958.958] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:16:07,477.477] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\openapi_service.py', reloading
[2025-06-09 19:16:07,973.973] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 19:16:33,013.013] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 19:16:33,016.016] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 19:17:04,651.651] _internal.py -> _log line:97 [INFO]:  * Detected change in 'C:\\Users\\Lenovo\\Desktop\\llmops-api\\internal\\service\\openapi_service.py', reloading
[2025-06-09 19:17:05,062.062] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 19:17:40,106.106] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 19:17:40,106.106] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 19:17:40,107.107] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 19:18:04,082.082] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 19:18:04,084.084] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 19:18:32,913.913] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 19:18:32,913.913] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 19:18:32,915.915] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 19:18:32,915.915] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 19:18:32,916.916] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 19:18:32,916.916] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 19:18:32,917.917] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:32,919.919] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:18:32,920.920] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:18:32,925.925] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,926.926] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:18:32,933.933] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,933.933] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:18:32,936.936] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:18:32,937.937] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:18:32,944.944] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:32,945.945] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:32,946.946] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,946.946] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00053s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:18:32,948.948] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,949.949] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00040s] {'pk_1': UUID('0c54f80a-09ba-4c18-b071-6c44fbf08c13')}
[2025-06-09 19:18:32,952.952] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:18:32,952.952] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00074s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('0c54f80a-09ba-4c18-b071-6c44fbf08c13')}
[2025-06-09 19:18:32,955.955] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:32,956.956] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:32,957.957] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,957.957] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01182s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:18:32,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,962.962] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:18:32,965.965] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:18:32,966.966] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00059s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:18:32,969.969] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:18:32,970.970] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:18:32,974.974] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:18:32,974.974] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:18:32,977.977] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,978.978] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00054s] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:32,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:18:32,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03156s ago] {'pk_1': UUID('0c54f80a-09ba-4c18-b071-6c44fbf08c13')}
[2025-06-09 19:18:32,982.982] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:18:32,983.983] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00046s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('974df082-0a27-4985-a601-889c247af6a1'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('0c54f80a-09ba-4c18-b071-6c44fbf08c13'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµ(haohaoer)çæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:18:32,986.986] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:33,053.053] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:33,055.055] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:33,056.056] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07851s ago] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:33,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:18:33,060.060] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('974df082-0a27-4985-a601-889c247af6a1'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:18:33,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:18:33,064.064] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:18:45,987.987] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:18:45,987.987] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.04s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:18:45,990.990] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:45,990.990] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00063s] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:45,997.997] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:18:45,998.998] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.05s ago] {'pk_1': UUID('0c54f80a-09ba-4c18-b071-6c44fbf08c13')}
[2025-06-09 19:18:45,999.999] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:18:46,000.000] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:18:46] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:18:46,157.157] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:46,158.158] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,159.159] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:46,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,165.165] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00087s] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:46,173.173] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:18:46,174.174] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00119s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('974df082-0a27-4985-a601-889c247af6a1'), 'message_id': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u597d\\u597d\\u5de5\\u4f5c\\u6d41(haohaoer) \\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}, "id": "call_0_b2e33575-f241-4aed-9455-fd179e221a3e", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5085 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "60a0ebc4-9b7e-4f7e-947b-cfd1f8541d4b", "example": false}}]', 'message_token_count': 938, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 347, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1285, 'total_price': 0.002448, 'latency': 5.455318699999999}
[2025-06-09 19:18:46,185.185] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:46,187.187] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:46,188.188] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,189.189] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.21s ago] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:46,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,191.191] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2018s ago] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:46,194.194] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:18:46,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02095s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('974df082-0a27-4985-a601-889c247af6a1'), 'message_id': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"No good Google Search Result was found"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u597d\\u597d\\u5de5\\u4f5c\\u6d41(haohaoer) \\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 1.584222000000004}
[2025-06-09 19:18:46,198.198] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:46,199.199] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:46,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,205.205] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.23s ago] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:46,207.207] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2179s ago] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:46,210.210] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:18:46,211.211] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03733s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('974df082-0a27-4985-a601-889c247af6a1'), 'message_id': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ç®åæªè½éè¿âå¥½å¥½å·¥ä½æµ(haohaoer)âæ¾å°ä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¶ä»å·¥å·ææ¹æ³è·åç¸å³ä¿¡æ¯ï¼è¯·åè¯æï¼æå¯ä»¥è¿ä¸æ­¥åå©æ¨ã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6384 characters truncated) ... "id": "ecca1b81-38d8-49b5-91ce-96ef8fc5b62d", "tool_call_id": "call_0_b2e33575-f241-4aed-9455-fd179e221a3e", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ç®åæªè½éè¿âå¥½å¥½å·¥ä½æµ(haohaoer)âæ¾å°ä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¶ä»å·¥å·ææ¹æ³è·åç¸å³ä¿¡æ¯ï¼è¯·åè¯æï¼æå¯ä»¥è¿ä¸æ­¥åå©æ¨ã', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 5.609949399999998}
[2025-06-09 19:18:46,214.214] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:46,216.216] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:46,217.217] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,221.221] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2313s ago] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:46,224.224] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:18:46,225.225] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00092s] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (6384 characters truncated) ... "id": "ecca1b81-38d8-49b5-91ce-96ef8fc5b62d", "tool_call_id": "call_0_b2e33575-f241-4aed-9455-fd179e221a3e", "artifact": null, "status": "success"}}]', 'answer': 'ç®åæªè½éè¿âå¥½å¥½å·¥ä½æµ(haohaoer)âæ¾å°ä¸æµ·çææ¸¸ä¿¡æ¯ãå¦ææ¨æå¶ä»å·ä½éæ±æéè¦å¶ä»å·¥å·ææ¹æ³è·åç¸å³ä¿¡æ¯ï¼è¯·åè¯æï¼æå¯ä»¥è¿ä¸æ­¥åå©æ¨ã', 'latency': 12.649490100000001, 'message_id': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:46,228.228] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:18:46,229.229] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:18:46,230.230] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,231.231] base.py -> _exec_single_context line:1901 [INFO]: [cached since 13.25s ago] {'pk_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:46,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:18:46,234.234] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'conversation_id_1': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:46,235.235] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:18:46,237.237] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.2478s ago] {'pk_1': UUID('c5c1ba82-2fd2-4aa2-9a17-a714612a587c')}
[2025-06-09 19:18:54,532.532] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:18:54,533.533] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'name': 'çæä¸æµ·çææ¸¸ä¿¡æ¯', 'conversation_id': UUID('974df082-0a27-4985-a601-889c247af6a1')}
[2025-06-09 19:18:54,535.535] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:19:06,525.525] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:19:06,526.526] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:19:06,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:19:06,528.528] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:19:06,528.528] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.59s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:19:06,531.531] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:19:06,532.532] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:19:06,536.536] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:19:06,536.536] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.57s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:19:06,542.542] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:19:06,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 33.57s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:19:06,545.545] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:19:06,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:19:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:19:28,443.443] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:19:28,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:19:28,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 55.52s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:19:28,449.449] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:19:28,450.450] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:19:28,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:19:28,454.454] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00062s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:19:28,456.456] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:19:28,457.457] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:19:28] "GET /openapi/api-keys HTTP/1.1" 200 -
[2025-06-09 19:20:49,112.112] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:20:49,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:20:49,113.113] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:20:49,114.114] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:20:49,115.115] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.2s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:20:49,116.116] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:20:49,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 102.6s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:20:49,118.118] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:20:49,118.118] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.1s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:20:49,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:20:49,125.125] base.py -> _exec_single_context line:1901 [INFO]: [cached since 136.1s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:20:49,127.127] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:20:49,127.127] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:20:49] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:23:13,328.328] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:23:13,328.328] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:23:13,329.329] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:23:13,330.330] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:23:13,330.330] base.py -> _exec_single_context line:1901 [INFO]: [cached since 280.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:13,333.333] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 19:23:13,333.333] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:13,334.334] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:23:13,336.336] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:23:13] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 19:23:57,476.476] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:23:57,477.477] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 19:23:57,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 19:23:57,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:23:57,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 19:23:57,483.483] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 19:23:57,483.483] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:57,485.485] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:23:57,488.488] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:23:57,489.489] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,490.490] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:57,492.492] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,493.493] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('cc069d2b-c7a8-4ead-9a0a-6c6937dc016e')}
[2025-06-09 19:23:57,496.496] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:23:57,496.496] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('cc069d2b-c7a8-4ead-9a0a-6c6937dc016e')}
[2025-06-09 19:23:57,499.499] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:23:57,503.503] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:23:57,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:57,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:23:57,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 19:23:57,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:23:57,508.508] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:23:57,508.508] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:23:57,509.509] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (NULL) AND (1 != 1) AND workflow.status = %(status_1)s
[2025-06-09 19:23:57,509.509] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>}
[2025-06-09 19:23:57,510.510] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,511.511] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:23:57,513.513] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,513.513] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('cc069d2b-c7a8-4ead-9a0a-6c6937dc016e')}
[2025-06-09 19:23:57,514.514] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 19:23:57,515.515] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('cc069d2b-c7a8-4ead-9a0a-6c6937dc016e'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµçæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:23:57,517.517] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:23:57,578.578] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:23:57,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,579.579] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.6s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:23:57,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 19:23:57,581.581] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'conversation_id_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 19:23:57,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:23:57,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 324.5s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:24:28,978.978] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:24:28,979.979] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:24:28,980.980] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:28,980.980] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:28,982.982] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:24:28,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 19:24:28,983.983] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:24:28,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356s ago] {'pk_1': UUID('cc069d2b-c7a8-4ead-9a0a-6c6937dc016e')}
[2025-06-09 19:24:28,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:28,986.986] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:24:28,986.986] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:28,987.987] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:24:28] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 19:24:28,994.994] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:28,996.996] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:24:28,996.996] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc'), 'message_id': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "google_serper", "args": {"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}, "id": "call_0_3530b85d-75ce-4d6a-8d9f-1a8a8017c619", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (5075 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "178f5b71-93d4-45e3-b68a-46590ba5e85c", "example": false}}]', 'message_token_count': 927, 'message_unit_price': 0.0015, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 337, 'answer_unit_price': 0.003, 'answer_price_unit': 0.001, 'total_token_count': 1264, 'total_price': 0.0024015000000000004, 'latency': 6.514189600000009}
[2025-06-09 19:24:29,000.000] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:24:29,001.001] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:24:29,002.002] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,002.002] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:29,003.003] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,011.011] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:29,012.012] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:24:29,013.013] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc'), 'message_id': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '"\\u4e2d\\u56fd\\u4e0a\\u6d77\\u5b98\\u65b9\\u65c5\\u6e38\\u7f51\\u7ad9\\u662f\\u4e00\\u672c\\u5b9e\\u7528\\u4e14\\u6743\\u5a01\\u7684\\u6307\\u5357\ ... (4614 characters truncated) ... 5\\uff0c\\u4e0a\\u6d77\\u5468\\u8fb9\\u65c5\\u6e38\\u6307\\u5357\\u662f\\u4e0a\\u6d77\\u4eba\\u51fa\\u6e38\\u7684\\u9996\\u9009\\u7f51\\u7ad9\\u3002"', 'tool': 'google_serper', 'tool_input': '{"query": "\\u4e0a\\u6d77\\u65c5\\u6e38\\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 2.590519900000004}
[2025-06-09 19:24:29,016.016] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:24:29,017.017] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:24:29,018.018] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,025.025] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:29,027.027] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:29,030.030] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 19:24:29,030.030] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc'), 'message_id': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çå®ç¨ä¿¡æ¯åå»ºè®®ï¼\n\n### 1. **ç­é¨æ¯ç¹æ¨è**\n   - **ä¸æ¹æç å¡**ï¼ä¸æµ·çæ å¿æ§å»ºç­ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªåå¸çç¾æ¯ã\n   - **å¤æ»©**ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­åç°ä»£æ©å¤©å¤§æ¥¼ã\n   - **è±«å­**ï¼ä½éªå¤å¸å­æçå®éä¸ç¾ä¸½ã\n   - ** ... (386 characters truncated) ... **ï¼æä¾è¯¦ç»çä¸æµ·å°å¾åå¤©æ°ä¿¡æ¯ã\n   - **æ³¨æäºé¡¹**ï¼åæ¬è¡æåå¤ãäº¤éæåç­ã\n\nå¦æéè¦æ´è¯¦ç»çä¿¡æ¯æç¹å®æ¯ç¹çä»ç»ï¼å¯ä»¥è¿ä¸æ­¥æ¥è¯¢æè®¿é®[ä¸æµ·å®æ¹ææ¸¸ç½ç«](https://www.youtube.com/channel/UCeDQIvCTHLuwPJ6CQVf4mYw)ã', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12506 characters truncated) ... "id": "696c9527-a38e-4d21-a33f-26b4ba3a763f", "tool_call_id": "call_0_3530b85d-75ce-4d6a-8d9f-1a8a8017c619", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çå®ç¨ä¿¡æ¯åå»ºè®®ï¼\n\n### 1. **ç­é¨æ¯ç¹æ¨è**\n   - **ä¸æ¹æç å¡**ï¼ä¸æµ·çæ å¿æ§å»ºç­ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªåå¸çç¾æ¯ã\n   - **å¤æ»©**ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­åç°ä»£æ©å¤©å¤§æ¥¼ã\n   - **è±«å­**ï¼ä½éªå¤å¸å­æçå®éä¸ç¾ä¸½ã\n   - ** ... (386 characters truncated) ... **ï¼æä¾è¯¦ç»çä¸æµ·å°å¾åå¤©æ°ä¿¡æ¯ã\n   - **æ³¨æäºé¡¹**ï¼åæ¬è¡æåå¤ãäº¤éæåç­ã\n\nå¦æéè¦æ´è¯¦ç»çä¿¡æ¯æç¹å®æ¯ç¹çä»ç»ï¼å¯ä»¥è¿ä¸æ­¥æ¥è¯¢æè®¿é®[ä¸æµ·å®æ¹ææ¸¸ç½ç«](https://www.youtube.com/channel/UCeDQIvCTHLuwPJ6CQVf4mYw)ã', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 22.255532200000005}
[2025-06-09 19:24:29,044.044] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:24:29,045.045] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:24:29,046.046] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,046.046] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:29,048.048] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 19:24:29,048.048] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (12506 characters truncated) ... "id": "696c9527-a38e-4d21-a33f-26b4ba3a763f", "tool_call_id": "call_0_3530b85d-75ce-4d6a-8d9f-1a8a8017c619", "artifact": null, "status": "success"}}]', 'answer': 'ä»¥ä¸æ¯ä¸äºå³äºä¸æµ·ææ¸¸çå®ç¨ä¿¡æ¯åå»ºè®®ï¼\n\n### 1. **ç­é¨æ¯ç¹æ¨è**\n   - **ä¸æ¹æç å¡**ï¼ä¸æµ·çæ å¿æ§å»ºç­ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªåå¸çç¾æ¯ã\n   - **å¤æ»©**ï¼æ¬£èµé»æµ¦æ±ä¸¤å²¸çåå²å»ºç­åç°ä»£æ©å¤©å¤§æ¥¼ã\n   - **è±«å­**ï¼ä½éªå¤å¸å­æçå®éä¸ç¾ä¸½ã\n   - ** ... (386 characters truncated) ... **ï¼æä¾è¯¦ç»çä¸æµ·å°å¾åå¤©æ°ä¿¡æ¯ã\n   - **æ³¨æäºé¡¹**ï¼åæ¬è¡æåå¤ãäº¤éæåç­ã\n\nå¦æéè¦æ´è¯¦ç»çä¿¡æ¯æç¹å®æ¯ç¹çä»ç»ï¼å¯ä»¥è¿ä¸æ­¥æ¥è¯¢æè®¿é®[ä¸æµ·å®æ¹ææ¸¸ç½ç«](https://www.youtube.com/channel/UCeDQIvCTHLuwPJ6CQVf4mYw)ã', 'latency': 31.360241700000017, 'message_id': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:29,058.058] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:24:29,059.059] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:24:29,060.060] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,060.060] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.1s ago] {'pk_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:29,062.062] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 19:24:29,062.062] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.8s ago] {'conversation_id_1': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:29,064.064] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 19:24:29,064.064] base.py -> _exec_single_context line:1901 [INFO]: [cached since 343.1s ago] {'pk_1': UUID('c0f0a292-3609-4ad7-ae42-bc7657b14d53')}
[2025-06-09 19:24:37,144.144] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 19:24:37,145.145] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.6s ago] {'name': 'ä¸æµ·ææ¸¸ä¿¡æ¯', 'conversation_id': UUID('e20993b4-f48d-4044-93c3-ed2779f693dc')}
[2025-06-09 19:24:37,146.146] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:25:02,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 19:25:02,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 19:25:02,067.067] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:25:02,067.067] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 19:25:02,069.069] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:25:02,071.071] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 19:25:02,377.377] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 19:25:02,378.378] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,379.379] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:02,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:02,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,388.388] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:02,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.4s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:25:02,390.390] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 19:25:02,391.391] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 19:25:02,391.391] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.4s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:25:02,394.394] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 19:25:02,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.1s ago] {'debug_conversation_id': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:25:02,395.395] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 19:25:02,395.395] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.4s ago] {'pk_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95')}
[2025-06-09 19:25:02,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:25:02,399.399] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:25:02,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 19:25:02,401.401] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'conversation_id_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 19:25:02,402.402] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:02,403.403] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 19:25:02,567.567] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,567.567] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,568.568] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:02,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:25:02,572.572] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:25:02,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:25:02,577.577] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00043s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:25:02,579.579] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,579.579] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:25:02,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,582.582] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:25:02,584.584] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,584.584] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 19:25:02,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006251s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:25:02,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004624s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:25:02,586.586] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003276s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 19:25:02,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009017s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:25:02,588.588] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007355s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:25:02,589.589] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,589.589] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005896s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 19:25:02,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01176s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:25:02,591.591] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,591.591] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01023s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:25:02,591.591] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,592.592] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,592.592] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:02,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009277s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 19:25:02,593.593] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0151s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:25:02,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,595.595] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01401s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:25:02,595.595] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.6s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:25:02,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01289s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 19:25:02,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:02,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:02,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01927s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:25:02,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01787s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:25:02,600.600] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,600.600] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:02,600.600] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01706s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 19:25:02,601.601] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 19:25:02,601.601] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02333s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:25:02,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02177s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:25:02,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02096s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 19:25:02,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0271s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:25:02,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02574s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:25:02,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02455s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 19:25:02,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03058s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:25:02,610.610] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02914s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:25:02,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,611.611] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02797s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 19:25:02,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03432s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:25:02,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03359s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:25:02,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0332s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 19:25:02,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,619.619] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03964s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:25:02,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0385s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:25:02,621.621] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,622.622] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03765s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 19:25:02,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,624.624] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04505s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:25:02,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04481s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:25:02,628.628] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,628.628] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04456s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 19:25:02,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,630.630] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05076s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:25:02,631.631] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,631.631] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04944s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:25:02,632.632] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,632.632] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04811s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 19:25:02,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,633.633] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05392s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:25:02,634.634] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,634.634] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05244s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:25:02,635.635] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,635.635] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05097s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 19:25:02,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,636.636] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05672s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:25:02,636.636] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05511s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:25:02,637.637] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,637.637] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05355s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 19:25:02,638.638] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,638.638] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05924s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:25:02,639.639] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,639.639] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05749s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:25:02,640.640] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,640.640] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05649s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 19:25:02,642.642] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,642.642] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06305s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:25:02,644.644] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,644.644] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06196s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:25:02,645.645] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,646.646] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06123s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 19:25:02,647.647] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,647.647] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06764s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:25:02,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0663s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:25:02,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,649.649] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06496s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 19:25:02,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07081s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:25:02,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,651.651] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:02,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0696s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:25:02,652.652] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:02,653.653] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,653.653] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06896s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 19:25:02,654.654] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07476s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:25:02,655.655] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 19:25:02,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 19:25:02,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07451s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:25:02,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 19:25:02,658.658] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:02,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07443s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 19:25:02,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 356.1s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:02,660.660] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:02,661.661] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 19:25:02,661.661] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:25:02,662.662] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.7s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 19:25:02,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 19:25:02,665.665] base.py -> _exec_single_context line:1901 [INFO]: [cached since 389.7s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 19:25:02,667.667] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:02,668.668] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 19:25:02,985.985] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:02] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 19:25:03,128.128] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:03] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-09 19:25:03,267.267] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:03,268.268] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:03,268.268] base.py -> _exec_single_context line:1901 [INFO]: [cached since 390.3s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:03,269.269] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:03,270.270] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:03] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 19:25:06,520.520] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:06] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:25:06,525.525] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:06,525.525] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:06,526.526] base.py -> _exec_single_context line:1901 [INFO]: [cached since 393.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:06,529.529] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:25:06,529.529] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00045s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:25:06,532.532] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:25:06,533.533] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:25:06,534.534] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:06,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 360s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:06,537.537] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:06,537.537] base.py -> _exec_single_context line:1901 [INFO]: [cached since 360s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:06,539.539] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:06,539.539] base.py -> _exec_single_context line:1901 [INFO]: [cached since 360s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:06,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:25:06,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 393.6s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 19:25:06,545.545] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 19:25:06,545.545] base.py -> _exec_single_context line:1901 [INFO]: [cached since 360s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 19:25:06,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 19:25:06,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 393.6s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 19:25:06,550.550] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:06,551.551] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:06] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 19:25:06,853.853] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:06] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 19:25:07,166.166] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:07,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:07,167.167] base.py -> _exec_single_context line:1901 [INFO]: [cached since 394.2s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:07,169.169] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:07,169.169] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:07] "GET /account HTTP/1.1" 200 -
[2025-06-09 19:25:10,545.545] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:10] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 19:25:10,549.549] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:10,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:10,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 397.6s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:10,553.553] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:25:10,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:25:10,556.556] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:25:10,556.556] base.py -> _exec_single_context line:1901 [INFO]: [cached since 342.1s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:25:10,558.558] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:10,558.558] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:10] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 19:25:21,334.334] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:21] "OPTIONS /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 19:25:21,647.647] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 19:25:21,648.648] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 19:25:21,648.648] base.py -> _exec_single_context line:1901 [INFO]: [cached since 408.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 19:25:21,649.649] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID ORDER BY api_key.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 19:25:21,650.650] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 19:25:21,651.651] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_key.id AS id, api_key.account_id AS account_id, api_key.api_key AS api_key, api_key.is_active AS is_active, api_key.remark AS remark, api_key.updated_at AS updated_at, api_key.created_at AS created_at 
FROM api_key 
WHERE api_key.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 19:25:21,652.652] base.py -> _exec_single_context line:1901 [INFO]: [cached since 353.2s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 19:25:21,653.653] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 19:25:21,653.653] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 19:25:21] "GET /openapi/api-keys?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 21:07:09,405.405] base.py -> get_connection line:843 [INFO]: Connection <connection object at 0x0000029DB2C7A9D0; dsn: 'user=postgres password=xxx dbname=llmops host=127.0.0.1 port=5432 client_encoding=utf8', closed: 0> exceeded timeout; recycling
[2025-06-09 21:07:09,540.540] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:07:09,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:07:09,544.544] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6516s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:07:09,552.552] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:07:09,553.553] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6516s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:07:09,564.564] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.account_id = %(account_id_1)s::UUID AND workflow.status = %(status_1)s
[2025-06-09 21:07:09,565.565] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00150s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:07:09,570.570] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID) AND dataset.account_id = %(account_id_1)s::UUID
[2025-06-09 21:07:09,570.570] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00079s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:07:09,574.574] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:07:09,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6483s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:07:09,583.583] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app_config_version SET tools=%(tools)s::JSONB, updated_at=%(updated_at)s WHERE app_config_version.id = %(app_config_version_id)s::UUID
[2025-06-09 21:07:09,583.583] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'updated_at': datetime.datetime(2025, 6, 9, 21, 7, 9, 577018), 'app_config_version_id': UUID('1a40acc4-9c04-42ec-be28-ccfa3e389d73')}
[2025-06-09 21:07:09,585.585] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:07:09,589.589] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:07:09] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:07:12,458.458] base.py -> get_connection line:843 [INFO]: Connection <connection object at 0x0000029E5AF72260; dsn: 'user=postgres password=xxx dbname=llmops host=127.0.0.1 port=5432 client_encoding=utf8', closed: 0> exceeded timeout; recycling
[2025-06-09 21:07:12,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:07:12,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:07:12,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6520s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:07:12,575.575] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:07:12,575.575] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6520s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:07:12,577.577] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:07:12,578.578] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6486s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:07:12,580.580] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 21:07:12,583.583] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6519s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:07:12,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:07:12,586.586] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6519s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:07:12,589.589] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:07:12,590.590] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:07:12] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:09:22,582.582] base.py -> get_connection line:843 [INFO]: Connection <connection object at 0x0000029E5AF726A0; dsn: 'user=postgres password=xxx dbname=llmops host=127.0.0.1 port=5432 client_encoding=utf8', closed: 0> exceeded timeout; recycling
[2025-06-09 21:09:22,696.696] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:09:22,696.696] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:09:22,697.697] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6650s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:09:22,699.699] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:09:22,699.699] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6650s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 21:09:22,701.701] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 112, in update_draft_app_config
    self.app_service.update_draft_app_config(app_id, draft_app_config, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 279, in update_draft_app_config
    app = self.get_app(app_id, account)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 186, in get_app
    raise NotFoundException("è¯¥åºç¨ä¸å­å¨ï¼è¯·æ ¸å®åéè¯")
internal.exception.exception.NotFoundException
[2025-06-09 21:09:22,709.709] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:09:22,710.710] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:09:22] "POST /apps/58668560-0c30-4649-b4ba-7ca27ff3b20f/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:10:02,184.184] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:02] "OPTIONS /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:10:02,499.499] base.py -> get_connection line:843 [INFO]: Connection <connection object at 0x0000029E5AF72AE0; dsn: 'user=postgres password=xxx dbname=llmops host=127.0.0.1 port=5432 client_encoding=utf8', closed: 0> exceeded timeout; recycling
[2025-06-09 21:10:02,613.613] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:02,613.613] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:02,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6690s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:02,620.620] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:10:02,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6676s ago] {'pk_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92')}
[2025-06-09 21:10:02,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:10:02,624.624] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6300s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:10:02,629.629] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 21:10:02,629.629] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6300s ago] {'conversation_id_1': UUID('35187894-5c79-4ea6-b8cc-a4ac1d1f1b92'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:10:02,633.633] base.py -> _exec_single_context line:1896 [INFO]: SELECT message_agent_thought.id AS message_agent_thought_id, message_agent_thought.app_id AS message_agent_thought_app_id, message_agent_thought.conversation_id AS message_agent_thought_conversation_id, message_agent_thought.message_id AS message_agent_thought_message_id, message_agent_thought.invoke_from AS message_agent_thought_invoke_from, message_agent_thought.created_by AS message_agent_thought_created_by, message_agent_thought.position AS message_agent_thought_position, message_agent_thought.event AS message_agent_thought_event, message_agent_thought.thought AS message_agent_thought_thought, message_agent_thought.observation AS message_agent_thought_observation, message_agent_thought.tool AS message_agent_thought_tool, message_agent_thought.tool_input AS message_agent_thought_tool_input, message_agent_thought.message AS message_agent_thought_message, message_agent_thought.message_token_count AS message_agent_thought_message_token_count, message_agent_thought.message_unit_price AS message_agent_thought_message_unit_price, message_agent_thought.message_price_unit AS message_agent_thought_message_price_unit, message_agent_thought.answer AS message_agent_thought_answer, message_agent_thought.answer_token_count AS message_agent_thought_answer_token_count, message_agent_thought.answer_unit_price AS message_agent_thought_answer_unit_price, message_agent_thought.answer_price_unit AS message_agent_thought_answer_price_unit, message_agent_thought.total_token_count AS message_agent_thought_total_token_count, message_agent_thought.total_price AS message_agent_thought_total_price, message_agent_thought.latency AS message_agent_thought_latency, message_agent_thought.updated_at AS message_agent_thought_updated_at, message_agent_thought.created_at AS message_agent_thought_created_at 
FROM message_agent_thought 
WHERE message_agent_thought.message_id = %(message_id_1)s::UUID ORDER BY message_agent_thought.position ASC
[2025-06-09 21:10:02,633.633] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'message_id_1': UUID('c6a55483-3238-401d-91b2-3df09bc276bc')}
[2025-06-09 21:10:02,637.637] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:02,638.638] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:02] "GET /assistant-agent/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:10:03,108.108] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:03] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:10:03,112.112] base.py -> get_connection line:843 [INFO]: Connection <connection object at 0x0000029E5AF72BF0; dsn: 'user=postgres password=xxx dbname=llmops host=127.0.0.1 port=5432 client_encoding=utf8', closed: 0> exceeded timeout; recycling
[2025-06-09 21:10:03,338.338] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:03,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:03,338.338] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6690s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:03,342.342] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:10:03,342.342] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6297s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:10:03,345.345] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:10:03,345.345] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6297s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:10:03,346.346] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:03,346.346] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6657s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:03,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:03,348.348] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6657s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:03,351.351] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:03,351.351] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6657s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:03,353.353] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:10:03,354.354] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6690s ago] {'pk_1': UUID('58668560-0c30-4649-b4ba-7ca27ff3b20f')}
[2025-06-09 21:10:03,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:03,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6657s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:03,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:10:03,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6690s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:10:03,359.359] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:03,360.360] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:03] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:10:06,002.002] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 21:10:06,003.003] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:10:06,004.004] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 21:10:06,004.004] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:10:06,005.005] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:10:06,006.006] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 21:10:06,314.314] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,315.315] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,317.317] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 21:10:06,318.318] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,319.319] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,321.321] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,319.319] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,322.322] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,321.321] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,321.321] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,327.327] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,330.330] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,331.331] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,331.331] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:10:06,332.332] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 21:10:06,332.332] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,333.333] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:10:06,334.334] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:06,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6660s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:06,336.336] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:10:06,335.335] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:10:06,336.336] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:10:06,337.337] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 21:10:06,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:10:06,338.338] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:10:06,339.339] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6660s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:10:06,340.340] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:10:06,341.341] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(id_1)s::UUID AND conversation.invoke_from = %(invoke_from_1)s
[2025-06-09 21:10:06,343.343] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:10:06,343.343] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6693s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:10:06,343.343] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00174s] {'id_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'invoke_from_1': <InvokeFrom.DEBUGGER: 'debugger'>}
[2025-06-09 21:10:06,344.344] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,344.344] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:10:06,346.346] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,347.347] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:10:06,347.347] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 21:10:06,347.347] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:10:06,347.347] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'conversation_id_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:10:06,348.348] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,349.349] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:10:06,350.350] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 21:10:06,350.350] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'conversation_id_1': UUID('a832e24b-2626-4a01-83c5-f24b4dd9fd95'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:10:06,352.352] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,353.353] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,353.353] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:10:06,354.354] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:10:06,356.356] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,357.357] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:10:06,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,358.358] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:10:06,359.359] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,360.360] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:10:06,360.360] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,361.361] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:10:06,361.361] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,362.362] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:10:06,362.362] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:10:06,363.363] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,363.363] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:10:06,364.364] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,364.364] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:10:06,365.365] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,365.365] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:10:06,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,366.366] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:10:06,366.366] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:10:06,367.367] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,367.367] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:10:06,368.368] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,368.368] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:10:06,369.369] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,369.369] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:10:06,370.370] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,370.370] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:10:06,371.371] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,371.371] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:10:06,372.372] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,372.372] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:10:06,373.373] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,374.374] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:10:06,375.375] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,375.375] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:10:06,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,376.376] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:10:06,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,377.377] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:10:06,378.378] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,378.378] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:10:06,379.379] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:10:06,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:10:06,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:10:06,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:10:06,381.381] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:10:06,382.382] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,382.382] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:10:06,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,383.383] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:10:06,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:10:06,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,384.384] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:10:06,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,386.386] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:10:06,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,387.387] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:10:06,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:10:06,388.388] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:10:06,389.389] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,389.389] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:10:06,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:10:06,390.390] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,390.390] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:10:06,392.392] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,392.392] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:10:06,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,393.393] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:10:06,394.394] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,394.394] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:10:06,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:10:06,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,396.396] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:10:06,396.396] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:10:06,397.397] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,397.397] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:10:06,398.398] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,398.398] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:10:06,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,399.399] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:10:06,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,400.400] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:10:06,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:10:06,401.401] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,401.401] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:10:06,402.402] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,402.402] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:10:06,403.403] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,403.403] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:10:06,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,404.404] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:10:06,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,405.405] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:10:06,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,406.406] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:10:06,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,407.407] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:10:06,408.408] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:10:06,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:10:06,410.410] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6304s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:10:06,412.412] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,412.412] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:10:06,671.671] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 21:10:06,675.675] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 21:10:06,984.984] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:10:06,984.984] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:10:06,984.984] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6694s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:10:06,986.986] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:10:06,986.986] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:10:06] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 21:15:45,119.119] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:15:45,119.119] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:15:45,120.120] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:15:45,122.122] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:15:45,122.122] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:15:45,123.123] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:15:45,124.124] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6998s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:15:45,125.125] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 21:15:45,129.129] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:15:45,131.131] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:15:45,131.131] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:15:45,139.139] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id
[2025-06-09 21:15:45,140.140] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00235s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"provider": "openai", "model": "gpt-4o-mini", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'dialog_round': 10, 'preset_prompt': 'ä½ æ¯ä¸ä¸ªAIå©æ', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'workflows': '["04a8777b-604c-4567-8444-07482ae82bf9"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼ææ¯AIå©æ', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 6, 9, 13, 15, 45, 139671), 'created_at': datetime.datetime(2025, 6, 9, 13, 15, 45, 139671)}
[2025-06-09 21:15:45,151.151] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:15:45,156.156] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:15:45,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:15:45,158.158] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:15:45,161.161] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:15:45,161.161] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:15:45,162.162] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 21:15:45,163.163] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'app_config_id': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:15:45,164.164] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:15:45,168.168] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:15:45,170.170] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 21:15:45,171.171] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:15:45,173.173] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:15:45,175.175] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:15:45,176.176] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-06-09 21:15:45,177.177] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00038s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:15:45,182.182] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:15:45,184.184] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:15:45,184.184] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:15:45,184.184] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7032s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:15:45,186.186] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:15:45,187.187] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6999s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:15:45,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:15:45,190.190] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00047s] {'coalesce_2': 0, 'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-09 21:15:45,196.196] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-06-09 21:15:45,197.197] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00100s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"model": "gpt-4o-mini", "provider": "openai", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.7, "presence_penalty": 0.1, "frequency_penalty": 0.1}}', 'dialog_round': 10, 'preset_prompt': 'ä½ æ¯ä¸ä¸ªAIå©æ', 'tools': '[{"type": "builtin_tool", "params": {}, "tool_id": "google_serper", "provider_id": "google"}]', 'workflows': '["04a8777b-604c-4567-8444-07482ae82bf9"]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼ææ¯AIå©æ', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'version': 3, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-09 21:15:45,203.203] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:15:45,204.204] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:15:45] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-09 21:16:02,199.199] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:02] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:16:02,200.200] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:02] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 21:16:02,533.533] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:02,534.534] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:02,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:02,535.535] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:02,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7049s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:16:02,535.535] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7049s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:16:02,537.537] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:16:02,538.538] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:16:02,538.538] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:02] "GET /account HTTP/1.1" 200 -
[2025-06-09 21:16:02,538.538] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6656s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:16:02,540.540] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:16:02,540.540] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6656s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:16:02,541.541] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:02,542.542] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7016s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:02,543.543] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:02,543.543] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7016s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:02,544.544] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:02,547.547] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7016s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:02,548.548] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:16:02,548.548] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7049s ago] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:16:02,549.549] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:02,549.549] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7016s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:02,550.550] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:16:02,550.550] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7049s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:16:02,554.554] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:16:02,554.554] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:02] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:16:05,198.198] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:05] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:16:05,205.205] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:05,206.206] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:05,207.207] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7052s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:16:05,213.213] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:16:05,214.214] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00066s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:16:05,218.218] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:16:05,219.219] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00058s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:16:05,222.222] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,223.223] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 21:16:05,226.226] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,226.226] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003851s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 21:16:05,227.227] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,228.228] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005595s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 21:16:05,229.229] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,230.230] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007389s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 21:16:05,231.231] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,232.232] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.009225s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 21:16:05,233.233] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,234.234] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01167s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 21:16:05,236.236] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,236.236] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01399s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 21:16:05,238.238] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,238.238] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01598s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 21:16:05,240.240] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,240.240] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01805s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 21:16:05,242.242] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,243.243] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0204s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 21:16:05,245.245] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,245.245] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02285s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 21:16:05,246.246] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,247.247] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02444s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 21:16:05,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,248.248] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02588s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 21:16:05,249.249] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,250.250] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02727s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 21:16:05,251.251] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,251.251] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02896s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 21:16:05,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03072s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 21:16:05,255.255] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,255.255] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0329s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 21:16:05,256.256] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,257.257] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03446s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 21:16:05,258.258] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,258.258] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03604s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 21:16:05,259.259] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:16:05,259.259] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03716s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 21:16:05,263.263] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:16:05,263.263] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:05] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:16:06,602.602] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:06,603.603] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:06,603.603] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7054s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:16:06,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:16:06,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6660s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:16:06,606.606] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:16:06,606.606] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6660s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:16:06,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:06,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7020s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:06,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:06,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7020s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:06,611.611] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:06,611.611] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7020s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:06,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:16:06,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7054s ago] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:16:06,614.614] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:16:06,614.614] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7020s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:16:06,615.615] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:16:06,615.615] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7054s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:16:06,617.617] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:16:06,618.618] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:06] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:16:29,113.113] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:29,113.113] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:29,114.114] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7076s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:16:29,115.115] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:16:29,116.116] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7076s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:29,117.117] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 21:16:29,117.117] base.py -> _exec_single_context line:1901 [INFO]: [cached since 6796s ago] {'debug_conversation_id': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:29,118.118] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:16:29,120.120] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:16:29] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/delete-debug-conversation HTTP/1.1" 200 -
[2025-06-09 21:16:33,571.571] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:33,572.572] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_key.id AS api_key_id, api_key.account_id AS api_key_account_id, api_key.api_key AS api_key_api_key, api_key.is_active AS api_key_is_active, api_key.remark AS api_key_remark, api_key.updated_at AS api_key_updated_at, api_key.created_at AS api_key_created_at 
FROM api_key 
WHERE api_key.api_key = %(api_key_1)s
[2025-06-09 21:16:33,572.572] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'api_key_1': 'llmops-v1/alnNVkiLQwjT59qmrzLZWhHvJeXQneGKJpo-T5Pe5LPOfMndm9xS4qzEIQ73cbbw'}
[2025-06-09 21:16:33,576.576] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,577.577] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:16:33,581.581] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,582.582] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': '05519640-8a7f-4606-bb09-cc3ca8948407'}
[2025-06-09 21:16:33,584.584] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO end_user (tenant_id, app_id) VALUES (%(tenant_id)s::UUID, %(app_id)s::UUID) RETURNING end_user.id, end_user.updated_at, end_user.created_at
[2025-06-09 21:16:33,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'tenant_id': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:33,592.592] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:16:33,593.593] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:33,594.594] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,594.594] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:33,596.596] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,596.596] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('db7ac9b5-0fa0-4826-9be8-e200a82973c6')}
[2025-06-09 21:16:33,599.599] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 21:16:33,599.599] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('db7ac9b5-0fa0-4826-9be8-e200a82973c6')}
[2025-06-09 21:16:33,601.601] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:16:33,603.603] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:33,604.604] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,604.604] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:33,605.605] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,605.605] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:16:33,608.608] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_dataset_join.id AS app_dataset_join_id, app_dataset_join.app_id AS app_dataset_join_app_id, app_dataset_join.dataset_id AS app_dataset_join_dataset_id, app_dataset_join.updated_at AS app_dataset_join_updated_at, app_dataset_join.created_at AS app_dataset_join_created_at 
FROM app_dataset_join 
WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 21:16:33,608.608] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:16:33,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 21:16:33,610.610] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:16:33,612.612] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:16:33,613.613] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:16:33,618.618] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:16:33,619.619] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,620.620] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('db7ac9b5-0fa0-4826-9be8-e200a82973c6')}
[2025-06-09 21:16:33,622.622] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message (app_id, conversation_id, invoke_from, created_by, query, status) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(query)s, %(status)s) RETURNING message.id, message.message, message.message_token_count, message.message_unit_price, message.message_price_unit, message.answer, message.answer_token_count, message.answer_unit_price, message.answer_price_unit, message.latency, message.is_deleted, message.error, message.total_token_count, message.total_price, message.updated_at, message.created_at
[2025-06-09 21:16:33,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5'), 'invoke_from': <InvokeFrom.SERVICE_API: 'service_api'>, 'created_by': UUID('db7ac9b5-0fa0-4826-9be8-e200a82973c6'), 'query': 'è¯·å¸®æä½¿ç¨nameä¸ºå¥½å¥½çå·¥ä½æµçæä¸æµ·çææ¸¸ä¿¡æ¯', 'status': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:16:33,631.631] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:16:33,649.649] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:16:33,650.650] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,654.654] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:16:33,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.answer != %(answer_1)s AND message.is_deleted = false AND message.status IN (%(status_1_1)s, %(status_1_2)s, %(status_1_3)s) ORDER BY message.created_at DESC 
 LIMIT %(param_1)s
[2025-06-09 21:16:33,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7080s ago] {'conversation_id_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5'), 'answer_1': '', 'param_1': 10, 'status_1_1': <MessageStatus.NORMAL: 'normal'>, 'status_1_2': <MessageStatus.STOP: 'stop'>, 'status_1_3': <MessageStatus.TIMEOUT: 'timeout'>}
[2025-06-09 21:16:33,664.664] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:16:33,665.665] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7080s ago] {'pk_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:16:33,676.676] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:16:33,680.680] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7081s ago] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:17:02,582.582] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,584.584] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7110s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:17:02,585.585] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,585.585] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT end_user.id AS end_user_id, end_user.tenant_id AS end_user_tenant_id, end_user.app_id AS end_user_app_id, end_user.updated_at AS end_user_updated_at, end_user.created_at AS end_user_created_at 
FROM end_user 
WHERE end_user.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,587.587] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:17:02,587.587] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7110s ago] {'pk_1': UUID('db7ac9b5-0fa0-4826-9be8-e200a82973c6')}
[2025-06-09 21:17:02,587.587] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,588.588] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:02,589.589] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:17:02,590.590] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,590.590] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,590.590] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:17:02] "POST /openapi/chat HTTP/1.1" 200 -
[2025-06-09 21:17:02,592.592] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 21:17:02,593.593] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5'), 'message_id': UUID('41497db6-ef56-4ce7-b409-c64733833943'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 1, 'event': <QueueEvent.AGENT_THOUGHT: 'agent_thought'>, 'thought': '[{"name": "wf_haohaoer", "args": {"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38 \\u4fe1\\u606f"}, "id": "call_24tdbFqcPUdlKxjOMst9xkX2", "type": "tool_call"}]', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (3041 characters truncated) ... ", "additional_kwargs": {}, "response_metadata": {}, "type": "human", "name": null, "id": "7806cd7e-9f88-493a-9896-0eed1c898395", "example": false}}]', 'message_token_count': 561, 'message_unit_price': 0.0011, 'message_price_unit': 0.001, 'answer': '', 'answer_token_count': 275, 'answer_unit_price': 0.0044, 'answer_price_unit': 0.001, 'total_token_count': 836, 'total_price': 0.0018271, 'latency': 11.306716000000051}
[2025-06-09 21:17:02,596.596] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:17:02,597.597] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:17:02,597.597] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,598.598] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7109s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:02,599.599] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,600.600] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,601.601] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 21:17:02,602.602] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5'), 'message_id': UUID('41497db6-ef56-4ce7-b409-c64733833943'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 2, 'event': <QueueEvent.AGENT_ACTION: 'agent_action'>, 'thought': '', 'observation': '{"llm_node_output": "\\u4e2d\\u56fd\\u4e0a\\u6d77\\u5b98\\u65b9\\u65c5\\u6e38\\u7f51\\u7ad9\\u662f\\u4e00\\u672c\\u5b9e\\u7528\\u4e14\\u6743\\u5a01\\ ... (4966 characters truncated) ... 5c5\\u6e38\\u4ea7\\u54c1\\u4f53\\u7cfb\\u3001\\u5177\\u6709\\u56fd\\u9645\\u53cb\\u597d\\u5ea6\\u7684\\u57ce\\u5e02\\u4fbf\\u5229\\u670d\\u52a1 ..."}', 'tool': 'wf_haohaoer', 'tool_input': '{"query": "\\u4e0a\\u6d77 \\u65c5\\u6e38 \\u4fe1\\u606f"}', 'message': '{}', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': '', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 1.4713857999995525}
[2025-06-09 21:17:02,606.606] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:17:02,607.607] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:17:02,607.607] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,607.607] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7109s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:02,609.609] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,609.609] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,611.611] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO message_agent_thought (app_id, conversation_id, message_id, invoke_from, created_by, position, event, thought, observation, tool, tool_input, message, message_token_count, message_unit_price, message_price_unit, answer, answer_token_count, answer_unit_price, answer_price_unit, total_token_count, total_price, latency) VALUES (%(app_id)s::UUID, %(conversation_id)s::UUID, %(message_id)s::UUID, %(invoke_from)s, %(created_by)s::UUID, %(position)s, %(event)s, %(thought)s, %(observation)s, %(tool)s, %(tool_input)s::JSONB, %(message)s::JSONB, %(message_token_count)s, %(message_unit_price)s, %(message_price_unit)s, %(answer)s, %(answer_token_count)s, %(answer_unit_price)s, %(answer_price_unit)s, %(total_token_count)s, %(total_price)s, %(latency)s) RETURNING message_agent_thought.id, message_agent_thought.updated_at, message_agent_thought.created_at
[2025-06-09 21:17:02,612.612] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'conversation_id': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5'), 'message_id': UUID('41497db6-ef56-4ce7-b409-c64733833943'), 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'position': 3, 'event': <QueueEvent.AGENT_MESSAGE: 'agent_message'>, 'thought': 'ä¸æµ·æ¯ä¸­å½çä¸åº§å½éå¤§é½å¸ï¼æ¥æä¸°å¯çææ¸¸èµæºåç¬ç¹çæåé­åãä»¥ä¸æ¯ä¸äºå³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ä¸»è¦æ¯ç¹**ï¼\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ²¿é»æµ¦æ±èå»ºï¼æ¯æ¬£èµåå¸å¤©éçº¿çæä½³ä½ç½®ã\n   - **ä¸æ¹æç å¡**ï¼è±¡å¾æ§ççµè§å¡ï¼æä¾è§åå¹³å°ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªä¸æµ·å¸åº ... (193 characters truncated) ... n4. **äº¤éä¾¿å©**ï¼\n   - ä¸æµ·çå¬å±äº¤ééå¸¸åè¾¾ï¼å°éãå¬äº¤è½¦ç­é½è½æ¹ä¾¿å°å°è¾¾åå¤§æ¯ç¹ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èæ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼å¤©æ°å®äººï¼éåæ·å¤æ´»å¨ã\n\nè¿äºä¿¡æ¯å¯ä»¥å¸®å©æ¨æ´å¥½å°è§åå¨ä¸æµ·çæè¡ãå¦ææ¨ææ´å·ä½çé®é¢æéæ±ï¼è¯·éæ¶åè¯æï¼', 'observation': '', 'tool': '', 'tool_input': '{}', 'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10752 characters truncated) ... wf_haohaoer", "id": "17c9be8b-93b7-43b8-a6bd-317287512696", "tool_call_id": "call_24tdbFqcPUdlKxjOMst9xkX2", "artifact": null, "status": "success"}}]', 'message_token_count': 0, 'message_unit_price': 0, 'message_price_unit': 0, 'answer': 'ä¸æµ·æ¯ä¸­å½çä¸åº§å½éå¤§é½å¸ï¼æ¥æä¸°å¯çææ¸¸èµæºåç¬ç¹çæåé­åãä»¥ä¸æ¯ä¸äºå³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ä¸»è¦æ¯ç¹**ï¼\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ²¿é»æµ¦æ±èå»ºï¼æ¯æ¬£èµåå¸å¤©éçº¿çæä½³ä½ç½®ã\n   - **ä¸æ¹æç å¡**ï¼è±¡å¾æ§ççµè§å¡ï¼æä¾è§åå¹³å°ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªä¸æµ·å¸åº ... (193 characters truncated) ... n4. **äº¤éä¾¿å©**ï¼\n   - ä¸æµ·çå¬å±äº¤ééå¸¸åè¾¾ï¼å°éãå¬äº¤è½¦ç­é½è½æ¹ä¾¿å°å°è¾¾åå¤§æ¯ç¹ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èæ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼å¤©æ°å®äººï¼éåæ·å¤æ´»å¨ã\n\nè¿äºä¿¡æ¯å¯ä»¥å¸®å©æ¨æ´å¥½å°è§åå¨ä¸æµ·çæè¡ãå¦ææ¨ææ´å·ä½çé®é¢æéæ±ï¼è¯·éæ¶åè¯æï¼', 'answer_token_count': 0, 'answer_unit_price': 0, 'answer_price_unit': 0, 'total_token_count': 0, 'total_price': 0, 'latency': 16.045025299999907}
[2025-06-09 21:17:02,616.616] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:17:02,616.616] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:17:02,617.617] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,617.617] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,618.618] base.py -> _exec_single_context line:1896 [INFO]: UPDATE message SET message=%(message)s::JSONB, answer=%(answer)s, latency=%(latency)s WHERE message.id = %(message_id)s::UUID
[2025-06-09 21:17:02,618.618] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'message': '[{"type": "system", "data": {"content": "\\u4f60\\u662f\\u4e00\\u4e2a\\u9ad8\\u5ea6\\u5b9a\\u5236\\u7684\\u667a\\u80fd\\u4f53\\u5e94\\u7528\\uff0c\\u ... (10752 characters truncated) ... wf_haohaoer", "id": "17c9be8b-93b7-43b8-a6bd-317287512696", "tool_call_id": "call_24tdbFqcPUdlKxjOMst9xkX2", "artifact": null, "status": "success"}}]', 'answer': 'ä¸æµ·æ¯ä¸­å½çä¸åº§å½éå¤§é½å¸ï¼æ¥æä¸°å¯çææ¸¸èµæºåç¬ç¹çæåé­åãä»¥ä¸æ¯ä¸äºå³äºä¸æµ·çææ¸¸ä¿¡æ¯ï¼\n\n1. **ä¸»è¦æ¯ç¹**ï¼\n   - **å¤æ»©**ï¼ä¸æµ·çæ å¿æ§æ¯ç¹ï¼æ²¿é»æµ¦æ±èå»ºï¼æ¯æ¬£èµåå¸å¤©éçº¿çæä½³ä½ç½®ã\n   - **ä¸æ¹æç å¡**ï¼è±¡å¾æ§ççµè§å¡ï¼æä¾è§åå¹³å°ï¼å¯ä»¥ä¿¯ç°æ´ä¸ªä¸æµ·å¸åº ... (193 characters truncated) ... n4. **äº¤éä¾¿å©**ï¼\n   - ä¸æµ·çå¬å±äº¤ééå¸¸åè¾¾ï¼å°éãå¬äº¤è½¦ç­é½è½æ¹ä¾¿å°å°è¾¾åå¤§æ¯ç¹ã\n\n5. **æä½³ææ¸¸æ¶é´**ï¼\n   - æ¥ç§å­£èæ¯æ¸¸è§ä¸æµ·çæä½³æ¶æºï¼å¤©æ°å®äººï¼éåæ·å¤æ´»å¨ã\n\nè¿äºä¿¡æ¯å¯ä»¥å¸®å©æ¨æ´å¥½å°è§åå¨ä¸æµ·çæè¡ãå¦ææ¨ææ´å·ä½çé®é¢æéæ±ï¼è¯·éæ¶åè¯æï¼', 'latency': 28.82312709999951, 'message_id': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:02,621.621] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:17:02,622.622] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:17:02,623.623] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,623.623] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7110s ago] {'pk_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:02,624.624] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(message.id) AS count_1 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID
[2025-06-09 21:17:02,625.625] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7096s ago] {'conversation_id_1': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:02,626.626] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.id = %(pk_1)s::UUID
[2025-06-09 21:17:02,626.626] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7097s ago] {'pk_1': UUID('41497db6-ef56-4ce7-b409-c64733833943')}
[2025-06-09 21:17:08,754.754] base.py -> _exec_single_context line:1896 [INFO]: UPDATE conversation SET name=%(name)s WHERE conversation.id = %(conversation_id)s::UUID
[2025-06-09 21:17:08,754.754] base.py -> _exec_single_context line:1901 [INFO]: [cached since 7094s ago] {'name': 'ä¸æµ·ææ¸¸ä¿¡æ¯', 'conversation_id': UUID('da4a7b82-2a46-4138-ae93-4877c7059cd5')}
[2025-06-09 21:17:08,756.756] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:35:13,806.806] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 21:35:13,807.807] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 21:35:13,808.808] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 21:35:38,361.361] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 21:35:38,364.364] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 21:35:38,546.546] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:38] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:38,548.548] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:38] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 21:35:38,550.550] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:38] "OPTIONS /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:38,554.554] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:38] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:39,009.009] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 21:35:39,011.011] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 21:35:39,011.011] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 21:35:39,012.012] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 21:35:39,014.014] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 21:35:39,014.014] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 21:35:39,014.014] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:39,016.016] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,017.017] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:39,020.020] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:39,021.021] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:39] "GET /account HTTP/1.1" 200 -
[2025-06-09 21:35:39,077.077] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:39,078.078] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,078.078] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06173s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:39,084.084] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool_provider.id AS api_tool_provider_id, api_tool_provider.account_id AS api_tool_provider_account_id, api_tool_provider.name AS api_tool_provider_name, api_tool_provider.icon AS api_tool_provider_icon, api_tool_provider.description AS api_tool_provider_description, api_tool_provider.openapi_schema AS api_tool_provider_openapi_schema, api_tool_provider.headers AS api_tool_provider_headers, api_tool_provider.updated_at AS api_tool_provider_updated_at, api_tool_provider.created_at AS api_tool_provider_created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID ORDER BY api_tool_provider.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:39,085.085] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:35:39,090.090] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT api_tool_provider.id AS id, api_tool_provider.account_id AS account_id, api_tool_provider.name AS name, api_tool_provider.icon AS icon, api_tool_provider.description AS description, api_tool_provider.openapi_schema AS openapi_schema, api_tool_provider.headers AS headers, api_tool_provider.updated_at AS updated_at, api_tool_provider.created_at AS created_at 
FROM api_tool_provider 
WHERE api_tool_provider.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:35:39,090.090] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00041s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:35:39,093.093] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,093.093] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00036s] {'provider_id_1': UUID('7e41e2e9-5940-4853-ac4d-fb92bcd7840a')}
[2025-06-09 21:35:39,095.095] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,095.095] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.002684s ago] {'provider_id_1': UUID('ee453518-8819-43b8-9693-fbb0ec025b6b')}
[2025-06-09 21:35:39,096.096] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,097.097] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.003968s ago] {'provider_id_1': UUID('5c706d2f-1e5d-4a1e-a87d-7e284d7d69fd')}
[2025-06-09 21:35:39,097.097] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,098.098] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005002s ago] {'provider_id_1': UUID('bed074e4-c5af-4bd4-88f7-81251eb95a6c')}
[2025-06-09 21:35:39,098.098] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,099.099] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.006124s ago] {'provider_id_1': UUID('1bd06d2b-1d4c-4bf5-8812-f94a0fa8cd0e')}
[2025-06-09 21:35:39,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,100.100] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007105s ago] {'provider_id_1': UUID('e9780583-c578-42e4-84ef-e3c2c1069de9')}
[2025-06-09 21:35:39,100.100] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.007886s ago] {'provider_id_1': UUID('94cef19d-3df1-457e-8f1f-5e6ecec2df39')}
[2025-06-09 21:35:39,101.101] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,101.101] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008673s ago] {'provider_id_1': UUID('a9fd691c-c789-45b4-af05-1df914542bad')}
[2025-06-09 21:35:39,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.00954s ago] {'provider_id_1': UUID('db13bc34-1d40-49e5-92d8-d22c7418cf7d')}
[2025-06-09 21:35:39,102.102] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,102.102] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01029s ago] {'provider_id_1': UUID('bbd73f46-4891-4f18-a8cf-065e1639809f')}
[2025-06-09 21:35:39,103.103] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,103.103] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01115s ago] {'provider_id_1': UUID('8229ae9b-a334-472e-af36-8c1e36b85356')}
[2025-06-09 21:35:39,104.104] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,104.104] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01202s ago] {'provider_id_1': UUID('e1afb674-e985-4f45-9416-04c8457ef621')}
[2025-06-09 21:35:39,105.105] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,105.105] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01299s ago] {'provider_id_1': UUID('eb23d087-cfac-4b07-b348-0ce7e019e481')}
[2025-06-09 21:35:39,106.106] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,106.106] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01391s ago] {'provider_id_1': UUID('4a3b1d5e-7eba-4d5e-a903-08bc4e381ddf')}
[2025-06-09 21:35:39,107.107] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,107.107] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01483s ago] {'provider_id_1': UUID('c7fd1c86-ad90-4011-aa6f-37af7dd7c123')}
[2025-06-09 21:35:39,108.108] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,108.108] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01575s ago] {'provider_id_1': UUID('79f0585f-48e8-4612-ac04-8742e6eb849d')}
[2025-06-09 21:35:39,109.109] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,109.109] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01659s ago] {'provider_id_1': UUID('bce415bd-bdca-4976-b519-35c4c9af2b99')}
[2025-06-09 21:35:39,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,110.110] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01741s ago] {'provider_id_1': UUID('f7190437-4704-4f73-9871-a786624778be')}
[2025-06-09 21:35:39,110.110] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01821s ago] {'provider_id_1': UUID('a93b42f1-9d6d-4d7b-9687-cfa76eee2ff2')}
[2025-06-09 21:35:39,111.111] base.py -> _exec_single_context line:1896 [INFO]: SELECT api_tool.id AS api_tool_id, api_tool.account_id AS api_tool_account_id, api_tool.provider_id AS api_tool_provider_id, api_tool.name AS api_tool_name, api_tool.description AS api_tool_description, api_tool.url AS api_tool_url, api_tool.method AS api_tool_method, api_tool.parameters AS api_tool_parameters, api_tool.updated_at AS api_tool_updated_at, api_tool.created_at AS api_tool_created_at 
FROM api_tool 
WHERE api_tool.provider_id = %(provider_id_1)s::UUID
[2025-06-09 21:35:39,111.111] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01904s ago] {'provider_id_1': UUID('e9b3b8ee-b6fb-4217-8c3e-57b3c0175c3c')}
[2025-06-09 21:35:39,114.114] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:39,114.114] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:39] "GET /api-tools?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:39,156.156] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:39,157.157] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,157.157] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1405s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:39,160.160] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:39,161.161] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00028s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:35:39,164.164] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:35:39,164.164] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:35:39,167.167] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,167.167] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,170.170] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,171.171] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004354s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,172.172] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,173.173] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.005996s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,175.175] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,176.176] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00031s] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:35:39,178.178] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,179.179] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01254s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,180.180] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,180.180] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004785s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:35:39,181.181] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:39,182.182] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:39] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:39,185.185] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:39,185.185] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,185.185] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1693s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:39,187.187] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:39,188.188] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02779s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:35:39,190.190] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:35:39,190.190] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02663s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:35:39,191.191] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,192.192] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0252s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,194.194] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,194.194] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02764s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,195.195] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,196.196] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02939s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,197.197] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,197.197] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0216s ago] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:35:39,199.199] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:39,201.201] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03421s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:39,202.202] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:35:39,202.202] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02642s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:35:39,203.203] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:39,204.204] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:39] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:42,043.043] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /language-models HTTP/1.1" 200 -
[2025-06-09 21:35:42,063.063] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 21:35:42,064.064] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:42,065.065] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:35:42,066.066] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:35:42,067.067] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 21:35:42,358.358] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,358.358] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,359.359] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.343s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:42,363.363] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:42,363.363] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /language-models HTTP/1.1" 200 -
[2025-06-09 21:35:42,374.374] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /builtin-tools/categories HTTP/1.1" 200 -
[2025-06-09 21:35:42,374.374] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,376.376] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,376.376] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,377.377] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,378.378] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,379.379] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.363s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:42,380.380] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.364s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:42,380.380] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,381.381] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.365s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:42,383.383] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,384.384] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID ORDER BY dataset.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:42,386.386] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00258s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:35:42,387.387] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,388.388] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00230s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:35:42,388.388] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.004087s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:35:42,390.390] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO conversation (app_id, name, invoke_from, created_by) VALUES (%(app_id)s::UUID, %(name)s, %(invoke_from)s, %(created_by)s::UUID) RETURNING conversation.id, conversation.summary, conversation.is_pinned, conversation.is_deleted, conversation.updated_at, conversation.created_at
[2025-06-09 21:35:42,391.391] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT dataset.id AS id, dataset.account_id AS account_id, dataset.name AS name, dataset.icon AS icon, dataset.description AS description, dataset.updated_at AS updated_at, dataset.created_at AS created_at 
FROM dataset 
WHERE dataset.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:35:42,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00231s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'name': 'New Conversation', 'invoke_from': <InvokeFrom.DEBUGGER: 'debugger'>, 'created_by': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:35:42,392.392] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00091s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:35:42,393.393] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:42,395.395] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,395.395] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.229s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:42,396.396] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00060s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:35:42,399.399] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 21:35:42,400.400] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,400.400] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00129s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 21:35:42,400.400] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00049s] {'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:35:42,402.402] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET debug_conversation_id=%(debug_conversation_id)s::UUID WHERE app.id = %(app_id)s::UUID
[2025-06-09 21:35:42,404.404] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 21:35:42,406.406] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,406.406] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00339s] {'debug_conversation_id': UUID('28d77b0d-bb9d-4d6c-8302-0de8b1719c84'), 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:35:42,406.406] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00184s] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 21:35:42,406.406] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'coalesce_2': 0, 'dataset_id_1': UUID('e9315438-563c-44e2-99a0-a60e0ba4b76e')}
[2025-06-09 21:35:42,407.407] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,408.408] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 21:35:42,409.409] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:42,409.409] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01437s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:35:42,410.410] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/draft-app-config HTTP/1.1" 200 -
[2025-06-09 21:35:42,410.410] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,411.411] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,411.411] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01141s ago] {'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:35:42,412.412] base.py -> _exec_single_context line:1896 [INFO]: SELECT conversation.id AS conversation_id, conversation.app_id AS conversation_app_id, conversation.name AS conversation_name, conversation.summary AS conversation_summary, conversation.is_pinned AS conversation_is_pinned, conversation.is_deleted AS conversation_is_deleted, conversation.invoke_from AS conversation_invoke_from, conversation.created_by AS conversation_created_by, conversation.updated_at AS conversation_updated_at, conversation.created_at AS conversation_created_at 
FROM conversation 
WHERE conversation.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,413.413] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'pk_1': UUID('28d77b0d-bb9d-4d6c-8302-0de8b1719c84')}
[2025-06-09 21:35:42,414.414] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,414.414] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.008814s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('e9af1e9e-fc18-4521-b222-79303a3a949f')}
[2025-06-09 21:35:42,415.415] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,418.418] base.py -> _exec_single_context line:1896 [INFO]: SELECT message.id AS message_id, message.app_id AS message_app_id, message.conversation_id AS message_conversation_id, message.invoke_from AS message_invoke_from, message.created_by AS message_created_by, message.query AS message_query, message.message AS message_message, message.message_token_count AS message_message_token_count, message.message_unit_price AS message_message_unit_price, message.message_price_unit AS message_message_price_unit, message.answer AS message_answer, message.answer_token_count AS message_answer_token_count, message.answer_unit_price AS message_answer_unit_price, message.answer_price_unit AS message_answer_price_unit, message.latency AS message_latency, message.is_deleted AS message_is_deleted, message.status AS message_status, message.error AS message_error, message.total_token_count AS message_total_token_count, message.total_price AS message_total_price, message.updated_at AS message_updated_at, message.created_at AS message_created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s ORDER BY message.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:42,418.418] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02355s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:35:42,419.419] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00061s] {'conversation_id_1': UUID('28d77b0d-bb9d-4d6c-8302-0de8b1719c84'), 'answer_1': '', 'param_1': 5, 'param_2': 0, 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:35:42,420.420] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,420.420] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0201s ago] {'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:35:42,421.421] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT message.id AS id, message.app_id AS app_id, message.conversation_id AS conversation_id, message.invoke_from AS invoke_from, message.created_by AS created_by, message.query AS query, message.message AS message, message.message_token_count AS message_token_count, message.message_unit_price AS message_unit_price, message.message_price_unit AS message_price_unit, message.answer AS answer, message.answer_token_count AS answer_token_count, message.answer_unit_price AS answer_unit_price, message.answer_price_unit AS answer_price_unit, message.latency AS latency, message.is_deleted AS is_deleted, message.status AS status, message.error AS error, message.total_token_count AS total_token_count, message.total_price AS total_price, message.updated_at AS updated_at, message.created_at AS created_at 
FROM message 
WHERE message.conversation_id = %(conversation_id_1)s::UUID AND message.status IN (%(status_1_1)s, %(status_1_2)s) AND message.answer != %(answer_1)s) AS anon_1
[2025-06-09 21:35:42,423.423] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.01737s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c44c3229-35d5-4db8-b710-0e66089b5194')}
[2025-06-09 21:35:42,424.424] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00070s] {'conversation_id_1': UUID('28d77b0d-bb9d-4d6c-8302-0de8b1719c84'), 'answer_1': '', 'status_1_1': <MessageStatus.STOP: 'stop'>, 'status_1_2': <MessageStatus.NORMAL: 'normal'>}
[2025-06-09 21:35:42,425.425] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,425.425] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:42,426.426] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03095s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:35:42,426.426] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/conversations/messages?current_page=1&page_size=5&created_at=0 HTTP/1.1" 200 -
[2025-06-09 21:35:42,427.427] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,427.427] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02754s ago] {'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:35:42,429.429] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,429.429] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.02315s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c4893bc6-7efb-45e4-8307-baf962a48b05')}
[2025-06-09 21:35:42,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03579s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:35:42,431.431] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,431.431] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03186s ago] {'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:35:42,432.432] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,432.432] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0271s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('4cc5b531-8c8a-47b1-a641-bf75d7b7ac82')}
[2025-06-09 21:35:42,433.433] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,433.433] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03913s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:35:42,435.435] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,435.435] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03536s ago] {'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:35:42,436.436] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,436.436] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03061s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('1ff78486-ddd5-45f0-a024-d63ecbeaa307')}
[2025-06-09 21:35:42,437.437] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,438.438] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04296s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:35:42,439.439] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,439.439] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03954s ago] {'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:35:42,440.440] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,441.441] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03502s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('639052d1-06f1-4e89-a2d8-6eef01fcb5bd')}
[2025-06-09 21:35:42,442.442] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,442.442] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04726s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:35:42,443.443] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,443.443] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04317s ago] {'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:35:42,444.444] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,444.444] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.03835s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('7b5aca75-14ea-434c-8cbb-c3508eb3dc68')}
[2025-06-09 21:35:42,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05028s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:35:42,445.445] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,445.445] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04615s ago] {'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:35:42,446.446] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,446.446] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0412s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f932375a-8700-4d3b-ae2d-958b29fcae48')}
[2025-06-09 21:35:42,447.447] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,447.447] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05297s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:35:42,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,448.448] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04876s ago] {'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:35:42,448.448] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,450.450] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04392s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('c6a2f8f1-e3b3-4555-a691-0fe457b2dded')}
[2025-06-09 21:35:42,451.451] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,451.451] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05609s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:35:42,452.452] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,452.452] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05187s ago] {'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:35:42,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,453.453] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0469s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9af90c52-28b2-4a47-9c92-148c9f21b512')}
[2025-06-09 21:35:42,453.453] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,454.454] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05869s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:35:42,454.454] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05446s ago] {'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:35:42,455.455] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,455.455] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.04942s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('9cf6cccc-1bf7-44db-9044-1d1638e4e142')}
[2025-06-09 21:35:42,456.456] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,456.456] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06133s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:35:42,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,457.457] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05715s ago] {'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:35:42,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,458.458] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05213s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('37a9f300-a2f2-47d1-97ef-67da9b65193d')}
[2025-06-09 21:35:42,458.458] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06399s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:35:42,459.459] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,460.460] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06008s ago] {'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:35:42,460.460] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0553s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('df56c578-0b13-4ac2-9cdb-cfb431dca264')}
[2025-06-09 21:35:42,462.462] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,462.462] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06773s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:35:42,463.463] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,464.464] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.064s ago] {'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:35:42,464.464] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,465.465] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05923s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('17166c83-14ea-4ba3-ac67-1bcb1c5672bb')}
[2025-06-09 21:35:42,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,466.466] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07128s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:35:42,467.467] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06737s ago] {'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:35:42,468.468] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,468.468] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06254s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('49908250-8e6e-4284-a6c6-204599c5b53d')}
[2025-06-09 21:35:42,469.469] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,469.469] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07447s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:35:42,470.470] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,470.470] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07032s ago] {'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:35:42,471.471] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,471.471] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06555s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('8af6e64d-1128-427e-b4bf-8ef556836bfa')}
[2025-06-09 21:35:42,472.472] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,472.472] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07785s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:35:42,473.473] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,473.473] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07427s ago] {'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:35:42,475.475] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,476.476] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.06968s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('f1b9d5e9-bbdb-4b81-92a5-ce04bd27a82b')}
[2025-06-09 21:35:42,476.476] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,477.477] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0817s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:35:42,478.478] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,479.479] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07846s ago] {'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:35:42,479.479] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.0737s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('6bca0bd4-647c-456c-8b9c-00e2b06bd4a9')}
[2025-06-09 21:35:42,480.480] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(document.id) AS count_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,480.480] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08543s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:35:42,481.481] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(app_dataset_join.id) AS count_1 
FROM app_dataset_join 
WHERE app_dataset_join.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,481.481] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.08135s ago] {'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:35:42,482.482] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(sum(document.character_count), %(coalesce_2)s) AS coalesce_1 
FROM document 
WHERE document.dataset_id = %(dataset_id_1)s::UUID
[2025-06-09 21:35:42,482.482] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.07648s ago] {'coalesce_2': 0, 'dataset_id_1': UUID('29d11e42-b1ac-4986-b595-dda47b75302a')}
[2025-06-09 21:35:42,483.483] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:42,484.484] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /datasets?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:35:42,499.499] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:42,500.500] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,500.500] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.484s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:42,503.503] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:35:42,503.503] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.1195s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:35:42,506.506] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:35:42,506.506] base.py -> _exec_single_context line:1901 [INFO]: [cached since 3.34s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:35:42,509.509] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:42,510.510] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407 HTTP/1.1" 200 -
[2025-06-09 21:35:42,718.718] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "OPTIONS /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 21:35:42,979.979] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /builtin-tools/google/icon HTTP/1.1" 200 -
[2025-06-09 21:35:42,981.981] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:42] "GET /language-models/openai/icon HTTP/1.1" 200 -
[2025-06-09 21:35:43,028.028] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:43,028.028] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:43,028.028] base.py -> _exec_single_context line:1901 [INFO]: [cached since 4.013s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:43,029.029] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:43,031.031] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:43] "GET /language-models/openai/gpt-4o-mini HTTP/1.1" 200 -
[2025-06-09 21:35:44,617.617] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:44] "OPTIONS /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish-histories?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 21:35:44,924.924] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:35:44,924.924] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:35:44,925.925] base.py -> _exec_single_context line:1901 [INFO]: [cached since 5.908s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:35:44,926.926] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 21:35:44,926.926] base.py -> _exec_single_context line:1901 [INFO]: [cached since 2.543s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 21:35:44,929.929] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s ORDER BY app_config_version.version DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:35:44,929.929] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00027s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>, 'param_1': 20, 'param_2': 0}
[2025-06-09 21:35:44,930.930] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app_config_version.id AS id, app_config_version.app_id AS app_id, app_config_version.model_config AS model_config, app_config_version.dialog_round AS dialog_round, app_config_version.preset_prompt AS preset_prompt, app_config_version.tools AS tools, app_config_version.workflows AS workflows, app_config_version.datasets AS datasets, app_config_version.retrieval_config AS retrieval_config, app_config_version.long_term_memory AS long_term_memory, app_config_version.opening_statement AS opening_statement, app_config_version.opening_questions AS opening_questions, app_config_version.speech_to_text AS speech_to_text, app_config_version.text_to_speech AS text_to_speech, app_config_version.suggested_after_answer AS suggested_after_answer, app_config_version.review_config AS review_config, app_config_version.version AS version, app_config_version.config_type AS config_type, app_config_version.updated_at AS updated_at, app_config_version.created_at AS created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s) AS anon_1
[2025-06-09 21:35:44,930.930] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00035s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-09 21:35:44,933.933] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:35:44,933.933] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:35:44] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish-histories?current_page=1&page_size=20 HTTP/1.1" 200 -
[2025-06-09 21:38:28,100.100] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:28] "OPTIONS /workflows?current_page=1&page_size=20&search_word=&status=published HTTP/1.1" 200 -
[2025-06-09 21:38:28,415.415] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:38:28,416.416] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:38:28,416.416] base.py -> _exec_single_context line:1901 [INFO]: [cached since 169.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:38:28,419.419] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID AND workflow.status = %(status_1)s ORDER BY workflow.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:38:28,419.419] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00039s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'status_1': 'published', 'param_1': 20, 'param_2': 0}
[2025-06-09 21:38:28,423.423] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT workflow.id AS id, workflow.account_id AS account_id, workflow.name AS name, workflow.tool_call_name AS tool_call_name, workflow.icon AS icon, workflow.description AS description, workflow.graph AS graph, workflow.draft_graph AS draft_graph, workflow.is_debug_passed AS is_debug_passed, workflow.status AS status, workflow.published_at AS published_at, workflow.updated_at AS updated_at, workflow.created_at AS created_at 
FROM workflow 
WHERE workflow.account_id = %(account_id_1)s::UUID AND workflow.status = %(status_1)s) AS anon_1
[2025-06-09 21:38:28,423.423] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00048s] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'status_1': 'published'}
[2025-06-09 21:38:28,425.425] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:38:28,426.426] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:28] "GET /workflows?current_page=1&page_size=20&search_word=&status=published HTTP/1.1" 200 -
[2025-06-09 21:38:34,806.806] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:34] "OPTIONS /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:38:34,810.810] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:38:34,811.811] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:38:34,811.811] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:38:34,813.813] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID ORDER BY app.created_at DESC 
 LIMIT %(param_1)s OFFSET %(param_2)s
[2025-06-09 21:38:34,813.813] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f'), 'param_1': 20, 'param_2': 0}
[2025-06-09 21:38:34,815.815] base.py -> _exec_single_context line:1896 [INFO]: SELECT count(*) AS count_1 
FROM (SELECT app.id AS id, app.account_id AS account_id, app.app_config_id AS app_config_id, app.draft_app_config_id AS draft_app_config_id, app.debug_conversation_id AS debug_conversation_id, app.name AS name, app.icon AS icon, app.description AS description, app.status AS status, app.updated_at AS updated_at, app.created_at AS created_at 
FROM app 
WHERE app.account_id = %(account_id_1)s::UUID) AS anon_1
[2025-06-09 21:38:34,816.816] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'account_id_1': UUID('46db30d1-3199-4e79-a0cd-abf12fa6858f')}
[2025-06-09 21:38:34,818.818] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:38:34,818.818] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'app_id_1': UUID('5d4239a4-3100-4415-86b3-c4946d2bedde'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:38:34,819.819] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:38:34,820.820] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'app_id_1': UUID('1dd689e3-ceaa-4adc-b382-298ac0250798'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:38:34,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:38:34,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'app_id_1': UUID('4e929f64-66bf-4718-9637-fa7f12b4d804'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:38:34,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:38:34,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.6s ago] {'pk_1': UUID('51a3ca0b-012d-49a0-a05f-f36ec7cec729')}
[2025-06-09 21:38:34,827.827] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 21:38:34,827.827] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'app_id_1': UUID('72072ee8-f80b-47b9-9e66-d5805e0bff79'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 21:38:34,829.829] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 21:38:34,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 175.7s ago] {'pk_1': UUID('f6e0a072-f9e7-4b23-837e-281d1084df58')}
[2025-06-09 21:38:34,831.831] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:38:34,831.831] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:34] "GET /apps?current_page=1&page_size=20&search_word= HTTP/1.1" 200 -
[2025-06-09 21:38:35,115.115] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:35] "OPTIONS /account HTTP/1.1" 200 -
[2025-06-09 21:38:35,429.429] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 21:38:35,430.430] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 21:38:35,430.430] base.py -> _exec_single_context line:1901 [INFO]: [cached since 176.4s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 21:38:35,432.432] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 21:38:35,432.432] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 21:38:35] "GET /account HTTP/1.1" 200 -
[2025-06-09 22:27:11,127.127] _internal.py -> _log line:97 [INFO]: [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on http://127.0.0.1:5000
[2025-06-09 22:27:11,127.127] _internal.py -> _log line:97 [INFO]: [33mPress CTRL+C to quit[0m
[2025-06-09 22:27:11,128.128] _internal.py -> _log line:97 [INFO]:  * Restarting with stat
[2025-06-09 22:27:35,064.064] _internal.py -> _log line:97 [WARNING]:  * Debugger is active!
[2025-06-09 22:27:35,078.078] _internal.py -> _log line:97 [INFO]:  * Debugger PIN: 674-688-502
[2025-06-09 22:28:00,955.955] base.py -> _exec_single_context line:1896 [INFO]: select pg_catalog.version()
[2025-06-09 22:28:00,955.955] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 22:28:00,957.957] base.py -> _exec_single_context line:1896 [INFO]: select current_schema()
[2025-06-09 22:28:00,957.957] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 22:28:00,958.958] base.py -> _exec_single_context line:1896 [INFO]: show standard_conforming_strings
[2025-06-09 22:28:00,958.958] base.py -> _exec_single_context line:1901 [INFO]: [raw sql] {}
[2025-06-09 22:28:00,959.959] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:28:00,962.962] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:28:00,962.962] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00071s] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:28:00,968.968] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:28:00,968.968] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00064s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:28:00,972.972] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET token=%(token)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:28:00,973.973] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00057s] {'token': 'T17CAZaqQhFuJEyB', 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:28:00,975.975] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:28:00,977.977] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:28:00,979.979] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:28:00,979.979] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:28:00,982.982] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 22:28:00,982.982] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:28:00] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config HTTP/1.1" 200 -
[2025-06-09 22:28:55,911.911] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:28:55,911.911] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:28:55,912.912] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.95s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:28:55,913.913] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:28:55,914.914] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.95s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:28:55,914.914] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET token=%(token)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:28:55,915.915] base.py -> _exec_single_context line:1901 [INFO]: [cached since 54.94s ago] {'token': 'gDgFFi32W8gBRQjA', 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:28:55,915.915] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:28:55,916.916] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:28:55] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config/regenerate-web-app-token HTTP/1.1" 200 -
[2025-06-09 22:29:18,504.504] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:18,505.505] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:18,505.505] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.54s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:18,507.507] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:18,507.507] base.py -> _exec_single_context line:1901 [INFO]: [cached since 77.54s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:18,509.509] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:29:18,509.509] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00052s] {'app_config_id': None, 'status': <AppStatus.DRAFT: 'draft'>, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:18,510.510] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:18,512.512] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:18,513.513] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 22:29:18,513.513] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:18,516.516] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:18,517.517] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:18] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/cancel-publish HTTP/1.1" 200 -
[2025-06-09 22:29:23,294.294] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:23,294.294] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:23,295.295] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.33s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:23,296.296] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:23,297.297] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.33s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:23,298.298] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET token=%(token)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:29:23,299.299] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.33s ago] {'token': None, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:23,300.300] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:23,301.301] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:23,301.301] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:23,301.301] base.py -> _exec_single_context line:1901 [INFO]: [cached since 82.32s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:23,303.303] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 22:29:23,303.303] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:23] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config HTTP/1.1" 200 -
[2025-06-09 22:29:32,245.245] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:32,248.248] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:32,249.249] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.29s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:32,253.253] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:32,253.253] base.py -> _exec_single_context line:1901 [INFO]: [cached since 91.29s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:32,254.254] http.py -> _register_error_handler line:63 [ERROR]: An error occurred: 
Traceback (most recent call last):
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 870, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask\app.py", line 855, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\Lenovo\Desktop\llmops-api\venv\lib\site-packages\flask_login\utils.py", line 290, in decorated_view
    return current_app.ensure_sync(func)(*args, **kwargs)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\handler\app_handler.py", line 211, in regenerate_web_app_token
    token = self.app_service.regenerate_web_app_token(app_id, current_user)
  File "C:\Users\Lenovo\Desktop\llmops-api\internal\service\app_service.py", line 681, in regenerate_web_app_token
    raise FailException("åºç¨æªåå¸ æ æ³çæWebAppå­è¯æ è¯")
internal.exception.exception.FailException
[2025-06-09 22:29:32,261.261] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 22:29:32,262.262] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:32] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config/regenerate-web-app-token HTTP/1.1" 200 -
[2025-06-09 22:29:50,784.784] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:50,785.785] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:50,785.785] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.8s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:50,787.787] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:50,788.788] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:50,791.791] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 22:29:50,791.791] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00065s] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 22:29:50,796.796] base.py -> _exec_single_context line:1896 [INFO]: SELECT dataset.id AS dataset_id, dataset.account_id AS dataset_account_id, dataset.name AS dataset_name, dataset.icon AS dataset_icon, dataset.description AS dataset_description, dataset.updated_at AS dataset_updated_at, dataset.created_at AS dataset_created_at 
FROM dataset 
WHERE dataset.id IN (%(id_1_1)s::UUID)
[2025-06-09 22:29:50,797.797] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00074s] {'id_1_1': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 22:29:50,801.801] base.py -> _exec_single_context line:1896 [INFO]: SELECT workflow.id AS workflow_id, workflow.account_id AS workflow_account_id, workflow.name AS workflow_name, workflow.tool_call_name AS workflow_tool_call_name, workflow.icon AS workflow_icon, workflow.description AS workflow_description, workflow.graph AS workflow_graph, workflow.draft_graph AS workflow_draft_graph, workflow.is_debug_passed AS workflow_is_debug_passed, workflow.status AS workflow_status, workflow.published_at AS workflow_published_at, workflow.updated_at AS workflow_updated_at, workflow.created_at AS workflow_created_at 
FROM workflow 
WHERE workflow.id IN (%(id_1_1)s::UUID) AND workflow.status = %(status_1)s
[2025-06-09 22:29:50,802.802] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00044s] {'status_1': <WorkflowStatus.PUBLISHED: 'published'>, 'id_1_1': '04a8777b-604c-4567-8444-07482ae82bf9'}
[2025-06-09 22:29:50,807.807] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config (app_id, model_config, dialog_round, preset_prompt, tools, workflows, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, updated_at, created_at) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(updated_at)s, %(created_at)s) RETURNING app_config.id
[2025-06-09 22:29:50,808.808] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00094s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"provider": "openai", "model": "gpt-4o-mini", "parameters": {"temperature": 0.7, "top_p": 0.9, "presence_penalty": 0.1, "frequency_penalty": 0.1, "max_tokens": 4096}}', 'dialog_round': 10, 'preset_prompt': 'ä½ æ¯ä¸ä¸ªAIå©æ', 'tools': '[{"type": "builtin_tool", "provider_id": "google", "tool_id": "google_serper", "params": {}}]', 'workflows': '["04a8777b-604c-4567-8444-07482ae82bf9"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼ææ¯AIå©æ', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'updated_at': datetime.datetime(2025, 6, 9, 14, 29, 50, 807786), 'created_at': datetime.datetime(2025, 6, 9, 14, 29, 50, 807786)}
[2025-06-09 22:29:50,819.819] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:50,820.820] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:50,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config.id AS app_config_id, app_config.app_id AS app_config_app_id, app_config.model_config AS app_config_model_config, app_config.dialog_round AS app_config_dialog_round, app_config.preset_prompt AS app_config_preset_prompt, app_config.tools AS app_config_tools, app_config.workflows AS app_config_workflows, app_config.retrieval_config AS app_config_retrieval_config, app_config.long_term_memory AS app_config_long_term_memory, app_config.opening_statement AS app_config_opening_statement, app_config.opening_questions AS app_config_opening_questions, app_config.speech_to_text AS app_config_speech_to_text, app_config.text_to_speech AS app_config_text_to_speech, app_config.suggested_after_answer AS app_config_suggested_after_answer, app_config.review_config AS app_config_review_config, app_config.updated_at AS app_config_updated_at, app_config.created_at AS app_config_created_at 
FROM app_config 
WHERE app_config.id = %(pk_1)s::UUID
[2025-06-09 22:29:50,822.822] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00037s] {'pk_1': UUID('86fc2894-aac2-4fa4-807f-9f9230e17eaf')}
[2025-06-09 22:29:50,824.824] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:50,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.8s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:50,826.826] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET app_config_id=%(app_config_id)s::UUID, status=%(status)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:29:50,826.826] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.32s ago] {'app_config_id': UUID('86fc2894-aac2-4fa4-807f-9f9230e17eaf'), 'status': <AppStatus.PUBLISHED: 'published'>, 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:50,827.827] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:50,828.828] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:50,829.829] base.py -> _exec_single_context line:1896 [INFO]: DELETE FROM app_dataset_join WHERE app_dataset_join.app_id = %(app_id_1)s::UUID
[2025-06-09 22:29:50,829.829] base.py -> _exec_single_context line:1901 [INFO]: [cached since 32.32s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:50,831.831] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:50,832.832] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:50,833.833] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_dataset_join (app_id, dataset_id) VALUES (%(app_id)s::UUID, %(dataset_id)s::UUID) RETURNING app_dataset_join.id, app_dataset_join.updated_at, app_dataset_join.created_at
[2025-06-09 22:29:50,833.833] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00032s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'dataset_id': '9af90c52-28b2-4a47-9c92-148c9f21b512'}
[2025-06-09 22:29:50,835.835] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:50,836.836] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:50,837.837] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:50,838.838] base.py -> _exec_single_context line:1901 [INFO]: [cached since 109.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:50,841.841] base.py -> _exec_single_context line:1896 [INFO]: SELECT app_config_version.id AS app_config_version_id, app_config_version.app_id AS app_config_version_app_id, app_config_version.model_config AS app_config_version_model_config, app_config_version.dialog_round AS app_config_version_dialog_round, app_config_version.preset_prompt AS app_config_version_preset_prompt, app_config_version.tools AS app_config_version_tools, app_config_version.workflows AS app_config_version_workflows, app_config_version.datasets AS app_config_version_datasets, app_config_version.retrieval_config AS app_config_version_retrieval_config, app_config_version.long_term_memory AS app_config_version_long_term_memory, app_config_version.opening_statement AS app_config_version_opening_statement, app_config_version.opening_questions AS app_config_version_opening_questions, app_config_version.speech_to_text AS app_config_version_speech_to_text, app_config_version.text_to_speech AS app_config_version_text_to_speech, app_config_version.suggested_after_answer AS app_config_version_suggested_after_answer, app_config_version.review_config AS app_config_version_review_config, app_config_version.version AS app_config_version_version, app_config_version.config_type AS app_config_version_config_type, app_config_version.updated_at AS app_config_version_updated_at, app_config_version.created_at AS app_config_version_created_at 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 22:29:50,842.842] base.py -> _exec_single_context line:1901 [INFO]: [cached since 0.05159s ago] {'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.DRAFT: 'draft'>}
[2025-06-09 22:29:50,844.844] base.py -> _exec_single_context line:1896 [INFO]: SELECT coalesce(max(app_config_version.version), %(coalesce_2)s) AS coalesce_1 
FROM app_config_version 
WHERE app_config_version.app_id = %(app_id_1)s::UUID AND app_config_version.config_type = %(config_type_1)s
[2025-06-09 22:29:50,851.851] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00628s] {'coalesce_2': 0, 'app_id_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'config_type_1': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-09 22:29:50,854.854] base.py -> _exec_single_context line:1896 [INFO]: INSERT INTO app_config_version (app_id, model_config, dialog_round, preset_prompt, tools, workflows, datasets, retrieval_config, long_term_memory, opening_statement, opening_questions, speech_to_text, text_to_speech, suggested_after_answer, review_config, version, config_type) VALUES (%(app_id)s::UUID, %(model_config)s::JSONB, %(dialog_round)s, %(preset_prompt)s, %(tools)s::JSONB, %(workflows)s::JSONB, %(datasets)s::JSONB, %(retrieval_config)s::JSONB, %(long_term_memory)s::JSONB, %(opening_statement)s, %(opening_questions)s::JSONB, %(speech_to_text)s::JSONB, %(text_to_speech)s::JSONB, %(suggested_after_answer)s::JSONB, %(review_config)s::JSONB, %(version)s, %(config_type)s) RETURNING app_config_version.id, app_config_version.updated_at, app_config_version.created_at
[2025-06-09 22:29:50,855.855] base.py -> _exec_single_context line:1901 [INFO]: [generated in 0.00069s] {'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407'), 'model_config': '{"model": "gpt-4o-mini", "provider": "openai", "parameters": {"top_p": 0.9, "max_tokens": 4096, "temperature": 0.7, "presence_penalty": 0.1, "frequency_penalty": 0.1}}', 'dialog_round': 10, 'preset_prompt': 'ä½ æ¯ä¸ä¸ªAIå©æ', 'tools': '[{"type": "builtin_tool", "params": {}, "tool_id": "google_serper", "provider_id": "google"}]', 'workflows': '["04a8777b-604c-4567-8444-07482ae82bf9"]', 'datasets': '["9af90c52-28b2-4a47-9c92-148c9f21b512"]', 'retrieval_config': '{"k": 5, "score": 0.7, "retrieval_strategy": "semantic"}', 'long_term_memory': '{"enable": false}', 'opening_statement': 'ä½ å¥½ï¼ææ¯AIå©æ', 'opening_questions': '["\\u6709\\u4ec0\\u4e48\\u53ef\\u4ee5\\u5e2e\\u60a8\\uff1f", "\\u60a8\\u9700\\u8981\\u4ec0\\u4e48\\u5e2e\\u52a9\\uff1f"]', 'speech_to_text': '{"enable": false}', 'text_to_speech': '{"voice": "echo", "enable": false, "auto_play": false}', 'suggested_after_answer': '{"enable": true}', 'review_config': '{"enable": true, "keywords": ["\\u654f\\u611f\\u8bcd1", "\\u654f\\u611f\\u8bcd2"], "inputs_config": {"enable": true, "preset_response": "\\u654f\\u611f\\u8bcd\\u9884\\u8bbe\\u63d0\\u793a\\u56de\\u590d"}, "outputs_config": {"enable": false}}', 'version': 4, 'config_type': <AppConfigType.PUBLISHED: 'published'>}
[2025-06-09 22:29:50,857.857] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:50,858.858] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:50] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/publish HTTP/1.1" 200 -
[2025-06-09 22:29:53,457.457] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:53,457.457] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:53,459.459] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:53,461.461] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:53,461.461] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:53,463.463] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET token=%(token)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:29:53,463.463] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'token': 'oAOKed5qJFJJzt8M', 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:53,464.464] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:53,466.466] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:53,466.466] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:53,467.467] base.py -> _exec_single_context line:1901 [INFO]: [cached since 112.5s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:53,468.468] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 22:29:53,469.469] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:53] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config HTTP/1.1" 200 -
[2025-06-09 22:29:55,655.655] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:55,656.656] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:55,656.656] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.7s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:55,657.657] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:55,658.658] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.7s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:55,659.659] base.py -> _exec_single_context line:1896 [INFO]: UPDATE app SET token=%(token)s WHERE app.id = %(app_id)s::UUID
[2025-06-09 22:29:55,659.659] base.py -> _exec_single_context line:1901 [INFO]: [cached since 114.7s ago] {'token': 'Y1RIVv3NNsrq7dQt', 'app_id': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:55,660.660] base.py -> _commit_impl line:1140 [INFO]: COMMIT
[2025-06-09 22:29:55,662.662] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:55] "POST /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config/regenerate-web-app-token HTTP/1.1" 200 -
[2025-06-09 22:29:57,821.821] base.py -> _begin_impl line:1097 [INFO]: BEGIN (implicit)
[2025-06-09 22:29:57,821.821] base.py -> _exec_single_context line:1896 [INFO]: SELECT account.id AS account_id, account.name AS account_name, account.email AS account_email, account.avatar AS account_avatar, account.password AS account_password, account.password_salt AS account_password_salt, account.assistant_agent_conversation_id AS account_assistant_agent_conversation_id, account.last_login_at AS account_last_login_at, account.last_login_ip AS account_last_login_ip, account.updated_at AS account_updated_at, account.created_at AS account_created_at 
FROM account 
WHERE account.id = %(pk_1)s::UUID
[2025-06-09 22:29:57,822.822] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.9s ago] {'pk_1': '46db30d1-3199-4e79-a0cd-abf12fa6858f'}
[2025-06-09 22:29:57,823.823] base.py -> _exec_single_context line:1896 [INFO]: SELECT app.id AS app_id, app.account_id AS app_account_id, app.app_config_id AS app_app_config_id, app.draft_app_config_id AS app_draft_app_config_id, app.debug_conversation_id AS app_debug_conversation_id, app.name AS app_name, app.icon AS app_icon, app.description AS app_description, app.token AS app_token, app.status AS app_status, app.updated_at AS app_updated_at, app.created_at AS app_created_at 
FROM app 
WHERE app.id = %(pk_1)s::UUID
[2025-06-09 22:29:57,824.824] base.py -> _exec_single_context line:1901 [INFO]: [cached since 116.9s ago] {'pk_1': UUID('05519640-8a7f-4606-bb09-cc3ca8948407')}
[2025-06-09 22:29:57,825.825] base.py -> _rollback_impl line:1123 [INFO]: ROLLBACK
[2025-06-09 22:29:57,826.826] _internal.py -> _log line:97 [INFO]: 127.0.0.1 - - [09/Jun/2025 22:29:57] "GET /apps/05519640-8a7f-4606-bb09-cc3ca8948407/published-config HTTP/1.1" 200 -
